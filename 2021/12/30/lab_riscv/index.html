<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="L1 Problem: (N-bit)two’s complement convert to decimal In two’s complement notation the highest-order bit represents -2^(n-1) instead of +2^(n-1) Notice 1: high-order bit of the N-bit repre has negati">
<meta property="og:type" content="article">
<meta property="og:title" content="lab RISC-V">
<meta property="og:url" content="https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/index.html">
<meta property="og:site_name" content="steins gate zero">
<meta property="og:description" content="L1 Problem: (N-bit)two’s complement convert to decimal In two’s complement notation the highest-order bit represents -2^(n-1) instead of +2^(n-1) Notice 1: high-order bit of the N-bit repre has negati">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/sc.png">
<meta property="article:published_time" content="2021-12-29T16:00:00.000Z">
<meta property="article:modified_time" content="2022-06-27T02:12:51.464Z">
<meta property="article:author" content="Sam Li">
<meta property="article:tag" content="lab">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/sc.png">
    
    
      
        
          <link rel="shortcut icon" href="/sg/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/sg/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/sg/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>lab RISC-V</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/sg/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.0.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/sg/">Home</a></li><!--
     --><!--
       --><li><a href="/sg/about/">About</a></li><!--
     --><!--
       --><li><a href="/sg/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/sg/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/sg/CV/">CV</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="Previous post" href="/sg/2021/12/30/hw2_graph/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="Next post" href="/sg/2021/12/29/6-004-digit/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&text=lab RISC-V"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&title=lab RISC-V"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&is_video=false&description=lab RISC-V"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=lab RISC-V&body=Check out this article: https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&title=lab RISC-V"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&title=lab RISC-V"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&title=lab RISC-V"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&title=lab RISC-V"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&name=lab RISC-V&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&t=lab RISC-V"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">L1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">L2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">Riscv lab</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        lab RISC-V
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Sam Li</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2021-12-29T16:00:00.000Z" itemprop="datePublished">2021-12-30</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/sg/categories/computer-architecture/">computer architecture</a> › <a class="category-link" href="/sg/categories/computer-architecture/6-004-computation-structures/">6.004 computation structures</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/sg/tags/lab/" rel="tag">lab</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2><span id="pl1">L1</span></h2>
<p><u>Problem</u>: (N-bit)two’s complement convert to decimal</p>
<p>In two’s complement notation the highest-order bit represents -2^(n-1) instead of +2^(n-1)</p>
<p>Notice 1: high-order bit of the N-bit repre has negative weight.</p>
<p>Notice 1.1: all numbers with MSB of 1 are negative</p>
<p>Notice 1.2: most negative/positive number, range</p>
<ul>
<li>Unsigned: 2 ** N - 1;</li>
<li>2’s complement: 2 ** (N-1) - 1</li>
</ul>
<img src="/sg/2021/12/30/lab_riscv/sc.png" class title="hex">
<p><u>Problem</u>: addition</p>
<p>reason the correctness of the result by performing the addition(mod N) and compare the sign bit of the result to the sign bit of one of the addends when the sign bits of the addends are the same.</p>
<p>Notice 2: overflow when it is needed to drop extra digits.</p>
<blockquote>
<p>remark: Note that if you are only given a sequence of bits, you don’t actually know what number they<br>
represent.  You also need be told how to interpret those bits: as an unsigned number or as a<br>
signed number stored in two’s complement representation.</p>
</blockquote>
<p>try to prove:</p>
<p>Example: Given an unsigned n-bit binary integer = 𝒃𝒏*𝟏… 𝒃𝟏𝒃𝟎 , prove that 𝒗 is a multiple of 4 if and<br>
only if 𝒃𝟎= 𝟎 and 𝒃𝟏= 𝟎.</p>
<h2><span id="pl2">L2</span></h2>
<blockquote>
<p>Fact: <strong>Logical shift</strong> correspond to (left-shift) multiplication by 2, (right-shift) integer division by 2.</p>
<p><strong>Arithmetic shift</strong> is something related to 2’s-complement representation of signed numbers. In this representation, the sign is the leftmost bit, then arithmetic shift preserves the sign (this is called sign extension).</p>
</blockquote>
<ol>
<li>
<p>Load/store word instructions are related to address</p>
<p>sw x4, 4(x3): if register x3 contains 0x2000 and register x4 contains 0x3, the instruction “<u>sw x4, 4(x3)</u>” will store the value 0x3 into the memory location 0x2004.</p>
<p>lw x2, 8(x1): If register x1 contains 0x1000, then “<u>lw x2, 8(x1)</u> will find the memory address 0x1008 and copy its contents into register x2.</p>
</li>
<li>
<p>computation instructions are related to what is stored in the address/reg</p>
</li>
<li>
<p>Simple computation structure</p>
<p>1)Load a,b,c with LW</p>
<p>2)Perform operation</p>
<p>3)Store result with SW</p>
</li>
<li>
<p>Register -&gt; binary encoding: 5 bit, 32 registers(x0-x31)</p>
</li>
<li>
<p>example of fib logic: mv</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// x1 = n </span><br><span class="line">// x2 = final result </span><br><span class="line">bne x1, x0, start // branch if n!=0 </span><br><span class="line">li x2, 0 </span><br><span class="line">j end             // pseudo instruction for jal x0, end </span><br><span class="line">start: </span><br><span class="line">addi x1, x1, -1   // n = n - 1 </span><br><span class="line">li x3, 0          // x = 0 </span><br><span class="line">li x2, 1                      // y = 1 (you&#x27;re returning y at the end, so use x2 to hold y) </span><br><span class="line">loop: </span><br><span class="line">bge x0, x1, end   // stop loop if 0 &gt;= n </span><br><span class="line">addi x5, x3, x2   // tmp = x + y </span><br><span class="line">mv x3, x2         // x = y (pseudo instruction for addi x3, x2, 0) </span><br><span class="line">mv x2, x5         // y = tmp (pseudo instruction for addi x2, x5, 0) </span><br><span class="line">addi x1, x1, -1   // n = n - 1 </span><br><span class="line">j loop            // pseudo instruction for jal x0, loop </span><br><span class="line">end:</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2><span id="priscv-lab">Riscv lab</span></h2>
<blockquote>
<p>An architecture, or more sp ecically an instruction set architecture, is the interface b etween software and hardware. The instruction set architecture precisely sp ecies the resources of the machine and the way programs can access and use them.</p>
</blockquote>
<ol>
<li>
<p>Convert loop into branches and jumps</p>
<ul>
<li>
<p>Condition at bottom</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">maximum:</span><br><span class="line">	li a2, 0 // load immediate 0 into a2 (largest_so_far)</span><br><span class="line">loop:</span><br><span class="line">	lw a3, 0(a0) // load word at [[address stored in a0] + 0] into a3 (w)</span><br><span class="line">	ble a3, a2, continue // skip next instruction if a3 (w) ≤ a2 (largest_so_far)</span><br><span class="line">	...</span><br><span class="line">continue:</span><br><span class="line">	...</span><br><span class="line">	...</span><br><span class="line">	bnez a1, loop // go to top of lo op if a1 (n) 6= 0</span><br><span class="line">done:</span><br><span class="line">	...</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Condition at top</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">maximum:</span><br><span class="line">	li a2, 0 // load immediate 0 into a2 (largest_so_far)</span><br><span class="line">loop:</span><br><span class="line">	beqz a1, done // go to &lt;done&gt; if a1 (n) = 0</span><br><span class="line">	lw a3, 0(a0) // load word at [[address stored in a0] + 0] into a3 (w)</span><br><span class="line">	ble a3, a2, continue // skip next instruction if a3 (w) ≤ a2 (largest_so_far)</span><br><span class="line">	...</span><br><span class="line">continue:</span><br><span class="line">	...</span><br><span class="line">	...</span><br><span class="line">	j loop // go to top of lo op</span><br><span class="line">done:</span><br><span class="line">	...</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>interacting with main memory: lw, sw</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lw rd, imm(rs) # we can load the word at address (n+imm) in memory into register rd.</span><br><span class="line">sw rs2, imm(rs1) # we can save the content of rs2 into memory at address (content of rs1 + imm)</span><br></pre></td></tr></table></figure></li>
</ol>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/sg/">Home</a></li>
         
          <li><a href="/sg/about/">About</a></li>
         
          <li><a href="/sg/categories/">Category</a></li>
         
          <li><a href="/sg/archives/">Writing</a></li>
         
          <li><a href="/sg/CV/">CV</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">L1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">L2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">Riscv lab</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&text=lab RISC-V"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&title=lab RISC-V"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&is_video=false&description=lab RISC-V"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=lab RISC-V&body=Check out this article: https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&title=lab RISC-V"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&title=lab RISC-V"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&title=lab RISC-V"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&title=lab RISC-V"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&name=lab RISC-V&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://sgzerolc.github.io/sg/2021/12/30/lab_riscv/&t=lab RISC-V"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2023
    Sam Li
  </div>
</footer>


    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/sg/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
