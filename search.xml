<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Across the Mountains</title>
      <link href="/sg/2025/08/30/travel_oberstdorf_summer/"/>
      <url>/sg/2025/08/30/travel_oberstdorf_summer/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#overview">Overview</a><ul><li><a href="#fellhorn">Fellhorn</a></li><li><a href="#nebelhorn">Nebelhorn</a></li></ul></li><li><a href="#hiking-routes">Hiking Routes</a><ul><li><a href="#ridge-hike-on-fellhorn">Ridge Hike on Fellhorn</a></li><li><a href="#ridge-hike-on-nebelhorn">Ridge Hike on Nebelhorn</a></li><li><a href="#loop-via-the-wallrafweg">Loop via the Wallrafweg</a></li></ul></li></ul><!-- tocstop --></div><p>At the end of this summer, I went to Oberstdorf, a town on the border between Germany and Austria, for hiking and relaxation.</p><h2><span id="overview">Overview</span><a href="#overview" class="header-anchor">Â¶</a></h2><p>Preparations before taking a hike:</p><ol><li>Sun protection: sunscream and a hat or anything else that can protect your head. Otherwise you would end up with a sunburned scalp as I did :(</li><li>Clothes: quick-drying clothes. It will keep you more comfortable when youâ€™re sweating a lot while walking along the ridges under the sun.</li><li>Water: Youâ€™ll need at least 3 liters of water for a four to five hour hike.</li><li>Food: Bring some snacks for the trip as restaurants are usually far away.</li><li>Map: an offline map of the hiking ares. Itâ€™s dangerous to get off track in the mountains where youâ€™re unlikely to get any signal.</li><li>Route planning<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> and other information for a hike: Never hurt to have a plan in mind even if reality turns out differently. Donâ€™t forget to check the weather, bus schedules (If you donâ€™t have a car), restaurants, bathrooms and cable car operations. Check the cable cars opening hours<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup> unless you plan to hike down on foot. You can get very nice interactive hiking maps of the mountains surrounding Oberstdorf by a simple click<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>.</li><li>Cash: If you are also relying on public transport, be sure to carry some cash in case the buses donâ€™t accept cards.</li></ol><h3><span id="fellhorn">Fellhorn</span><a href="#fellhorn" class="header-anchor">Â¶</a></h3><img src="/sg/2025/08/30/travel_oberstdorf_summer/fellhorn.png" class title="fellhorn"><p>The ridge hike on Fellhorn followed the route I had mapped out in advance. This route was sourced from Fellhorn summit panoramic ridge hike<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>, accompanied with transport information I looked up for buses, cable cars and trains.</p><img src="/sg/2025/08/30/travel_oberstdorf_summer/fellhorn_route.jpeg" class title="fellhorn_route"><h3><span id="nebelhorn">Nebelhorn</span><a href="#nebelhorn" class="header-anchor">Â¶</a></h3><img src="/sg/2025/08/30/travel_oberstdorf_summer/nebelhorn.png" class title="nebelhorn"><p>The routes on Nebelhorn are well-marked. You can buy a round-trip cable car ticket at the valley station, which takes you up to the mountain station (the second of three stations on the mountain). From the mountain station, you can climb up to the summit or hike down to Seealpsee, a lake nestled below.</p><h2><span id="hiking-routes">Hiking Routes</span><a href="#hiking-routes" class="header-anchor">Â¶</a></h2><h3><span id="ridge-hike-on-fellhorn">Ridge Hike on Fellhorn</span><a href="#ridge-hike-on-fellhorn" class="header-anchor">Â¶</a></h3><img src="/sg/2025/08/30/travel_oberstdorf_summer/fellhorn_real_route.png" class title="fellhorn_real_route"><h3><span id="ridge-hike-on-nebelhorn">Ridge Hike on Nebelhorn</span><a href="#ridge-hike-on-nebelhorn" class="header-anchor">Â¶</a></h3><img src="/sg/2025/08/30/travel_oberstdorf_summer/nebelhorn_route.png" class title="nebelhorn_route"><h3><span id="loop-via-the-wallrafweg">Loop via the Wallrafweg</span><a href="#loop-via-the-wallrafweg" class="header-anchor">Â¶</a></h3><img src="/sg/2025/08/30/travel_oberstdorf_summer/wallrafweg_route.png" class title="wallrafweg_route"><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://www.oberstdorf.de/en/summer/hiking/">Official page of hiking at Oberstdorf</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://www.ok-bergbahnen.com/oeffnungszeiten/">Cable car opening hours</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p><a href="https://www.ok-bergbahnen.com/wandergebiete/wanderpanoramen/">Hiking panorama</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://www.mountainmoments.com/fellhorn-summit-panoramic-ridge-hike-near-oberstdorf-hiking-map/">Fellhorn summit panoramic ridge hike near oberstdorf hiking map</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>The Role of Consensus in Replicated Storage Systems</title>
      <link href="/sg/2025/08/06/ds_replicated_stg/"/>
      <url>/sg/2025/08/06/ds_replicated_stg/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#apache-kafka-kraft">Apache Kafka: KRaft</a></li><li><a href="#ceph-monitors-paxos">Ceph Monitors: Paxos</a></li><li><a href="#ebs-physalia-paxos">EBS Physalia: Paxos</a></li><li><a href="#drbd-split-brain-solution">DRBD Split-brain Solution</a></li></ul><!-- tocstop --></div><p>Paxos is to agree on one decision. Multi-Paxos as Raft is to agree on a sequence of decisions which could be a replicated log.</p><h3><span id="apache-kafka-kraft">Apache Kafka: KRaft</span><a href="#apache-kafka-kraft" class="header-anchor">Â¶</a></h3><p>Terminology: Kafkaâ€™s topic is like a replicated log for a storage node.</p><p>Kafka is a distributed system composed of clients and servers which communicate through TCP, providing services for event streaming. It is deployed in various environments including hardwares, VMs, containers in on-premise and cloud.</p><p>Kafka replicates the log for each topicâ€™s partition across a certain number of servers. It adopts Raft-like protocol to maintain the identical logs between a leader and followers. However, instead of using majority vote, a Kafka node maintains a set of in-sync (active, live) replicas (ISR, like a session list) to elect a leader. The drawback of majority vote is that it takes a few failures to leave a quorum system with no electable leaders. Enough redundancy to tolerate single point failure will sacrifice the throughput a lot for large data. A write to a topicâ€™s partition is committed until all sessions in the ISR have received the write. Thus any replica that is in-sync is eligible to be leader. This ISR and f+1 replicas can make a Kafkaâ€™s topic tolerate f failures without losing committed messages.</p><p>There is another design principle of Kafka that does not require crashed nodes to recover with all data intact. A replica must fully re-sync to rejoin the ISR regardless of lost unflushed data in its crash.</p><p>Kafka guarantees the data consistency which is based on at least one in-sync replica. There are two expected behaviors for a system where all the replicas die:</p><ol><li>Wait for a replica in the ISR to be alive and choose it as the leader</li><li>Choose the first replica (in or outside the ISR) to be alive as the leader</li></ol><p>(Availability and Consistency) Kafka uses the first approach as default. The trade-off is between availability and consistency. If the data on the previous in-sync replica was lost, then the system is down for the first approach. Unless we violate the consistency guarantee, and take the first come-back-to-life replica as the leader and make the system available again.</p><p>(Availability and Durability) Kafka provides two configurations for the number of acknowledgements (acks) by replicas.</p><ol><li>The topicâ€™s partition remains unavailable when all replicas die.</li><li>The partition will only accept writes if the size of the ISR is above a certain min.</li></ol><p>A Kafka cluster manages hundreds of the partitions mentioned above. A special controller within each cluster manages the status of all the nodes. If a node dies, the controller will elect a new leader from the remaining nodes of ISR. If the controller fails, another controller will be elected.</p><h3><span id="ceph-monitors-paxos">Ceph Monitors: Paxos</span><a href="#ceph-monitors-paxos" class="header-anchor">Â¶</a></h3><p>Ceph is a software defined storage designed to store multiple PB data with high performance without any single point of failure. Itâ€™s deployed on commodity hardware or cloud. Reliable Autonomic Distributed Object Store (RADOS) is an object store composed of storage nodes that distributes data reliably and consistently. Object Storage Daemon (ODS) is a service running on the storage node which writes the data to hard drives.</p><p>Data replication is performed on ODS. A Ceph client writes to the primary ODS which is found by CRUSH and the cluster map. Then the primary ODS writes the data to the secondary ODSes through the same method. Each ODS writes data to its hard drive.</p><p>A Ceph storage cluster maintains monitors which update the topology of the whole cluster through the CRUSH algorithm. Ceph monitors use Paxos and majority vote to achieve strong consistency of the cluster map. They maintain a master copy of the cluster map including the changes to their operating states, the state of the cluster and cluster members etc. A single monitor in a cluster cannot survive single-point failure. There should be at least three monitors to tolerate single-point failure.</p><h3><span id="ebs-physalia-paxos">EBS Physalia: Paxos</span><a href="#ebs-physalia-paxos" class="header-anchor">Â¶</a></h3><p>Physalia is a sharded key-value store serving a configuration box for EBS. Elastic Block Storage (EBS) uses chain replication for the primary-backup architecture. A Physalia installation is made up of many cells which are spread over a mesh of nodes. Each node can participate in many cells. One cell manages one partition key of a volume on an EC2 instance (client). Every operation to a volume is associated with the volumeâ€™s partition key.</p><p>The client-centric availability reduces the blast radius compared to global availability to all clients. That is designed for keeping strong consistency with the scalability of EBS. Two different volumes, even if they happen to sit on the same storage servers, still have different partition keys and different cells.</p><h3><span id="drbd-split-brain-solution">DRBD Split-brain Solution</span><a href="#drbd-split-brain-solution" class="header-anchor">Â¶</a></h3><p>Terminology:</p><ol><li>Replicated data set: According to that a volume contains the replicated data set and and a set of metadata, the replicated data set denotes data, not metadata or states.</li></ol><p>A split-brain issue for DRBD, for example, is that the secondary node is disconnected with the primary node and sees itself as the â€œprimaryâ€. This scenario can result in inconsistent data between those two nodes as they both start to service data.</p><p>DRBD tries to solve network partitions through preventions (dependency on external cluster resource management tool like Pacemaker), pre-configured auto-recovery (dangerous to lose an amount of data), manual intervention when the issue is detected (but how to solve divergent data case even if you get the admin access), and the quorum method. We will look into the quorum method.</p><p>DRBD quorum is a three-node quorum composed of the original two nodes (primary and secondary) and a third server which could be diskless. The main idea of the quorum method is to apply the majority rule on a quorum with a third node for replicated data. The data can be written onto a node only if that node connects to the majority of the existing nodes (including itself) in the cluster. The third node serves as a tie-breaker. However, the third (disk-less) server for a two-node cluster can be the bottleneck of this system. An exception is when a primary nodeâ€™s secondary nodes leave gracefully, meaning the data on those nodes is out-of-date, the primary node can still write data.</p><p>I argue the downside of DRBD quorum can be attributed to two sources:</p><ol><li>Cluster membership change for DRBD either depends on external membership management tool Pacemaker or the internal auto-promote configuration (v9.1+). Both take a few seconds to promote a new Primary node which could happen frequently in a quorum system.</li><li>Having a disk or not becomes a factor for the majority rule of DRBD. When the third node C is connected to the primary node A only first and then disconnected with A and connected to B. B cannot be promoted to the new primary node because B cannot check if C is up-to-date.</li></ol><p>The majority number of nodes is different from the majority votes applied by consensus algorithms as Raft. It doesnâ€™t achieve a real majority of writes on the nodes for a three-node cluster with a diskless node. Even if can, there are still error cases to consider:</p><ol><li>Stale majority: Network partition: {Node1} vs {Node2, Node3}, Node2 has stale data.</li><li>N/w partitions: A node leaves a partition to another one, causing the majority changes. During the actual promotion/demotion process, two primaries may exist.</li><li>Quorum loss and recovery.</li></ol><p>In conclusion, if RMR requires strong consistency for pool metadata, the number of nodes in an RMR pool group should be greater than three and use consensus algorithms like Raft or Paxos. However, it may be challenging to implement and test.</p><p>Reference:</p><ol><li><a href="https://linbit.com/drbd-user-guide/drbd-guide-9_0-en/#s-split-brain-notification-and-recovery">https://linbit.com/drbd-user-guide/drbd-guide-9_0-en/#s-split-brain-notification-and-recovery</a></li><li><a href="https://linbit.com/drbd-user-guide/drbd-guide-9_0-en/#s-configuring-quorum-tiebreaker">https://linbit.com/drbd-user-guide/drbd-guide-9_0-en/#s-configuring-quorum-tiebreaker</a></li><li><a href="https://kafka.apache.org/documentation/#replication">Apache Kafka documentation</a></li><li><a href="https://louwrentius.com/understanding-ceph-open-source-scalable-storage.html">Understanding Ceph: open-source scalable storage</a></li><li><a href="https://www.slideshare.net/slideshow/ceph-as-software-define-storage/75789863">Ceph as software define storage | PDF | Operating Systems</a></li><li><a href="https://docs.ceph.com/en/reef/architecture/#cluster-map">Architecture â€” Ceph Documentation</a></li><li><a href="https://www.usenix.org/conference/nsdi20/presentation/brooker">Millions of Tiny Databases | USENIX</a></li><li><a href="https://www.amazon.science/blog/amazon-ebs-addresses-the-challenge-of-the-cap-theorem-at-scale">Amazon EBS addresses the challenge of the CAP Theorem at scale</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.824 distributed systems </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Demystifying English Pronounciation</title>
      <link href="/sg/2025/06/19/eng_act/"/>
      <url>/sg/2025/06/19/eng_act/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#intonation">Intonation</a></li><li><a href="#reduced-sound">Reduced sound</a></li><li><a href="#word-connections">Word connections</a></li><li><a href="#th">Th-</a></li></ul><!-- tocstop --></div><p>Iâ€™d like to talk about my recent enlightenment regarding the English accent. One mystery I used to have was how American English (AE) differs from British English (BE). AE sounds smoother and more natural, while BE seems a bit rigid and serious. My own English speaking also carries an accent. I tend to articulate every syllable and try to say the whole sentence in one go, if possible. That actually makes it harder for native speakers to understand me. Books related to pronunciation helped me understand why.</p><p>If youâ€™re encountering the same issues, these short notes may be worth reading.</p><p>Elements of Pronunciation introduces five common patterns: weak forms, consonant clusters, linking, contractions, and stress-timing. While the book sheds light on various pronunciation changes, I found that it mostly lists the rules without explaining why these patterns exist. Without understanding the reasons behind them, and with the rules being somewhat vague, I found it difficult to move forward.</p><p>By contrast, American Accent Training by Ann Cook explores the causes and offers specific exercises for every phonetic point.</p><p>In a nutshell, AE intonation is like an orchestra. Each syllable is a musical note. Some words are stressed and thus have a higher pitch. Pitch moves like walking down a staircase. Some syllables are reduced, and vowels often turn into schwa sounds. Intonation, word connections, and the TH sound are the areas Iâ€™m focusing on mostâ€”and Iâ€™ve listed my notes on these topics below.</p><h3><span id="intonation">Intonation</span><a href="#intonation" class="header-anchor">Â¶</a></h3><p>Vowels take two staircases to stress.</p><ul><li>A short vowel + unvoiced consonants</li><li>A long vowel + voiced consonants</li></ul><p>Three ways to stress a word: volume, lengthen the word, and pitch changes.</p><p>Staircase intonation: when and where to stree</p><ul><li>introduce a new noun</li><li>replace pronouns, stress verbs</li><li>statement, question, emotional/retorical statements</li></ul><p>Reasons to stress:</p><ul><li>new information</li><li>opionion</li><li>contrast</li><li>canâ€™t, no need to stress other negative forms like shouldnâ€™t, couldnâ€™t.</li></ul><p>New sentences donâ€™t have to start new staircases; they can continue from the previous sentence until you come to a stressed word</p><p><u>Spelling and numbers:</u></p><p>There is a distinct stress and rhythm pattern to both spelling and numbersâ€”usually in groups of three or four letters or numbers, with the stress falling on the last member of the group.</p><p>Acronyms and initials are usually stressed on the last letter.</p><p><u>Squeezed-out syllables:</u></p><p>Intonation can also completely get rid of certain entire syllables. Some longer words that are stressed on the first syllable squeeze weak syllables right out.</p><p><u>Syllable stress:</u></p><p>One <strong>syllable</strong> = one musical note. Words that end in a vowel or a voiced consonant will be longer than ones ending in an unvoiced consonant</p><p><u>Complex intonation</u>: word count intonation patterns: adj., n., adv.</p><ol><li>compound noun stress patterns: In noun pharases, each individual <strong>word</strong> was represented by a single musical note.</li><li>Descriptive phrases (adj. + n., adj. + adv.): the stress always fall on the noun. Nouns are new information. In the absence of a noun, stress the adjective.<ul><li>Itâ€™s <strong>short</strong>.</li><li>Itâ€™s a short <strong>story</strong>.</li><li>Itâ€™s really <strong>short</strong>.</li></ul></li><li>Set pharases: word images; indicators of a determined use.<ul><li>two-word descriptive pharases -&gt; set pharases, emphasis shifts from the second word to the first.</li><li><strong>pain</strong>killer, a <strong>love</strong> letter, <strong>passers</strong>by</li></ul></li><li>Nationalities: depends on the importance of a word<ul><li>an <strong>American</strong> guy: guy can be left out without changing the meaning.</li><li>an American <strong>restaurant</strong>, descriptive pharases</li><li><strong>American</strong> food: food is a weak word</li><li>an American <strong>teacher</strong>, descriptive pharases</li><li>an <strong>English</strong> teacher, subject, set pharases</li></ul></li></ol><p>Grammar:</p><p>The verb tenses are thrown down in the valleys. Articles and verb tense changes are usually not stressed.</p><p>The th of them is frequently dropped (as is the h in the other object pronouns, him, her)</p><p>Supporting words:  (CD 2, 8,10-11)</p><p>Can or Canâ€™t:</p><ul><li>Can, /k 'n/, stress the <strong>verb</strong> -&gt; positive</li><li>Canâ€™t, /kÃ¦n (t)/, make it short and stress <strong>canâ€™t</strong> + <strong>verb</strong> -&gt; negative</li><li><strong>can</strong> do -&gt; extra positive</li><li><strong>canâ€™t</strong> do -&gt; extra negative</li></ul><p>Build an intonation sentence</p><p>The miracle technique:</p><p>Learn to hear again. A child can hear every sound of every langue while adults stop listening for the sounds that they never hear.</p><p>Word groups and phrasing</p><img src="/sg/2025/06/19/eng_act/Screenshot-0338634.png" class title="Screenshot-0338634"><p>Breath groups and idea groups.</p><h3><span id="reduced-sound">Reduced sound</span><a href="#reduced-sound" class="header-anchor">Â¶</a></h3><p>The position of a syllable is more important than spelling in pronunciation.</p><p>ph<strong>o</strong>tograph, phot<strong>o</strong>graphy</p><p>Syllables on a peak or a staircase (intonation) are strong sounds.</p><p>Syllables that fall in the valleys or on a lower stairstep are weak sounds, thus reduced.</p><p>Reduced sounds are valleys.</p><p>Reduce a vowel by tonning done or changing to a schwa.</p><p>Fix overpronouncing: You skim over words; you dash through certain sounds.</p><p>Articles are very reduced sounds.</p><ul><li>the, a: schwa sounds. For example, <code>a nugly hat</code>, an orange -&gt;<code>a nornj</code>, <code>thee(y) easy way</code></li></ul><p>In the beginning, you should make extra-high peaks and long, deep valleys. When you are not sure, reduce.</p><p>Reduced sounds: when a sound is reduced, the following sound is usually stressed. (Ex. 1-52, CD 2, Track 26)</p><ul><li>To<ul><li>preposition: reduced to  /t/ or /tÉ™/.<ul><li>To school; to the store; He went to work; To be or not to be.</li></ul></li><li>to + (consonant) + vowels: becomes /d/ or /dÉ™/.<ul><li>He told me to <strong>help</strong>. She told you to <strong>get</strong> it. At a quarter to <strong>two</strong>.</li></ul></li></ul></li><li>At<ul><li>small grunt + reduced /'t/ or /É™t/.<ul><li>Weâ€™re at home. Iâ€™ll see you at lunch.</li></ul></li><li>at + vowels: becomes /'d/ or /É™d/<ul><li>Dinnerâ€™s at five.</li></ul></li></ul></li><li>It<ul><li>It and at sound the same in context /'t/</li><li>Turn to /'d/ or /É™d/ between vowels or voiced consonants</li></ul></li><li>For: reduced to /fr/. Unless it is at the end of a sentence /for/</li><li>From: /frm/. At the end: /frÉ™m/</li><li>In: reduced to /'n/</li><li>An: reduced to /É™â€™n/</li><li>And: reduced to /n/ or /É™â€™n/</li><li>Or: /'r/</li><li>Are: /'r/</li><li>Your: /yâ€™r/</li><li>One: /wâ€™n/</li><li>The: /th/ or /É™/</li><li>A: /É™/</li><li>Of: /'v/ or /É™/<ul><li><img src="/sg/2025/06/19/eng_act/Screenshot-0334994.png" class title="Screenshot-0334994"></li></ul></li><li>Can: /kâ€™n/</li><li>Had: /'d/<ul><li>If there are two hads, reduce the first one.<ul><li>Jack had had enough. [jÃ¦kâ€™d hÃ¦dâ€™ nâ€™f]</li><li>Had you ever had one?</li></ul></li></ul></li><li>Would: /wud/</li><li>Was: /wâ€™z/</li><li>What: /wâ€™t/, /wâ€™/, /wâ€™d/</li><li>Some: /sâ€™m/, /sÉ™m/</li><li>That<ul><li>the relative pronoun and conjunction are reducible to /the 'd/ or /thâ€™t/</li><li>demonstrative pronoun cannot be reduced: /Ã¦/. That book.</li></ul></li><li>Her, his: /h/ is reduced -&gt; /er/, /is/</li></ul><p>Plurals:</p><ul><li>/s/, ends in a voiceless consonant: cups</li><li>/z/, ends in a voiced sound or a vowel sound: keys</li><li>/iz/, ends in s, z, sh, ch, x or ge: buses, watches</li><li>/Î¸s/, ends in /Î¸/: baths, paths</li><li>Ã°z, ends in th whose sounds changes from /Î¸/ to /Ã°/ in the plural: mounth, truth</li></ul><h3><span id="word-connections">Word connections</span><a href="#word-connections" class="header-anchor">Â¶</a></h3><p>liaisons</p><p>semivowels: W, Y, R</p><p>Vowels donâ€™t touch any point in the mounth but consonants do.</p><p>Words are connected in four main situations:</p><ol><li><p>Consonant  / Vowel:</p><ul><li>when the consonant is /n/, /m/, /l/, /w/ it will be pronounced in liaisions.<ul><li>fall off: /fÃ¤ lÃ¤ff/</li></ul></li><li>Also used in spelling and number connections.</li></ul></li><li><p>Consonant / Consonant: the next C is in a similar position in the month to the first C. If the first C is /t/, it can be omited usually.</p><p>Three general locations of sounds are the lips, behind the teeth, or in the throat. The similar position denotes to the two Câ€™s are in the same location. Such words can be linked togother.</p><img src="/sg/2025/06/19/eng_act/Screenshot-0340914.png" class title="Screenshot-0340914"><p>The TH sound is floater between areas. Combinations of various letters forms a new <strong>composite</strong> sound. (2-9, CD 2, 42)</p><img src="/sg/2025/06/19/eng_act/Screenshot-0341480.png" class title="Screenshot-0341480"></li><li><p>Vowel / Vowel: two Vs are connected with a glide in between which is either a slight /y/ or /w/ sound.</p><ul><li>Go away. /w/</li><li>I also xxx. /y/. Donâ€™t force this sound too much.</li></ul></li><li><p>T, D, S, or Z + Y</p></li></ol><h3><span id="th">Th-</span><a href="#th" class="header-anchor">Â¶</a></h3><p>Pronounciation:</p><ul><li>Think of a snakeâ€™s tongue: a quick and sharp little movement</li><li>Keep your tongueâ€™s tip very tense: darts out (0.5 cm) and snaps back very quickly</li><li>Remind tougueâ€™s position is placed between the teeth or even pressed behind the teeth.</li></ul><hr><p>Readings: American Accent Training</p><p>Chap 1: Intonation<br>Chap 2: Word connection<br>chap 7: Th-sound</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
          <category> English </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>A System View of Networks</title>
      <link href="/sg/2025/06/13/nw_link/"/>
      <url>/sg/2025/06/13/nw_link/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#chapter-1-foundation">Chapter 1: Foundation</a><ul><li><a href="#requirements">Requirements</a></li><li><a href="#arch">Arch</a></li><li><a href="#local-area-routing">Local area routing</a></li></ul></li><li><a href="#chapter-3-internetworking">Chapter 3: Internetworking</a></li></ul><!-- tocstop --></div><p>Readings:</p><ul><li>Software Engineering for Systems Hackers, Davidâ€™s notes</li><li>TCP/IP Illustrated, Volume 1: The Protocols by W. Richard Stevens.</li><li>Unix Network Programming: Networking APIs: Sockets and XTI (Volume 1) by W. Richard Stevens.</li><li>Advanced Programming in the Unix Environment by W. Richard Stevens, Addison-Wesley, 1993</li><li>computer networks, a system approach</li></ul><ol><li>basics: IP</li><li>applications: Web, HTTP, CDN, Overlays (P2P and bitcoin), security</li><li>modern n/w infrastructure: router, data center n/w</li></ol><h2><span id="chapter-1-foundation">Chapter 1: Foundation</span><a href="#chapter-1-foundation" class="header-anchor">Â¶</a></h2><p>Problem 1: build a network</p><ol><li>requirements from stakeholders: Stakeholders of a computer system may share different perspectives on it. We need to consider network designers, n/w operators, and application programmer in respect to computer networks.<ul><li>designer: share n/w resource fairly</li><li>app programmer: networks provides (logical) channels for application processes to communicate</li><li>operator: Automation and avoidance of change make n/w more manageable. An operator can configure one router but not thousands of routers.</li></ul></li><li>Designing a n/w for performance should be aware of the performance metrics first.</li><li>N/w designers have developed n/w architectures guiding the design and implementation of n/w which include Internet architecture and OSI model.</li></ol><p>A recursive definition of a network: A network can consist of subnetworks, each composed of two or more nodes connected by physical links.</p><p>To build a network from the bottom up, we start by connecting two nodes with a physical link. We then scale the network by adding additional nodes or subnetworks.</p><p>The challenge then becomes providing network connectivity through addressing and routing mechanisms.</p><p>Terminology</p><ol><li>Direct links: a network can consist of two nodes. The physical medium that connects two nodes is called a link. A node can refer to a computer or a specialized piece of h/w. Direct links are composed of point-to-point and multiple-access ones.</li><li>Point-to-point links: a pair of nodes share a single physical link whereas multiple-access is more than two nodes sharing one link.</li><li>Indirect links: switched n/w among which the circuit switched type is for telephones and the packet switched type is for general n/w.</li><li>Packet-switched n/w: the nodes send discrete blocks of data to each other. It uses store-and-forward approach to transfer data. Each node receives a complete packet over some link, stores it and then forwards to the next node.</li><li>Circuit switched: This kind of n/w establishes a dedicated circuit across a sequence of links and then allows the src node to send data stream to a dest node.</li><li>Internetwork (internet): a set of independent n/ws are interconnected to form an internetwork.</li><li>Convention: a generic <strong>i</strong>nternet, the TCP <strong>I</strong>nternet</li><li>Router/Gateway: A node that is connected to two or more networks is commonly called a <em>router</em> or <em>gateway</em></li><li>Address: An address is a byte string that identifies a node. By specifying an address of a node, it can achieve host-to-host connectivity.</li><li>Routing: The process of determining systematically how to forward messages toward the destination node based on its address is called <em>routing</em>.</li><li>Source routing (or path addressing): the path to reach a given destination is explicitly specified by the source when it first injects a packet into the network.</li><li>Cast: that the source node sends a message to a single node is called unicast (one-one). broadcast (one-all), multicast (one-many)</li><li>Multiplexing, which means that a system resource is shared among multiple users. As in n/w context, data sent by users can be multiplexed over the direct links.</li><li>STDM, synchronous time-division multiplexing. The idea is to divide time equally and, in a round-robin manner, each flow can send its data over the physical link.</li><li>FDM, frequency-division multiplexing. The idea is to transmit each flow over the link at a different frequency.</li><li>Packet, the limited-size block of data that the physical link allows for a data flow to transmit.</li><li>FTP, file transfer protocol</li><li>Burst error, several contiguous bits are corrupted.</li><li>Bit error, a bit is flipped. It occurs because of outside forces. (1/(10<sup>6~10</sup>7) on a copper cable, 1/(10<sup>12-10</sup>14) on an optical cable)</li><li>MAC, media access control address, 48 bits long, written in hex. Itâ€™s used as part of Ethernet protocol. e.g. 34:f3:e4:ae:66:44.</li><li>Ethernet is a family of wired computer networking technologies</li><li>Broadcast storm</li></ol><h3><span id="requirements">Requirements</span><a href="#requirements" class="header-anchor">Â¶</a></h3><p>Why packet-switched networks are more efficient than circuit-switched ones?</p><p>The capability of transmitting data on a switch (bandwidth) is limited. When multiple hosts need to send data to their counterparts over a shared physical link, data flows are multiplexed onto the link and then demultiplexed at the receiving end. Common multiplexing methods, such as STDM and FDM, support only a fixed number of data flows, as it is difficult to allocate additional time slots or frequencies dynamically. Moreover, STDM can result in significant idle time if a host has no data to send during its allocated time slot.</p><p>Statistical multiplexing addresses these limitations by allocating transmission time to data flows <strong>on demand</strong>. By avoiding idle time, it gives packet-switched networks efficiency. To ensure fair access to the link and prevent a single large message from blocking other flows, statistical multiplexing imposes an upper limit on the amount of data each flow can send at a timeâ€”i.e., the packet size. Large messages are therefore fragmented into multiple packets for transmission and reassembled upon reception.</p><p>Each switch independently decides which packet to forward next, typically on a packet-by-packet basis. To maintain fairness, switches may use strategies such as First-In-First-Out (FIFO) or round-robin scheduling.</p><p>Switches also buffer incoming packets in memory in case packets arrive faster than the shared link can transmit them. If the buffer becomes full, some packets must be droppedâ€”a condition known as congestion, which is the key challenges of statistical multiplexing.</p><p>App level of n/w: Many applications require common n/w services. It is the network designerâ€™s responsibility to define an appropriate set of services that abstracts away the underlying network complexity from the application programmer. Such services are provided through (logical) channels. Each app can select the type of channel which meets its needs best.</p><p>A common communication pattern is to request and reply. To support such services, two types of channels are provided, request/reply channels and message stream channels.</p><p>Where the functionality of channels is implemented involves a trade-off between packet switches and the end hosts (devices).</p><p>N/w failures make it difficult to deliver a message reliably. There are three class of failures: at the bit level, bit errors or a burst error; at the packet level, packet lost or late; at the node and link level, a link is cut or flaky, or a node crashes.</p><p>Minimizing change simplifies network management, but it also underscores a fundamental trade-off between system stability and feature velocity. The deployment of new features within the network can impact thousands of dependent services and potentially result in significant periods of unavailability</p><h3><span id="arch">Arch</span><a href="#arch" class="header-anchor">Â¶</a></h3><p>The hourglass design of Internet protocols reflects the central philosophy of the architecture. IP defines how to exchange packets as the focal point of the arch. The narrow-waisted model makes n/w easy to embrace new technologies and user demands.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">FTP HTTP DNS TFTP</span><br><span class="line">  \/       \/</span><br><span class="line">  TCP      UDP</span><br><span class="line">       \/</span><br><span class="line">       IP</span><br><span class="line">  /  / /  \  \</span><br><span class="line"> Ether ...  LTE WiFi</span><br><span class="line">   (subnetwork)</span><br></pre></td></tr></table></figure><h3><span id="local-area-routing">Local area routing</span><a href="#local-area-routing" class="header-anchor">Â¶</a></h3><p>Example of building a LAN:</p><ol><li>choose an addressing scheme: Use Ethernet. MAC shows the destination and source address.</li><li>choose a routing algorithm to deliver packets to the destination<ul><li>broadcast with learning switches algorithm: incurs loops, causing broadcast storm</li><li>broadcast with learning switches and spanning tree: solves loop issue</li><li>distance vector</li></ul></li></ol><p>MAC addresses: all MAC addressed are unique, assigned by the deviceâ€™s manufacturer. Every device (wireless adapter, Ethernet port, bluetooth connector) has attached a MAC address.</p><h2><span id="chapter-3-internetworking">Chapter 3: Internetworking</span><a href="#chapter-3-internetworking" class="header-anchor">Â¶</a></h2><p>In networking layer, Internet protocol provides inter-network connectivity to hosts, sending packets destined across networks. Sub-networks are connected via routers.</p><p>IP addressing</p><ol><li>hierarchical addressing: replace flat addresses (source routing) with hierarchical addresses which are easier to scale and forward</li><li>class-based addressing: obsolete today. Traditional addressing tends to use network/host split and dotted-quad notation.</li><li>subnet addressing: use network/subnet/host split. A single network number is shared among multiple networks called subnets. Subnets are close to each other, reachable by a single router. They are not visible outside.</li><li>CIDR</li></ol><p>Subnetting: All the nodes on each subnet are configured with a subnet mask and sharing the same subnet number. The subnet number is the bitwise AND of an IP address and a subnet mask of this subnet. By checking the bitwise AND between IP address of the destination host and the subnet mask of source host matching the subnet number of source host, itâ€™s able to find out if these hosts are on the same subnet, thereby sending message via the subnet instead of a router.</p><p>Example:</p><p>IP address: <code>192.168.1.10</code> = <code>192.168.1.0</code> + <code>10</code></p><p>Subnet mask: <code>255.255.255.0</code>. The â€˜1â€™ marks the network part and the â€˜0â€™ marks host part.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">IP:          11000000.10101000.00000001.00001010</span><br><span class="line">Subnet mask:     11111111.11111111.11111111.00000000</span><br></pre></td></tr></table></figure><p>IP header design: the information of an IP header need is to parse packet, carry packet to the destination and deal the failures (loops, corruption, very large packet).</p><ul><li>TTL, time-to-live filed (8 bits) prevents forwarding loops as it decrements at each loop and the packet will be discarded when it reaches 0.</li><li>A router can split a packet into multiple fragments when its size is larger than the linkâ€™s MTU</li></ul><p>Tunneling forces a packet to go to specific point in the network. It doesnâ€™t go through the regular path. A tunneling app is VPN.</p><p>A host has a host name, an IP address and a MAC address.</p><p>ARP helps to translate IP to MAC, an Ethernet address, by broadcast searching for IP address to all devices on the LAN. Each ARP response is cached as an ARP entry with a timeout on hostâ€™s ARP table. However, ARP broadcast takes O(N^2) for an N host network. Proxy ARP decreases the overhead of broadcast.</p><p>DNS is a directory service for hosts on the Internet which maps from host addresses to host names.</p><p>Terminology</p><ol><li>LAN: local area n/w,</li><li>WAN: wide area n/w</li><li>End host/host/computer/device, switch/bridge/router, number-port switch</li><li>IP addresses (IPv4) uses a unique 32-bit number associated with a host. Itâ€™s partitioned into a prefix (network) and suffix (host) components. Itâ€™s represented with the dotted quad notation. e.g. 12.34.158.5.</li><li>Class-based addressing, an early method of assigning IP addresses (specifically IPv4) by dividing the entire IP address space into fixed-size classes, based on the leading bits of the address.</li><li>Subnet: the idea is to take a single IP network number and allocate the IP addresses with that network number to several physical networks which is referred to as subnets. A subnet can consist of multiple hosts.</li><li>CIDR, classless interdomain routing. Flexible division between network and host addresses. Need to specify the boundary of network prefix by slash. e.g. 128.23.9/26 uses 26 bits as n/w prefix.</li><li>Frame, a data unit for data link.</li><li>Datagram (IP packet), a data unit for network layer.</li><li>MTU, maximum transmission unit. Every link has a MTU which defines largest number of bits it can carry as one unit.</li><li>ARP, address resolution protocol.</li><li>DNS, domain name system.</li><li>All FF address: <code>FF:FF:FF:FF:FF:FF</code>, an Ethernet destination means to broadcast to all devices on the LAN.</li></ol>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 15-441 networks </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ä¸‰åŸäºŒäººğŸ‡®ğŸ‡¹</title>
      <link href="/sg/2025/05/08/travel_firenze_may/"/>
      <url>/sg/2025/05/08/travel_firenze_may/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ä¸€ç›´æƒ³å»æ„å¤§åˆ©éšä¾¿èµ°èµ°ï¼Œå’Œæœ‹å‹å°rä¸€è¯´ä¸€æ‹å³åˆï¼Œäºæ˜¯æˆ‘ä»¬è¶ç€äº”ä¸€å‡æœŸçº¦å¥½ä¸€èµ·å‡ºè¡Œã€‚å°rå’Œæˆ‘åœ¨æ€§æ ¼ä¸Šæœ‰è¯¸å¤šç›¸ä¼¼ï¼Œéƒ½æ¯”è¾ƒéšæ€§å’Œæ•£æ¼«ï¼Œæ¯”å¦‚æ‡’å¾—åˆ¶å®šéå¸¸ç²¾ç¡®çš„è®¡åˆ’ï¼ˆå°ré£è¯„è¢«å®³xï¼‰å’Œå¦‚éå¿…è¦ç»ä¸æå‰è§„åˆ’ä¸€å¤©ä»¥ä¸Šçš„æ—¥ç¨‹ã€‚æ•…è€Œåœ¨èµ·é£å‰å¾€æ„å¤§åˆ©çš„ç¬¬ä¸€å¤©ï¼Œæˆ‘ä»¬åªç¡®å®šäº†ä¼šå»ä¸‰ä¸ªåŸå¸‚ï¼Œåˆ†åˆ«æ˜¯å¨å°¼æ–¯ï¼Œä½›ç½—ä¼¦è¨å’Œç±³å…°ï¼Œå…¶ä»–éƒ½æ˜¯æœªçŸ¥ã€‚</p><p>å°æ—¶å€™æˆ‘å°±å¯¹å¨å°¼æ–¯æœ‰ä¸ªæœ¦èƒ§çš„å°è±¡ï¼Œå› ä¸ºæ”¶åˆ°çš„ç¬¬ä¸€å¼ æ˜ä¿¡ç‰‡å°±æ˜¯å¨å°¼æ–¯æ°´åŸï¼Œå†åŠ ä¸Šå°å­¦è¯¾æœ¬é‡Œçš„æå†™ã€‚æ›¾æ¢¦åˆ°è¿‡ä¸€ä¸ªåœºæ™¯ï¼Œå’Œä¸€ä¸ªäººå»æ¡¥ä¸‹æ¢ç´¢ä¸€ä¸ªä¹¦åº—ï¼Œåˆæˆ–è€…åœ¨çª—å‰å¬åˆ°æ²³æµã€‚è¿™æˆ–è®¸æ˜¯æ¬²æŠ‘å…ˆæ‰¬ï¼Ÿå¨å°¼æ–¯å®é™…ä¸Šå¹¶ä¸ç¬¦åˆè¿™æ ·çš„è®¾æƒ³ã€‚</p><p>å¨å°¼æ–¯æˆ‘ä»¬ä¸»è¦åœ¨ä¸»å²›è½¬äº†è½¬ï¼Œé‚£é‡Œæœ‰é”™ç»¼å¤æ‚çš„çª„å··æ²³é“ï¼Œç†™ç†™æ”˜æ”˜çš„æ¸¸å®¢å’Œæ‘†ç€å„ç§â€œå·¥è‰ºå“â€çš„å°å•†è´©ã€‚æ²³é“çš„æ°´å‘ˆç°å‡ºä¸€ç§æµ‘æµŠçš„ç»¿è‰²ï¼Œè¦èµ°åˆ°é è¿‘ç å¤´è¾¹æ°´çš„é¢œè‰²æ‰é€æ¸å˜è“ï¼Œå¦‚æœæœ‰é˜³å…‰åŠ æˆã€‚æ²¿ç€å¤–å›´èµ°è¿‡ä¸€æ¡æ‘†æ»¡äº†ç”»ä½œå’Œçºªå¿µå“çš„å°é“ï¼Œä¸€äº›é¡»å‘çš†ç™½çš„ç”»å¸ˆåœ¨ç°åœºä½œç”»ï¼Œè€Œæ—è¾¹åˆ™æŒ‚ç€æˆå“ã€‚å¯åæ¥æˆ‘å¬è¯´å®é™…ä¸Šå–ç»™æ¸¸å®¢çš„æˆå“æœ‰å°åˆ·çš„ç—•è¿¹ï¼Œæ˜¯å¦çœŸçš„å€¼å¾—ä¹°å°±è§ä»è§æ™ºäº†ã€‚å²›ä¸Šçš„å•†ä¸šåŒ–ä¹Ÿå¾ˆä¸¥é‡ï¼Œæˆ‘ä»¬èµ°è¿‡å¾ˆå¤šå®¶å–ç€åŒç±»å•†å“çš„åº—é“ºï¼Œä»·æ ¼ä»¤äººç ç›®ã€‚ä¼˜ç‚¹æ˜¯å¤©æ°”å°šå¯ï¼Œåœ¨é»„æ˜æ—¶åˆ†è¿˜æ˜¯æŠ“ä½äº†ä¸€äº›ç¾ä¸½çš„ç¬é—´ã€‚æˆ–è®¸æ˜¯å¤©é»‘äº†å°±çœ‹ä¸æ¸…æ¥šæ²³é“çš„é¢œè‰²äº†:P</p><p>æˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨å¨å°¼æ–¯å‘¨è¾¹çš„å°åŸå¸•å¤šç“¦æš‚ä½ï¼Œè¿™åæ¥è¢«è¯æ˜æ˜¯æ˜æ™ºä¹‹ä¸¾ã€‚ä¸€é¿å¼€äº†å¨å°¼æ–¯æ‹¥æŒ¤çš„äººæµï¼ŒäºŒä¸ç”¨é¢å¯¹å±…ä½åœ¨ä¸»å²›ä¸Šæ˜‚è´µçš„ä½å®¿å’Œè¡Œæç®±åˆºå®¢â€”â€”å°é˜¶å’Œé¹…åµçŸ³ï¼Œä¸‰èº²å¼€äº†ç«è½¦ç«™å‘¨å›´ä¾¿å®œçš„ä½å®¿ä½†ç•¥æ˜¾å±é™©ç ´è´¥çš„ç¯å¢ƒã€‚è¦è¯´å¸•å¤šç“¦æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Œé‚£åº”è¯¥æ˜¯æ²¡æœ‰å¤šå°‘ä¸­é¤ã€‚åˆåˆ°å¸•å¤šç“¦è®©æˆ‘æœ‰ç§å›å›½çš„æ„Ÿè§‰ã€‚è¿™ä¸ªå°åŸä¸ç®—ä»€ä¹ˆæ—…æ¸¸èƒœåœ°ï¼Œç ´æ—§çš„æˆ¿èˆè¡—é“ï¼Œå·¥åœ°ä¸­çš„æ•™å ‚ï¼Œçœ‹èµ·æ¥å°±åƒæ˜¯ä¸€ä¸ªæœ‰ä¸€äº›æ™¯ç‚¹çš„äºŒçº¿åŸå¸‚ã€‚ç„¶è€Œå¥½å¤©æ°”ï¼Œç»¿åœ°å…¬å›­å’Œäººå°‘ä»æ—§è®©æˆ‘ä»¬æ›´åçˆ±å¸•å¤šç“¦ã€‚æˆ‘ä»¬åœ¨è¡—è§’è¡Œèµ°æ—¶é—»åˆ°æœ‰å‡ åˆ†æ¸…é›…çš„é¦™æ°”ï¼Œæ¥è‡ªäºåº­é™¢å†…é•¿å¾—èŒ‚å¯†çš„æµ·æ¡èŠ±ã€‚å®ƒé•¿å¾—å’Œæ¡‚èŠ±ç•¥æœ‰ç›¸ä¼¼ï¼Œé¦™å‘³ä¹Ÿæ¸…æ–°æ€¡äººã€‚åæ¥çš„å‡ å¤©æˆ‘ä»¬ä¹Ÿåœ¨ä¸åŒçš„åœ°æ–¹é‡é‡åˆ°æµ·æ¡ã€‚</p><p>è™½ç„¶æ˜¯ç”±äºå»ºç­‘æ‰é€‰æ‹©äº†ä½›ç½—ä¼¦è¨ï¼Œä½†æœ€åæˆ‘ä»¬ä¹Ÿæ²¡å»ä»»ä½•å®¤å†…è§‚ç»å¤§å¸ˆä»¬çš„æ°ä½œã€‚ä¸å¾—ä¸æ‰¿è®¤ä¸»è¦åŸå› æ˜¯æˆ‘ä»¬æœ€åä¸€åˆ»æ‰è®¢ç¥¨çš„æ—§ä¹ ã€‚ä¸‹æ¬¡æˆ–è®¸æˆ‘ä»¬ä¼šè®°å¾—ä¹°ç¥¨å»åœ£æ¯ç™¾èŠ±æ•™å ‚çš„ç©¹é¡¶ï¼Œæˆ–è€…å†å»æŸä¸ªåšç‰©é¦†é€›é€›ã€‚</p><p>ä½›ç½—ä¼¦è¨æˆ‘ä»¬åŒæ ·é¿å¼€äº†æ‹¥æŒ¤çš„å¸‚ä¸­å¿ƒï¼Œé€‰æ‹©äº†ä½åœ¨äº†éƒŠåŒºã€‚é˜´å·®é˜³é”™æˆ‘ä»¬ä¹Ÿå› è€Œé‡åˆ°äº†ç›®å‰ä½è¿‡çš„æœ€å¥½çš„é…’åº—å’Œ hostã€‚è¿™æˆä¸ºæˆ‘ä»¬æ—…è¡Œçš„é—ªå…‰ç‚¹ä¹‹ä¸€ã€‚</p><p>ä½›ç½—ä¼¦è¨å¤„äºæ‰˜æ–¯å¡çº³åœ°åŒºï¼Œå‡ºåŸä¹‹åå¯ä»¥è½»æ˜“æ¬£èµåˆ°å…¶åœ°è²Œã€‚è¿ç»µçš„ç”°åœ°åæ‹¥åœ¨ä¸˜é™µä¹‹ä¸Šï¼Œæ¾æŸéƒéƒè‘±è‘±ï¼Œè¿˜ç§æ¤ç€è‘¡è„è—¤å’Œæ©„æ¦„æ ‘ã€‚æˆ‘ä»¬æ‰€ä½åœ¨çš„å±±åº„åœ¨åº­é™¢é‡Œå°±èƒ½å°†è¿œæ–¹çš„ä¸˜é™µæ”¶å…¥çœ¼åº•ã€‚å°½ç®¡åæ¥çš„ä¸¤å¤©å¤©æ°”ä¸å¥½ï¼Œå‡ ä¹æ²¡æœ‰ä¸€ä¸ªåŸå¸‚èƒ½å¤Ÿæ‰“ç ´é˜´å¤©æ»¤é•œï¼Œæˆ‘ä»¬ä¹Ÿåœ¨å±±åº„é‡Œæ„Ÿå—åˆ°äº†é™è°§çš„ç”°é‡ç”Ÿæ´»ã€‚</p><p>åœ¨åŸåŒºå†…æˆ‘ä»¬æ’è§äº†å¾ˆå¤šæ•™å ‚å’Œèƒ½å¤ŸæŒ¤æ»¡è¡—é“å¹¿åœºçš„äººã€‚åœ¨æ¬§æ´²å»è¿‡çš„åŸå¸‚é‡Œï¼Œæˆ‘å¾ˆå°‘èƒ½å¤Ÿè§åˆ°æœ‰å¦‚æ­¤å¤šæ¸¸å®¢çš„åœ°æ–¹ã€‚åœ¨ç±³å¼€æœ—åŸºç½—å¹¿åœºèƒ½å¤Ÿä¿¯ç°åŸå¸‚çš„å…¨æ™¯ï¼Œåªæ˜¯æ²³æµåœ¨æ²¡æœ‰é˜³å…‰çš„æ—¶å€™ä¼šå›åˆ°ä»–æœ¬æ¥çš„æ³¥æ²™ç»¿ã€‚æ•´åº§åŸå¸‚éƒ½æ˜¯çº¢æˆ¿å­ï¼Œå°ræŸ¥åˆ°é‚£æ˜¯ç”±äºä½›ç½—ä¼¦è¨å¸‚æ”¿åºœæœ‰ä¿æŒå…¶åŸå¸‚å¤å»ºç­‘é£æ ¼çš„æ¡ä¾‹ã€‚</p><p>ä½›ç½—ä¼¦è¨å‘¨è¾¹ä¹Ÿæœ‰è®¸å¤šå°åŸå¯ä»¥è½¬è½¬ï¼Œæ¯”å¦‚å¢å¡ï¼Œé”¡è€¶çº³ï¼Œæ¯”è¨ã€‚æˆ‘æƒ³å»å¢å¡çœ‹çœ‹é‚£ä¸ªé•¿äº†ä¸€æ£µæ ‘åœ¨å¤´é¡¶çš„å¤å¡”ï¼Œå°ræƒ³å»æ¯”è¨ä¹°æ™´é›¨å†°ç®±è´´ã€‚åœ¨å¼—æ´›ä¼¦è¨å‰©ä¸‹çš„æœ€åç¬¬äºŒä¸ªæ™šä¸Šï¼Œæˆ‘ä»¬åœ¨ä¸ç”šå¥½çš„å¤©æ°”é¢„æŠ¥ä¸‹åˆ¶å®šå¥½ä»å¸‚åŒºå»å¢å¡å’Œæ¯”è¨çš„è¯¦ç»†è·¯çº¿ã€‚ç„¶åä»ç”»é¥¼åˆ°æ”¾å¼ƒï¼Œå¼ºåº¦å¤ªå¤§ä¸æƒ³å»äº†ã€‚äºæ˜¯æˆ‘ä»¬è½¬è€Œå•†é‡è¦ä¸è¦å–æ¶ˆåŸå®šäºå¸‚åŒºé™„è¿‘çš„ä½å®¿ç»§ç»­å¤šä½åœ¨å±±åº„ä¸€å¤©ï¼Œå°±åœ¨å¸‚ä¸­å¿ƒç»§ç»­æ™ƒæ‚ ã€‚è®¨è®ºé€æ¸å˜æˆç†æ™ºå’Œæƒ…æ„Ÿçš„å¯¹æŠ—ï¼Œç†æ™ºä¸Šåº”è¯¥çœé’±ï¼Œæƒ…æ„Ÿä¸Šä¸æ„¿æ”¾å¼ƒå½“ä¸‹èˆ’é€‚çš„ç¯å¢ƒã€‚ä¸ç®¡æ€ä¹ˆåˆ—ä¸¾ç¼ºç‚¹ï¼Œéƒ½æ”¹å˜ä¸äº†æˆ‘ä»¬æ›´æ„¿æ„å¾…åœ¨å±±åº„ä¼‘é—²çš„å¿ƒæƒ…ã€‚</p><p>å‡ºé—¨æ€»æ˜¯èƒ½é‡åˆ°é˜´é›¨å¤©æ°”ï¼Œè¡Œç¨‹çš„æœ€åå‡ å¤©å‡ ä¹éƒ½æ˜¯ä¸‹é›¨ã€‚åŸæœ¬æˆ‘ä»¬æƒ³å»ç§‘è«æ¹–é™„è¿‘èµ°äº›è·¯çº¿ï¼Œä½†å±±é›¾ç¼­ç»•çš„æ²³è¾¹å°é•‡ä¹Ÿè½¬ä¸äº†å¤šé•¿æ—¶é—´ã€‚å»çš„å·èœé¦†æˆ‘å€’è§‰å¾—æŒºä¸é”™çš„ï¼Œè¦æ˜¯æˆ‘å®¶é™„è¿‘ä¹Ÿæœ‰è¿™æ ·ç‰©ç¾ä»·å»‰çš„ä¸­é¤é¦†å°±å¥½äº†ã€‚</p><p>åœ¨ç±³å…°çš„ä¸¤å¤©æˆ‘ä»¬ä¸»è¦éƒ½åœ¨åƒåƒåƒã€‚ç±³å…°æœ‰ä¸€æ¡åäººè¡—ï¼Œé‡Œé¢æœ‰å„ç§å°åƒï¼Œé¥­é¦†ï¼Œæ—©é¤åº—ï¼Œå¥¶èŒ¶åº—ï¼Œçƒ§çƒ¤ï¼Œéº»è¾£çƒ«ç­‰ç­‰ã€‚è¿™äº›çœ‹ä¼¼å¹³å¸¸çš„äº‹ç‰©åœ¨å¼‚ä¹¡å·²ç»å˜æˆéš¾èƒ½å¯è´µçš„å­˜åœ¨äº†ã€‚</p><p>æ„å¤§åˆ©é¤æˆ‘ä»¬é”™ä½åƒäº†ä½›ç½—ä¼¦è¨é—»åçš„ T éª¨ç‰›æ’å’Œ tartare ï¼ˆä¸€ç§ç”Ÿç‰›è‚‰ï¼‰ã€‚æœåŠ¡ç”Ÿç»™æˆ‘ä»¬é€‰æ‹©çš„ç‰›è‚‰æ¨èäº†äº”åˆ†ç†Ÿï¼Œå°½ç®¡æˆ‘ä»¬éƒ½æ›´åå¥½å…¨ç†Ÿä½†è¿˜æ˜¯ç›¸ä¿¡å¹¶å°Šé‡äº†å¥¹çš„æ¨èã€‚è€Œç”Ÿè‚‰åˆ™æ˜¯å› ä¸ºå°ræƒ³å°å°æ„å¤§åˆ©çš„è¿™é“ç‰¹è‰²èœã€‚äº‹å®è¯æ˜æˆ‘ä»¬çœŸçš„ä¸€ç‚¹ä¹Ÿä¸å–œæ¬¢ç”Ÿè‚‰ï¼Œäº”åˆ†ç†ŸåŸºæœ¬é‡Œé¢ä¹Ÿéƒ½æ˜¯ç”Ÿçš„ã€‚åƒèµ·æ¥è™½ç„¶æ²¡ä»€ä¹ˆè…¥å‘³ä¹Ÿå®åœ¨æœ‰ç§èŒ¹æ¯›é¥®è¡€çš„æ„Ÿè§‰ã€‚</p><p>æ—…é€”ä¸­æˆ‘ä»¬åœ¨ç©ä¸€ä¸ªå¾ˆç®€å•çš„ word gameã€‚èµ·å› æ˜¯æˆ‘å…ˆå’Œå°r è¯´äººå¾ˆéš¾æƒ³å‡º10ä¸ªä»¥vå¼€å¤´çš„å•è¯ã€‚ç„¶åæ¼”å˜åˆ°è¯´å‡ºä»¥æŸä¸ªå­—æ¯å¼€å¤´çš„å•è¯ï¼Œä»å‡ºç°é¢‘ç‡è¶Šå°‘çš„å­—æ¯å¼€å§‹ã€‚æœ‰æ„æ€çš„åœ°æ–¹åœ¨äºæ€»ä¼šæœ‰å¾ˆç†Ÿæ‚‰çš„å•è¯è¢«å¿˜è®°ã€‚æ¯”å¦‚åœ¨è¯´ k æ—¶æˆ‘æ ¹æœ¬æƒ³ä¸èµ·æ¥ kernelï¼Œè¯´ p æ—¶æˆ‘ä»¬éƒ½æ²¡æƒ³åˆ° potatoã€‚</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Portugal: An Unexpected Journey</title>
      <link href="/sg/2025/03/24/travel_lisbon/"/>
      <url>/sg/2025/03/24/travel_lisbon/</url>
      
        <content type="html"><![CDATA[<p>Thanks to rainy days in Portugal, I had met rainbows quite frequently, some of which I looked through webcams<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup><sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup> of Madeira<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>. The reason I chose the Madeira islands as the destination of my travel is that there are many hiking trails. Moreover, throwing myself to a distant island for several days, wouldnâ€™t that be nice? Given that few direct filghts were available and Lisbon is so close to Madeira as compared to other European cities, my original plan was to have two-day stopover in Lisbon, five days in Madeira and fly back to Berlin through Lisbon with two-hour layover.</p><p>It went well as I could have lied around for a weekend before setting out until a national airport strike was happening on the exact day of my outbound flight took off. How lucky I was to experience it all over again. There was also a strike of trains last year which made me start off one day later. I â€œhappilyâ€ embraced the new change which I paid for extra 300 euros and arrived in Lisbon in a cloudy day before the strike. Wondering if itâ€™s a right decision, I found a rainbow against the sky with a little bit of sunshine just over the street. Maybe thatâ€™s a sign.</p><p>The rains make cities look somber with no exceptions. But Lisbon is an exceptional city. People there are warmhearted and friendly, which is quite opposite to the cold and detached feeling of Germany. I found myself have pleasant meals sometimes without understanding full words of waiters at the restaurant, mostly because of their smiles and politeness. Paella is one of must-have foods in Portugal, which is a dish of rice, vegetables, seafood or chicken in a large pan. Even if I am not particularly into seafood, it tasted good. Roast chicken I had once, on the other side, was mediocre which looked no different than that in other places. Or I just didnâ€™t find the right restaurant.</p><p>Pouring rain was actually not that bad if you wore right gears including a water-proof jacket and shoes while hoding an umbrella. I felt pretty good stamping on wet tiles and passing by shops whose frontier were crowded with pedestrians as if the rain didnâ€™t exist. The weather of the next day turned better with a little more sunshine. You could see the sparkling sidewalks, white tiles flashing as going through. The city came alive and seemed busier than yesterday. Waiters were standing outside to gather customers going by. Tourists tried to capture the spirit of ancient relics or went along with locals to lie down in the grassland basking in the long-lost sunshine. I followed the map to a viewpoint (Miradouro, Portuguese) where the buildings and harbors were underfoot. Many people had already got there, sharing music, nice views, and company of each other. Provided with enough time, I would like to go to some more viewpoints to have a complete sketch of this place.</p><p>One goal of Libon trip for me was to find lemon fish. OceanÃ¡rio de Lisboa (aquarium) is special for connecting all champers together to constitute the conception of ocean. After some time to seach, I found a group of lemon fish, which I didnâ€™t know their exact names but did share similar appearances. Mission completed :) I also found it interesting that a lemon fish and a little blue fish (letâ€™s call it blueberry fish) were teasing. The blueberry fish tagged along behind the lemon fish and wouldnâ€™t let it go. I was sure that the lemon fish wanted to break away as it swung its tail several times.</p><img src="/sg/2025/03/24/travel_lisbon/IMG_9170.jpg" class title="IMG_9170"><p>Another surprising creature was seadragons which is a nearly extinct species coming from southern australia. Mimicking the surroundings to protect themselves, seadragons evolve and take different forms such as weeds or leaves. From their shapes, it should be easy to identify which one is Leefy Seadragon or Weedy Seadragon. I must say they were a little intimidating, which was also what I felt when I saw a shoal of fish swimming in my direction while knowing they couldnâ€™t touch me.</p><img src="/sg/2025/03/24/travel_lisbon/IMG_8500.JPG" class title="IMG_8500"><img src="/sg/2025/03/24/travel_lisbon/IMG_8495.JPG" class title="IMG_8495"><p>I didnâ€™t think it through about how weather would affect my schedule. Since sea became a key factor of the travel, a turbulent storm wasnâ€™t much surprising. It had influence over every flight Iâ€™d taken. Though, weâ€™ll come to this part of thrilling return later in this blog. In the beginning, I was just grateful my flight to Madeira didnâ€™t get cancelled and made my way to the hotel in Funchal. In the evening, the daylight went away gradually and lights lit up by the seaside. A peaceful and blue moment in the bus, I pondered. When the bus got closer to towns sitting by the hills, what I saw was similar to villages in Kephallonia from Assassinâ€™s Creed Odyssey. I was living in a game.</p><p>The first sight of Funchal reminded me of some old streets around my university. I had to say itâ€™s a little crappy and a sense of fear caught me when I walked into those narrow and dim alleys. Concerning the safety matters, one can never be too careful. Despite the worries of nights, I had to find a supermarket to buy some water and snacks for the next-day activity which required me to meet up at 5:30 AM. Itâ€™s not that scary after all. Extra time allowed me to grab a dinner of a Portuguese-style steak which I donâ€™t recommend :(</p><p>Madeira is an ideal land for hiking lovers with multiple hiking routes<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup> covering this archipelago. PR1, PR1.2 and PR8<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup> are the most amazing ones from my investigation prior to my arrival. In a perfect world, people can see a stunning sunrise at Pico do Areeiro where PR1 starts. Firstly, you expore the unique landscapes through hiking for 6.1 km to Pico Ruivo, which is one of Madeiraâ€™s highest mountains and the starting point of PR1.2. Keep walking for another 2.8 km and you will be in the right place at Achada do Teixeira. Tour groups in Madeira can take over drop-off and pick-up for this route at a reasonable price. Sounds like a good plan, hah?</p><p>I wake up at 4 AM at the scheduled day of PR1 with concerns that I couldnâ€™t afford to miss the activity. Luckily, I found a cat mate walking by who was also alone when I got to the meet-up point at 5:25 AM. Wind were blowing and it was still pretty dark. Hanging around for ten minutes or so, I started to get cranky when not a single car stopped. I checked the app where I booked the activity and finally knew it was cancelled last night. The question following was whether or not to stick to my plans given current weather conditions<sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup>.</p><img src="/sg/2025/03/24/travel_lisbon/IMG_9171.jpg" class title="IMG_9171"><p>Lying down for a while, I couldnâ€™t stand it I gave up no matter what and hopped on a taxi to Areeiro. I didnâ€™t know what lay ahead, but I knew it might be one of those moments I would regret. On the way up the mountain, sunlight streamed through the forest. That day was actually the best day of Areeiro during the week I stayed in Madeira. Even though I could only walk for 1.2 km to Redra Rija in the end, it was enough for me.</p><img src="/sg/2025/03/24/travel_lisbon/IMG_9172.jpg" class title="IMG_9172"><p>The PR8 trail went smoothly - that was, until I got on a bus back to Funchal. There were more passengers than empty seats and I happened to be one of the people that had to stand. The bus ride was really bumpy, constantly turning and braking. A fit of dizziness hit me just as we were around 15 minutes from town. I was about to pass out when I suddenly leaned onto the lady on my left. She noticed me and asked concernedly if I was ok. I could only shake my head as my body slowly slumped down with closed eyes. She quickly offered me her seat and, along with her friend, helped me get back on my feet. Some other passengers sounded worried too. I was moved and deeply grateful for their kindness and support.</p><p>It was a heavy rain when I went for the Levada walk trip with a tour group. Storms once again came strong to the western coast. That forced the guide to pick a shorter trail in the northeastern where rain was lighter. I wouldnâ€™t want to risk my clothes so I asked for a raincoat, called â€œPonchoâ€ in Madeira, from the guide. The trek was very muddy and damp. Although, the upside was itâ€™s also refreshing in the midst of countryside. I knew a friend would definitely like this kind of tour right after the rain.</p><p>â€œLevadaâ€ means mini-canal, a special irrigation system consisting of narrow channels that transport water from the rainfall heavy northern regions to the drier southern regions. These channels follow the contours of the mountains and hills, creating a network across Madeira.</p><p>We walked for two hours and reached a small shop for drinks. Poncha, a traditional Madeiran drink made with rum, was available there. Many travellers seemed to enjoy it. Before going back to Funchal, I got into the minibus when the guide suddenly asked about â€œPonchoâ€. I thought she was referring to Poncha, so I replied, â€œItâ€™s good, but I canâ€™t drink.â€ She looked confused and repeated the words. I was confused too, and said again, â€œI canâ€™t drink alcohol.â€ That didnâ€™t help. Then she leaned into the bus and said, â€œDidnâ€™t I get you a raincoat? Ah, I see the misunderstanding. You see, Poncha is what we drink, and Poncho is the raincoat.â€ I finally realized what had happened and quickly gave back the raincoat I had borrowed. She patted me on the shoulder and said with a smile, â€œA good joke.â€ Some fellow travelers were laughing too.</p><img src="/sg/2025/03/24/travel_lisbon/IMG_9086.JPG" class title="IMG_9086"><p>Seafood is unavoidable in coastal cities. Madeira produces a lot of bananas. And apparently black scabbardfish is a local specialty. That makes up a tradional dish called Espada com banana. Personally, I didnâ€™t like the blend of sweetness and saltiness, but it might be your thing. Another must-try dish is the beef skewer, which is tastier than the Portuguese steak I had the other day.</p><p>The morning I returned to Germany, I spotted a rainbow arching over the cable car through the window of my hotel room. I kept a good mood on the way to airport and got onboard, which gave me some time to write. However, bad news came from the crew: our flight would be delayed by around one hour and a half due to coastal events ongoing in Lisbon. What made things difficult was that the terminal for my first flight was different from the one for my connecting flight - which meant I had to take a shuttle to T2 at Lisbon airport and go through security all over again. I only had two-hour layover, so the delay could have caused me to miss my flight to Berlin. Not to mention, I had to work the next day. During the first flight, I ran through every possible scenario in my head: what steps Iâ€™d need to take, what to say to the airline staff. As soon as the plane landed, I bolted out of the aircraft and ran toward T2 like a maniac. You can probably imagine what that looked like. Fingers crossed, I made it to the gate with just 10 minutes to spare. It was such a relief - I didnâ€™t have to buy another flight, book a hotel room, or call my manager to explain a last-minute absence.</p><p>I guess thatâ€™s why I saw the rainbow in the morning.</p><img src="/sg/2025/03/24/travel_lisbon/IMG_9104.jpg" class title="IMG_9104"><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://madeira.best/useful-info/webcams">https://madeira.best/useful-info/webcams</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://www.netmadeira.com/">https://www.netmadeira.com/</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p><a href="https://visitmadeira.com/en/travel-info/useful-information/">https://visitmadeira.com/en/travel-info/useful-information/</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://ifcn.madeira.gov.pt/pt/atividades-de-natureza/percursos-pedestres-recomendados/percursos-pedestres-recomendados.html">https://ifcn.madeira.gov.pt/pt/atividades-de-natureza/percursos-pedestres-recomendados/percursos-pedestres-recomendados.html</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li><li id="fn5" class="footnote-item"><p><a href="https://visitmadeira.com/en/what-to-do/nature-seekers/activities/hiking/">https://visitmadeira.com/en/what-to-do/nature-seekers/activities/hiking/</a> <a href="#fnref5" class="footnote-backref">â†©ï¸</a></p></li><li id="fn6" class="footnote-item"><p><a href="https://www.ipma.pt/pt/otempo/prev.localidade.hora/#Madeira&amp;Areeiro">https://www.ipma.pt/pt/otempo/prev.localidade.hora/#Madeira&amp;Areeiro</a> <a href="#fnref6" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Summary of Andrej&#39;s LLM Sessions for General Audience</title>
      <link href="/sg/2025/03/17/llm_intro_sum/"/>
      <url>/sg/2025/03/17/llm_intro_sum/</url>
      
        <content type="html"><![CDATA[<p>After watching three videos by Andrej Karpathy<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>, I have gained new perspectives on current LLMs.</p><p>Here were my misunderstandings and questions about LLMs before:</p><ol><li>Can LLMs truly think? I doubted this when Claude released its 3.5 Sonnet model. There is a script called thinking-Claude which makes Claude explicitly show its thinking process of answering questions using natural language. Though it appeared as if Claude could think step-by-step and verify the results, I was hesitant about the nature of the chatbot under the hood. What if it just makes stuff up and demonstrates a chain of thoughts that users think itâ€™s supposed to have?</li><li>Why does Claude hallucinate and behave inconsistently? It needs so many calibrations to make a simple app work.</li><li>How does thinking help chatbots improve their answers?</li><li>Claude seems more humane than ChatGPT to me.</li><li>How does ChatGPT work?</li><li>Cognitive ability: self-consciousness</li></ol><p>Conclusions of the intro sessions:</p><ol><li><strong>Next-word prediction</strong>: The generation of a chatbot breaks down into two main stages: pre-training and post-training. In the first stage, a very large amount of internet documents are extracted and processed to train a base model. The question it solves is very simple, which is next-word prediction. This stage is the most time and computation consuming, taking many months or even a year. It outputs a base model containing billions/millions (?) of parameters, depending on the size of data fed and the computational ability of chips/hardware. In the second stage, we want to make the base model talk/answer questions, to function like an assistant model. This step is trained using Q&amp;A documents first collected from human labelers and later simulated by the model itself. The assistant model can then answer questions following the Q&amp;A modality. By nature, an LLM merely predicts the next word one by one.</li><li><strong>Context windows and tokens</strong>:<ul><li>Token: Nowadays, language models can only take text tokens as inputs. All forms of human-readable files such as PDFs, DOCs, TXTs, Excel files, etc., are transcribed to one-dimensional token sequences. The model understands the world as tokens, captures internal behaviors between words, and provides the most statistically likely following tokens. Images, videos, and audio are also transformed into text.</li><li>Lossy simulation: A language model has a limited context window to which it has direct access. It has base memory and working memory. Base (knowledge) memory consists of numerous parameters derived from internet data, which is vague recollection of internet data and can be outdated because the pre-training stage is expensive and seldom runs fully. Working memory is what can be instantly loaded into the context window. The prompt window provides a place the model can access very quickly. It usually provides more details than having the model retrieve tokens from its base memory. When you ask a model to generate a summary of a book chapter, itâ€™s best to provide the text of the chapter instead of asking for it directly.</li><li>Language models see the world as tokens. Itâ€™s beneficial to distribute the computational overhead across tokens/answers. Each token goes through a finite layers of computation to return a result. If we ask the model to concentrate computation on one token, the context window is likely to run out. For example, when evaluating answers to a math question such as â€œWhatâ€™s the price of an apple if we spend 15 euros on 2 oranges (whose price is 3 euros each) and 3 apples?â€ Solution 1 gives the price of an apple first and then shows its analysis, while Solution 2 does the inverse. Solution 2 is better because it doesnâ€™t make one token (the price of an apple) represent the entire calculation process, which consumes memory quickly.</li></ul></li><li><strong>Thinking and self-consciousness</strong>: We must decide what constitutes thinking or self-consciousness before judging a language model. In Andrejâ€™s view, intelligence is information processing and reorganization. As mentioned above, LLMs are just next-word prediction engines computed via complex neural networks. Therefore, they are not self-conscious and donâ€™t have personas. However, they can â€œthinkâ€ by providing statistical results sampled from large portions of internet documents which are not verified. What an LLM gives is not opinions, thoughts, or ideas of itself, but a reflection of human intelligence, possibly representing an expert in a certain domain, found on the internet.</li><li><strong>Neural networks</strong>: Donâ€™t overthink this concept. This point is what I was eager to understand when deciding on a major in college. I used to believe there were inherent connections between biology and computer science, which I mistakenly took from some â€œfamousâ€ journal. I realized it was wrong shortly after being admitted to the college of biology. Artificial neural networks are just a collection of mathematical formulas and knobs to tweak, sharing the form of biological neural networks. They are complicated but not specifically related to biological structures or processes. Through neural networks, the model is able to tweak parameters to represent the characteristics of pre-processed data extracted from certain portions of internet documents.</li><li><strong>Transformer</strong>: This is one type of neural network that works well in various cases of training models. And yes, itâ€™s based on mathematical formulas.</li><li><strong>Hallucinations of models</strong>: Each time you ask a model a question, you may receive a different answer. Returning to the point about the pre-training stage, the base model is just a large set of parameters representing a portion of internet documents. When you ask a question, it is transformed into tokens. Whether the model knows the correct answer is irrelevant. It always samples the most statistically likely result from its base memory.</li><li><strong>Thinking models</strong>: â€œThinkingâ€ can be considered as the next stage of assistant models. OpenAI hides chains of thoughts of its reasoning model in case of distillation risk through imitation of reasoning. For factural questions, thinking model might be an overkill.</li><li><strong>Tool uses</strong>: Itâ€™s a two-sided story.<ul><li>Language models are not good at math, at least in their early stages. The reason is simple: if some internet document shows 2+2 as 3.9, it will surely deviate the statistically sampled result. Basic tools such as Python interpreters and calculators are introduced to language models for assistance. Similarly, search tools are introduced so that the model has updated memory on specific topics. These tools upload new information as tokens to the modelâ€™s context window.</li><li>From a user perspective, we also need to take advantage of various LLMs to increase efficiency in many daily matters. As long as we are aware of the benefits and drawbacks of language models, they can be more helpful than expected. They are good at generating summaries of chapters, books, and papers when provided with the exact texts of the content. Different models have unique features. Claude has artifacts to run simulations of apps for you. ChatGPT can use search tools and serve as a data analysis tool.</li><li>Answers from language models need to undergo factual checks. They may hallucinate various information and alter your input data. If you want to do something with a picture, itâ€™s best to transcribe the image to text and check if the model interprets it correctly. The outputs of models, whether they be sources or estimated values from a diagram, need to be verified. The code they provide, especially if you donâ€™t fully understand it, is better checked line by line. I personally find it annoying that code generated by models often contains small bugs. Yes, they may get a basic version right, but the debugging time needed to achieve perfection can be considerable.</li></ul></li><li><strong>LLM OS</strong>: LLMs are not just word generators, but the kernel process of uprising systems. We can build peripheral devices, browsers and make better use of storages, file system embeddings, RAM, etc. around an LLM. But in the other hand, doesnâ€™t the words of â€œa new compuation stackâ€ emerge too frequently?</li><li><strong>RLHF</strong>: reinforcement learning from human feedback is a practical way to tackle un-verified domain questions. It uses neural net simulator of human preference as a reward model. The upside is decreasing the discriminator-generator gap as it is easier for LLMs to discriminate than to generate. Though the downside also comes from lossy simulation of humans, which could be misleading, deviate and stray away.</li></ol><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://www.youtube.com/playlist?list=PLAqhIrjkxbuW9U8-vZ_s_cjKPT_FqRStI">https://www.youtube.com/playlist?list=PLAqhIrjkxbuW9U8-vZ_s_cjKPT_FqRStI</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> machine learning </category>
          
          <category> neural networks </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>25å²ç”Ÿæ—¥â€”â€”æ–°èˆªè·¯</title>
      <link href="/sg/2025/03/12/25/"/>
      <url>/sg/2025/03/12/25/</url>
      
        <content type="html"><![CDATA[<p>é›¨å­£æ‰“ä¹±äº†å‡ºè¡Œçš„å¾ˆå¤šè¡Œç¨‹ï¼Œè™½ç„¶æ˜¯ç”±äºå¾’æ­¥è·¯çº¿å¤šè€Œæ¥äº†è¿™ä¸ªå°å²›ï¼Œä½†å®åˆ™åœ¨è¯¡å˜çš„å¤©æ°”ä¸‹æ‰€æœ‰è·¯çº¿éƒ½å…³é—­äº†ã€‚ä¸è¿‡è¿™ä¹Ÿæ²¡æœ‰å¤ªæ‰“ä¹±æˆ‘çš„å¿ƒæƒ…ï¼Œæ€»æœ‰äº›å¯åšçš„äº‹æƒ…ã€‚æœ€è¿‘æ€ç»ªå¾ˆæ‚ä¹±ï¼Œæˆ‘ä¹Ÿéœ€è¦å»ç†æ¸…æ¥šä¸€äº›å †ç§¯çš„é—®é¢˜ã€‚</p><p>åŸæœ¬è®¢å¥½äº†ä¸€ä¸ªå±±é‡Œå¾’æ­¥çš„æ´»åŠ¨ï¼Œå‡Œæ™¨äº”ç‚¹åŠæˆ‘å°±åœ¨å‡ºå‘åœ°ç‚¹ç­‰å¾…ç›´åˆ°å‘ç°æ´»åŠ¨åœ¨å‰ä¸€ä¸ªæ™šä¸Šè¢«ä¸´æ—¶å–æ¶ˆã€‚æŒ£æ‰äº†ä¸€æ®µæ—¶é—´è¦ä¸è¦ç»§ç»­è¿™ä¸ªè·¯çº¿ï¼Œå»èµ·ç‚¹å’Œå›ç¨‹å¯ä»¥ç”¨æ‰“è½¦æ›¿ä»£ï¼Œåªæ˜¯ä¼šè´µä¸€ä¸¤å€çš„æ ·å­ã€‚ç­‰åˆ°å¤©äº®æ—¶æˆ‘ç»ˆäºå†³å®šäº†å‡ºå‘ã€‚åœ¨è·¯é€”ä¸­æˆ‘ä»ç„¶åœ¨æ€€ç–‘è¿™ä¸ªé€‰æ‹©çš„æ­£ç¡®æ€§ï¼ŒçœŸçš„æœ‰å¿…è¦åœ¨ä¸é‚£ä¹ˆå¥½çš„å¤©æ°”ä¸‹éå»ä¸å¯ä¹ˆï¼Ÿåœ¨æˆ¿é—´é‡Œèººç€ä¸æ¯”å‡ºå»æŠ˜è…¾è¦èˆ’æœï¼Ÿä»¥åŠï¼Œæˆ‘çœŸçš„èµ°å¾—å®Œé‚£ä¸ªè·¯çº¿ä¹ˆï¼Ÿä½†åœ¨è¶Šé è¿‘è·¯çº¿èµ·ç‚¹ï¼Œåœ¨çœ‹åˆ°æ—¥å…‰åœ¨æ—é“ä¸Šçˆ¬å‡æ—¶ï¼Œæˆ‘æ˜ç™½äº†æˆ‘å¿…é¡»è¦åšçš„æ˜¯ seize the momentï¼Œä¸ç®¡ç»“æœå¦‚ä½•ã€‚æœ‰æ—¶å€™ï¼Œèƒ½å¤ŸæŠ“ä½çš„åªæœ‰å½“ä¸‹çš„ä¸€ä¸ªç¬é—´ï¼Œå¦‚æœé”™è¿‡è¿™ä¸ªç¬é—´ï¼Œå°±å†ä¹Ÿæ¥ä¸åŠäº†ã€‚</p><p>ç»“æœæœ‰å¥½æœ‰åã€‚åå¤„æ˜¯å‘ç°è·¯çº¿åªèƒ½èµ°åˆ°ä¸€å…¬é‡Œå·¦å³çš„åœ°æ–¹ï¼Œåé¢å…¨éƒ¨è¢«å°é—­äº†ã€‚æ­¤æ—¶æˆ‘è¿˜ä¸çŸ¥é“å¾’æ­¥è·¯çº¿çš„çŠ¶å†µï¼Œåªæ˜¯çœ‹åˆ°é™†é™†ç»­ç»­æœ‰å¾ˆå¤šäººèµ°å‘ PR1 æˆ–è€…åœ¨å›ç¨‹ä¸­ã€‚å¿ƒé‡Œæš—è‡ªç–‘æƒ‘è¿™ä¸æ˜¯ä¸ªå•å‘è·¯çº¿ä¹ˆï¼Ÿå¥½å¤„æ˜¯å¤©æ°”è¿˜ç®—å¯ä»¥ï¼Œè¦çŸ¥é“ä¸ä¸‹é›¨å·²ç»æ˜¯å¾ˆå¥½çš„çŠ¶å†µäº†å¯¹å¾’æ­¥æ¥è¯´ã€‚åœ¨çŸ­çŸ­çš„ä¸€å°éƒ¨åˆ†è·¯ä¸Šï¼Œæˆ‘ä»¿ä½›èµ°åœ¨å¡å°”è¾¾ä¸–ç•Œé‡Œï¼Œæ°´æ»´ä»æ‚¬ç©ºçš„çŸ³å¤´ä¸Šæ»‘è½ï¼Œæ–œå¡ä¸Šçš„è‰åœ°ï¼Œç¾¤å±±ç¯ç¿ éšéšçº¦çº¦ã€‚åªå¯æƒœæˆ‘æ²¡æœ‰æ—å…‹çš„çŸ«å¥åº¦é£å²©èµ°å£ã€‚ä¸è¿‡æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘é€‰æ‹©äº†è·Ÿéšå†…å¿ƒã€‚</p><p>å¤©æ°”å·²ç»ä¸å¤ªèƒ½å½±å“æˆ‘å‡ºè¡Œçš„å¿ƒæƒ…ï¼Œåªè¦ä¸åˆ°æç«¯æ¶åŠ£çš„ç¨‹åº¦ï¼Œæˆ‘éƒ½å–œæ¬¢äº‹ç‰©å‘ˆç°å®ƒæœ¬æ¥çš„æ ·å­ã€‚åœ¨ä»æœºåœºå¼€åˆ°å°é•‡çš„è·¯ä¸Šæ­£æ˜¯å‚æ™šï¼Œæµ·è¾¹çš„è·¯ç¯ï¼Œä¸è¿œå¤„ä¸€æ•´ä¸ªå±±å¡é—ªçƒçš„ç¯å…‰ï¼Œå¥½åƒåˆºå®¢ä¿¡æ¡å¥¥å¾·èµ›é‡Œçš„æ‘åº„ã€‚äººç”Ÿä¹Ÿæ­£å¦‚æ¸¸æˆï¼Œæˆ‘ä»¬åˆä½•å°ä¸æ˜¯åœ¨ç©ä¸€ä¸ªå¤§å‹å®æ—¶å®å†µæ¸¸æˆå‘¢ï¼Ÿå³ä½¿åœ¨é‡Œæ–¯æœ¬è€æ˜¯ä¸‹é›¨çš„å‡ å¤©é‡Œï¼Œæˆ‘ä¹Ÿæ„Ÿå—åˆ°äº†ä¸ä¸€æ ·çš„ä¹è¶£ã€‚å¤§é›¨å€¾ç›†ä¸‹è¿æ¥è¿‘åœ°é“ç«™å…¥å£çš„ç”µæ¢¯ä¸Šéƒ½èƒ½æ„Ÿå—åˆ°çš„æ°´æ±½ï¼Œè¢«é›¨æ°´é˜»æŒ¡çš„è¡Œäººä¸´æ—¶åœé åœ¨é—¨æ§›ä¸Šèº²é¿ï¼Œè€Œé›¨åœåæœ‰æ³¢å…‰ç²¼ç²¼çš„è¡—é“å’Œä¾æ—§ç¹å¿™çš„è¡Œäººã€‚è‘¡è„ç‰™äººæœ‰ä¸€ç§éš¾å¾—çš„çƒ­æƒ…å’Œå‹å¥½ï¼Œä»¥è‡³äºå³ä½¿æˆ‘æ²¡èƒ½å¬æ‡‚å¯¹æ–¹çš„è¯ï¼Œä¾ç„¶èƒ½å¤Ÿå¦¥å–„åœ°å–èµ°æˆ‘å¿˜åœ¨é¥­åº—é‡Œçš„ä¼ã€‚åœ¨å‚»å‚»åœ°ç­‰å¾…çº¢ç»¿ç¯æ—¶ï¼Œæœ‰ä¸ªè·¯äººè·Ÿæˆ‘è¯´è¿™é‡Œçš„ä¿¡å·ç¯åæ‰äº†:) å‡ºè¡Œæ­£æ˜¯å› ä¸ºæ„å¤–æ›´åŠ ç‹¬ç‰¹ï¼Œå¶é‡çš„å°çŒ«ï¼Œå¯»å¸¸çš„å°å··ï¼Œå¼¹å”±çš„è¡—å¤´è‰ºæœ¯å®¶ï¼Œé£æ—‹çš„æµ·é¸¥ï¼Œè“è“ç»¿ç»¿çš„å†…æ¸¯ã€‚</p><p>ä¸è¿‡æˆ‘ä»æœ‰çƒ¦æ¼çš„é—®é¢˜ã€‚æˆ‘æƒ³åšä»€ä¹ˆï¼Ÿæˆ‘è¯¥æ€ä¹ˆåšï¼Ÿç¿»äº†ä¸€ä¸ªåšå®¢çš„ transcripts åæˆ‘æœ‰äº†ç­”æ¡ˆï¼Œæˆ‘åªéœ€è¦å»åšå°±å¯ä»¥äº†ã€‚é€ƒé¿çŠ¯é”™è€Œä¸å»åšå°±æ˜¯ä»€ä¹ˆéƒ½æ²¡åšã€‚è€Œæˆ‘ä»¬åšçš„æ¯ä¸€ä¸ªé€‰æ‹©å’Œå†³å®šéƒ½å¡‘é€ äº†ç°åœ¨çš„è‡ªå·±ï¼Œæˆä¸ºç°å®çš„ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥ä¸è¦é€ƒé¿åšå‡ºé€‰æ‹©å’ŒçœŸå®çš„è‡ªæˆ‘äº†ã€‚</p><p>Takeaways<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>:</p><ol><li>iterations of teaching: say like taking 10 hours to create one hour of content. When teaching someone else, you realize your gaps in knowledge. Then go back to basics.</li><li>pre: the source of content is the code not slides. We are building a story out of it.</li><li>need <u>10,000 hours to become an expert</u></li><li>general advice for beginners:<ul><li>â€œFocus on just the amount of work youâ€™re spending on a thing. Compare yourself only to yourself, not to others.â€</li><li>how to pick the thing? Find Max(interest of things) for a thing and stick with it.</li></ul></li><li>answer: artificial intelligence only takes one property from biological intelligence which is the form of neural networks. Artificial neural networks share nothing else with biological nerual networks. It simply does compression and composed of mathematical formations and many knobs to tweak.</li><li>transformer: attention is all you need. Transformer is one form of neural networks.</li><li>definition of reasoning: information processing and generalization</li><li>consciousness = modeling insight (?) : â€œin my mind, consciousness is not a special thing you will figure out and bolt on. I think itâ€™s an emerging phenomenon of a large enough and complex enough generative model sort of. So, if you have a complex enough world model that understands the world, then it also understands its predicament in the world as being a language model, which to me is a form of consciousness or self-awareness.â€</li><li>books/textbooks/papers: books sometimes are high-level abstraction of abstractions and general consumption. Textbooks take one layer down to the details. But for new areas, textbooks are often outdated. Thatâ€™s where we read papers in those areas. At least abstract and introducation is readable, even for laymen. Then read from Appendix.</li></ol><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>From Lex Fridman Podcast: <a href="https://podcasts.apple.com/us/podcast/333-andrej-karpathy-tesla-ai-self-driving-optimus-aliens/id1434243584?i=1000584342757">#333</a> â€“ Andrej Karpathy: Tesla AI, Self-Driving, Optimus, Aliens, and AGI, Oct 29, 2022. <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å·¥ä½œä¸€å¹´ä½™æ‚æƒ³</title>
      <link href="/sg/2025/03/05/diary_march/"/>
      <url>/sg/2025/03/05/diary_march/</url>
      
        <content type="html"><![CDATA[<p>å¥½åƒä¸€çœ¨çœ¼çš„æ—¶é—´å°±ä»æ¯•ä¸šåˆ°äº†ç°åœ¨ï¼Œåšå¥½äº†ä¸€äº›äº‹ï¼Œåšåäº†ä¸€äº›äº‹ï¼Œæ‹–å»¶äº†ä¸€äº›äº‹ã€‚ç”Ÿæ´»çš„è¿›åº¦åœ¨å»¶ç»­ç€ï¼Œæˆ‘æˆ–è®¸ä¹Ÿåœ¨å‘ç”Ÿç€å˜åŒ–ã€‚Imposter syndrome çš„æ„Ÿè§‰æ—¶æ–­æ—¶ç»­ï¼Œæœ‰æ—¶è§‰å¾—è‡ªå·±ç°åœ¨ä»€ä¹ˆéƒ½èƒ½åšï¼Œä½†åˆåœ¨é‡åˆ°ä¸€äº›è´¹è§£çš„é—®é¢˜æ—¶æ€€ç–‘å“ªé‡Œä¸å¯¹ã€‚</p><p>ä¸€æœˆåˆæ—¶è¿˜åœç•™åœ¨ï¼šæ”¶å°¾ä¸€ä¸ªæ´»å debugging èƒ½åŠ›åˆæé«˜äº†ä¸€ç‚¹ã€‚è¢«æ‹‰å»å¹²è¿™ä¸ªæ´»å‰ï¼Œæˆ‘è¿˜åœ¨æƒ³ rcu æˆ‘éƒ½å¿˜å¾—å·®ä¸å¤šäº†æ€ä¹ˆæ”¹ï¼Œblock layer çš„ä¸œè¥¿æˆ‘ä¹Ÿåªæ˜¯çŸ¥é“ä¸€ç‚¹ç‚¹ã€‚ä½†æ”¹å®Œè¿‡ååˆè§‰å¾—æ²¡é‚£ä¹ˆéš¾ï¼Œé‡åˆ°äº†ä¸€äº›éš¾é¢˜ï¼Œç„¶åèŠ±æ—¶é—´æ‰¾åˆ°è§£å†³æ–¹æ³•ã€‚æ¯”èµ·åˆšå®ä¹ æ—¶ï¼Œæˆ‘çš„ç¼–ç¨‹èƒ½åŠ›å·²ç»æ›´æ–°äº†ä¸€ä¸ª level äº†ã€‚</p><p>è€Œæœ€è¿‘æœ‰ä¸ª bug ä¹Ÿæ˜¯æ‰¾äº†å¾ˆä¹…æ‰åœ¨ç»„é•¿çš„æç¤ºä¸‹æ„è¯†åˆ°é—®é¢˜ã€‚ä¸€èˆ¬ bug ä» error å¾€å‰å›æº¯ root cause æ˜¯å¾ˆå¸¸è§çš„æ–¹æ³•ï¼Œä½†æ˜¯ kernel trace å ç€å‡ å±‚ layers of abstraction åˆ°æŸä¸ªç‚¹å°±è¿·å¤±äº†:( æ¯æ¬¡è°ƒä»£ç æ€»æ—¶ä¸æ—¶é‡åˆ°æŸä¸ªä»¥ä¸ºå®Œå…¨æ²¡é—®é¢˜çš„åœ°æ–¹æ‰æ˜¯å‡ºé”™çš„é‚£ä¸ªç‚¹ï¼Œmental model ä»ä¸€å¼€å§‹å°±é”™äº†æ–¹å‘ã€‚è¿™æ¬¡çš„ bug ä¹Ÿæ˜¯ï¼Œåªæœ‰é‚£ä¸ªåœ°æ–¹æˆ‘æ²¡æœ‰ä»”ç»†æŸ¥è¿‡ï¼Œæƒ³ç€ scatter list è¿™æ ·çš„ç”¨æ³•å®Œå…¨æ­£ç¡®ã€‚ç”±äºæˆ‘è¿˜åœ¨çœ‹çœ‹ç»†èŠ‚ï¼Œä¹‹åå†å†™ç¯‡æ–‡ç»†è¯´ã€‚</p><p>è¿˜æœ‰ä¸ªæœ‰ç‚¹è´¹è§£çš„æ´»æ˜¯ Encryption at Rest toolingï¼Œä»ä¸€å¼€å§‹å°±å¾ˆè¿·æƒ‘ã€‚Security æ˜¯æˆ‘å¤§å­¦æœŸé—´å‡ ä¹æ²¡æœ‰æ¶‰çŒçš„éƒ¨åˆ†ï¼Œä¸å¤ªæ„Ÿå…´è¶£å°±åªæ˜¯æµ…æµ…çœ‹äº†ä¸€èŠ‚ encryption ä»‹ç»çš„è¯¾ã€‚ä½†åœ¨å’ŒåŒäº‹äº¤æµå’Œè‡ªå·±çé¼“æ£åï¼Œç»§ç»­å’ŒåŒäº‹äº¤æµï¼Œä»Šå¤©ç»ˆäºæœ‰ç‚¹æ‡‚äº†è¿™ä¸ªæ´»åœ¨å¹²ä»€ä¹ˆçš„æ„Ÿæ‚Ÿã€‚</p><p>Programming å’Œ engineering æ˜¯ä¸åŒçš„æ–¹é¢ï¼Œç°åœ¨æˆ‘åœ¨ engineering çš„å±‚é¢è¿˜å®è·µå¾—ä¸å¤Ÿå¤šã€‚æ¯”è¾ƒè‹¦æ¼çš„é—®é¢˜æ˜¯ debugging concurrent programsï¼Œç¨ä¸æ³¨æ„å°±æ˜¯ä¸€ä¸ª race conditionã€‚ä¹Ÿæ˜¯ä¸€ä¸ªéœ€è¦æ·±å…¥ç»ƒä¹ çš„éƒ¨åˆ†ã€‚</p><blockquote><p>To be a good developer, you need to be more than just a programmer, you need to be an engineer - you have to discuss, plan, predict, design, evaluate and re-design; you have to think. Engineering is about solving problems, thinking deeply about every aspect of a system and figuring out the best way of doing things. That is the part of development I love, and the part I consider art<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>.</p></blockquote><p>æˆ‘æœ€è¿‘æ„Ÿå…´è¶£çš„è¯é¢˜æ˜¯ä» engineering çš„è§’åº¦çœ‹ LLMã€‚å¯¹ç»Ÿè®¡å­¦ä¸æ„Ÿå…´è¶£ï¼Œè·³è¿‡è¿™éƒ¨åˆ†ï¼Œä¼šä¸»è¦è·Ÿç€å­¦ Andrej Karpathy æ”¾åœ¨ç½‘ä¸Šçš„è¯¾ç¨‹å’Œé¡¹ç›®ã€‚çœ‹åˆ° Andrej çš„ä¸€ä¸ªæ¼”è®²é‡Œåˆè®²åˆ°10000å°æ—¶ç†è®ºï¼Œè¿™ä¸ªæˆ‘ä»¬å·²ç»å¾ˆç†Ÿæ‚‰äº†ã€‚å¦‚æœæ¯å¤©æŠ•å…¥8å°æ—¶åœ¨ä¸€ä»¶äº‹ä¸Šï¼Œ3-4å¹´å°±å¯ä»¥æˆä¸ºä¸€åä¸“å®¶ã€‚è¿™æ®µæ—¶é—´ä¹ŸåŒ…å«äº†èµ°å¼¯è·¯å’ŒçŠ¯é”™ã€‚å…´è¶£æ˜¯æœ€å¥½çš„è€å¸ˆï¼Œåªè¦åœ¨æ„Ÿå…´è¶£çš„æ–¹å‘ä¸ŠåšæŒä¸‹å»å°±å¥½äº†ã€‚</p><ul><li>If you want to do sth seriously, do it for 10000 hours.</li><li>Donâ€™t compare to others. Compare yourself to you from, like say, a year ago.</li></ul><p>åœ¨å¾·å›½ç”Ÿæ´»äº†ä¸€å¹´å¤šåï¼Œä¹Ÿä¼šæœ‰æƒ³æ¢ä¸€ä¸ªå›½å®¶çš„æ—¶åˆ»ã€‚æ¼«é•¿çš„é•¿è¾¾äº”ä¸ªæœˆçš„å†¬å¤©ä¼´éšç€ç°æš—çš„æ²¡æœ‰æ—¥å…‰çš„æ—¥å­ï¼Œç´§ç¼ºçš„åŒ»ç–—èµ„æºï¼Œç»å¸¸ä¸å‡†æ—¶çš„å¾·é“å’Œå…¬äº¤ï¼Œç¨é«˜ç‰©ä»·é«˜ï¼Œå¤©ç„¶å­˜åœ¨çš„æ·±æ·±çš„æ–‡åŒ–éš”é˜‚ï¼Œå³ç¿¼æ”¿å…šä¸çŸ¥ä½•æ—¶ä¼šæŠ¬å¤´ï¼Œéš¾å­¦çš„å¾·è¯­å’Œä½æ•ˆçš„å®˜åƒšæœºæ„ã€‚ä½†åœ¨è¿™å‡ å¤©é˜³å…‰çš„ç…§è€€ä¸‹ï¼Œé‚£äº›çƒ¦æ¼å¥½åƒè¢«å¹æ•£äº†ã€‚è½æ—¥ä¸æ™šéœï¼Œæ˜¯æœ€å¹³å¸¸ä¸è¿‡çš„æ™¯è±¡ï¼Œè€Œäººä»¬éƒ½æœ‰æ—¶é—´å»æ¬£èµã€‚ä»Šå¤©åœ¨å›å®¶çš„è·¯ä¸Šï¼Œæ¡¥ä¸Šåˆèšé›†èµ·äº†å¾ˆå¤šäººæˆ–åæˆ–å€šåœ¨ä¸¤ä¾§ï¼Œç­‰å¾…ç€å¤œå¹•ä½å‚ã€‚</p><p>æ—¶é—´å’Œè‡ªç”±å¯èƒ½æ˜¯åœ¨å¾·å›½å¸¸æœ‰è€Œå›½å†…ç¼ºä¹çš„ä¸œè¥¿ã€‚ä¸Šä¸ªæœˆæˆ‘åŠå¥½äº†æ—¥æœ¬çš„æ—…æ¸¸ç­¾è¯ï¼Œæ¯”èµ·åœ¨ä¸‰å¹´å‰åŠæŠ¤ç…§çš„è‰°éš¾å’Œå°è¯•åŠæ—¥ç­¾çš„å¤±è´¥ï¼Œè¿™æ¬¡å¾ˆé¡ºåˆ©å¾—å°±é€šè¿‡äº†ã€‚èµ°å‡ºä½¿é¦†ï¼ŒåŠ¨ç‰©å›­çš„ç†ŠçŒ«æ——å­æ™ƒæ™ƒæ‚ æ‚ ï¼Œä»¿ä½›è¿˜æ˜¯åœ¨æˆéƒ½ä¸€æ ·ã€‚</p><p>æœ‰ç‚¹æƒ³å¿µç§‹å¤©çš„æ¡‚èŠ±ã€‚</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://thesquareplanet.com/blog/coding-is-boring-engineering-isnt/">https://thesquareplanet.com/blog/coding-is-boring-engineering-isnt/</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Word Power Made Easy Cheat Sheets 1</title>
      <link href="/sg/2025/02/01/eng_wpme1/"/>
      <url>/sg/2025/02/01/eng_wpme1/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#session-1-personality-types">SESSION 1: personality types</a></li><li><a href="#session-14-liars-and-lying">SESSION 14: liars and lying</a></li><li><a href="#session-20-actions">SESSION 20: actions</a></li><li><a href="#session-24-speech-habits">SESSION 24: speech habits</a></li><li><a href="#session-28-insult-your-enemies">SESSION 28: insult your enemies</a></li><li><a href="#session-32-flatter-your-friends">SESSION 32: flatter your friends</a></li><li><a href="#session-39-common-phenomena-and-occurrences">SESSION 39: common phenomena and occurrences</a></li><li><a href="#session-42-what-goes-on">SESSION 42: what goes on</a></li><li><a href="#session-45-personal-characteristics">SESSION 45: personal characteristics</a></li></ul><!-- tocstop --></div><p>ä»è¯­è¨€å­¦ä¹ çš„è§’åº¦ï¼Œæˆ‘ä»¬åœ¨é‡åˆ°ä¸è®¤è¯†çš„æ±‰å­—æ—¶ä¼šâ€œè®¤å­—è®¤åŠè¾¹â€ï¼Œè€Œè¿™åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ä¹Ÿå¤Ÿç”¨äº†ã€‚çœ‹åˆ°è±¡å½¢å­—çŒœå®ƒçš„è¯»éŸ³å¯ä»¥è®¤è¯†åˆ°æ±‰å­—çš„ç»“æ„ï¼Œåæ—éƒ¨é¦–ã€‚é‚£ä¹ˆè‹±è¯­ä¼¼ä¹ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œå½“é‡åˆ°ä¸€ä¸ªç”Ÿè¯ï¼Œè¯æ ¹è¯ç¼€å°±ç›¸å½“äºæ±‰å­—çš„åæ—éƒ¨é¦–ã€‚ä½†åœ¨è®°å¿†å•è¯æ—¶ï¼Œæˆ‘è®¤è¯†çš„è¯æ ¹è¯ç¼€å®åœ¨æ˜¯æœ‰é™ã€‚æ›¾ç»ä¹Ÿä¹°è¿‡è®²è¯æ ¹è¯ç¼€çš„ä¹¦ï¼Œä½†éƒ½åªæ˜¯æ—©æ—©æŸä¹‹é«˜é˜ã€‚æ¯•ç«ŸèƒŒä¸ªåæ—éƒ¨é¦–æ˜¯å¾ˆçƒ¦èºæ— èŠçš„äº‹ã€‚è¿™æœ¬ä¹¦è™½ç„¶ä¹Ÿæ˜¯åœ¨å¸®åŠ©è®²è¯æ ¹è¯ç¼€ï¼Œä½†ç”¨æ•…äº‹ï¼ˆå¤§æ¦‚ç®—æ˜¯ï¼Ÿï¼‰ç©¿èµ·æ¥æ˜¯é¢‡æœ‰æ„æ€çš„ã€‚æœ¬æ–‡é€šè¿‡å›¾ç‰‡åˆ—ä¸¾å‡ºäº†å„ä¸ªç« èŠ‚çš„å•è¯ï¼ŒèƒŒåçš„åŸå› æ˜¯æ–¹ä¾¿æˆ‘æŸ¥å•è¯ï¼šï¼‰</p><h3><span id="session-1-personality-types">SESSION 1: personality types</span><a href="#session-1-personality-types" class="header-anchor">Â¶</a></h3><img src="/sg/2025/02/01/eng_wpme1/IMG_8019.jpeg" class title="IMG_8019"><h3><span id="session-14-liars-and-lying">SESSION 14: liars and lying</span><a href="#session-14-liars-and-lying" class="header-anchor">Â¶</a></h3><img src="/sg/2025/02/01/eng_wpme1/IMG_8014.jpeg" class title="IMG_8014"><img src="/sg/2025/02/01/eng_wpme1/IMG_8015.jpeg" class title="IMG_8015"><h3><span id="session-20-actions">SESSION 20: actions</span><a href="#session-20-actions" class="header-anchor">Â¶</a></h3><img src="/sg/2025/02/01/eng_wpme1/IMG_8016.jpeg" class title="IMG_8016"><img src="/sg/2025/02/01/eng_wpme1/IMG_8017.jpeg" class title="IMG_8017"><img src="/sg/2025/02/01/eng_wpme1/IMG_8018.jpeg" class title="IMG_8018"><h3><span id="session-24-speech-habits">SESSION 24: speech habits</span><a href="#session-24-speech-habits" class="header-anchor">Â¶</a></h3><img src="/sg/2025/02/01/eng_wpme1/IMG_8024.jpeg" class title="IMG_8024"><img src="/sg/2025/02/01/eng_wpme1/IMG_8026.jpeg" class title="IMG_8026"><h3><span id="session-28-insult-your-enemies">SESSION 28: insult your enemies</span><a href="#session-28-insult-your-enemies" class="header-anchor">Â¶</a></h3><img src="/sg/2025/02/01/eng_wpme1/IMG_8023.jpeg" class title="IMG_8023"><img src="/sg/2025/02/01/eng_wpme1/IMG_8022.jpeg" class title="IMG_8022"><img src="/sg/2025/02/01/eng_wpme1/IMG_8021.jpeg" class title="IMG_8021"><img src="/sg/2025/02/01/eng_wpme1/IMG_8034.jpeg" class title="IMG_8034"><h3><span id="session-32-flatter-your-friends">SESSION 32: flatter your friends</span><a href="#session-32-flatter-your-friends" class="header-anchor">Â¶</a></h3><img src="/sg/2025/02/01/eng_wpme1/IMG_8039.jpeg" class title="IMG_8039"><img src="/sg/2025/02/01/eng_wpme1/IMG_8040.jpeg" class title="IMG_8040"><img src="/sg/2025/02/01/eng_wpme1/IMG_8041.jpeg" class title="IMG_8041"><img src="/sg/2025/02/01/eng_wpme1/IMG_8042.jpeg" class title="IMG_8042"><h3><span id="session-39-common-phenomena-and-occurrences">SESSION 39: common phenomena and occurrences</span><a href="#session-39-common-phenomena-and-occurrences" class="header-anchor">Â¶</a></h3><img src="/sg/2025/02/01/eng_wpme1/IMG_8051.jpeg" class title="IMG_8051"><img src="/sg/2025/02/01/eng_wpme1/IMG_8052.jpeg" class title="IMG_8052"><img src="/sg/2025/02/01/eng_wpme1/IMG_8053.jpeg" class title="IMG_8053"><img src="/sg/2025/02/01/eng_wpme1/IMG_8054.jpeg" class title="IMG_8054"><h3><span id="session-42-what-goes-on">SESSION 42: what goes on</span><a href="#session-42-what-goes-on" class="header-anchor">Â¶</a></h3><img src="/sg/2025/02/01/eng_wpme1/IMG_8055.jpeg" class title="IMG_8055"><img src="/sg/2025/02/01/eng_wpme1/IMG_8056.jpeg" class title="IMG_8056"><h3><span id="session-45-personal-characteristics">SESSION 45: personal characteristics</span><a href="#session-45-personal-characteristics" class="header-anchor">Â¶</a></h3><img src="/sg/2025/02/01/eng_wpme1/IMG_8057.jpeg" class title="IMG_8057"><img src="/sg/2025/02/01/eng_wpme1/IMG_8058.jpeg" class title="IMG_8058">]]></content>
      
      
      <categories>
          
          <category> study </category>
          
          <category> English </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>German Phonetic Alphabet</title>
      <link href="/sg/2025/01/26/ger_phonetics/"/>
      <url>/sg/2025/01/26/ger_phonetics/</url>
      
        <content type="html"><![CDATA[<img src="/sg/2025/01/26/ger_phonetics/IMG_7954.jpeg" class title="IMG_7954"><img src="/sg/2025/01/26/ger_phonetics/IMG_7955.jpeg" class title="IMG_7955"><img src="/sg/2025/01/26/ger_phonetics/IMG_7956.jpeg" class title="IMG_7956">]]></content>
      
      
      <categories>
          
          <category> study </category>
          
          <category> German </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>2024 Year-end Review</title>
      <link href="/sg/2024/12/20/2024/"/>
      <url>/sg/2024/12/20/2024/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#moments">Moments</a><ul><li><a href="#january">January</a></li><li><a href="#february">February</a></li><li><a href="#march">March</a></li><li><a href="#april">April</a></li><li><a href="#may">May</a></li><li><a href="#june">June</a></li><li><a href="#october">October</a></li><li><a href="#december">December</a></li></ul></li><li><a href="#games">Games</a></li></ul><!-- tocstop --></div><p>One year has passed since my arrival in Germany. This year brought many firsts â€“ my first time living abroad, visiting dentists, exploring European cities, speaking basic German words, and meeting an online friend in person. Iâ€™ve settled into a long-term apartment, completed my probation period, and attended a developer conference. The worries I had last year have faded away, and Iâ€™ve found a sense of peace in my heart.</p><p>Although I didnâ€™t spend much time on open courses this year, I managed to complete the Paxos Lab 3A. Iâ€™ve realized how much my system programming skills have grown since I started studying operating systems four years ago. Back then, I would struggle to understand lab assignments even after reading the materials multiple times. Now I can grasp the concepts and implement solutions â€“ it just takes time to turn my ideas into code. Iâ€™ve gained confidence to achieve things I once thought impossible. Yet, I sometimes wonder if Iâ€™ll be able to overcome the challenges that lie ahead. Will I continue to grow and adapt?</p><p>The AI era has begun. The capabilities and potential of AI will inevitably affect everyday life and industries. Itâ€™s unpredictable how people will find their place in this rapidly changing world. I experimented with Claude to implement a vacation-planner tool, and it created a version that met my basic requirements. It still has limitations â€“ inconsistent responses, recurring coding errors, and challenges in fully aligning with human intent. Nevertheless, I believe it will evolve into a more intelligent version where everyone can implement their ideas without deep programming knowledge. Still, understanding the fundamental principles remains valuable for building complex projects. Andrej Karpathy wrote <a href="https://karpathy.github.io/2015/11/14/ai/">a short AI story</a> where â€œshapersâ€ â€“ a new type of professional â€“ would assist AI agents in solving human-intelligence tasks. It will be fascinating to see how super-intelligent AI ultimately develops.</p><p>About the relationship aspect, I finally resolved the emotional issue that had bothered me for years. It was a relief to talk straightforwardly to her about all the feelings I had when we were very young. Going through this helped me discover who I really am. Though itâ€™s still difficult to look back at my old self struggling during those years, Iâ€™ve stopped hiding the past and moved on. I told her I would visit Iceland after graduation, and Iâ€™m glad I kept my word.</p><p>Speaking German was challenging for me, even with simple words. I was hesitant due to my lack of prior knowledge of the language. This changed after meeting with a friend who taught me some basic phrases, like how to say â€œpay by card,â€ â€œpay in cash,â€ and â€œthank you.â€ Thatâ€™s all Iâ€™ve got for now :) I plan to start learning German more seriously and aim to reach the B1 level next year.</p><p>In the end, I would like to thank my friends and parents for their companionship, understanding, and support.</p><h2><span id="moments">Moments</span><a href="#moments" class="header-anchor">Â¶</a></h2><h3><span id="january">January</span><a href="#january" class="header-anchor">Â¶</a></h3><img src="/sg/2024/12/20/2024/IMG_3056.jpeg" class title="IMG_3056"><h3><span id="february">February</span><a href="#february" class="header-anchor">Â¶</a></h3><img src="/sg/2024/12/20/2024/IMG_3328.jpeg" class title="IMG_3328"><h3><span id="march">March</span><a href="#march" class="header-anchor">Â¶</a></h3><img src="/sg/2024/12/20/2024/IMG_3493.jpeg" class title="IMG_3493"><h3><span id="april">April</span><a href="#april" class="header-anchor">Â¶</a></h3><img src="/sg/2024/12/20/2024/IMG_3811.jpeg" class title="IMG_3811"><h3><span id="may">May</span><a href="#may" class="header-anchor">Â¶</a></h3><img src="/sg/2024/12/20/2024/IMG_4275.jpeg" class title="IMG_4275"><h3><span id="june">June</span><a href="#june" class="header-anchor">Â¶</a></h3><img src="/sg/2024/12/20/2024/IMG_5115.jpeg" class title="IMG_5115"><h3><span id="october">October</span><a href="#october" class="header-anchor">Â¶</a></h3><img src="/sg/2024/12/20/2024/IMG_7039.jpeg" class title="IMG_7039"><h3><span id="december">December</span><a href="#december" class="header-anchor">Â¶</a></h3><img src="/sg/2024/12/20/2024/IMG_7461.jpeg" class title="IMG_7461"><h2><span id="games">Games</span><a href="#games" class="header-anchor">Â¶</a></h2><p>I bought an Xbox earlier this year, and my main game console has shifted from the Switch to the Xbox. I have to admit that gaming has become somewhat boring for me now, though it remains a good way to relax. I even talked a friend into playing video games.</p><p><em>Baldurâ€™s Gate 3</em>: âœ… Great game. Completed the mainline story.</p><p><em>Persona 3 Reload</em>: Good game, though some female character portrayals made me uncomfortable.</p><p><em>Citizen Sleeper</em>: âœ… Decent game with well-structured gameplay.</p><p><em>Fallout 4</em>: Good game. Strong storytelling, but the constant combat became repetitive.</p><p><em>Assassinâ€™s Creed Odyssey</em>: âœ… Enjoyable overall, apart from the naval battles.</p><p><em>Mount &amp; Blade II: Bannerlord</em>: Decent game. It can explore the map faster than the warband.</p><img src="/sg/2024/12/20/2024/IMG_7594.jpeg" class title="IMG_7594"><hr><p>2025 resolution:</p><ul class="task-list"><li class="task-list-item"><p><input type="checkbox" id="cbx_0" disabled="true"><label for="cbx_0"> German A1</label></p></li><li class="task-list-item"><p><input type="checkbox" id="cbx_1" disabled="true"><label for="cbx_1"> Finish sys track</label></p></li><li class="task-list-item"><p><input type="checkbox" id="cbx_2" disabled="true"><label for="cbx_2"> Travel in Japan</label></p></li><li class="task-list-item"><p><input type="checkbox" id="cbx_3" disabled="true"><label for="cbx_3"> PR (prep)</label></p></li><li class="task-list-item"><p><input type="checkbox" id="cbx_4" checked="true" disabled="true"><label for="cbx_4"> Read 4 books</label></p></li><li class="task-list-item"><p><input type="checkbox" id="cbx_5" disabled="true"><label for="cbx_5"> Join in open source conferences</label></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Awakened in Vienna</title>
      <link href="/sg/2024/09/29/24_plumbers/"/>
      <url>/sg/2024/09/29/24_plumbers/</url>
      
        <content type="html"><![CDATA[<p>I had the opportunity to attend Linux Plumbers in Vienna this year, and it was great to finally meet Stefan and Damien in person after two years since my internship project began. It reminded me of something I had long forgottenâ€”the desire to learn and change. Ever since I started working full-time and settling into a new city, Iâ€™ve been busy finding a long-term apartment, getting through the probation period, applying for a residence card, and so on. During my free time, I would explore new places and enjoy the diverse cultural vibes. I found a sense of serenity in my everyday life by watching leaves fall or simply walking to the office. Now, itâ€™s time to move forward.</p><p>During the conference, I was engulfed in numerous sessions and slides, with many questions arising both before and after. To be honest, I didnâ€™t fully understand several topics, as they seemed quite distant from what Iâ€™ve been working on. But I know things will become clearer after gaining a few more years of experience.</p><p>I also take my first step towards overcoming my fear of public speaking. I gave a short talk about one of my past projects, but it derailed when my mind went blank halfway through. In the end, I had to read from the script I had prepared beforehand to continue the presentation. Itâ€™s okay to failâ€”I just need more practice. I was really touched that Stefan and Damien encouraged me afterward, just like they did when I first started working on open-source projects and felt lost about the direction of my career. My manager was also supportive and understanding. Iâ€™m starting to learn what leadership truly isâ€”pulling people together.</p><p>Itâ€™s very dangerous to work on a project in an enclosed environment. Thatâ€™s why communication and exchanging ideas are so important. Even though Iâ€™m an introvert, I find it fascinating how the gathering of opensource people shared all sorts of things, from work projects to conference experiences. Itâ€™s one of few times when I am not afraid of being in a group. When people asked about my current project, I struggled to deliver the right message. I found myself saying things like, â€œIt serves as the transportation layer of Cephâ€ or â€œIt distributes IOs to many servers.â€ While these statements are true, they lacked key details. After returning to work, I realized a more accurate description is: itâ€™s a kernel module that distributes and replicates data over a block-based storage cluster. Besides, I need to look into more design ideas and similar projects so I can gain a better grasp of the overall architecture and possible scenarios of failures or bottlenecks.</p><p>Outside of the conference, it was pleasant to stroll through the city, soaking in the architecture and the vibrant atmosphere of everyday life.</p><img src="/sg/2024/09/29/24_plumbers/IMG_6632.jpeg" class title="IMG_6632"><img src="/sg/2024/09/29/24_plumbers/IMG_6669.JPG" class title="IMG_6669"><p>The museums and galleries were well worth visiting, offering fresh perspectives on a variety of subjects. It was my first time seeing paintings by Monet, whose impressionist artwork I love. Though, I was a bit disappointed to find only two of his paintings at the Albertina.</p><img src="/sg/2024/09/29/24_plumbers/IMG_6658.jpeg" class title="IMG_6658">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Adding Metadata Persistence to a Storage Cluster</title>
      <link href="/sg/2024/09/09/wk_debugging_md/"/>
      <url>/sg/2024/09/09/wk_debugging_md/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#design">Design</a><ul><li><a href="#flush-methods">Flush methods</a></li><li><a href="#synchronization-policy">Synchronization policy</a></li><li><a href="#fancy-data-structures">Fancy data structures?</a></li></ul></li><li><a href="#development">Development</a></li><li><a href="#debugging">Debugging</a><ul><li><a href="#reference-count">Reference count</a></li><li><a href="#fio-verify-bad-header">Fio_verify: bad header</a></li><li><a href="#work-queue-mechanism">Work_queue mechanism</a></li><li><a href="#submit-bio-wait-err">Submit_bio_wait err</a></li><li><a href="#reconnection-timeout-crashes">Reconnection timeout/crashes</a></li></ul></li></ul><!-- tocstop --></div><p>In recent months, Iâ€™ve worked on adding metadata persistence to an internal project. Excluding the details of codes, Iâ€™d like to review the methods I took when testing and debugging. System programming is intricate. It happens that taking hours of search leads to one line of code that causes the error. The kernel back traces generated may be far from the original cause. Or perhaps thatâ€™s just me, making some silly mistakes of mismatched units or freeing the wrong pointer. There is one kind of mistakes that is easy to overlook: the one that I think is correct.</p><p>The goal is to persist the metadata of many servers. In the design phase of that task, I had many meetings with my manager to discuss what, how and why. Weâ€™ve looked into two open-source projects for inspiration which are <code>/dev/md</code> and <code>drbd</code>. Iâ€™ll briefly discussed some topics I find it interesting.</p><h2><span id="design">Design</span><a href="#design" class="header-anchor">Â¶</a></h2><p>In the very beginning, we were thinking about where, what to store, state machine, cache policy, organization/layout of metadata and failures to handleâ€¦ Above all, we would like to achieve strong consistency on the metadata and handle split brain case where network partition splits the communication in half.</p><p>Availability and redundancy are important components of system design. The request on the VM is not completed when it failed on some servers. While submitting a request, a server is down, decreasing the availability of the system. When a machine is crashed and if every server stores one copy at that machine, the redundancy of the system also goes down by one.</p><h3><span id="flush-methods">Flush methods</span><a href="#flush-methods" class="header-anchor">Â¶</a></h3><ol><li><p>Does (10 times of 4KB + 1000 times of 32B) or (1010 times of (4KB+32B)) perform better when they are written back to disk?</p><p>If we break space into two parts, one of them will be updated immediately while the other will wait for a certain time window. The answer is that the discrepancy on performance is not that big. The interface of this project is designed in a way to pass on the data buffer to the block layer. The argument to decide is the transfer size of md IOs.</p></li><li><p>(one write IO + one md IO) or (several write IOs + one md IO)?</p></li><li><p>When to flush? Drbd syncs the activity log prior to the failure point. <code>/dev/md</code> syncs per time window. The time window of flushing metadata will be the most consistency that the project can reserve.</p></li></ol><p>Drbd flushes a certain area (hot area). Activity log is to track recent data blocks that are written to. To ensure a quick recovery, the activity log gets synced first. Then the data blocks that expires from the AL (updated in the bitmap) get synced afterwards.</p><p>When data is written, and if the block is no longer in the AL, it is marked in the bitmap as it requires synchronization. Drbd has the primary and backup nodes. It does synchronization in the background  in the event of the node failure. The synchronization in this case means to get synced from other nodes that is in the consistent state.</p><h3><span id="synchronization-policy">Synchronization policy</span><a href="#synchronization-policy" class="header-anchor">Â¶</a></h3><p>Having a little understanding of the context, we know the key to metadata persistence is synchronization.</p><p>(v8.1) Drbd uses timers to periodically do regular jobs like resyncs and writes. The metadata is stored at either the end of the device or a separate file.</p><ul><li>When it makes a resync request, it checks if there are still application IOs going on this area and completes IOs then.</li><li>The data blocks tracked in the activity log can be transferred to bitmap and wait for synchronization.</li><li>When the metadata is marked as dirty, it does md_sync to flush the metadata part to disk.</li></ul><p>(v9.1)</p><ul><li><p>Why many active extents in the AL can reduce metadata writes?</p><p>Active extents are regions in the AL that are currently being written to. Each active extent can track a range of blocks. The AL uses active extents to track recent writes in memory. If there are more active extents, the fewer inactive extents are written at disk therefore it reduces metadata writes. The active extent becomes inactive when there are no new IOs written in after a period. An old extent on the disk gets activated in failure cases.</p></li><li><p>How to address this issue?</p><p>Drbd periodically flushes the inactive extents to disk. If the secondary machine crashes, the AL will be lost along with its active extents. Then in data recovery, it has to activate the old extent that is on the disk. But the data of those active extents which havenâ€™t been flushed to disk will be lost.</p><p>Data Loss Window: There is an inherent risk of losing the most recent writes that were only tracked in the in-memory AL and not yet flushed to disk.</p></li></ul><h3><span id="fancy-data-structures">Fancy data structures?</span><a href="#fancy-data-structures" class="header-anchor">Â¶</a></h3><p>What data structures can be used for this task? Should we consider b+ tree, log-structured merged tree? At the current stage, simple structures are enough.</p><h2><span id="development">Development</span><a href="#development" class="header-anchor">Â¶</a></h2><p>Tips:</p><ol><li><p>Avoid premature optimizations: when working on the first version, we can omit the edge cases (failure cases) if they are not sorted out yet. That will also boost up the process of developing.</p></li><li><p>Speed up the development process until the regression tests pass. Do the cleanup work after passing the regression tests.</p></li></ol><p>The first thing I did after most of the code is done is testing for basic correctness. Change some states and see whether it persists. Then I cleaned up the code which turned out to be unnecessary since a few errors showed up after running the regression tests.</p><h2><span id="debugging">Debugging</span><a href="#debugging" class="header-anchor">Â¶</a></h2><p>The process of debugging also strengthens my understanding of this project and trains my debugging skills through finding every root cause of the error. Letâ€™s say the chain of clues is A-&gt;B-&gt;C-&gt;D-&gt;E, itâ€™s evident to track A when the back traces are complete. But our job is to track A even without B, C and D. When I have no clue on a certain issue, a tip that a friend once taught me works well. The tip is binary search debugging. Knowing a project prior to the commit c1 is bug-free, break the remaining changes into two and test each part. Iterate this process unless the root cause is identified. It doesnâ€™t have to be exactly in half. Just pick out the suspicious part and run the tests. With a little more patience, weâ€™ll find the reason eventually.</p><h3><span id="reference-count">Reference count</span><a href="#reference-count" class="header-anchor">Â¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">percpu ref (xxxxx) &lt;= 0 (-15) after switching to atomic.</span><br></pre></td></tr></table></figure><blockquote><p>Reference counting is used by the kernel to know when a data structure is unused and can be disposed of. Most of the time, reference counts are represented by an <code>atomic_t</code> variable, perhaps wrapped by a structure like a <code>kref</code>. If references are added and removed frequently over an objectâ€™s lifetime, though, that <code>atomic_t</code> variable can become a performance bottleneck.<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p></blockquote><p>The core idea is to have a counter which is incremented whenever a new reference is taken and decremented when a reference is released. When this counter reaches zero any resources used by the object (such as the memory used to store it) can be freed.</p><p>The reference count issues are usually caused by mismatched put_ref() and get_ref(). It can be traced back to one extra operation or racing conditions. Firstly, reproduce the issue and add reference printing. Secondly, we need to check the code containing reference operations for the extra operation. It could be one get_ref() with two put_ref() at some point. For example, two duplicate returned paths which both call put_ref() while the input path calls get_ref() once. Learned from my manager, all of that has to be checked by reading the code, doing dry runs, and building sequence of execution steps on paper or in head.</p><h3><span id="fio-verify-bad-header">Fio_verify: bad header</span><a href="#fio-verify-bad-header" class="header-anchor">Â¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">verify: bad header offset 366080, wanted 361984 at file /dev/xxx offset 361984, length 512</span><br></pre></td></tr></table></figure><p>Fio_verify verifies whether the original input is stored properly on the storage. The server may have partial data. If something changes the offset of IOs, the data wonâ€™t be stored at the intended location, leading to the bad header error on fio_verify.</p><h3><span id="work-queue-mechanism">Work_queue mechanism</span><a href="#work-queue-mechanism" class="header-anchor">Â¶</a></h3><p>A case is a work queue appears where it should be destroyed. The first step is to check if the work queue get canceled. When itâ€™s certain, we can check the conditions of canceling the work queue and reason the issue.</p><h3><span id="submit-bio-wait-err">Submit_bio_wait err</span><a href="#submit-bio-wait-err" class="header-anchor">Â¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[  162.458257] brd_submit_bio: bv offset 2729 len 1367 sector size 512</span><br><span class="line">(...</span><br><span class="line">[  162.473539] brd_submit_bio: bv offset 0 len 2729 sector size 512</span><br><span class="line">...)</span><br><span class="line">[  162.458682] ------------[ cut here ]------------</span><br><span class="line">[  162.458980] WARNING: CPU: 5 PID: 708 at drivers/block/brd.c:303 brd_submit_bio.cold.14+0x106/0x143 [brd]</span><br><span class="line">...</span><br><span class="line">[  162.461362] Hardware name: QEMU Standard PC (i440FX + PIIX, 1996), BIOS 1.12.0-1 04/01/2014</span><br><span class="line">...</span><br><span class="line">[  162.462263] RIP: 0010:brd_submit_bio.cold.14+0x106/0x143 [brd]</span><br><span class="line">...</span><br><span class="line">[  162.468286] Call Trace:</span><br><span class="line">[  162.468444]  submit_bio_noacct+0xfb/0x410</span><br><span class="line">[  162.468717]  submit_bio+0x43/0x190</span><br><span class="line">[  162.468938]  ? printk+0x58/0x73</span><br><span class="line">[  162.469144]  submit_bio_wait+0x54/0xb0</span><br><span class="line">...</span><br><span class="line">[  162.473244] ---[ end trace 1cca44a5ad63415c ]---</span><br></pre></td></tr></table></figure><p>This error is hard to solve because the offset and length of IOs are correct and no explicit errors show up. With the help of my manager, we found that the problem comes from the test script that uses ram devices as the block backend. After switching to SCSI disks, the kernel warning is gone since it no longer goes through that path.</p><p>We still need to find out how bio submission works for /dev/sda. Itâ€™s likely handled by QEMU virtio-blk or SCSI pass-through and submitted to the host kernel.</p><h3><span id="reconnection-timeout-crashes">Reconnection timeout/crashes</span><a href="#reconnection-timeout-crashes" class="header-anchor">Â¶</a></h3><p>The most difficult issue Iâ€™ve met during the debugging for md persistence is constant reconnection timeout which affects several tests. When one server has reconnection timeout and shortly crashes afterwards, itâ€™s hard to track whatâ€™s going on exactly.</p><p>The first thing is to find the back traces in this very short time window right before the server crashes. There are several back traces but none of them seems to relate to the md persistence part. That is the case where only E is visible but B, C, an D are missing. I made few fixes to see if the back traces change only to get new back traces suggesting that the module outside incurs kernel warnings, which makes this issue even harder to reason. I had been going around in circles on that, running a few tests and getting no useful results.</p><p>Itâ€™s the time that I decided to apply binary search debugging. At first I left the md_sync part out and tested for the rest part which passed. Then I knew the issue must be inside the md_sync part but itâ€™s still hundreds of the lines. The md_sync part can be divided into four parts. By commenting out each part and testing separately, I finally found which part and looked into that line by line.</p><p>Even though I was sure itâ€™s the part p that results to the issue, it still looked far-fetched to drag connection from p to the issue. The back traces showed no information related to p and the logic of the p looked correct. Where could go wrong? After staring at the code for a long time, it occurred to me that the buffer pointer was changed and the wrong pointer was taken to free. Case closed.</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://lwn.net/Articles/557478/">https://lwn.net/Articles/557478/</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> OCW </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘çš„è”šè“æµ·å²¸</title>
      <link href="/sg/2024/09/01/travel_iceland_summer/"/>
      <url>/sg/2024/09/01/travel_iceland_summer/</url>
      
        <content type="html"><![CDATA[<p>è¸©ç€å¤å¤©çš„å°¾å·´æ¥åˆ°äº†å†°å²›ï¼Œæˆ‘æ›¾æƒ³è±¡è¿‡å¥¹çš„æ ·å­ï¼Œä½†ç›´åˆ°è§åˆ°æ‰å‘ç°æˆ‘æ‰€æƒ³è±¡çš„ä¸è¿‡æ˜¯å†°å±±ä¸€è§’ã€‚æˆ‘åœ¨è¿™é‡Œæ‰¾å›äº†ä¸€äº›åœ¨é•¿å¤§ä¸­å¤±å»çš„ä¸œè¥¿ï¼Œé‡åˆ°äº†ä¸€äº›æ—…è¡Œçš„åŒä¼´ï¼Œä¹Ÿä¼šæ„Ÿå—åˆ°å­¤ç‹¬ä½†ä¸æ˜¯å¾ˆæ‚²ä¼¤ã€‚ç¬¬ä¸€æ¬¡åœ¨äººç¾¤ä¸­æ„Ÿåˆ°å®‰å…¨ï¼Œæƒ³ç»§ç»­å¾…ç€è¿™é‡Œï¼Œè€Œä¸æ˜¯é€ƒè·‘ã€‚åœ¨æ—…è¡Œçš„ä¸€å‘¨é‡Œï¼Œæˆ‘ä»€ä¹ˆéƒ½æ²¡æœ‰æƒ³ï¼Œåªæ˜¯æ”¾ç©ºåœ¨ç©ºæ—·çš„åŸé‡é‡Œã€‚</p><div class="toc"><!-- toc --><ul><li><a href="#d1-reykjavik">D1: âœˆï¸ ReykjavÃ­k</a></li><li><a href="#d2-culture-night">D2: Culture Night</a></li><li><a href="#d3-the-south-coast">D3: The South Coast</a></li><li><a href="#d4-snaefellsnes">D4: SnÃ¦fellsnes</a></li><li><a href="#d5-museums">D5: Museums</a></li><li><a href="#d6-bookstore-and-bands">D6: Bookstore and Bands</a></li><li><a href="#d7-highland">D7: Highland</a></li></ul><!-- tocstop --></div><h3><span id="d1-reykjavik">D1: âœˆï¸ ReykjavÃ­k</span><a href="#d1-reykjavik" class="header-anchor">Â¶</a></h3><p>ReykjavÃ­k [ËˆreiËcaËŒviËk] ä¸­çš„ Reykja æ˜¯ smoky bay çš„æ„æ€ï¼Œvik æ˜¯æŒ‡ bayã€‚å†°å²›æœ‰éå¸¸å¤šçš„åœ°çƒ­èµ„æºï¼Œè¿™äº›å†’ç€çš„çƒŸå…¶å®æ˜¯æ¸©æ³‰å†’å‡ºçš„è’¸æ±½ã€‚åˆšåˆ°é›·å¸‚çš„ç¬¬ä¸€å¤©æˆ‘å°±å¿«è¢«æµ·é£å¹å€’äº†ï¼Œä½çš„æ—…èˆç¦»æµ·å²¸çº¿æ¯”è¾ƒè¿‘ï¼Œæˆ‘å‡ ä¹æ˜¯é€†ç€é£å¾€æµ·è¾¹èµ°ï¼Œç«Ÿç„¶ä¸€çœ¼å°±çœ‹åˆ°ç¾¤å±±ä½ä¼åœ¨å¯¹å²¸ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5530.jpeg" class title="IMG_5530"><h3><span id="d2-culture-night">D2: Culture Night</span><a href="#d2-culture-night" class="header-anchor">Â¶</a></h3><p>æ—¶å·®å…³ç³»æˆ‘äº”ç‚¹å°±é†’äº†ï¼Œç¨å¾®æ¸…é†’äº›åå°±æ‰“ç®—å‡ºå»èµ°èµ°ã€‚ä¸€æŠ¬çœ¼å°±çœ‹åˆ°äº†ä¸€æœµé˜´å½±äº‘ï¼ˆè‡ªå·±çå–çš„åï¼‰ï¼Œè™½ç„¶èº«ä½“åœ¨é˜´å½±é‡Œï¼Œä½†è¾¹ç¼˜æ³›çº¢ã€‚æˆ‘è·Ÿç€è¿™æœµäº‘ä¸€ç›´èµ°ï¼Œè¯¯æ‰“è¯¯æ’æ¥åˆ°äº†æµ·å²¸æ—çš„è‰åœ°ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5538.jpeg" class title="IMG_5538"><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5557.jpeg" class title="IMG_5557"><p>æ­¤æ—¶æ­£å¥½ä¸ƒç‚¹ï¼Œåªæœ‰æˆ‘ä¸€ä¸ªäººç«™åœ¨è¿™é‡Œï¼Œè€Œå¤ªé˜³ä»äº‘å±‚é‡Œé’»å‡ºï¼Œç‚¹äº®äº†è¿™åº§åŸå¸‚ã€‚éå¸¸å¤šçš„æµ·é¸Ÿç©¿æ¢­åœ¨æµ·è¾¹ï¼ŒæµªèŠ±ä¸é‚£ä¹ˆçŒ›çƒˆåœ°æ‹å‡»ç€æµ·å²¸ã€‚æœ‰å±±æœ‰æµ·ï¼Œæœ‰äº‘æœ‰å¤ªé˜³ï¼Œè¿™å°±æ˜¯æˆ‘ç†æƒ³ä¸­çš„ç”»é¢ã€‚æ‰€è°“æˆ‘ä¹‹æ—¥å‡ºï¼Œæ˜¯æˆ‘çœ‹åˆ°å¤ªé˜³å‡èµ·çš„æ—¶åˆ»ã€‚è¿™ä¸ªæ—¶åˆ»æˆ‘ä¼šä¸€ç›´è®°å¾—ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5553.JPG" class title="IMG_5553"><p>å›å¤´å¯ä»¥çœ‹åˆ°æ•™å ‚åœ¨å…‰çº¿ä¸‹ä¹Ÿç† ç† ç”Ÿè¾‰ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5573.jpeg" class title="IMG_5573"><p>æ–‡åŒ–ä¹‹å¤œæ˜¯é›·å¸‚æ¯”è¾ƒç››å¤§çš„èŠ‚æ—¥ä¹‹ä¸€ã€‚æˆ‘æœ¬æ‰“ç®—å»çœ‹ä¸€ä¸ªç”»å±•ä½†ä¼¼ä¹æ€»æ²¡æœ‰èµ°å¯¹åœ°æ–¹ï¼Œäºæ˜¯å°±åªåœ¨å¸‚åŒºé€›äº†é€›ã€‚ä¸Šåˆå°±å¼€å§‹æœ‰é©¬æ‹‰æ¾é€‰æ‰‹åœ¨å‡†å¤‡äº†ï¼Œå‚èµ›è€…è€äººï¼Œå°‘å¹´ï¼Œé’å¹´éƒ½æœ‰ã€‚ä¸€ç›´åˆ°äº†ä¸‹åˆä¸¤ç‚¹å¤šè¿˜åœ¨è·‘ï¼Œä¸æ—¶æœ‰è·¯äººé¼“æŒæ¿€åŠ±é€‰æ‰‹ç»§ç»­å‘å‰ã€‚æ¯èµ°ä¸€æ®µè·¯å°±ä¼šæ’è§æœ‰è¡—å¤´ä¹é˜Ÿåœ¨æ¼”å‡ºï¼Œè®©æˆ‘æƒ³èµ·äº†åšå¾·ä¹‹é—¨ 3 çš„ä¹é˜Ÿæ¼”å‡ºï¼Œå‘¨å›´ä¹Ÿæ˜¯æœ‰ç¾¤ä¼—è§‚å¬é¼“æŒï¼Œåªæ˜¯æ²¡äººæ´’é‡‘å¸å°±æ˜¯äº†ã€‚åœ¨è‰åœ°éŸ³ä¹ä¼šå¿«è¦ç»“æŸå‰çš„ä¸‰ååˆ†é’Ÿï¼Œæˆ‘ç»ˆäºæ¥åˆ°äº†ç°åœºã€‚ä»è¿™é‡Œå¼€å§‹æˆ‘å°±è§‰å¾—å†°å²›çš„ vibe å¾ˆç‹¬ç‰¹å’Œæœ‰å¸å¼•åŠ›ã€‚è¿™ä¸ªåœºæ™¯ç«Ÿç„¶å’Œæˆ‘åœ¨é«˜ä¸­æ—¶çœ‹çš„å‰§é‡Œä¸€äº›å†°å²›ç‰‡æ®µæ‰€æè¿°çš„ä¸€æ¨¡ä¸€æ ·ã€‚äººä»¬éšç€ä¹é˜Ÿè€Œæ‹æ‰‹ï¼ŒèˆåŠ¨ï¼Œå°½æƒ…äº«å—åœ¨éŸ³ä¹çš„æ—‹å¾‹é‡Œã€‚è€Œåœ¨èµ°å›æ—…ç¤¾çš„åŠé€”ï¼ŒçƒŸèŠ±å¦‚æœŸå“èµ·ï¼Œç‚¹äº®äº†åŸå¸‚çš„å¦ä¸€è§’ã€‚æˆ‘å°¤å…¶å–œæ¬¢çœ‹åˆ°çƒŸèŠ±ç‡ƒå°½æ—¶çš„åœºæ™¯ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5677.jpeg" class title="IMG_5677"><h3><span id="d3-the-south-coast">D3: The South Coast</span><a href="#d3-the-south-coast" class="header-anchor">Â¶</a></h3><p>åˆ°äº†å†°å²›åæ‰å‘ç°è¿™é‡Œçš„ç€‘å¸ƒéå¸¸å¤šã€‚å†°å²›æ²¡æœ‰ç«è½¦åœ°é“ï¼Œä¸»è¦å‡ºè¡Œæ–¹å¼å°±æ˜¯å…¬äº¤è½¦å’Œæ±½è½¦ã€‚æˆ‘æŠ¥çš„éƒ½æ˜¯ bus travel çš„å•äººå›¢ï¼Œä½“éªŒéå¸¸å¥½ã€‚æ¯ä¸ªè½¦éƒ½ä¼šæœ‰å¯¼æ¸¸ï¼Œä¼šæ²¿è·¯ä»‹ç»è®²è§£æ²¿è·¯çš„åœ°ç†åœ°è´¨ï¼Œæˆ–è€…ä¸€äº›ä¼ å¥‡å°æ•…äº‹ã€‚å¯ä»¥çœ‹å‡ºæ¥ä»–ä»¬ä¸ä»…ä¸“ä¸šï¼Œè€Œä¸”éå¸¸çƒ­çˆ±è¿™ç‰‡åœŸåœ°ã€‚Daniel æ˜¯æˆ‘ä»¬å—å²¸ä¹‹è¡Œçš„å¯¼æ¸¸ï¼Œåœ¨ä»‹ç»é»‘å†°å·æ—¶æåˆ°è¿™é‡Œçš„å†°å·åœ¨å‡ åå¹´å‰æ˜¯ä¸€ç›´å»¶ä¼¸åˆ°å…¬è·¯æ—çš„ï¼Œä½†ç”±äºå…¨çƒå˜æš–å’Œäººç±»æ´»åŠ¨å·²ç»èç¼©åˆ°ç°åœ¨çš„ç¨‹åº¦ã€‚é»‘è‰²çš„åœ°æ–¹å…¶å®æ˜¯è£¸éœ²å‡ºçš„å²©çŸ³ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5786.jpeg" class title="IMG_5786"><p>æ²¿é€”è§åˆ°ä¸å°‘ç€‘å¸ƒï¼Œè¿™ä¸ªç€‘å¸ƒæœ‰æ„æ€çš„åœ°æ–¹æ˜¯å¯ä»¥ä»åé¢ç©¿è¿‡å»ï¼Œåªæ˜¯ä»ï¼ˆç…§ç‰‡ï¼‰å·¦ä¾§ä¸‹æ¥æ—¶æƒ³ä¸è¢«æ°´æµæ·‹åˆ°æ˜¯ä¸å¤ªå¯èƒ½çš„ã€‚æˆ‘å½“æ—¶å’Œå¶é‡çš„ä¸¤ä¸ªæ—…å®¢ä¸€èµ·ç©¿è¡Œå‡ºæ¥ï¼Œè¡£æœé˜²æ°´çš„æ²¡äº‹ï¼Œä½†è£¤å­ä¸¤ä¾§ç•¥æœ‰é­æ®ƒã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5864.jpeg" class title="IMG_5864"><p>åœ¨å›é›·å¸‚çš„è·¯ä¸Šç»è¿‡è¿™å„¿æ—¶æˆ‘æƒ³åˆ°äº†å¡å°”è¾¾å’ŒæŒ‡ç¯ç‹ã€‚è¿ç»µçš„ç¾¤å±±ï¼Œä¸€æœ›æ— é™…çš„åŸé‡å’Œè‰åœ°ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5871.jpeg" class title="IMG_5871"><p>æ™šä¸Šç»•åˆ°æµ·å²¸çªç„¶è¢«çœ¼å‰çš„åœºæ™¯æ‰“åŠ¨åˆ°äº†ï¼Œå¥½å­¤ç‹¬çš„ç”»é¢ã€‚ä»è¿™å„¿ä¸€ç›´èµ°åˆ°äº†ç¾æœ¯é¦†é™„è¿‘ï¼Œå¬åˆ°ä¸€é¦–æ­Œ will you remember me by Nicky Lee.</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5874.jpeg" class title="IMG_5874"><h3><span id="d4-snaefellsnes">D4: SnÃ¦fellsnes</span><a href="#d4-snaefellsnes" class="header-anchor">Â¶</a></h3><p>å¯¼æ¸¸çš„é£æ ¼å¯ä»¥ä¸¥é‡å½±å“åˆ°æ—…é€”ä½“éªŒã€‚æˆ‘å‚åŠ çš„å°å›¢æ¸¸é‡Œå…¶ä»–äººåœ¨ä¹‹å‰çš„æ—…é€”é‡Œå·²ç»ç†Ÿè¯†äº†ï¼Œè¿™ç‚¹æˆ‘åœ¨æ—…é€”å¿«è¦ç»“æŸæ—¶æ‰çŸ¥é“ğŸ˜…ã€‚è¿™æ—¥å¯¼æ¸¸ Siggi çš„ç‰¹ç‚¹å°±æ˜¯å¾ˆéšæ€§è‡ªç„¶ï¼Œè¡Œç¨‹å¹¶ä¸å®Œå…¨éµå¾ªç€è·¯çº¿è€Œæ˜¯æƒ³åˆ°/çœ‹åˆ°æœ‰ä»€ä¹ˆå€¼å¾—ä¸€å»çš„åœ°æ–¹å°±ä¼šå¸¦æˆ‘ä»¬å‰å»ä¸€çœ‹ã€‚</p><p>æ¥åˆ°è¿™ç‰‡æµ·æ»©åŸæœ¬æ˜¯ä¸ºäº†çœ‹æµ·è±¹ï¼Œä½†æˆ‘è§‰å¾—æ›´æœ‰æ„æ€çš„æ˜¯è·³çŸ³å­ã€‚ä¸çŸ¥é“è¿‡äº†æœ‰å¤šä¹…æˆ‘æ²¡æœ‰è¿™æ ·éå¸¸è‡ªç”±æ´»æ³¼çš„æ—¶å…‰äº†ï¼Œæˆ–è®¸è¿˜æ˜¯åœ¨åˆä¸­æ—¶æ‰æœ‰åŒæ ·çš„å¿ƒæƒ…ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5942.jpeg" class title="IMG_5942"> <p>è·¯ä¸Šä¾ç„¶å¯ä»¥é‡è§åˆ°å¤„éƒ½æ˜¯çš„å°ç¾Šã€‚Siggi æœ‰ä¸ªä¹ æƒ¯æ˜¯åœ¨ç»è¿‡ sheep gate ï¼ˆå…¬è·¯ä¸Šçš„å‡é€Ÿå¸¦ï¼Ÿï¼‰æ—¶ä¼šå­¦ç¾Šå«ï¼Œä»–ä¹Ÿé¼“åŠ±æ—…å®¢ä¸€èµ·ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5945.jpeg" class title="IMG_5945"><p>ç¬¬äºŒä¸ªå¾ˆæœ‰æ„æ€çš„æ´»åŠ¨æ˜¯èµ°è¿›å±±é—´è£‚ç¼ã€‚è£‚ç¼å¤„æœ‰ä¸€æ¡ç€‘å¸ƒé¡ºç€æµä¸‹æ¥ï¼Œäººä»¬å¯ä»¥è¸©ç€çŸ³å¤´ä¸€ç›´å¾€é‡Œèµ°ã€‚å¾€ä¸Šçœ‹æ˜¯ä¸€æ¡ç‹­ç¼ã€‚Siggi å¸¦ç€æˆ‘ä»¬ï¼Œç›´åˆ°ä¸€å—æ¯”è¾ƒé«˜çš„çŸ³å¤´ï¼Œæˆ‘ä¼°è®¡è‡ªå·±è…¿çŸ­è·¨ä¸ä¸Šå»ï¼Œå’Œä¸Šé¢çš„è·¯äººæ‘†æ‘†æ‰‹è¡¨ç¤ºæˆ‘ä¸ä¸Šå»äº†ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5963.jpeg" class title="IMG_5963"><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5969.jpeg" class title="IMG_5969"><p>ä¹‹å‰éƒ½åªæ˜¯è¿œè¿œæœ›ç€é›ªå±±ï¼Œå®é™…ä¸Šæ˜¯ç«å±± + ice capã€‚Siggi å¼€è¿‘äº†åŠå±±è…°è¿‘è·ç¦»çœ‹è¿™åº§é›ªå±±ã€‚ä»è¿™é‡Œçœ‹è¿œæ–¹å¤§æµ·çš„åœºæ™¯ä¹Ÿæ˜¯å¾ˆéœ‡æ’¼çš„ï¼Œå°¤å…¶æ˜¯ç«™åœ¨å³­çŸ³ä¸Šï¼Œåˆšåˆšç»è¿‡çš„åœ°æ–¹æ— é™ç¼©å°å‡ºç°åœ¨èº«å‰ï¼ŒåŠå²›ä¼¼æœ‰ä¼¼æ— çš„è¾¹é™…ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5986.jpeg" class title="IMG_5986"><img src="/sg/2024/09/01/travel_iceland_summer/IMG_5990.jpeg" class title="IMG_5990"><p>èµ°åˆ° Hellnar çš„æµ·å²¸æ—¶ï¼Œçœ‹åˆ°å¤§æµ·çš„è¾¹é™…çº¿æ¯”æµ·æ°´ä¼šæ›´è“ä¸€åº¦ã€‚æˆ‘æƒ³è¿™å°±æ˜¯æˆ‘çš„è”šè“æµ·å²¸äº†ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_6009.jpeg" class title="IMG_6009"><p>ä¹‹åè¿˜å»äº†å¾ˆå¤šæ™¯ç‚¹ï¼Œåœ¨ç»è¿‡è‰å¸½å±±é™„è¿‘æ—¶ï¼Œæˆ‘çŒ›ç„¶æƒ³åˆ°äº† Hobbit: an unexpected journeyã€‚è¿™å‘¨å›´çš„æ™¯è‰²åŠ åœ¨ä¸€èµ·æ˜¯å¦‚æ­¤å’Œè°ï¼Œç›¸æœºå¾ˆéš¾æ‹å‡ºè¿™æ ·è‡ªç„¶çš„ç»„åˆã€‚</p><h3><span id="d5-museums">D5: Museums</span><a href="#d5-museums" class="header-anchor">Â¶</a></h3><p>å¤©æ°”ä¸ç®—å¤ªå¥½çš„æ—¶å€™æˆ‘éƒ½å¾…åœ¨é›·å¸‚ï¼Œè¿™å¤©æˆ‘ç”¨ city card é€›äº†ä¸‰ä¸ªåšç‰©é¦†ã€‚ç¬¬ä¸€ä¸ªä¸»è¦è®²çš„æ˜¯åŸå¸‚å‘å±•çš„å†å²ï¼Œçœ‹åˆ°ä¸€äº›å†å²ä¸Šå­˜åœ¨çš„ä¸å…¬æ­£çš„æ³•å¾‹åˆ¤ä¾‹ï¼Œä¸€ä¸ªç©·å°å­ç”±äºé£Ÿä¸æœè…¹å·äº†äº›åƒçš„è¢«åˆ¤æˆä¸­ç­‰é­åˆ‘ã€‚æœ‰æ®µæ—¶æœŸç›‘ç‹±æ˜¯ç”·å¥³æ··ä½çš„ï¼Œè¿™å°±é€ æˆç›‘ç‹±ç”Ÿå­çš„æƒ…å†µï¼Œæ³•å¾‹åˆ¤å®šå¥³æ–¹çš„è´£ä»»æ›´å¤§ï¼Œé™¤éæœ‰äººå¯ä»¥å¨¶å¥¹æ‰èƒ½å…é™¤åˆ‘ç½šã€‚</p><p>ç¬¬äºŒä¸‰ä¸ªéƒ½æ˜¯ç¾æœ¯åšç‰©é¦†ã€‚ä»–ä»¬æœ‰äº›è¡¨è¾¾è‰ºæœ¯çš„æ–¹å¼å¥½æŠ½è±¡ï¼Œä½¿ç”¨çš„åª’ä»‹ä¹Ÿæœ‰äº›æ„æƒ³ä¸åˆ°ã€‚æœ‰ä¸€ä¸ªæˆ‘èƒ½çœ‹æ‡‚ä¸”è§‰å¾—æœ‰æ„æ€çš„æ˜¯å«åš Loop çš„ä¸€ä¸ªå±•ã€‚ç€‘å¸ƒä¸å†æ˜¯ç«–ç€å€¾æ³»è€Œä¸‹ï¼Œè€Œæ˜¯å˜æˆæ¨ªç€ã€‚ä¸åŒåœ°æ–¹çš„ç€‘å¸ƒè¢«ç­‰æ¯”ä¾‹ç»„åˆæˆä¸€ä¸ªåœˆï¼Œæ’æ»¡æ•´ä¸ªæˆ¿é—´ã€‚</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_6483.jpeg" class title="IMG_6483"><h3><span id="d6-bookstore-and-bands">D6: Bookstore and Bands</span><a href="#d6-bookstore-and-bands" class="header-anchor">Â¶</a></h3><p>æ‰¾äº†å®¶ä¹¦åº—ä¹°å®Œæ˜ä¿¡ç‰‡å’Œé‚®ç¥¨åå°±å¼€å§‹å†™ï¼Œå½“æ—¶æ¸©å’Œçš„é˜³å…‰ç¨å¾®æ‰“åœ¨çº¸é¡µä¸Šï¼Œæˆ‘å®‰é™çš„çœ‹ç€æ–‡å­—è·ƒåŠ¨åœ¨å…‰å½±ä¹‹é—´ã€‚</p><p>æ™šä¸Šå’Œæœ‰ç¼˜æ—…å®¢ä¸€èµ·å»äº†ä¹¦å±‹é…’å§å¬ä¹é˜Ÿï¼Œç«Ÿç„¶å¬åˆ°äº†ä»æ—§æ˜¯é«˜ä¸­é‚£éƒ¨å‰§çš„ä¸»é¢˜æ›² - whatâ€™s upã€‚æˆ‘è®°å¾—å½“æ—¶åœ¨æƒ³è‡ªå·±è™½ç„¶åå…«å²ä½†å¿ƒç†å¹´é¾„å·²ç»ä¸‰åå²äº†ã€‚</p><h3><span id="d7-highland">D7: Highland</span><a href="#d7-highland" class="header-anchor">Â¶</a></h3><p>è™½ç„¶èº«ä½“ä¸ç®—å¤ªèˆ’æœï¼Œè¢«æµ·é£å¹æ„Ÿå†’äº†ï¼Œä½†æˆ‘å¾ˆåº†å¹¸æœ€åè¿˜æ˜¯å»äº†é«˜åœ°ã€‚</p><p>ç©¿è¶Šæ— äººåŒºï¼š</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_6202.jpeg" class title="IMG_6202"><p>é«˜åœ°å¾’æ­¥ 4å°æ—¶ï¼š</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_6228.jpeg" class title="IMG_6228"><p>å®Œå…¨å€¼å¾—ï¼</p><img src="/sg/2024/09/01/travel_iceland_summer/IMG_6269.jpeg" class title="IMG_6269"><p>ï¼ˆæœ‰ç‚¹å›°äº†ï¼Œä¹‹åæˆ–è®¸ä¼šæœ‰è¡¥å……ï¼šï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>6.046 distributed algorithms</title>
      <link href="/sg/2024/04/16/6.046_da/"/>
      <url>/sg/2024/04/16/6.046_da/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#terms">Terms</a></li><li><a href="#synchronous">Synchronous</a><ul><li><a href="#leader-election">Leader election</a></li></ul></li></ul><!-- tocstop --></div><p>One purpose of this blog is to explain distributed algorithms in plain words :) as I find the lecture slides are somewhat mathematical to myself.</p><h2><span id="terms">Terms</span><a href="#terms" class="header-anchor">Â¶</a></h2><ol><li>Distributed algorithms are algorithms that run on networked processors or on multiprocessors that share memory.</li><li>Two common models are covered in this lecture, asyn/sync distributed computing models</li><li>Config: Distributed networks are represented by an undirected connected graph G = (V, E). A node represents vertex/process. An edge represents communication channel. Assume no failures.</li><li>A clique network: all vertices are directly connected to all others.</li></ol><h2><span id="synchronous">Synchronous</span><a href="#synchronous" class="header-anchor">Â¶</a></h2><h3><span id="leader-election">Leader election</span><a href="#leader-election" class="header-anchor">Â¶</a></h3><p>A leader acts as the coordinator of servers. First try to use algorithms composed of deterministic, indistinguishable processes to choose a leader. The professor give a theorem which proves it will never work. Then we move to algorithms composed of randomness and distinguishable processes (UID, unique identifiers) to break symmetry.</p><ul><li><p>(symmetry -&gt; asymmetry): deterministic =&gt; randomness, indistinguishable processes =&gt; UIDs</p><img src="/sg/2024/04/16/6.046_da/Screenshot-0887738.png" class title="Screenshot-0887738"></li></ul>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
          <category> 6.046 algorithms design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Go 101</title>
      <link href="/sg/2024/03/17/go_101/"/>
      <url>/sg/2024/03/17/go_101/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#intro">Intro</a><ul><li><a href="#common-bugs">common bugs</a></li><li><a href="#debugging">debugging</a></li><li><a href="#syntax">syntax</a></li></ul></li><li><a href="#threads">Threads</a></li><li><a href="#rpc">RPC</a></li></ul><!-- tocstop --></div><p>Go basics</p><p>Following a tour of go, the notes are taken at this link: <a href="https://github.com/sgzerolc/go101">https://github.com/sgzerolc/go101</a></p><ol><li><p>Types</p><p>Character sets: ASCII: 0-127; Unicode defines code point.</p><p>UTF-8 encoding: English remains the same. The char under 128 takes up one byte. Only char &gt;=128 will take &gt;= 2 bytes.</p><p>The problem is how many bytes should a char consume? To interpret a string, we need to know how it is encoded first. Go uses UTF-8 encoding.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">bool</span></span><br><span class="line"><span class="type">string</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span>  <span class="type">int8</span>  <span class="type">int16</span>  <span class="type">int32</span>  <span class="type">int64</span></span><br><span class="line"><span class="type">uint</span> <span class="type">uint8</span> <span class="type">uint16</span> <span class="type">uint32</span> <span class="type">uint64</span> <span class="type">uintptr</span></span><br><span class="line"></span><br><span class="line"><span class="type">byte</span> <span class="comment">// alias for uint8</span></span><br><span class="line"><span class="type">rune</span> <span class="comment">// alias for int32; represents a Unicode code point</span></span><br><span class="line"><span class="type">float32</span> <span class="type">float64</span></span><br><span class="line"><span class="type">complex64</span> <span class="type">complex128</span></span><br></pre></td></tr></table></figure><p><code>fmt.Printf()</code> prints the string, while <code>fmt.Sprintf()</code> creates a string and returns it.</p></li><li><p>style: naming, go uses camel style while c uses snake style.</p></li><li><p>const: <code>iota</code>, Greek letter (9th), representing incremental values. When it is used, it simplifies the creation of incrementing values.</p></li><li><p><code>defer</code>: last-in-first-out order. Execute after return before control is returned to the caller.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">    mu.Lock()</span><br><span class="line">    <span class="keyword">defer</span> mu.Unlock()</span><br><span class="line">    <span class="comment">// modifies data</span></span><br><span class="line">&#125;()</span><br></pre></td></tr></table></figure></li></ol><p>References:</p><ol><li><a href="https://go.dev/doc/tutorial/getting-started">go tutorial</a>, a tour of go, <a href="https://gobyexample.com/">gobyexample</a></li><li><a href="https://go.dev/doc/code">how to write go code</a>, <a href="https://go.dev/ref/mem">memory model</a></li><li><a href="http://nil.csail.mit.edu/6.824/2022/notes/l-rpc.txt">http://nil.csail.mit.edu/6.824/2022/notes/l-rpc.txt</a></li></ol><h2><span id="intro">Intro</span><a href="#intro" class="header-anchor">Â¶</a></h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">go</span> build xx.<span class="keyword">go</span></span><br><span class="line"><span class="keyword">go</span> run xx.<span class="keyword">go</span></span><br><span class="line"><span class="keyword">go</span> test -run singleTest</span><br></pre></td></tr></table></figure><ol><li>Go is better than C++ in a way of <strong>threads (goroutines)</strong> and garbage collection.</li><li>The go runtime executes goroutines on all available cores in parallel. If the cores are less than runnable goroutines, the runtime will <u>pre-emptively time-share</u> the cores among threads.</li><li>Channels, queue-like synchronization primitive, are <u>synchronized</u> between many threads. It means that some goroutine should be waiting when a goroutine sends a message on the channel. At a high level, consider a channel as a struct holding a buffer and a lock.</li><li>Goâ€™s sync.Cond, conditional variables.</li><li>Goâ€™s select</li><li>sync.WaitGroup: waits for multiple threads to finish.</li><li>Do a periotic task: time.Sleep()</li><li>The view of performance on threads:<ul><li>how many threads can be run in parallel? If the machine has 16 cores, then itâ€™s 16 threads (goroutines).</li><li>how many threads are needed to take up the full capacity of one service? (100/(100*0.1) = 10 threads)</li></ul></li><li>Channels only work within one program. RPC allows talking to other programs over the internet.</li><li>A slice contains a pointer to an array, a start and end index to the array. It is more flexible than go array.</li><li>Printf is a common debugging tool.</li><li>synchronous RPC calls vs asynchronous RPC calls<ul><li>It depends which one and when needs the reply. When the reply is needed to proceed, use synchronous calls. However, in a server-client model, the client can launch many RPCs by asynchronous calls, giving the client has other tasks on its plate or the connection to server is broken from time to time.</li><li>Send one RPC without waiting for the result: create a goroutine and have it make a synchronous call to wait.</li></ul></li><li>Go has generics for what c++ style inheritance support.</li><li>A mutex in a struct cannot be made a value receiver.  The mutex is copied and loses its purpose.</li><li>DRF-SC: data-race-free programs execute in a sequentially consistent manner.</li><li>Donâ€™t write infinite loops</li><li>select and timeout: select must send or receive values from channels.</li><li>Goroutines: when a function creates a goroutine and returns, the goroutine will continue running. Goroutines run independently of the function that created them. They will only stop when:<ul><li>The goroutineâ€™s function completes execution</li><li>The entire program exits</li><li>The goroutine is explicitly stopped</li></ul></li></ol><p>Go memory model: -&gt; How to write threaded code?</p><blockquote><p>The Go memory model specifies the conditions under which reads of a variable in one goroutine can be guaranteed to observe values produced by writes to the same variable in a different goroutine.</p></blockquote><p>It means to serialize a program that modifies data accessed by multiple goroutines using synchronization primitives.</p><p><em>synchronized before</em>:  Cond arranges that a call to [Cond.Broadcast] or [Cond.Signal] â€œsynchronizes beforeâ€ any Wait call that it unblocks.</p><p>The relation A <em>happens before</em> B: B observes what A has observed. â€œAll code after B must be able to observe everything up to A.â€</p><h3><span id="common-bugs">common bugs</span><a href="#common-bugs" class="header-anchor">Â¶</a></h3><ol><li><p>i of a closure references outer i which has been mutated</p></li><li><p>WaitGroup is reused before previous Wait has returned in multiple go routines</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line">   wg:=sync.WaitGroup&#123;&#125;</span><br><span class="line">   <span class="keyword">go</span> funcfile2(&amp;wg)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>the initialization statement is only executed <strong>once</strong> before the loop starts.</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line"><span class="comment">// Initialization statement runs only once</span></span><br><span class="line"><span class="keyword">for</span> s, val := check(); s != <span class="number">1</span>; &#123;</span><br><span class="line">fmt.Println(<span class="string">&quot;Inside loop:&quot;</span>, s, val)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Update the loop variable manually (or it would be an infinite loop)</span></span><br><span class="line">s++</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>When using rpc, encode a struct (such as a mutex) which has no exported fields. Unexported fields (starting with lowercase) are private to the package where they are defined.</p></li><li><p>xx</p></li></ol><h3><span id="debugging">debugging</span><a href="#debugging" class="header-anchor">Â¶</a></h3><ol><li><p>Printf: Use DPrintf in util.go. Can put in test_test.go to see the phase of the test<br>ex: DPrintf(â€œTESTACTION: leader disconnectsâ€)</p></li><li><p>use <code>-race</code> to help detect data races</p></li><li><p><code>SIGQUIT</code>: the default SIGQUIT handler for Go prints stack traces for allgoroutines (and then exits)</p><p><code>Ctrl+\</code> will send SIGQUIT to current process</p></li><li><p>Dealing with leaking goroutines</p><ul><li><p>use <code>ps</code> to see the running processes</p></li><li><p>send SIGQUIT or SIGKILL using <code>kill -QUIT pid</code> or <code>kill -KILL pid</code></p></li></ul></li><li><p>parallel: running tests in parallel makes it easier to find concurrency bugs</p></li></ol><h3><span id="syntax">syntax</span><a href="#syntax" class="header-anchor">Â¶</a></h3><ol><li>The <code>...</code> is Goâ€™s variadic parameter syntax - it allows a function to take a variable number of arguments.</li><li>x</li></ol><h2><span id="threads">Threads</span><a href="#threads" class="header-anchor">Â¶</a></h2><ol><li><p>per-thread state: program counter, stack, registers, returned value</p></li><li><p>alternative to threads: event-driven: code that explicitly interleaves activities, in a single thread</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">func isYellow() &#123;</span><br><span class="line">while true:</span><br><span class="line">wait_for(Yellow)</span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line">func isWhite() &#123;</span><br><span class="line">while true:</span><br><span class="line">wait_for(White)</span><br><span class="line">return</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">while events &#123;</span><br><span class="line">isYellow(evens_i)</span><br><span class="line">isWhite(events_i)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>keep a table of state about each activities</li><li>one event loop checks for new input, advances to next step and updates state.</li><li>the good side is getting I/O concurrency without thread costs. The bad side is no real multi-core speedup and hard to program.</li></ul></li><li><p>Takeaways from web crawler example: I use channel + waitgroup, terminated by a thread that keeps waiting for fetches.</p><ul><li>A: serial crawler: depth first, recursively call Fetch() + map.</li><li>B: concurrent mutex: waitgroup + map with mutex, parallel Fetch() after first fetch.</li><li>C: concurrent channel: channel + map</li></ul><p>A+B: Terminated by exhaustion and synchronized by wg.Wait().</p><p>B requires mutex lock. Because there may be two threads of Fetch accessing same url of map (shared). Only one of them should read map[url] = false. C doesnâ€™t use lock because there is no sharing of map.</p><p>C: Terminated by using local counter of goroutines. Why break <code>if n == 0</code>?</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">n = 1 (first worker 1)</span><br><span class="line">n += 1 (first worker: starts its worker 2. Let&#x27;s say it has one worker) -&gt; n = 2</span><br><span class="line">n -= 1 (first worker finishes its job) -&gt; n = 1</span><br><span class="line">when worker 2 has done, n -= 1 -&gt; n = 0, terminates.</span><br></pre></td></tr></table></figure></li><li><p>locks + sharing V.S. channels</p><ul><li>state â€“ sharing and locks</li><li>communication â€“ channels</li></ul><blockquote><p>(F) For the 6.824 labs, I recommend sharing+locks for state, and sync.Cond or channels or time.Sleep() for waiting/notification.</p><p>(Robert) I personally avoid channels for the most part and program with shared memory and use (mutexes and condvars) instead</p></blockquote></li><li><p><code>go run -race crawler.go</code>, detects races even when output is correct</p></li><li><p>Lock of Go does not enforce any relationship between locks and data: locks protect invariants, not â€œlocks protect access to shared dataâ€</p></li><li><p>Condition variables: wait, signal, broadcast</p><p>how to avoid bugs: 1) lock around use. 2) check condition (a read) in loop</p></li><li><p>Channels: an object that can communicate and synchronize.</p><ul><li>Channels are cheap</li><li>Sender blocks until the receiver receives</li><li>avoid deadlock</li></ul></li><li><p>immediately-invoked function expression: <code>func</code> is an â€œanonymous functionâ€. It creates a lexical scope that is local</p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">parent</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">(u <span class="type">string</span>)</span></span> &#123; <span class="comment">// parameters</span></span><br><span class="line">        fmt.Printf(<span class="string">&quot;%s\n&quot;</span>, u)</span><br><span class="line">    &#125;(<span class="string">&quot;dog&quot;</span>) <span class="comment">// -&gt; argument to pass in</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2><span id="rpc">RPC</span><a href="#rpc" class="header-anchor">Â¶</a></h2><ol><li><p>RPC is a piece of distributed system machinery that provides an esay interface of client-server communication</p></li><li><p>A toy key-value server: It does Put(key,value), Get(key)-&gt;value.</p><ul><li>Declare Args and Reply struct for each server handler.</li><li>Client: connect() -&gt; Dial(); get(), put(); Call() asks the RPC library to perform the call. The library takes in arguments, sends requests, waits and puts the output to reply.</li><li>Server: it must declare an object with methods as RPC handlers; register() -&gt; net.Listen(), server accepts network connections; Get(), Put() must lock; <u>The library creates a new goroutine for each request</u>, dispatches the named object, and writes the reply to the network connection.</li><li>binding to which server: determined by the arguments to Dial() for goâ€™s RPC that are server name/port. Name or configuration server for big systems.</li><li>marshalling: format data into packets<ul><li>can pass: strings, arrs, objects, maps, &amp;c</li><li>cannot pass: channels or functions</li></ul></li></ul></li><li><p>Go RPC uses at-most-once form</p></li></ol><p>failure handling</p><ol><li><p>(simple) best-effor RPC: Calls() waits for response until timeout. If none arrives, re-send the request. Repeat a few times. Give up and return an error. incorrect for many situations. Itâ€™s ok only when the operations take no effect if repeated such as read-only operations.</p></li><li><p>at-most-once RPC: client re-sends req if no anwer while server detects duplicate requests and returns previous reply instead of following ones.</p><ul><li>How to avoid duplicates? Client attaches unique ID (XID) with each req to identify duplicate ones.</li><li>What if two clients use the same XID? Use big random number</li><li>How to avoid a huge seen [xid] table? Per-client RPC seq numbers and client includes â€œseen all repliest &lt;= (before) Xâ€ with every RPC. The server can keep O(# clients) state rather than O(# XIDs)</li><li>Server must discard info about old RPCs or old clients. When to discard?</li><li>How to handle a duplicate req while the previous one is executing? â€œPendingâ€ flag per executing RPC; wait or ignore</li></ul></li><li><p>exactly once:</p><ul><li>unbounded retries</li><li>duplicate detection</li><li>fault-tolerant service</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> programming </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>24å²ç”Ÿæ—¥â€”â€”å†å‡ºå‘</title>
      <link href="/sg/2024/03/12/24/"/>
      <url>/sg/2024/03/12/24/</url>
      
        <content type="html"><![CDATA[<p>ä»Šå¤©é›¾èŒ«èŒ«ä¸€ç‰‡ã€‚æ·¡å­£æ²¡æœ‰å¾ˆå¤šäººï¼Œé‡åˆ°çš„å½“åœ°äººéƒ½æ¯”è¾ƒå‹å¥½ã€‚ç¬¬ä¸€æ¬¡ä¼‘å‡çš„åº•è‰²æ˜¯æ·¡æ·¡çš„ç»¿ã€‚å¾³é“åœ¨è¿è¡Œæ­£å¸¸æ—¶æ˜¯æ¯”è¾ƒèˆ’é€‚çš„å‡ºè¡Œæ–¹å¼ï¼Œæ¥æ—¶æ˜¯åœ¨æœ€è¿‘æœ€åä¸€å¤©çš„æ™´æœ—èƒŒæ™¯ä¸‹å¯ç¨‹çš„ï¼Œå¤§ç‰‡çš„åŸé‡ï¼Œæ¹¿åœ°ï¼Œé£è½¦ï¼Œå’Œæ¸¯å£æ³¢å…‰ç²¼ç²¼çš„è“è‰²æµ·æ°´ã€‚ä¸Šå²›åæ›´åŠ å¼€é˜”ï¼Œè™½ç„¶æ—æœ¨ä¸æŸæ—æœªæœ‰å¤ªå¤§ä¸åŒï¼Œä¹Ÿå°±å¤šäº†ä¸€ç‚¹ä¸´æµ·çš„æ°”æ¯ã€‚</p><p>è¿™ä¸€å¹´æœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿæˆ‘ä¸çŸ¥ä½•æ—¶èµ·ä¸€ç›´æƒ³å»è¿œæ–¹ï¼Œç„¶åæˆ‘åˆ°è¾¾äº†ã€‚ç»„é•¿æ›¾æœ‰ä¸€å¤©é—®æˆ‘è¿™é‡Œçš„å·¥ä½œæ˜¯æˆ‘æ‰€æœŸæœ›çš„ä¹ˆï¼Ÿæˆ‘æƒ³æ˜¯çš„ï¼Œèƒ½å¤Ÿå­¦åˆ°æ–°ä¸œè¥¿å’Œè®¾è®¡ä¸€äº›æ–°çš„ç»“æ„ï¼Œåœ¨å¼€æ”¾è‡ªç”±çš„ç¯å¢ƒé‡Œé—®é—®é¢˜å’Œæ‰¾åˆ°ç­”æ¡ˆã€‚åˆåˆ°æŸæ—æˆ‘å°±å¼€å§‹å–œæ¬¢è¿™ä¸ªåŸå¸‚ï¼Œå³ä½¿å†¬å¤©åªæœ‰å…«ä¸ªå°æ—¶çš„ç™½æ˜¼å’Œäº›å¾®å¯’å†·ã€‚æˆ‘æœ‰å¾ˆé•¿çš„ä¸€æ®µæ—¶é—´æ— æ³•åˆ†è¾¨å››å­£ï¼Œä½†åˆè§è¿™åº§åŸå¸‚å°±æ„Ÿåˆ°ç§‹å¤©çš„è§ç‘Ÿä»æ—§åœç•™ï¼Œç„¶åæ˜¯æ˜æ™°çš„ç™½é›ªï¼Œåˆ°äº†ç°åœ¨åˆ™æ˜¯åˆæ˜¥çš„æ¸…å†½ã€‚</p><p>ä¸Šä¸€å¹´åœ¨å¹²ä»€ä¹ˆå‘¢ï¼Ÿåœ¨æ‹…å¿§ä¸ä¸€æ ·çš„äº‹ï¼Œåæ¥ä¹Ÿå¤±è´¥äº†ï¼Œå†é‡æ–°å¼€å§‹ã€‚æˆ–è®¸è‡ªå·±èƒ½å¤Ÿæ›´åŠ åšéŸ§åœ°é¢å¯¹ä¸å¯é¿å…çš„å¤±è´¥ï¼Œåœ¨çº·çº·æ‰°æ‰°çš„ä¸–ç•Œæ‰¾åˆ°è‡ªå·±çš„ä½ç½®å’Œè§’è½ã€‚æ–°çš„ä¸€å²æƒ³å®Œæˆä¸€äº›æ‹–äº†å¾ˆä¹…çš„äº‹æƒ…ã€‚è¦å¥½å¥½å·¥ä½œå­¦ä¹ ï¼Œèµ°æ›´å¤šçš„è·¯ï¼Œä¸è¦åˆ»æ„å›é¿å’Œäººäº¤æµã€‚</p><p>ç¬¬ä¸€æ¬¡çœ‹è§å¤§æµ·ï¼š</p><img src="/sg/2024/03/12/24/IMG_3460.jpeg" class title="rugendamm"><p>å¾’æ­¥ä» Binz èµ°åˆ° Sellin:</p><img src="/sg/2024/03/12/24/IMG_3500.jpeg" class title="IMG_3500"><img src="/sg/2024/03/12/24/IMG_3501.jpeg" class title="IMG_3501"><img src="/sg/2024/03/12/24/IMG_3504.jpeg" class title="IMG_3504">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Distributed File System Notes</title>
      <link href="/sg/2023/12/27/storage_dfs/"/>
      <url>/sg/2023/12/27/storage_dfs/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#multi-disk-systems">Multi-disk systems</a></li><li><a href="#distributed-file-systems">Distributed File Systems</a><ul><li><a href="#performance-tuning-d">Performance tuning (d)</a></li><li><a href="#file-handles-fs">File handles (fs)</a></li><li><a href="#execution-models">Execution models</a></li></ul></li><li><a href="#multi-server-storage">Multi-server Storage</a></li></ul><!-- tocstop --></div><p>This note will only briefly talk about disk array systems, including some points I think is interesting.</p><h2><span id="multi-disk-systems">Multi-disk systems</span><a href="#multi-disk-systems" class="header-anchor">Â¶</a></h2><p>Terms:</p><ol><li>disk stripting is that data gets interleaved across multiple disks.</li><li>To measure how often one disk fail: MTBF_disk (Mean Time Between Failures) = sum(t_down - t_up) / # of failures</li><li>MTBF in multi-disk system, MTBF_MDS = mean time to first disk failure = sum(t_down - t_up) / (Disks * # of failures per disk) = MTBF_disk / disks</li><li>Recalled that raid5 intersperses the parity over N+1 disks, raid 6 is N+2 and raid N+3  etc. Not elaborate here.</li></ol><p>We want a reliable storage system with large capacity, good performance. Multi-disk systems are designed for these reasons.</p><p>Solution: RAID, redundant array of independent disks</p><p>Problem 1: Load balancing: bandwidth (MB/second) and throughput (IOs/second).</p><p>The problem is that some data is more popular than other data, which is described as load imbalance. I/O requests almost never evenly distributed, but depend on the apps, usage, time. Itâ€™s hard to partition static data to evenly distributed IO reqs for hot data changing over time.</p><p>Solution 1.1: stream data from multiple disks in parallel. To deal with hot data, find the right data placement policy</p><ol><li>simple approach: fixed data placement: Data x goes to y.</li><li>better approach: dynamic data placement. Label popular files as <code>hot</code>, separated across multiple disks.</li><li>practical approach: <strong>disk striping</strong>, to distribute chunks of data across multiple disks for large files (relative to stripe unit), good for high-throughput requests. Hot file blocks get spread uniformly.<br><u>The key design decision is picking the strip unit size.</u> To assist alignment, choose multiple of file system block size. If itâ€™s too small, small files will also be spanned across all disks. Extra effort for little benefit. If itâ€™s too large, itâ€™s cost more with striping but no parallel transfers.</li></ol><p>Solution 1.2: concurrent requests to multiple disks</p><p>Problem 2: Fault tolerance: tolerate partial and full disk failures<br>Solution 2.1: store data copies across different disks</p><p>In a independent disk system, all fs on the disk are lost; in a striped system, part of each fs residing on failed disk is lost. Backups can lead to new problems like performance issue and complicate storage provisioning. It is also difficult to do back scheduling.<br>Disk failures in a multi-disk system happen. HDDs fail often (1-13%); SSDs are more reliable (1-3%).</p><p>Solution 2.1.1: Replication. Combine mirroring (replicated block device) and stripping to find a balance between reliablity and performance.</p><ul><li>combination ways differ<img src="/sg/2023/12/27/storage_dfs/Screenshot-3261051.png" class title="Screenshot-3261051"></li></ul><p>Solution 2.1.2: Error correction code via parity disks. Read-modify-write is behind updates of failed disk.</p><ul><li><p>striping!</p><img src="/sg/2023/12/27/storage_dfs/Screenshot-3262217.png" class title="Screenshot-3262217"></li></ul><h2><span id="distributed-file-systems">Distributed File Systems</span><a href="#distributed-file-systems" class="header-anchor">Â¶</a></h2><p>Fs/database is just a layer of abstraction on top of block devices. It provides services to many apps. Distributed fs shares data among users and among computers with easier provisioning and management.</p><p>Dfs has its own jobs as is pathname lookup. Client mounts fs on the server. When the client looks up a file, it performs the individual lookups (1 RPC per directory), which can take a long time. Server does not know about clientâ€™s mount points.</p><p>Design:</p><ol><li><p>server-client structure: a separate server providing base of fs and applications running on client machines use this base.</p></li><li><p>how to partition fs functionality? Performance, complexity of system, security, semantics, sharing of data, administrationâ€¦</p></li></ol><p>request/reply: a procedure call (read/write descriptor, parameters, a pointer to a buffer, implicit info).</p><ol><li>Client marshals parameters into message</li><li>message sent to server, unmarshalled, processed as local op</li><li>server marshals op result and sends back to client</li><li>client unmarshalls message, passes result to calling process</li></ol><p>Approach 1: server does everything (partition)</p><ul><li>Performance of a server and network can bottleneck clients.</li><li>Memory state must be maintained for each client app session.</li></ul><h3><span id="performance-tuning-d">Performance tuning (d)</span><a href="#performance-tuning-d" class="header-anchor">Â¶</a></h3><p>client-side caches</p><p>design decision 1: cache coherence, a consistent view across set of client caches</p><p>design decision 2: choose consistency model -&gt; in what order to persist data in</p><ul><li>Unix (Sprite, a new network file system which made heavy use of local client-side caching), 1984, all reads see most recent write</li><li>Original HTTP: all reads see last read, no consistency</li></ul><p>implementation: who does what, when</p><p>Approach 2: Sprite, caching + server contorl</p><ul><li>Server tells client whether caching of the file is allowed.</li><li>Server calls back to clients to disable caching as needed except for mapped files.</li><li>Client tells server its operations to files.</li></ul><p>Approach 3: AFS v2, caching + callbacks; All reads see latest close version.</p><ul><li>clients get copy of file and callback from server; server always callbacks if the file changes</li><li>only write back entire file upon close.</li><li>updates by server revoking callbacks for the other clients (race on close)</li></ul><p>Approach 4: NFS v3, stateless caching; Other clientsâ€™ writes visible within 30 seconds.</p><p>Stateless refers to server having no guarantees to clients.</p><p>design decision 3: Servers keep state about clients or not.</p><p>stateless servers: simple -&gt; faster in a way, easy to recover, no problem with running out of state resources</p><p>Vs. stateful servers: long-lived connections to clients -&gt; faster in a way, easy for state checking</p><h3><span id="file-handles-fs">File handles (fs)</span><a href="#file-handles-fs" class="header-anchor">Â¶</a></h3><p>Terms:</p><ul><li><code>opaque</code> means a structureâ€™s contents are unknown</li><li>NAS, network-attached storage. Itâ€™s a dedicated file server.</li></ul><p>File handle, as file descriptor, is a easier way to represent/handle a file.</p><p>In fs, <code>open</code> returns a file descriptor. Applications donâ€™t need to use file name to represent a file any more.</p><p>In NFS with stateless server, <code>open</code> creates a file handle and the server passes it back to the client. The whole process is as this:</p><ol><li>client passes the file handle (<code>opaque</code> struct) to the server when it wants to access a file</li><li>the server creates a file handle and passes it back to the client</li></ol><h3><span id="execution-models">Execution models</span><a href="#execution-models" class="header-anchor">Â¶</a></h3><p>Terms:</p><ul><li>IOFSL, I/O forwarding scalability layer</li></ul><ol><li>processes: creating a process needs entire new address space. Switching CPU from one process to another needs to switch address space with the unmeasurable cost of TLB missesâ€¦</li><li>threads: a thread means a thread of execution. Multiple threads share one address space, which reduces os time for creation and context switch (10000/machine). -&gt; gdb level</li><li>events/tasks: lighter than threads (1000,000/machine). Task is hard to code and debug</li></ol><p>Example:</p><p>IOFSL for supercomputers. I/O forwarding layer is introduced to solve the large number of concurrent client requests. All IO requests go through dedicated IO forwarder.</p><p>Problem: large requests -&gt; Out-of-order IO pipelining; small requests -&gt; IO request scheduler.</p><p>AFS with FUSE.</p><h2><span id="multi-server-storage">Multi-server Storage</span><a href="#multi-server-storage" class="header-anchor">Â¶</a></h2><p>Terms:</p><ol><li>LAN, local area network; SAN, storage area network; NASD, network attached storage device; pNFS, parallel NFS</li></ol><p>Problem 3: how to partition funtionality across servers and why</p><p>do the same tasks on each server for different data &lt;----&gt; do different tasks on each server for the same data</p><p>common issues:</p><ul><li>find the right server for given task/data</li><li>balance load across servers</li><li>excessive inter-server communication</li></ul><p>conflicting design issues: want to keep the independence of server but gain sth from multi-server struct &amp; easy to use</p><p>Approach 1:  same functions, different data</p><ul><li>Good for load distribution and fault tolerance.</li></ul><p>Problem 3.1 how is client-side namespace constructed</p><ul><li>NFS v3, Each client mounts server FSs at its own pick. Many namespaces in the clients overall.</li><li>AFS, a set of servers provide a single name space. Each client has a link to global directory hierarchy.</li></ul><p>Problem 3.2 Given file name, how to find the server having the file</p><ul><li>NFS v3, A client traverses its namespace and mount points and contacts the server (a directory sub-tree)</li><li>AFS, ~ (volume)</li></ul><p>Problem 3.3 Load balancing</p><ul><li>NFS v3, manual: system admin can assign file sub-trees to servers and configure mount points on clients.</li><li>AFS, manual: admin moves volumes among servers</li></ul><p>Approach 2: different functions, same data</p><ul><li>Good for flexibility and bottleneck avoidance. Less common, often used with approach 1.</li><li>E.g., pNFS for NASD by EMC</li></ul><p>Problem 4: concurrent access to shared state</p><p>Skip this section for which we have discussed in distributed system blogs.</p>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> storage systems </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>2023 Year-end Review</title>
      <link href="/sg/2023/12/19/2023/"/>
      <url>/sg/2023/12/19/2023/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#flashback">Flashback</a><ul><li><a href="#january">January</a></li><li><a href="#february">February</a></li><li><a href="#may">May</a></li><li><a href="#june">June</a></li><li><a href="#sometime">Sometime</a></li><li><a href="#september">September</a></li><li><a href="#november">November</a></li><li><a href="#december">December</a></li></ul></li><li><a href="#games">Games</a></li></ul><!-- tocstop --></div><p>Guten Tag,</p><p>This year is a little different from last year. I have relocated in Berlin and started my job to continue my search in storages. It may seem strange, but I didnâ€™t fully understand the storage system back then, even though I was determined to learn about it. I own many thanks to Stefan and Damien who have walked with me through the journey in QEMU even after I finished Outreachy internship. It was a hard time for me dealing with pandemic control and school matters during last year, for which I am grateful for their companion as not only mentors but also friends with whom I could share something with.</p><p>I am constantly asked why learning CS (computer science) whereas my major in university is biology. I decided to study CS when I was 18. I remember having a conversation with a friend  about the majors we were planning to pursue in university. She chose physics and thatâ€™s when I revealed my choice for the first time. It took some turns in the year-over-year self-learning in the university. However, studying biology is not a regretful choice eventually. I must be responsible for all my decisions, right or wrong. And it does not deter me from studying what I set out with. I never believe in the opinion that one must work in the same field as their major studied in school. Not to mention the abundance of excellent open courses available, from which you can learn not only CS, but also gain a deeper understanding of the world and yourself.</p><p>However, I was still in doubt for many years. Will I be able to make it happen that I can work as a software engineer? One question led to another and it builds who I am for finding those answers. Damien was the first one who validated my abilities when I had those doubts and hesitations. And it was the offer of one internship in Japan, which did not happen for a various of reasons in the end, that inspired me to think I could work abroad, starting by not setting limits for myself. That was what in my mind about a year ago.</p><p>I would also thank one of my dearest friend who have supported me even I was not in a good shape. She was there when I made my decision to work abroad and during the long search in possible opportunites. It would have been very difficult for me to cope with the ups and downs without her.</p><p>It was a surprise that my parents took my decision to relocate to Berlin well. I could not come this far without their unconditional love and support.</p><h2><span id="flashback">Flashback</span><a href="#flashback" class="header-anchor">Â¶</a></h2><h3><span id="january">January</span><a href="#january" class="header-anchor">Â¶</a></h3><img src="/sg/2023/12/19/2023/IMG_0303.jpeg" class title="IMG_0303"><h3><span id="february">February</span><a href="#february" class="header-anchor">Â¶</a></h3><img src="/sg/2023/12/19/2023/IMG_0496.jpeg" class title="IMG_0496"><h3><span id="may">May</span><a href="#may" class="header-anchor">Â¶</a></h3><img src="/sg/2023/12/19/2023/IMG_1008.jpeg" class title="IMG_1008"><h3><span id="june">June</span><a href="#june" class="header-anchor">Â¶</a></h3><img src="/sg/2023/12/19/2023/IMG_1210.jpeg" class title="IMG_1210"><h3><span id="sometime">Sometime</span><a href="#sometime" class="header-anchor">Â¶</a></h3><img src="/sg/2023/12/19/2023/IMG_2235.jpeg" class title="IMG_2235"><h3><span id="september">September</span><a href="#september" class="header-anchor">Â¶</a></h3><p>Itâ€™s the same day when I received the offical contract and saw the sundown.</p><img src="/sg/2023/12/19/2023/IMG_1763.jpeg" class title="IMG_1763"><img src="/sg/2023/12/19/2023/IMG_1814.jpeg" class title="IMG_1814"><img src="/sg/2023/12/19/2023/IMG_1755.jpeg" class title="IMG_1755"><h3><span id="november">November</span><a href="#november" class="header-anchor">Â¶</a></h3><img src="/sg/2023/12/19/2023/IMG_2131.jpeg" class title="IMG_2131"><img src="/sg/2023/12/19/2023/IMG_2003.jpeg" class title="IMG_2003"><img src="/sg/2023/12/19/2023/IMG_1985.jpeg" class title="IMG_1985"><h3><span id="december">December</span><a href="#december" class="header-anchor">Â¶</a></h3><img src="/sg/2023/12/19/2023/IMG_2389.jpeg" class title="IMG_2389"><img src="/sg/2023/12/19/2023/IMG_2501.jpeg" class title="IMG_2501"><img src="/sg/2023/12/19/2023/IMG_2639.jpeg" class title="IMG_2639"><img src="/sg/2023/12/19/2023/IMG_2637.jpeg" class title="IMG_2637"><h2><span id="games">Games</span><a href="#games" class="header-anchor">Â¶</a></h2><p>Baldurâ€™s Gate 3 is my favorite game in this year. It depicts an imaginary world full of adventures, where you can seek the truth amidst a suspicious and uncertain exterior. Though the fight scenes are great, I enjoy playing the Lute with teammates on the top floor of the Elfsong Tavern more.</p><p>I am surprised to find about that the Talos Principle is a very delicate and well designed game. It takes some extra thoughts to pass each level. Every problem you solved will reveal a little more truth of the world that traps you inside. And in the end you are able to choose your path. Maybe a robot overlord? Besides that, Octopath Traveler II is also one of the games that I am crazy about. Itâ€™s kind of the game once you pick up and never want to let it go, unless you find the whole stories of all characters. Civilization VI, Mount &amp; Blade I, Breath of the Wild are just classics. I spent many hours to beat old me. IMHO, Breath of the Wild is better than The Tears of The Kindom. It is beautiful and pure as in nature. Though the second one is more advanced in life styles, the previous one touched me with its story lines and the wild without pollution of some ancient relics.</p><img src="/sg/2023/12/19/2023/IMG_2682.jpg" class title="IMG_2682"><img src="/sg/2023/12/19/2023/IMG_2683.jpg" class title="IMG_2683"><hr><p>2024 resolution:</p><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_0" checked="true" disabled="true"><label for="cbx_0"> Pass the probation period</label></li><li class="task-list-item"><input type="checkbox" id="cbx_1" checked="true" disabled="true"><label for="cbx_1"> Join in <s>Alpine xxx Summit</s> Linux Plumbers 24</label></li><li class="task-list-item"><input type="checkbox" id="cbx_2" checked="true" disabled="true"><label for="cbx_2"> Read 4 books (half half)</label></li><li class="task-list-item"><input type="checkbox" id="cbx_3" checked="true" disabled="true"><label for="cbx_3"> Visit some national nature parks (almost 2)</label></li><li class="task-list-item"><input type="checkbox" id="cbx_4" checked="true" disabled="true"><label for="cbx_4"> See deers <s>in the wild</s></label></li><li class="task-list-item"><input type="checkbox" id="cbx_5" checked="true" disabled="true"><label for="cbx_5"> See the sea</label></li><li class="task-list-item"><input type="checkbox" id="cbx_6" checked="true" disabled="true"><label for="cbx_6"> Travel in Iceland</label></li></ul>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>File Systems At a Glance</title>
      <link href="/sg/2023/12/04/storage_fs/"/>
      <url>/sg/2023/12/04/storage_fs/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#fs-storage-layout">FS storage layout</a><ul><li><a href="#log-structured-fs">Log-structured FS</a></li><li><a href="#log-structured-merge-trees">Log-structured Merge Trees</a></li><li><a href="#co-locating-ffs">Co-locating FFS</a></li></ul></li><li><a href="#fs-organization">FS organization</a><ul><li><a href="#data-organization">Data organization</a></li><li><a href="#open-read-write">Open/read/write</a></li><li><a href="#access-methods">Access methods</a></li></ul></li><li><a href="#fs-integrity">FS integrity</a><ul><li><a href="#disk-block-caching">Disk block caching</a></li><li><a href="#internal-consistency">Internal consistency</a></li><li><a href="#crash-recovery">Crash recovery</a></li></ul></li></ul><!-- tocstop --></div><p>This blog is the third part of NVMe ZNS emulation. We will explore cluster storage and all the things behind.</p><h2><span id="fs-storage-layout">FS storage layout</span><a href="#fs-storage-layout" class="header-anchor">Â¶</a></h2><p>Readings:<br>Chap 8 of Unix Internals, Vahalia 1995;<br>A Solution to the Metadata Update Problem in File systems, Ganger 2000<br>Chap 7 of Practical File System Design, Giampaolo 1998</p><p>Problem 1: mapping raw data into files converts into mapping fs structures and data to LBNs</p><p>Need a structure to keep track of available space (granularity: blocks). And to choose which free block.</p><p>Solution 1:</p><ul><li>Free list: Linked list of free blocks -&gt; simple but performance issues</li><li>Bitmap (common): large array of bits, one per allocatable unit. Two state: free or in use -&gt; better lookup</li><li>Free extent structure (s.t. better): extent is a contiguous range of free blocks -&gt; better management but fragmentation issues</li></ul><p>E.g. Fs storage layout for HDD: FFS 1984<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> has advantages on locality and larger transfer size over pre-FFS fs world. <strong>Allocation groups</strong> are inode and the first data blocks in the same cylinder group, which is also used in modern FSs like xfs 1994, ext*.</p><p>Larger transfer size is meant to amortizing overall positioning costs.</p><ol><li>larger fs block size</li><li>allocate contiguous blocks</li><li>prefetch: fetch more data than requested. Read-ahead is for sequential access. When paying positioning cost once, the trade-off is that a large request can delay requests of normal size. -&gt; heavy streaming of sequential I/O (locality helps)</li></ol><p>Small (&lt;= 8kb, 80%) files are fragmented in real world. And it leads to small I/Os caused by independence of files and levels of indirection.</p><p>Problem 2: small files lead to small I/Os. Need to increase locality and transfer size for small files</p><p>Solution 2: group small files and metadata for larger I/Os.</p><p>How to group?</p><ol><li>Co-locate?</li><li>Over aggressiveness costs little?</li></ol><p>Locality and large transfer size brings performance improvement to fs. The relation between them is prefetching and write-back caching. We donâ€™t want too many random writes. The idea behind all those optimization, I think, is to reduce random access of local file systems. Thatâ€™s why we  care about cache, fetching data, transferring, etc.</p><p>+Locality:</p><ol><li>delay in cache for r/w</li><li>disk req scheduling for allocation</li><li>write near the disk head (hardly used)</li></ol><p>+large transfer</p><ol><li>re-allocation (move data around)</li><li>pre-allocation (allocate more than you need now)</li><li>extents-like structure as a replacement for block lists and bitmaps (beware of long small-extent lists hiding out)</li></ol><h3><span id="log-structured-fs">Log-structured FS</span><a href="#log-structured-fs" class="header-anchor">Â¶</a></h3><p>-&gt; amortization, large write</p><ul><li>Data and metadata are written sequentially to a circular buffer called log</li><li>shadow paging: write a segment to replace several older smaller blocks and reclaim space. The idea is to increase empty blocks. Its cost may more expensive than benefit gained.<ul><li>It follows Amdahlâ€™s law. Speedup is limited to fraction improved.</li></ul></li><li>cleaning: segment cleaning starts when there are blanks between blocks. Read entire segment for amortization and move live blocks from segment being cleaned.<ul><li>know which blocks are live -&gt; segment summary</li><li>know whether block is still live -&gt; inode map, inodes</li><li>do cleaning in background unless running out of space</li></ul></li><li>Most modern FTLs do LFS-liek remapping into SSD blocks</li><li>F2FS is a LFS-like FS for flash<ul><li>set segment size = SSD block size</li><li>separate hot/cold data: Hot/warm/cold. Set criteria for data according to its usage (how likely to be overwritten)</li></ul></li></ul><h3><span id="log-structured-merge-trees">Log-structured Merge Trees</span><a href="#log-structured-merge-trees" class="header-anchor">Â¶</a></h3><p>data structure view: (memory buffer -&gt; disk)</p><ol><li>insert: buffer and sort recent inserts in memory; write out into local fs sequentially; Less random disk writes than b-tree.</li><li>lookup: search sorted tables one by one -&gt; compaction: merge sort into new files, deleting old (cleaning as LFS); Bloom-filter and in-memory index to reduce lookups.</li></ol><p>E.g. TableFS (FUSE) packs metadata into LSM trees</p><ol><li>Design: small objects (&lt;= 4kB) are embedded into LSM tree, turning into one large object (~2MB). Large files are stored in object store indexed by tablefs assigned id number.</li><li>LSM tree is a tabular structure with (key, value). It co-locates directory entries with inode attr and small files to reduce random lookups. Readdir performs sequential scan on the table.</li><li>FUSE is a fs in user space. It presents user VFS to the kernel<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>.</li><li>LevelDB is a key-value database using LSM tree to supports its operations like put, delete, get, scan.</li></ol><h3><span id="co-locating-ffs">Co-locating FFS</span><a href="#co-locating-ffs" class="header-anchor">Â¶</a></h3><p>It allows large transfers by co-locating related metadata and data objs and r/w to obj groups. Files are placed based on name locality, which leads to multiple files per disk I/O.</p><h2><span id="fs-organization">FS organization</span><a href="#fs-organization" class="header-anchor">Â¶</a></h2><p>Vahalia1995 ch8: P255</p><ol><li><p>vnode layer: this layer is for having multiple fs at once. It adds a level of indirection as virtual fs layer. Everything in kernel interacts with fs via a virtualized layer of functions. It can also supprot non-local FSs like NFS, FAT fs,<br>user -&gt; open file object -&gt; vnode_structure</p></li><li><p>dir (inode IDs (file name tranlating to), record len, length of name, file name) is a special file with entries formatted. Sets of entries are organized in block-sized chunks.</p></li><li><p>mount/unmount attach/detach one FS into the namespace.</p></li><li><p>a root file system <code>/</code></p></li><li><p>multiple FSs on one disk. Disk capacity is divided into multiple â€œpartitionsâ€. To track such structure, keep a partition map which has (offset, len) (in logical blocks). Commonly, device drivers handle the partition map (FS req -&gt; partition).</p></li><li><blockquote><p>a symbolic link contains a text string as a path to another file or directory</p></blockquote></li><li><p>Data is declared to be set of records, each a set of fields. Index is a map of key values to offsets in the file. Libarary API in databases allows access by key value or range of values.</p></li></ol><h3><span id="data-organization">Data organization</span><a href="#data-organization" class="header-anchor">Â¶</a></h3><p>The problem of disk organization and naming is how to find certain entry in many environments with TBs of data.</p><ol><li>directory and file structure. Traverse the directory hierairchy by the <code>.</code> and <code>..</code> entries. -&gt; good for moderate-sized data sets</li><li>managing namespace: mount/unmount. Starting with a root file system, mounted fs is attached into this namespace.</li></ol><p>Difficulty with dir hierarchies:</p><ol><li>difficult to scale to large size</li><li># of entries in a dir grows too large -&gt; partition into subdirectories again</li><li>one data object fits into many places -&gt; different file names for the same data object/put symbolic link to a file</li></ol><p>Naming in two respectives, direct/indirect, absolute/relative. Files are accessed by attributes. Attributes are external information to describe a file, like last modified by, created by, file type etc.</p><h3><span id="open-read-write">Open/read/write</span><a href="#open-read-write" class="header-anchor">Â¶</a></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fd = open(<span class="string">&quot;foo/bar&quot;</span>, RO);</span><br><span class="line">ret = read(fd, buffer, size);</span><br><span class="line">ret = write(fd, buffer, size)</span><br></pre></td></tr></table></figure><p>Open:</p><ol><li>translate file name to inode: <code>vnode_lookup</code>, use dir lookup cache first for each lookup</li><li>create a vnode for inode</li><li>create a open file struct</li><li>fill in fd</li><li>return index into fd table</li></ol><p>Read:</p><ol><li>index into fd table to get a open a open file struct -&gt; get vnode</li><li><code>vnode_read(vnode, offset, buffer, size)</code> -&gt; normal read req</li><li>find vnodeâ€™s buffer (offset) in buffer cache</li><li>if buffer is invalid, <code>vnode_getbuf</code> fills it. It requests device driver to fill buffer with data.</li><li>copy data from cached buffer to user space buffer -&gt; advance offset by len of copied data in file obj</li><li>repeat until size reached</li><li>return -&gt; update open file objâ€™s offset</li></ol><p>Write op handles buffers differently from read op. If entire buffer will be overwritten by write, the buffer is marked as valid. When  the write copies data to cache buffer, it will also mark buffer dirty. After returning, it leaves buffers as dirty in buffer cache.</p><p>To map file offset to disk LBNs, simple solution is to use start location and a contiguous LBNs to keep entire file. Using a next pointer in each block allows a flexible way to store a file. The most common approach is to use block lists. Block lists are an array with one LBN per block in the file.</p><h3><span id="access-methods">Access methods</span><a href="#access-methods" class="header-anchor">Â¶</a></h3><p>Unix files are generally flat which is a stream of bytes. Databese files are generally indexed with b-tree of records.</p><p>Hash table: O(1) lookup with poor range query. B-tree: O(lgN) lookup with efficient range query.</p><h2><span id="fs-integrity">FS integrity</span><a href="#fs-integrity" class="header-anchor">Â¶</a></h2><ol><li>cache benefit = time without cache/time with cache</li><li>average = hit time + (average miss time * miss probability)</li><li>write-back caching: the processor writes data to its local cache firsts before writing that cached data to memory or disk.</li><li>ECC is Error-Correcting Code</li><li>fsync: sync everything associated with that file.</li></ol><h3><span id="disk-block-caching">Disk block caching</span><a href="#disk-block-caching" class="header-anchor">Â¶</a></h3><p>Latency to fetch data or perform I/O on disk from when I/Os are sent from application (on CPUs) can be 5-50 ms, 5-500 times of accessing disk block cache (0.1-1.0 ms) from the same starting place. We need to hide storage latencies or mortize the average response time.</p><p>Problem 1: how to avoid cache misses?</p><p><code>Miss Ratio</code> dominates the avarage access time computation than hit ratio. A cache miss takes much slower than a cache hit. It can be seen in the avarage equation.</p><p>Cache misses scenarios:</p><ol><li>among reads: read for which not all data is in cache. Have to go to disk and the reader has to wait. Prefetches go to disk too. Though it do that in the background.</li><li>among writes: writes put new (block-aligned) data into cache and move one. Writers donâ€™t wait unless no cache space is available for new data or it must read existing block because only part set of data being written to disk.</li></ol><h3><span id="internal-consistency">Internal consistency</span><a href="#internal-consistency" class="header-anchor">Â¶</a></h3><p>Problem 2: Challenges to internal consistensy</p><ul><li>concurrent modifications: two processes induce race conditions -&gt; concurrency control</li><li>media defect growth: contents of newly-defective sectors are lost -&gt; redundancy</li><li>transient storage subsystem bug: flipped bits on bus etc -&gt; integrity checks + redundancy</li><li>system crashes are unpredictable and can happen at any time: volatile main memory contents lost. On-disk img must be sufficiently consistent for this type of failures. Only persistent storage is there upon restart. Clean-up must be done after system failures.</li></ul><p>Tools for protecting consistency:</p><ol><li><p>static mapping: if they do not change, they do not cause problems</p></li><li><p>atomicity of writes: checksum or per-server ECC provides per-sector with unwritten guarantee by FS/app. -&gt; good for grouping inter-related updates, like directory chunks and inodes</p><p>Problem 2.1: data is lost when write is partially completed</p></li><li><p>update ordering: ensure that one update propagates before another -&gt; good for single-direction dependencies</p><p>Problem 2.2: not good for bidirectional dependencies (most of them in fs)</p><p>Solution 2.2: convert some of them to single direction giving importance of direction.</p></li><li><p>atomicity: ensure that a set of updates all occur or none do</p></li></ol><p>Purpose of update ordering: provide integrity of metadata pointers in face of system failures</p><p>Basic rules are like rules of programming with pointers. Allocate before use, must free when deallocating, set new pointer before free when moving. In pointer world, freeing means nullifying. Something always left dangling if there is a badly-timed crash.</p><h3><span id="crash-recovery">Crash recovery</span><a href="#crash-recovery" class="header-anchor">Â¶</a></h3><p>Tradional way examines entire contents by walking entire dir hierarchy and each fileâ€™s block list, indentify and rebuild free space/inode bitmaps. It is exhausting.</p><p>Problem 2.3: clever way of crash recovery</p><p>Solution 2.3.1: update ordering</p><ol><li>synchronous writes: wait for one write to complete before proceeding -&gt; huge performance overhead</li><li>soft updates: write-back caching for all (non-fsync) updates -&gt; good for delayed writes</li></ol><p>Solution 2.3.2: multi-write atomicity. Always present safe version.</p><ol><li>write-ahead logging (WAL, or journaling): changes are kept in a log first.</li><li>shadow paging<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>: New versions of data blocks written to new locations. Write changes to alternate location and replace previous.<img src="/sg/2023/12/04/storage_fs/Screenshot-3247958.png" class title="Screenshot-3247958"></li></ol><p>Need to revisit P240<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup>.</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://afterhoursacademic.medium.com/a-fast-file-system-for-unix-15117fb7425b">https://afterhoursacademic.medium.com/a-fast-file-system-for-unix-15117fb7425b</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://stackoverflow.com/questions/2910229/what-is-a-virtual-file-system-or-a-file-system-in-userspace">https://stackoverflow.com/questions/2910229/what-is-a-virtual-file-system-or-a-file-system-in-userspace</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p><a href="https://stackoverflow.com/questions/55223741/understanding-shadow-paging-and-how-it-differs-from-journaling-file-systems">https://stackoverflow.com/questions/55223741/understanding-shadow-paging-and-how-it-differs-from-journaling-file-systems</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://en.wikipedia.org/wiki/Three-state_logic">Three-state logic - Wikipedia</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> storage systems </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Write a BST: Work and Span</title>
      <link href="/sg/2023/10/03/fp_sml/"/>
      <url>/sg/2023/10/03/fp_sml/</url>
      
        <content type="html"><![CDATA[<p>materials: 15-150, <a href="http://www.cs.cmu.edu/~15150/index.html">http://www.cs.cmu.edu/~15150/index.html</a></p><p>Goal of this article is to learn how to write a balanced binary search tree as an example to dip into the flavour of functional programming.</p><p>Problem 1: how to exploit parallelism?</p><p>Expression evaluation has no side-effects on correctness of program. Evaluation order has no effect on values. Thus evaluation on independent code in parallel is workable.</p><p>A more procedural way to analyse is work and span. To calculate the runtime, go back to recurrence. Work runs in sequential while span is in parallel. Work of an expression is the work for sub-expressions. Span of an expression needs to max the span for independent sub-expressions first and add them up.</p><blockquote class="colorquote grey"><p><em>Definition of work and span.</em></p><ol><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="5.186ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 2292 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"/></g><g data-mml-node="mo" transform="translate(1048,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1437,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(1903,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>, the <u>work</u> of expression is the evaluation time in sequential on a single processor.</li><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="4.274ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 1889 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(645,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1034,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(1500,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>, the <u>span</u> of e is the evaluation time in parallel for independent code.</li><li>The applicative work/span <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="6.321ex" height="2.364ex" role="img" focusable="false" viewbox="0 -750 2793.9 1045"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"/></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g><g data-mml-node="mo" transform="translate(1415.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1804.9,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(2404.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>/<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="5.572ex" height="2.364ex" role="img" focusable="false" viewbox="0 -750 2462.9 1045"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mi" transform="translate(646,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g><g data-mml-node="mo" transform="translate(1084.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1473.9,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(2073.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> is the work/span of <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="4.102ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 1813 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(550,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(939,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(1424,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> when v is a value of size n.</li></ol></blockquote><p>Problem 2: How to use trees to represent integers? -&gt; How to design a datatype for trees : int?</p><p>To design a datatype, we need to consider:</p><ol><li>constructor</li></ol><h2><span id="basics">Basics</span><a href="#basics" class="header-anchor">Â¶</a></h2><p>ML has syntax features as:</p><ul><li>Only well-typed expressions can be evaluated (int, real, bool, tuples, fun, list)</li><li>Functions are values (f(x) = x + 1) or functions (f(x) = f(x-1) + 1)</li><li>List items have the same type.</li><li>User defines their own types.</li></ul><p>ML systems:</p><ul><li>expressions are evaluated to values</li><li>declarations are checked with types</li><li>ML reports value and type</li></ul><p>Pitfalls and notices:</p><ol><li><p>warning: the indication of redundant code of the pattern.</p><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- <span class="keyword">val</span> <span class="number">49</span> = sq (~<span class="number">7</span>);</span><br><span class="line">stdIn:<span class="number">44.5</span>-<span class="number">44.17</span> <span class="type">Warning</span>: binding not exhaustive</span><br><span class="line">          <span class="number">49</span> = ...</span><br></pre></td></tr></table></figure></li><li><p>import file in interpretor: must add double quotation marks</p><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- use <span class="string">"eval.sml"</span>;</span><br></pre></td></tr></table></figure></li><li><p>marks: <code>=&gt;*</code> means equivalent to in finitely many steps, <code>::</code> is the constructor for lists.</p></li><li><p><code>nil</code> is an empty list</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> programming </category>
          
          <category> functional programming </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Not Exatcly About NVMe ZNS Emulation</title>
      <link href="/sg/2023/09/22/qemu_zns/"/>
      <url>/sg/2023/09/22/qemu_zns/</url>
      
        <content type="html"><![CDATA[<p>This blog is the second part of NVMe ZNS emulation. You can find the first one on this link: <a href="https://sgzerolc.github.io/sg/2023/01/14/qemu_nvme/">A Tour of NVMe</a>.</p><p>First, the tour continues by discussing the hanging questions and introducing the latest solutions to metadata persistence. Second, we delve into address translation and elaborate on the details of ZNS metadata on NVMe device side. Afterward, we will shift our focus away from NVMe and briefly explore Linux cluster storage.</p><p>There were several approaches to persistence when Dimtry contributed to ZNS emulation<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>. The one I apply is to add a separate blockdev which stores the zoned metadata in the Qcow2 image. Qcow2 is better than Raw format for its popularity in virtual image format.</p><p>Another way is using a separate hostmem/mmapâ€™ed file. However, the QEMU block layer does not support mmap. A BlockDriverState might not have a file descriptor that can be mapped.</p><h2><span id="qcow2-full-emulation">Qcow2 full emulation</span><a href="#qcow2-full-emulation" class="header-anchor">Â¶</a></h2><p>Qcow2 is a storage format for virtual disks. Zoned storage emulation is added as a new format extension to the Qcow2 driver. Thereby users can attach such a Qcow2 image file to the guest os as a zoned device.</p><p>The zone state machine depicts state transitions and zone resources<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>. Read only and offline states are caused by device internal events, which is ignored in full emulation for simplicity. The other zone states contain empty, full, open and closed states. If the guest or QEMU crashes, the zone states are needed to recover. In real devices, open states (explicit open, implicit open) will lost and turn into closed state after a power cycle. Meanwhile, write pointers should be preserved to track usable blocks within the zone.</p><p>We need to think of a way to maintain zone states correctly and guarantee zoned metadata persistence. Write pointer is an array of unsigned 64-bit intergers. Even though it can store zone information that has few bits like zone state, in-memory zone state is good enough to serve its purpose without extra cost on state assignment to write pointers. Without loss of active zones, Qcow2 keeps track of active states in doubly linked lists. When reading zone states, it will first check if the zone is in each zone list and check wp when finding none.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Qcow2Wp</span> &#123;</span></span><br><span class="line">    <span class="type">uint64_t</span> wp;</span><br><span class="line">    QLIST_ENTRY(Qcow2Wp) exp_open_zone_entry;</span><br><span class="line">    QLIST_ENTRY(Qcow2Wp) imp_open_zone_entry;</span><br><span class="line">&#125; Qcow2Wp;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">BDRVQcow2State</span> &#123;</span></span><br><span class="line">...</span><br><span class="line">    <span class="comment">/* States of zoned device */</span></span><br><span class="line">    Qcow2ZonedHeaderExtension zoned_header;</span><br><span class="line">    QLIST_HEAD(, Qcow2Wp) exp_open_zones;</span><br><span class="line">    QLIST_HEAD(, Qcow2Wp) imp_open_zones;</span><br><span class="line">    Qcow2Wp *wp;</span><br><span class="line">...</span><br><span class="line"> &#125; BDRVQcow2State;</span><br></pre></td></tr></table></figure><p>Another kind of in-memory state is zone resources. It has open and active zone limits to affect zone operations. Write requests on zones no longer excute when any one of the zone limits is over. If there is room left for active zones, the device can implicitly close one zone (implicit open) to avoid exceeding open zone limit.</p><h2><span id="zns-metadata-persistence">ZNS metadata persistence</span><a href="#zns-metadata-persistence" class="header-anchor">Â¶</a></h2><p>ZNS emulation is fully compliant with the NVMe ZNS spec except persistent zone states. We can add persistence to the metadata of ZNS emulation by taking advantage of new block layer APIs and the Qcow2 image as backing file. It divides into two parts, zone states and ZDED (zone descriptor extension data) which is one of zone attribute fields.</p><h3><span id="address-translation">address translation</span><a href="#address-translation" class="header-anchor">Â¶</a></h3><p>NVMe device internal memory stores data directly from the guest depending on where the io_queues are stored, host or NVMe device. Normally, the guest address will be translated to host address. But if itâ€™s DMA (direct memory access), the guest cannot map the address and will trigger a bounce buffer. The host will trap it asking if Nvme device knows about it. CMB (controller memory buffer) and PMR (persistent memory region) are designed for data mapping there. PMR always persists even incurring the crashes. It can resume the writes. Only one bounce buffer in-flight is trapped.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="keyword">inline</span> <span class="type">void</span> <span class="title function_">nvme_blk_zone_append</span><span class="params">(BlockBackend *blk, <span class="type">int64_t</span> *offset,</span></span><br><span class="line"><span class="params">                                  <span class="type">uint32_t</span> align,</span></span><br><span class="line"><span class="params">                                  BlockCompletionFunc *cb,</span></span><br><span class="line"><span class="params">                                  NvmeZoneCmdAIOCB *aiocb)</span></span><br><span class="line">&#123;</span><br><span class="line">    NvmeRequest *req = aiocb-&gt;req;</span><br><span class="line">    assert(req-&gt;sg.flags &amp; NVME_SG_ALLOC);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (req-&gt;sg.flags &amp; NVME_SG_DMA) &#123;</span><br><span class="line">        req-&gt;aiocb = dma_blk_zone_append(blk, &amp;req-&gt;sg.qsg, (<span class="type">int64_t</span>)offset,</span><br><span class="line">                                         align, cb, aiocb);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        req-&gt;aiocb = blk_aio_zone_append(blk, offset, &amp;req-&gt;sg.iov, <span class="number">0</span>,</span><br><span class="line">                                         cb, aiocb);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="zone-attribute-zrwa-zded">zone attribute: ZRWA, ZDED</span><a href="#zone-attribute-zrwa-zded" class="header-anchor">Â¶</a></h3><p>The ZRWA (zone random write area) is a legacy bit for adaption. The old drives do not support sequential constraints and set this bit to valid. ZRWAV is in runtime. All writes to ZRWA must be persistent while the write pointer is not advanced immediately<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>.</p><p>The size of ZDED is relatively small comparing to the overall size of image file therefore we adopt the option that stores ZDED of all zones in an array regardless of the valid bit set.</p><p>In the end, I would like to express my gratitude to Stefan Hajnoczi, Damien Le Moal and Dmitry Fomichev for their guidance and support over the last year. And I have gained much more than the experience within the QEMU community.</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://patchew.org/QEMU/20201208200410.27900-1-dmitry.fomichev@wdc.com/">https://patchew.org/QEMU/20201208200410.27900-1-dmitry.fomichev@wdc.com/</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://zonedstorage.io/docs/introduction/zoned-storage#zone-states-and-state-transitions">https://zonedstorage.io/docs/introduction/zoned-storage#zone-states-and-state-transitions</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>Comments by Klaus Jensen. <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> QEMU </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>6.046 incremental improvement</title>
      <link href="/sg/2023/09/09/6.046_flow/"/>
      <url>/sg/2023/09/09/6.046_flow/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#flow-networks">Flow networks</a><ul><li><a href="#flow">Flow</a></li><li><a href="#cut">Cut</a></li><li><a href="#residual-networks">Residual networks</a></li></ul></li><li><a href="#max-flow-min-cut">Max-flow, min-cut</a><ul><li><a href="#max-flow-min-cut-theorem">Max-flow, min-cut theorem</a></li><li><a href="#ford-fulkerson-algorithm">Ford-Fulkerson algorithm</a></li><li><a href="#edmonds-karp-algorithm">Edmonds-Karp algorithm</a></li></ul></li><li><a href="#baseball-elimination-ex">Baseball elimination ex</a></li></ul><!-- tocstop --></div><h2><span id="flow-networks">Flow networks</span><a href="#flow-networks" class="header-anchor">Â¶</a></h2><p>Notions+</p><ul><li>directed graph G(V, E)</li><li>two distinguished vertices source s, sink t</li><li>basic idea: flow comes out of s and makes it way to t with constraints on edges.<ul><li><u>capacity</u> is like the amount of traffic that can go through the road; flow goes through the edge.</li><li>local contraint: the flow can never exceed the capacity</li><li><u>flow</u>: think flow as a rate. No commodity accumulation along the way. Flow can be cyclic<ul><li><img src="/sg/2023/09/09/6.046_flow/Screenshot-4100901.png" class title="Screenshot-4100901"></li></ul></li></ul></li><li>cut is a partition of nodes. A cut in G forms two disconnected components.</li></ul><p>Example: each edge (u, v) in E, non-negative capacity c(u, v). If (u, v) not in E, then assume c(u, v) = 0</p><p><u>Maximum-flow problem</u>: Given a flow network G, find a flow of maximum value on G.</p><p>Assumptions:</p><ol><li>no self-loop edges allowed</li><li>If edge(u, v) in E exists, then (v, u) not in E. WLOG, <u>introduce a new vertex</u> uâ€™ so that v -&gt; uâ€™ -&gt; u</li></ol><p>Relation of flow and cut: The capacity of any cut bounds the flow of cut/network. Min-cut will point to the max-flow.</p><h3><span id="flow">Flow</span><a href="#flow" class="header-anchor">Â¶</a></h3><blockquote class="colorquote green"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="4.926ex" height="2.059ex" role="img" focusable="false" viewbox="0 -705 2177.3 910"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1294,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(1844,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1294,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(1844,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g></g></svg></mjx-container> <u>Flow</u>: A (net) flow on G is function f: V*V -&gt; R satisfying the following constrains.</p><ul><li><p>Capacity constraint: For all u,v <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> V, f(u, v) &lt;= c(u, v).</p></li><li><p>Flow conservation: For all u <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> V - {s, t}, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.71ex;" xmlns="http://www.w3.org/2000/svg" width="16.577ex" height="2.406ex" role="img" focusable="false" viewbox="0 -750 7327.2 1063.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="munder"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"/></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(485,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g></g></g><g data-mml-node="mi" transform="translate(2664,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(3214,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(3603,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(4175,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(4619.7,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(5104.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(5771.5,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mn" transform="translate(6827.2,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g></g></svg></mjx-container></p></li><li><p>Skew symmetry: For all u,v <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> V, f(u, v) = -f(v, u)</p></li></ul><p>The value of a flow f, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.71ex;" xmlns="http://www.w3.org/2000/svg" width="27.544ex" height="2.406ex" role="img" focusable="false" viewbox="0 -750 12174.5 1063.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(278,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(828,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mo" transform="translate(1383.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="munder" transform="translate(2439.6,0)"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"/></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(485,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g></g></g><g data-mml-node="mi" transform="translate(5103.6,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(5653.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(6042.6,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mo" transform="translate(6511.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(6956.2,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(7441.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(8108,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(9163.8,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(9713.8,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(10102.8,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mo" transform="translate(10571.8,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(11016.5,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(11785.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></p></blockquote><blockquote class="colorquote grey"><p>Simple properties of flow:</p><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="7.89ex" height="1.57ex" role="img" focusable="false" viewbox="0 -683 3487.3 694"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(681,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1147,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2025,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2903,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(681,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1147,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2025,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2903,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g></g></g></g></svg></mjx-container> 1.  f(X, X) = 0, f(X, Y) = - f(Y, X), <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="32.544ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 14384.4 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(550,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(939,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"/></g><g data-mml-node="mo" transform="translate(2013.2,0)"><path data-c="222A" d="M591 598H592Q604 598 611 583V376Q611 345 611 296Q610 162 606 148Q605 146 605 145Q586 68 507 23T333 -22Q268 -22 209 -1T106 66T56 173Q55 180 55 384L56 585Q66 598 75 598Q85 598 95 585V378L96 172L98 162Q112 95 181 57T332 18Q415 18 487 58T570 175Q571 180 571 383V583Q579 598 591 598Z"/></g><g data-mml-node="mi" transform="translate(2902.4,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"/></g><g data-mml-node="mo" transform="translate(3665.4,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(4110.1,0)"><path data-c="1D44D" d="M58 8Q58 23 64 35Q64 36 329 334T596 635L586 637Q575 637 512 637H500H476Q442 637 420 635T365 624T311 598T266 548T228 469Q227 466 226 463T224 458T223 453T222 450L221 448Q218 443 202 443Q185 443 182 453L214 561Q228 606 241 651Q249 679 253 681Q256 683 487 683H718Q723 678 723 675Q723 673 717 649Q189 54 188 52L185 49H274Q369 50 377 51Q452 60 500 100T579 247Q587 272 590 277T603 282H607Q628 282 628 271Q547 5 541 2Q538 0 300 0H124Q58 0 58 8Z"/></g><g data-mml-node="mo" transform="translate(4833.1,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(5499.9,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(6555.7,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(7105.7,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(7494.7,0)"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"/></g><g data-mml-node="mo" transform="translate(8346.7,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(8791.3,0)"><path data-c="1D44D" d="M58 8Q58 23 64 35Q64 36 329 334T596 635L586 637Q575 637 512 637H500H476Q442 637 420 635T365 624T311 598T266 548T228 469Q227 466 226 463T224 458T223 453T222 450L221 448Q218 443 202 443Q185 443 182 453L214 561Q228 606 241 651Q249 679 253 681Q256 683 487 683H718Q723 678 723 675Q723 673 717 649Q189 54 188 52L185 49H274Q369 50 377 51Q452 60 500 100T579 247Q587 272 590 277T603 282H607Q628 282 628 271Q547 5 541 2Q538 0 300 0H124Q58 0 58 8Z"/></g><g data-mml-node="mo" transform="translate(9514.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(10125.6,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(11125.8,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(11675.8,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(12064.8,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"/></g><g data-mml-node="mo" transform="translate(12827.8,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(13272.4,0)"><path data-c="1D44D" d="M58 8Q58 23 64 35Q64 36 329 334T596 635L586 637Q575 637 512 637H500H476Q442 637 420 635T365 624T311 598T266 548T228 469Q227 466 226 463T224 458T223 453T222 450L221 448Q218 443 202 443Q185 443 182 453L214 561Q228 606 241 651Q249 679 253 681Q256 683 487 683H718Q723 678 723 675Q723 673 717 649Q189 54 188 52L185 49H274Q369 50 377 51Q452 60 500 100T579 247Q587 272 590 277T603 282H607Q628 282 628 271Q547 5 541 2Q538 0 300 0H124Q58 0 58 8Z"/></g><g data-mml-node="mo" transform="translate(13995.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> if <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="10.946ex" height="1.731ex" role="img" focusable="false" viewbox="0 -683 4838 765"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44B" d="M42 0H40Q26 0 26 11Q26 15 29 27Q33 41 36 43T55 46Q141 49 190 98Q200 108 306 224T411 342Q302 620 297 625Q288 636 234 637H206Q200 643 200 645T202 664Q206 677 212 683H226Q260 681 347 681Q380 681 408 681T453 682T473 682Q490 682 490 671Q490 670 488 658Q484 643 481 640T465 637Q434 634 411 620L488 426L541 485Q646 598 646 610Q646 628 622 635Q617 635 609 637Q594 637 594 648Q594 650 596 664Q600 677 606 683H618Q619 683 643 683T697 681T738 680Q828 680 837 683H845Q852 676 852 672Q850 647 840 637H824Q790 636 763 628T722 611T698 593L687 584Q687 585 592 480L505 384Q505 383 536 304T601 142T638 56Q648 47 699 46Q734 46 734 37Q734 35 732 23Q728 7 725 4T711 1Q708 1 678 1T589 2Q528 2 496 2T461 1Q444 1 444 10Q444 11 446 25Q448 35 450 39T455 44T464 46T480 47T506 54Q523 62 523 64Q522 64 476 181L429 299Q241 95 236 84Q232 76 232 72Q232 53 261 47Q262 47 267 47T273 46Q276 46 277 46T280 45T283 42T284 35Q284 26 282 19Q279 6 276 4T261 1Q258 1 243 1T201 2T142 2Q64 2 42 0Z"/></g><g data-mml-node="mo" transform="translate(1074.2,0)"><path data-c="2229" d="M88 -21T75 -21T55 -7V200Q55 231 55 280Q56 414 60 428Q61 430 61 431Q77 500 152 549T332 598Q443 598 522 544T610 405Q611 399 611 194V-7Q604 -22 591 -22Q582 -22 572 -9L570 405Q563 433 556 449T529 485Q498 519 445 538T334 558Q251 558 179 518T96 401Q95 396 95 193V-7Q88 -21 75 -21Z"/></g><g data-mml-node="mi" transform="translate(1963.4,0)"><path data-c="1D44C" d="M66 637Q54 637 49 637T39 638T32 641T30 647T33 664T42 682Q44 683 56 683Q104 680 165 680Q288 680 306 683H316Q322 677 322 674T320 656Q316 643 310 637H298Q242 637 242 624Q242 619 292 477T343 333L346 336Q350 340 358 349T379 373T411 410T454 461Q546 568 561 587T577 618Q577 634 545 637Q528 637 528 647Q528 649 530 661Q533 676 535 679T549 683Q551 683 578 682T657 680Q684 680 713 681T746 682Q763 682 763 673Q763 669 760 657T755 643Q753 637 734 637Q662 632 617 587Q608 578 477 424L348 273L322 169Q295 62 295 57Q295 46 363 46Q379 46 384 45T390 35Q390 33 388 23Q384 6 382 4T366 1Q361 1 324 1T232 2Q170 2 138 2T102 1Q84 1 84 9Q84 14 87 24Q88 27 89 30T90 35T91 39T93 42T96 44T101 45T107 45T116 46T129 46Q168 47 180 50T198 63Q201 68 227 171L252 274L129 623Q128 624 127 625T125 627T122 629T118 631T113 633T105 634T96 635T83 636T66 637Z"/></g><g data-mml-node="mo" transform="translate(3004.2,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(4060,0)"><path data-c="2205" d="M624 470Q624 468 639 446T668 382T683 291Q683 181 612 99T437 -1Q425 -2 387 -2T337 -1Q245 18 193 70L179 81L131 39Q96 8 89 3T75 -3Q55 -3 55 17Q55 24 61 30T111 73Q154 113 151 113Q151 114 140 130T115 177T95 241Q94 253 94 291T95 341Q112 431 173 495Q265 587 385 587Q410 587 437 581Q522 571 582 513L595 501L642 541Q689 586 695 586Q696 586 697 586T699 587Q706 587 713 583T720 568Q720 560 711 551T664 510Q651 499 642 490T628 475T624 470ZM564 477Q517 522 448 539Q428 546 375 546Q290 546 229 492T144 370Q133 332 133 279Q136 228 151 195Q157 179 168 160T184 141Q186 141 375 307T564 477ZM642 290Q642 318 637 343T625 386T611 416T598 436T593 444Q590 444 402 277T213 108Q213 104 231 89T293 55T392 37Q495 37 568 111T642 290Z"/></g></g></g></svg></mjx-container>.</p><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="9.234ex" height="1.595ex" role="img" focusable="false" viewbox="0 -694 4081.3 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(704,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(1280,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1746,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2231,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2682,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3148,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(704,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(1280,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1746,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2231,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2682,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3148,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g></g></svg></mjx-container> 1. <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="12.086ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 5342.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(278,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(828,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mo" transform="translate(1383.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(2439.6,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(2989.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(3378.6,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(4147.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(4592.2,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(4953.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>, what goes out the source is what goes in the sink.</p><p><em>Proof.</em> <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="19.048ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 8419.1 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(550,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(939,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(1930.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(2930.4,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mo" transform="translate(3621.7,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(4621.9,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(4982.9,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(5427.6,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(6196.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(6863.3,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mn" transform="translate(7919.1,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g></g></svg></mjx-container>, flow of the intermediate vertices goes out to all vertices by conservation law.</p></blockquote><h3><span id="cut">Cut</span><a href="#cut" class="header-anchor">Â¶</a></h3><ol><li>the flow across the cut is as the sum of flows corresponding to each pair of vertices (crossing edges).<ul><li><img src="/sg/2023/09/09/6.046_flow/Screenshot-4105980.png" class title="Screenshot-4105980"></li></ul></li><li>capacity of cut c(S, T) = 3+2+3+1=9</li></ol><blockquote class="colorquote green"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="4.926ex" height="2.059ex" role="img" focusable="false" viewbox="0 -705 2177.3 910"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1294,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(1844,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1294,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(1844,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g></g></svg></mjx-container> <u>Cut</u>: A cut (S&lt; T) of a flow network G = (V, E) is a partition of V such that s <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> S and t <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> T. If f is a low on G, then <u>the flow across the cut</u> is f(S, T)</p></blockquote><blockquote class="colorquote grey"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="9.234ex" height="1.595ex" role="img" focusable="false" viewbox="0 -694 4081.3 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(704,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(1280,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1746,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2231,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2682,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3148,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(704,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(1280,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1746,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2231,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2682,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3148,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g></g></svg></mjx-container> 2. The value of any flow is bounded by the capacity of any cut.</p><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="7.89ex" height="1.57ex" role="img" focusable="false" viewbox="0 -683 3487.3 694"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(681,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1147,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2025,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2903,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(681,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1147,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2025,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2903,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g></g></g></g></svg></mjx-container> 2. For any flow f and any cut (S, T), we have <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="12.582ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 5561.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(278,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(828,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mo" transform="translate(1383.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(2439.6,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(2989.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(3378.6,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(4023.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(4468.2,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(5172.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>.</p><p><em>Proof of T2.</em> <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="12.582ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 5561.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(278,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(828,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mo" transform="translate(1383.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(2439.6,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(2989.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(3378.6,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(4023.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(4468.2,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(5172.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> = <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.71ex;" xmlns="http://www.w3.org/2000/svg" width="49.154ex" height="2.406ex" role="img" focusable="false" viewbox="0 -750 21725.9 1063.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="munder"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"/></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(572,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(1239,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g></g></g><g data-mml-node="munder" transform="translate(2637.9,0)"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"/></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(485,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g></g></g><g data-mml-node="mi" transform="translate(5255.9,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(5805.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(6194.9,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(6766.9,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(7211.6,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(7696.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(8363.4,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"/></g><g data-mml-node="munder" transform="translate(9419.1,0)"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"/></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(572,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(1239,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g></g></g><g data-mml-node="munder" transform="translate(12057,0)"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"/></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(485,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g></g></g><g data-mml-node="mi" transform="translate(14675,0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mo" transform="translate(15108,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(15497,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(16069,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(16513.7,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(16998.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(17665.5,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(18721.3,0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mo" transform="translate(19154.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(19543.3,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(20188.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(20632.9,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(21336.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></p><p><em>Proof of L2.</em> <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="79.218ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 35014.4 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(550,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(939,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(1584,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(2028.7,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(2732.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(3399.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(4455.2,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(5005.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(5394.2,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(6039.2,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(6483.9,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(7252.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(7864.1,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(8864.3,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(9414.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(9803.3,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(10448.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(10893,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(11538,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(12204.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(13260.6,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(13810.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(14199.6,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(14844.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(15289.2,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(16058.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(16725,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(17780.8,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(18330.8,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(18719.8,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mo" transform="translate(19188.8,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(19633.4,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(20402.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(21013.7,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(22013.9,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(22563.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(22952.9,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(23820.1,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(24820.3,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mo" transform="translate(25289.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(25734,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(26503,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(27169.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(28225.6,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(28775.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(29164.6,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mo" transform="translate(29633.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(30078.2,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(30847.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(31514,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mo" transform="translate(32569.8,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(32847.8,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(33397.8,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mo" transform="translate(33842.4,0)"><path data-c="2026" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60ZM525 60Q525 84 542 102T585 120Q609 120 627 104T646 61Q646 36 629 18T586 0T543 17T525 60ZM972 60Q972 84 989 102T1032 120Q1056 120 1074 104T1093 61Q1093 36 1076 18T1033 0T990 17T972 60Z"/></g></g></g></svg></mjx-container></p><ul><li>Intuitively, source is on one side of the cut and sink on the other side.</li><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="15.185ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 6711.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(550,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(939,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(1806.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(2806.4,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mo" transform="translate(3275.4,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(3720.1,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(4489.1,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(5155.9,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mn" transform="translate(6211.7,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g></g></svg></mjx-container>: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.486ex;" xmlns="http://www.w3.org/2000/svg" width="8.869ex" height="2.106ex" role="img" focusable="false" viewbox="0 -716 3920 931"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(638.8,0)"><path data-c="2209" d="M196 25Q84 109 84 250Q84 372 166 450T360 539Q361 539 375 539T413 540T460 540L547 707Q550 716 563 716Q570 716 575 712T581 703T583 696T505 540H568Q583 532 583 520Q583 511 570 501L484 500L366 270H568Q583 262 583 250T568 230H346L247 38Q284 16 328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 447 -40T419 -41Q304 -41 228 3Q117 -211 115 -212Q111 -215 104 -215T92 -212T86 -204T84 -197Q84 -190 89 -183L196 25ZM214 61L301 230H124V228Q124 196 147 147T214 61ZM321 270L440 500Q353 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H321Z"/></g><g data-mml-node="mi" transform="translate(1583.6,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(2450.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(3451,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g></g></g></svg></mjx-container>, by conservation law</li></ul></blockquote><h3><span id="residual-networks">Residual networks</span><a href="#residual-networks" class="header-anchor">Â¶</a></h3><ol><li>network points to where you can increase the flow for capacity left.</li><li>Augmentation: Not only increase the flow but also shrink it. The shrinkage of flow is represented by an edge in the residual network.</li><li>How augmentation changes flow: walking through the augmenting path, looking at each of the residual capacities and picking the Min value.</li><li>Help to look for augmenting paths in Gf for Ford Fulkerson.</li></ol><blockquote class="colorquote green"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="4.926ex" height="2.059ex" role="img" focusable="false" viewbox="0 -705 2177.3 910"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1294,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(1844,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1294,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(1844,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g></g></svg></mjx-container> <u>Residual network</u>: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="10.089ex" height="2.364ex" role="img" focusable="false" viewbox="0 -750 4459.5 1045"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"/></g><g data-mml-node="mi" transform="translate(819,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g><g data-mml-node="mo" transform="translate(1257.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1646.9,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(2415.9,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="msub" transform="translate(2860.6,0)"><g data-mml-node="mi"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mi" transform="translate(771,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g><g data-mml-node="mo" transform="translate(4070.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>, <strong>strictly positive</strong> residual capacities <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="29.675ex" height="2.364ex" role="img" focusable="false" viewbox="0 -750 13116.5 1045"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mi" transform="translate(466,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g><g data-mml-node="mo" transform="translate(904.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1293.9,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1865.9,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(2310.6,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(2795.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(3462.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(4518.1,0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mo" transform="translate(4951.1,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(5340.1,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(5912.1,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(6356.8,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(6841.8,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(7453,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(8453.2,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(9003.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(9392.2,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(9964.2,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(10408.9,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(10893.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(11560.7,0)"><path data-c="3E" d="M84 520Q84 528 88 533T96 539L99 540Q106 540 253 471T544 334L687 265Q694 260 694 250T687 235Q685 233 395 96L107 -40H101Q83 -38 83 -20Q83 -19 83 -17Q82 -10 98 -1Q117 9 248 71Q326 108 378 132L626 250L378 368Q90 504 86 509Q84 513 84 520Z"/></g><g data-mml-node="mn" transform="translate(12616.5,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g></g></svg></mjx-container>. Edges in <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="2.737ex" height="2.206ex" role="img" focusable="false" viewbox="0 -680 1209.9 975"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mi" transform="translate(771,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g></g></g></svg></mjx-container> admit more flow.</p><p>If (v, u) not in E, c(v, u) = 0, but f(v, u) = -f(u, v). <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="11.13ex" height="2.363ex" role="img" focusable="false" viewbox="0 -749.5 4919.5 1044.5"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="msub" transform="translate(278,0)"><g data-mml-node="mi"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mi" transform="translate(771,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g><g data-mml-node="mo" transform="translate(1487.9,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mo" transform="translate(2043.7,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"/></g><g data-mml-node="mn" transform="translate(3099.5,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g><g data-mml-node="mo" transform="translate(3599.5,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(3877.5,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(4641.5,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g></g></g></svg></mjx-container></p></blockquote><p>Augmenting paths:</p><ol><li><p>graph G =&gt; residual networks Gf =&gt; augmented paths</p><ul><li><p>G:<img src="/sg/2023/09/09/6.046_flow/Screenshot-4110386.png" class title="Screenshot-4110386"></p></li><li><p>Gf: <img src="/sg/2023/09/09/6.046_flow/Screenshot-4110124.png" class title="Screenshot-4110124"></p></li></ul></li><li><p>If find a path from s to t in <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="2.846ex" height="2.262ex" role="img" focusable="false" viewbox="0 -705 1257.9 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"/></g><g data-mml-node="mi" transform="translate(819,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g></g></g></svg></mjx-container>, then the flow is not maximum. <u>If no path exists, the flow is maximum.</u></p></li><li><p>Augmenting paths can increase flow and tell how to change edges (subtract or increase)</p></li></ol><blockquote class="colorquote green"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="4.926ex" height="2.059ex" role="img" focusable="false" viewbox="0 -705 2177.3 910"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1294,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(1844,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1294,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(1844,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g></g></svg></mjx-container> Any path from s to t in <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="2.846ex" height="2.262ex" role="img" focusable="false" viewbox="0 -705 1257.9 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D43A" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q492 659 471 656T418 643T357 615T294 567T236 496T189 394T158 260Q156 242 156 221Q156 173 170 136T206 79T256 45T308 28T353 24Q407 24 452 47T514 106Q517 114 529 161T541 214Q541 222 528 224T468 227H431Q425 233 425 235T427 254Q431 267 437 273H454Q494 271 594 271Q634 271 659 271T695 272T707 272Q721 272 721 263Q721 261 719 249Q714 230 709 228Q706 227 694 227Q674 227 653 224Q646 221 643 215T629 164Q620 131 614 108Q589 6 586 3Q584 1 581 1Q571 1 553 21T530 52Q530 53 528 52T522 47Q448 -22 322 -22Q201 -22 126 55T50 252Z"/></g><g data-mml-node="mi" transform="translate(819,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g></g></g></svg></mjx-container> is an <u>augmenting path</u> in G with respect to f. The flow value can be increased along an augmenting path p by <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.8ex;" xmlns="http://www.w3.org/2000/svg" width="24.732ex" height="2.497ex" role="img" focusable="false" viewbox="0 -750 10931.5 1103.5"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mi" transform="translate(466,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g><g data-mml-node="mo" transform="translate(904.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1293.9,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/></g><g data-mml-node="mo" transform="translate(1796.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(2463.7,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(3519.5,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(4397.5,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="msub" transform="translate(4742.5,0)"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="TeXAtom" transform="translate(633,-176.7) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(961,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(1239,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(1724,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(2113,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(2780,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/></g></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(7746.9,0)"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mi" transform="translate(466,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g><g data-mml-node="mo" transform="translate(904.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1293.9,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1865.9,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(2310.6,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(2795.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></g></svg></mjx-container>.</p></blockquote><h2><span id="max-flow-min-cut">Max-flow, min-cut</span><a href="#max-flow-min-cut" class="header-anchor">Â¶</a></h2><h3><span id="max-flow-min-cut-theorem">Max-flow, min-cut theorem</span><a href="#max-flow-min-cut-theorem" class="header-anchor">Â¶</a></h3><p>Proof: 1=&gt;2, 2=&gt;3, 3=&gt;1. Movement between Gf and G.</p><blockquote class="colorquote grey"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="9.234ex" height="1.595ex" role="img" focusable="false" viewbox="0 -694 4081.3 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(704,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(1280,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1746,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2231,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2682,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3148,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(704,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(1280,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1746,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2231,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2682,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3148,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g></g></svg></mjx-container> 3. The following are equivalent:</p><ol><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="12.317ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 5444.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(278,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(828,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mo" transform="translate(1383.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(2439.6,0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mo" transform="translate(2872.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(3261.6,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(3906.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(4351.2,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(5055.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> for some cut (S, T). =&gt; some cut is saturated</li><li>f is a maximum flow.</li><li>f admits no augmenting paths.</li></ol><p><em>Proof.</em></p><ul><li><p>1=&gt;2, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="12.317ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 5444.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo" transform="translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mi" transform="translate(278,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(828,0) translate(0 -0.5)"><path data-c="7C" d="M139 -249H137Q125 -249 119 -235V251L120 737Q130 750 139 750Q152 750 159 735V-235Q151 -249 141 -249H139Z"/></g><g data-mml-node="mo" transform="translate(1383.8,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"/></g><g data-mml-node="mi" transform="translate(2439.6,0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mo" transform="translate(2872.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(3261.6,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mo" transform="translate(3906.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(4351.2,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(5055.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> for any cut (S, T)</p></li><li><p>2=&gt;3, by contradiction</p></li><li><p><u>3=&gt;1</u>, suppose f admits no augmenting paths (cannot reach t from s)</p><ul><li><p>Define S = {v<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container>V: there exists a path in Gf from s to v} (set of the reachable vertices from S) and let T = V - S (s<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container>S, t<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container>T=&gt;(S, T) is a cut)</p></li><li><p><u>key observation</u>: no path in Gf from u to v, otherwise v <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> S.</p><ul><li><img src="/sg/2023/09/09/6.046_flow/Screenshot-4279298.png" class title="Screenshot-4279298"></li><li><p>Picking an edge in G from u to v  with a non-zero capacity (existence)</p></li></ul></li><li><p>=&gt; <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="11.353ex" height="2.364ex" role="img" focusable="false" viewbox="0 -750 5018.1 1045"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mi" transform="translate(466,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g><g data-mml-node="mo" transform="translate(904.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1293.9,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1865.9,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(2310.6,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(2795.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(3462.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mn" transform="translate(4518.1,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g></g></svg></mjx-container>, since if <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="11.353ex" height="2.364ex" role="img" focusable="false" viewbox="0 -750 5018.1 1045"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mi" transform="translate(466,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g><g data-mml-node="mo" transform="translate(904.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1293.9,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1865.9,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(2310.6,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(2795.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(3462.4,0)"><path data-c="3E" d="M84 520Q84 528 88 533T96 539L99 540Q106 540 253 471T544 334L687 265Q694 260 694 250T687 235Q685 233 395 96L107 -40H101Q83 -38 83 -20Q83 -19 83 -17Q82 -10 98 -1Q117 9 248 71Q326 108 378 132L626 250L378 368Q90 504 86 509Q84 513 84 520Z"/></g><g data-mml-node="mn" transform="translate(4518.1,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g></g></svg></mjx-container>, then v<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container>S not v<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container>T as assumed.</p></li><li><p>=&gt; f(u, v) = c(u, v), every edge from S to T in G is saturated =&gt; summing over u, v â€¦ yields f(S, T) = c(S, T).</p></li></ul></li></ul></blockquote><h3><span id="ford-fulkerson-algorithm">Ford-Fulkerson algorithm</span><a href="#ford-fulkerson-algorithm" class="header-anchor">Â¶</a></h3><ol><li>many subproblem routines: compute Gf given f, discover an augmenting path via dfs/bfs, â€¦</li><li>proof: prove T3: 3=&gt;2</li><li>What selected paths lead to failure:<ul><li>only need 2 iterations in the example</li><li>It takes 2 billion iterations: s-&gt;a-&gt;b (G) =&gt; s-&gt;b-&gt;a (Gf) =&gt; G =&gt; Gf â€¦<ul><li><img src="/sg/2023/09/09/6.046_flow/Screenshot-4280418.png" class title="Screenshot-4280418"></li></ul></li></ul></li></ol><blockquote class="colorquote blue"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="12.27ex" height="2.084ex" role="img" focusable="false" viewbox="0 -716 5423.3 921"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mi" transform="translate(750,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(1048,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/></g><g data-mml-node="mi" transform="translate(1525,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2010,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2461,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2806,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mi" transform="translate(3167,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(3743,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(4621,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mo" transform="translate(5090,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mi" transform="translate(750,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(1048,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/></g><g data-mml-node="mi" transform="translate(1525,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2010,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2461,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2806,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mi" transform="translate(3167,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(3743,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(4621,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mo" transform="translate(5090,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g></g></svg></mjx-container>  f[u, v] &lt;- 0 for all u,v <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> V. While an augmenting path p in Gf exists, do augment f by <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="4.945ex" height="2.364ex" role="img" focusable="false" viewbox="0 -750 2185.9 1045"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mi" transform="translate(466,-150) scale(0.707)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g></g><g data-mml-node="mo" transform="translate(904.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1293.9,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/></g><g data-mml-node="mo" transform="translate(1796.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></p></blockquote><h3><span id="edmonds-karp-algorithm">Edmonds-Karp algorithm</span><a href="#edmonds-karp-algorithm" class="header-anchor">Â¶</a></h3><ol><li>breadth-first (<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="5.215ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 2305 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(1916,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>) or depth-first can provide a polynomial-time bound on max flow</li><li>runtime:<ul><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.955ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 3074 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mi" transform="translate(1921,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(2685,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> augmentations in worst case</li><li>overall complexity <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="8.058ex" height="2.452ex" role="img" focusable="false" viewbox="0 -833.9 3561.9 1083.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="msup" transform="translate(1921,0)"><g data-mml-node="mi"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mn" transform="translate(848.3,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g></g><g data-mml-node="mo" transform="translate(3172.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></li></ul></li><li>fastest max flow algorithms O(VE), Orlin 2015</li></ol><blockquote class="colorquote green"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.464ex;" xmlns="http://www.w3.org/2000/svg" width="4.926ex" height="2.059ex" role="img" focusable="false" viewbox="0 -705 2177.3 910"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1294,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(1844,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1294,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"/></g><g data-mml-node="mo" transform="translate(1844,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g></g></svg></mjx-container> breadth-first augmenting path: a shortest path in Gf from s to t where each edge has weight 1.</p></blockquote><h2><span id="baseball-elimination-ex">Baseball elimination ex</span><a href="#baseball-elimination-ex" class="header-anchor">Â¶</a></h2><p>Rules: divisions: playoffs -&gt; tied: elimination. <u>Team i is eliminated if wi + ri &lt; wj for some j.</u> <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.666ex;" xmlns="http://www.w3.org/2000/svg" width="2.864ex" height="1.666ex" role="img" focusable="false" viewbox="0 -442 1265.9 736.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="TeXAtom" transform="translate(484,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(623,0)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"/></g></g></g></g></g></svg></mjx-container> are the games that these teams play against each other. Table 1 only lists one division. ri includes games playing against other divisions.</p><p>Problem: Decide if you have a chance to make the playoffs or not. Want an algorithms to look at standings and decide if the team is alive or not.</p><img src="/sg/2023/09/09/6.046_flow/Screenshot-4281806.png" class title="Screenshot-4281806"><p>Observe that teams playing each other that can affect the outcome.</p><ul><li>If w5 = 46, Detroit is eliminated. What if w5 = 47, w5+r5=75 = w1, Detroit is still eliminated. Because w5+r5+max(winning) = 54+r5, w1+r1+min(winning) = w1+r1. Either Baltimore or Boston will win by w3+r3+ # games NY loses to Boston = 76+r3</li><li>What if w5 = 48? Edge cases are complicate to analysis</li></ul><p>Analysis: convert tables/data to flow network (<strong>frame of translation</strong>)</p><ol><li>add capacities to v-t edges such that max flow represents elimination<ul><li>c(v, t) = w5+r5-wi, # games team i can win and not have more wins than team 5<ul><li><img src="/sg/2023/09/09/6.046_flow/Screenshot-4334659.png" class title="Screenshot-4334659"></li></ul></li></ul></li><li>Intuition: Assume team 5 wins all remaining games. Divvy up remaining games (sending flow through these edges). All teams have &lt;= w5 + r5 wins (=&gt; team 5 is not eliminated)</li><li>Find the min cut (minimal capacity): c(S, T) = 25 =&gt; elimination</li></ol><blockquote class="colorquote grey"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="9.234ex" height="1.595ex" role="img" focusable="false" viewbox="0 -694 4081.3 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(704,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(1280,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1746,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2231,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2682,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3148,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(704,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(1280,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1746,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2231,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2682,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3148,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g></g></svg></mjx-container> 4. Team 5 (Detroit) is eliminated if and only if max-flow does not saturate all edges leaving the source, i.e., max flow value &lt; 26.</p><ul><li>saturate: all the games have been played</li><li>Argument: If you canâ€™t play all the remaining games without exceeding the capacity of i-&gt;t edges, team 5 is eliminated.</li></ul><p><em>Proof.</em></p><ul><li></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
          <category> 6.046 algorithms design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>6.046 greedy algorithms</title>
      <link href="/sg/2023/09/07/6.046_greedy/"/>
      <url>/sg/2023/09/07/6.046_greedy/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#minimum-spanning-tree">minimum spanning tree</a></li><li><a href="#greedy-properties">greedy properties</a><ul><li><a href="#optimal-substructure-for-mst">optimal substructure for MST</a></li><li><a href="#greedy-choice-property-for-mst">greedy choice property for MST</a></li></ul></li><li><a href="#prim-s-algorithm">Primâ€™s Algorithm</a></li><li><a href="#kruskal-s-algorithm">Kruskalâ€™s Algorithm</a></li><li><a href="#olc">OLC</a></li></ul><!-- tocstop --></div><h2><span id="minimum-spanning-tree">minimum spanning tree</span><a href="#minimum-spanning-tree" class="header-anchor">Â¶</a></h2><p>Terminology</p><ul><li>tree, connected acyclic graph</li><li>Cut: A cut is a partition of the vertices of a graph into two disjoint subsets. Any cut determines a cut-set, the set of edges that have one endpoint in each subset of the partition. These edges are said to cross the cut.</li><li>spanning, it contains all the vertices</li><li><u>spanning tree</u> of graph G is the subset of edges of G that form a tree &amp; hit all vertices of G</li><li>E, undirected edges</li><li>The fastest MST is a randomized algorithm with O(V+E) proposed by KKT in 1993</li></ul><p>MST: given graph G=(V, E) &amp; edge weights w for E , find a spanning tree T of minimum weight <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.71ex;" xmlns="http://www.w3.org/2000/svg" width="10.327ex" height="2.406ex" role="img" focusable="false" viewbox="0 -750 4564.6 1063.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="munder"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"/></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(466,0)"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g><g data-mml-node="mi" transform="translate(1133,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g></g></g><g data-mml-node="mi" transform="translate(2604.6,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(3320.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(3709.6,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(4175.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>.</p><p>Goal: exponential # spanning tree -&gt; polynomial (geedy) -&gt; near linear time</p><p>A fundamental lemma of MST is that if a subtree is an MST of a graph contracting an edge, then that subtree adding the edge is an MST of the graph.</p><p>This lemma forms the optimal substructure for MST. Guessing an edge e in a MST takes exponential time. We can reduce that by shrinking the guess space.</p><p>A cut connects two disjoint sets of a graph. The greedy part of the MST algs is that a least-weight edge crossing cut belongs to some MST of the graph.</p><ul><li><img src="/sg/2023/09/07/6.046_greedy/Screenshot-4072530.png" class title="Screenshot-4072530"></li></ul><h2><span id="greedy-properties">greedy properties</span><a href="#greedy-properties" class="header-anchor">Â¶</a></h2><ol><li>optimal substructure: optimal solution to subproblems -&gt; optimal solution to a problem</li><li>greedy choice property: locally optimal choiced lead to a globally optimal solution</li></ol><h3><span id="optimal-substructure-for-mst">optimal substructure for MST</span><a href="#optimal-substructure-for-mst" class="header-anchor">Â¶</a></h3><p>If e = {u, v} is an edge of some MST:</p><ol><li><p>remove edge e: still connected by red lines, not working</p></li><li><p><u>contract e</u>: merge u,v, contraction preserves connectivity.</p><img src="/sg/2023/09/07/6.046_greedy/Screenshot-4073380.png" class title="Screenshot-4073380"><img src="/sg/2023/09/07/6.046_greedy/Screenshot-4073566.png" class title="Screenshot-4073566"></li></ol><blockquote class="colorquote grey"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="7.89ex" height="1.57ex" role="img" focusable="false" viewbox="0 -683 3487.3 694"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(681,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1147,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2025,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2903,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(681,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1147,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2025,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2903,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g></g></g></g></svg></mjx-container> 1. If Tâ€™ is a MST of G/e, then Tâ€™ <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.403ex" role="img" focusable="false" viewbox="0 -598 667 620"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="222A" d="M591 598H592Q604 598 611 583V376Q611 345 611 296Q610 162 606 148Q605 146 605 145Q586 68 507 23T333 -22Q268 -22 209 -1T106 66T56 173Q55 180 55 384L56 585Q66 598 75 598Q85 598 95 585V378L96 172L98 162Q112 95 181 57T332 18Q415 18 487 58T570 175Q571 180 571 383V583Q579 598 591 598Z"/></g></g></g></svg></mjx-container> {e} is an MST of G.</p><p><em>Proof.</em> Say e <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> MST T* &amp; G</p><ul><li>=&gt; T*/e is a spanning tree of Gâ€™ = G/{e}, by connectivity.</li><li>Tâ€™ is an MST of Gâ€™ =&gt; <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="17.017ex" height="2.283ex" role="img" focusable="false" viewbox="0 -759 7521.6 1009"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(716,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(1105,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(793,363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"/></g></g><g data-mml-node="mo" transform="translate(2142.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(2809.2,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"/></g><g data-mml-node="mi" transform="translate(3865,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(4581,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(4970,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(793,363) scale(0.707)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(6166.6,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"/></g></g><g data-mml-node="mi" transform="translate(6666.6,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(7132.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></li><li>=&gt; $w(T) = w(Tâ€™) + w(e)\le w(T^<em>/e) + w(e) = w(T^</em>)$</li></ul></blockquote><ol><li>DP algs: Lemma 1 prove the correctness of this algorithm<ul><li>guess edge e in a MST</li><li>contract e</li><li>recurse</li><li>decontract e</li><li>add e to MST</li></ul></li><li>analysis: reduce exponential time by taking a good guess</li></ol><h3><span id="greedy-choice-property-for-mst">greedy choice property for MST</span><a href="#greedy-choice-property-for-mst" class="header-anchor">Â¶</a></h3><ol><li><u>cut and paste</u> argument for greedy proof<ul><li>cut (S, V-S), a crossing edge is the edge that crosses the cut</li><li>only modify edges crossing cut</li></ul></li><li>Lemma 2 provides good guess</li></ol><blockquote class="colorquote grey"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="7.89ex" height="1.57ex" role="img" focusable="false" viewbox="0 -683 3487.3 694"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(681,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1147,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2025,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2903,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D43F" d="M228 637Q194 637 192 641Q191 643 191 649Q191 673 202 682Q204 683 217 683Q271 680 344 680Q485 680 506 683H518Q524 677 524 674T522 656Q517 641 513 637H475Q406 636 394 628Q387 624 380 600T313 336Q297 271 279 198T252 88L243 52Q243 48 252 48T311 46H328Q360 46 379 47T428 54T478 72T522 106T564 161Q580 191 594 228T611 270Q616 273 628 273H641Q647 264 647 262T627 203T583 83T557 9Q555 4 553 3T537 0T494 -1Q483 -1 418 -1T294 0H116Q32 0 32 10Q32 17 34 24Q39 43 44 45Q48 46 59 46H65Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Q285 635 228 637Z"/></g><g data-mml-node="mi" transform="translate(681,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1147,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2025,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2903,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g></g></g></g></svg></mjx-container> 2. Consider any cut (S, V-S), S <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.312ex;" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.751ex" role="img" focusable="false" viewbox="0 -636 778 774"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2286" d="M84 346Q84 468 166 546T360 635Q361 635 370 635T395 635T430 636T475 636T524 636H679Q694 628 694 616Q694 607 681 597L522 596H470H441Q366 596 338 592T266 568Q244 557 224 542T179 500T139 433T124 346V341Q124 253 185 185Q244 121 328 103Q348 98 366 98T522 96H681Q694 86 694 76Q694 64 679 56H526Q510 56 480 56T434 55Q350 55 289 71T172 141Q84 223 84 346ZM104 -131T104 -118T118 -98H679Q694 -106 694 -118T679 -138H118Q104 -131 104 -118Z"/></g></g></g></svg></mjx-container> V. Say e is a least-weight edge crossing cut, e = {u, v}, u <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> S, v <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> V-S, then e <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> some MST.</p><p><em>Proof.</em> Let T* be an MST of G. Say e <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.486ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="2.106ex" role="img" focusable="false" viewbox="0 -716 667 931"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2209" d="M196 25Q84 109 84 250Q84 372 166 450T360 539Q361 539 375 539T413 540T460 540L547 707Q550 716 563 716Q570 716 575 712T581 703T583 696T505 540H568Q583 532 583 520Q583 511 570 501L484 500L366 270H568Q583 262 583 250T568 230H346L247 38Q284 16 328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 447 -40T419 -41Q304 -41 228 3Q117 -211 115 -212Q111 -215 104 -215T92 -212T86 -204T84 -197Q84 -190 89 -183L196 25ZM214 61L301 230H124V228Q124 196 147 147T214 61ZM321 270L440 500Q353 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H321Z"/></g></g></g></svg></mjx-container> T* (modify T* to include e).</p><ul><li>=&gt; there must be eâ€™ <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> T* crossing the cut.</li><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="10.724ex" height="1.903ex" role="img" focusable="false" viewbox="0 -759 4739.9 841"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(793,363) scale(0.707)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g></g><g data-mml-node="mo" transform="translate(1418.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="msup" transform="translate(2419,0)"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(499,363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"/></g></g><g data-mml-node="mo" transform="translate(3384.7,0)"><path data-c="222A" d="M591 598H592Q604 598 611 583V376Q611 345 611 296Q610 162 606 148Q605 146 605 145Q586 68 507 23T333 -22Q268 -22 209 -1T106 66T56 173Q55 180 55 384L56 585Q66 598 75 598Q85 598 95 585V378L96 172L98 162Q112 95 181 57T332 18Q415 18 487 58T570 175Q571 180 571 383V583Q579 598 591 598Z"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(4273.9,0)"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g></g></g></g></svg></mjx-container> is spanning tree (graph theory)</li><li>greedy part: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="60.911ex" height="2.283ex" role="img" focusable="false" viewbox="0 -759 26922.5 1009"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(716,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1105,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(1571,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(2237.8,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"/></g><g data-mml-node="mi" transform="translate(3293.6,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(4009.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(4398.6,0)"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(499,363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"/></g></g><g data-mml-node="mo" transform="translate(5142,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(5531,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(5975.7,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(6691.7,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(7080.7,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(8006.9,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="mo" transform="translate(8729.1,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="msup" transform="translate(9507.1,0)"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(499,363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"/></g></g><g data-mml-node="mo" transform="translate(10472.8,0)"><path data-c="222A" d="M591 598H592Q604 598 611 583V376Q611 345 611 296Q610 162 606 148Q605 146 605 145Q586 68 507 23T333 -22Q268 -22 209 -1T106 66T56 173Q55 180 55 384L56 585Q66 598 75 598Q85 598 95 585V378L96 172L98 162Q112 95 181 57T332 18Q415 18 487 58T570 175Q571 180 571 383V583Q579 598 591 598Z"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(11362,0)"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g></g><g data-mml-node="mo" transform="translate(11828,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(12494.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(13550.6,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(14266.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(14655.6,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(15359.6,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="mo" transform="translate(15859.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(16470.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(17471,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(18187,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(18576,0)"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(499,363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"/></g></g><g data-mml-node="mo" transform="translate(19319.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(19930.7,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(20930.9,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(21646.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(22035.9,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(22501.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(23168.7,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"/></g><g data-mml-node="mi" transform="translate(24224.5,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(24940.5,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(25329.5,0)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(26033.5,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="mo" transform="translate(26533.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></li><li>=&gt; <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="10.724ex" height="1.903ex" role="img" focusable="false" viewbox="0 -759 4739.9 841"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mo" transform="translate(793,363) scale(0.707)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g></g><g data-mml-node="mo" transform="translate(1418.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="msup" transform="translate(2419,0)"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(499,363) scale(0.707)"><path data-c="2032" d="M79 43Q73 43 52 49T30 61Q30 68 85 293T146 528Q161 560 198 560Q218 560 240 545T262 501Q262 496 260 486Q259 479 173 263T84 45T79 43Z"/></g></g><g data-mml-node="mo" transform="translate(3384.7,0)"><path data-c="222A" d="M591 598H592Q604 598 611 583V376Q611 345 611 296Q610 162 606 148Q605 146 605 145Q586 68 507 23T333 -22Q268 -22 209 -1T106 66T56 173Q55 180 55 384L56 585Q66 598 75 598Q85 598 95 585V378L96 172L98 162Q112 95 181 57T332 18Q415 18 487 58T570 175Q571 180 571 383V583Q579 598 591 598Z"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(4273.9,0)"><g data-mml-node="mi"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g></g></g></g></svg></mjx-container> is an MST</li></ul></blockquote><h2><span id="prim-s-algorithm">Primâ€™s Algorithm</span><a href="#prim-s-algorithm" class="header-anchor">Â¶</a></h2><ol><li>Idea: choose a cut - a single vertex, an arbitrary start vertex s. And find the minimum weight edge sequentially to connect all vertices. Return our MST.</li><li>Design: maintain priority queue Q on V-S where v.key = min{w(u, v) | u <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> S}; Choose arbitrary start vertex s âˆˆ V, s.key = 0</li><li>Proof for correctness</li><li>Analysis: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.667ex;" xmlns="http://www.w3.org/2000/svg" width="41.257ex" height="2.364ex" role="img" focusable="false" viewbox="0 -750 18235.8 1045"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(1921,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(2532.2,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="msub" transform="translate(3254.4,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="TeXAtom" transform="translate(617,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mi" transform="translate(764,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mi" transform="translate(1336,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mi" transform="translate(1697,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2148,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g><g data-mml-node="mi" transform="translate(2677,0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mi" transform="translate(3110,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="mo" transform="translate(3471,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(4249,0)"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"/></g><g data-mml-node="mi" transform="translate(5300,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(5645,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g></g></g><g data-mml-node="mo" transform="translate(8559.5,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(9559.8,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(10322.8,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(10711.8,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(11475.8,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(12087,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="msub" transform="translate(12809.2,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="TeXAtom" transform="translate(617,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="mi" transform="translate(828,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1294,0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mi" transform="translate(1727,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2178,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(2644,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g><g data-mml-node="mi" transform="translate(3173,0)"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mi" transform="translate(3642,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(4108,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(4886,0)"><path data-c="1D43E" d="M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z"/></g><g data-mml-node="mi" transform="translate(5775,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(6241,0)"><path data-c="1D466" d="M21 287Q21 301 36 335T84 406T158 442Q199 442 224 419T250 355Q248 336 247 334Q247 331 231 288T198 191T182 105Q182 62 196 45T238 27Q261 27 281 38T312 61T339 94Q339 95 344 114T358 173T377 247Q415 397 419 404Q432 431 462 431Q475 431 483 424T494 412T496 403Q496 390 447 193T391 -23Q363 -106 294 -155T156 -205Q111 -205 77 -183T43 -117Q43 -95 50 -80T69 -58T89 -48T106 -45Q150 -45 150 -87Q150 -107 138 -122T115 -142T102 -147L99 -148Q101 -153 118 -160T152 -167H160Q177 -167 186 -165Q219 -156 247 -127T290 -65T313 -9T321 21L315 17Q309 13 296 6T270 -6Q250 -11 231 -11Q185 -11 150 11T104 82Q103 89 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g></g></g></svg></mjx-container><ul><li>O(E) results from the sum of # of adjacent vertices in G, which is 2|E| by the handshaking lemma</li><li><img src="/sg/2023/09/07/6.046_greedy/Screenshot-4095274.png" class title="Screenshot-4095274"></li></ul></li></ol><blockquote class="colorquote grey"><p>Invariants of Primâ€™s Algorithm are:</p><ol><li>v <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.486ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="2.106ex" role="img" focusable="false" viewbox="0 -716 667 931"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2209" d="M196 25Q84 109 84 250Q84 372 166 450T360 539Q361 539 375 539T413 540T460 540L547 707Q550 716 563 716Q570 716 575 712T581 703T583 696T505 540H568Q583 532 583 520Q583 511 570 501L484 500L366 270H568Q583 262 583 250T568 230H346L247 38Q284 16 328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 447 -40T419 -41Q304 -41 228 3Q117 -211 115 -212Q111 -215 104 -215T92 -212T86 -204T84 -197Q84 -190 89 -183L196 25ZM214 61L301 230H124V228Q124 196 147 147T214 61ZM321 270L440 500Q353 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H321Z"/></g></g></g></svg></mjx-container> S =&gt; v.key = min{w(u, v) | u <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> S}</li><li>Tree <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.375ex;" xmlns="http://www.w3.org/2000/svg" width="2.541ex" height="1.906ex" role="img" focusable="false" viewbox="0 -677 1123.1 842.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(617,-150) scale(0.707)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g></g></g></g></svg></mjx-container> within S <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.312ex;" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.751ex" role="img" focusable="false" viewbox="0 -636 778 774"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2286" d="M84 346Q84 468 166 546T360 635Q361 635 370 635T395 635T430 636T475 636T524 636H679Q694 628 694 616Q694 607 681 597L522 596H470H441Q366 596 338 592T266 568Q244 557 224 542T179 500T139 433T124 346V341Q124 253 185 185Q244 121 328 103Q348 98 366 98T522 96H681Q694 86 694 76Q694 64 679 56H526Q510 56 480 56T434 55Q350 55 289 71T172 141Q84 223 84 346ZM104 -131T104 -118T118 -98H679Q694 -106 694 -118T679 -138H118Q104 -131 104 -118Z"/></g></g></g></svg></mjx-container> MST of G</li></ol><p><em>Proof of 2.</em></p></blockquote><h2><span id="kruskal-s-algorithm">Kruskalâ€™s Algorithm</span><a href="#kruskal-s-algorithm" class="header-anchor">Â¶</a></h2><ol><li>Idea: take the globally lowest-weight edge and contract it.</li><li>Design: Maintain connected components that have been added to the MST so far T,  in a Union-Find structure</li><li>Proof for correctness</li><li>Analysis: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="71.864ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 31764 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="TeXAtom" transform="translate(617,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"/></g><g data-mml-node="mi" transform="translate(469,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(954,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1405,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g></g></g><g data-mml-node="mo" transform="translate(1915.8,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(2304.8,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(3068.8,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(3680,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(4680.2,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(5443.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(5832.2,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(6601.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(7212.4,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="msub" transform="translate(7934.6,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="TeXAtom" transform="translate(617,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D440" d="M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z"/></g><g data-mml-node="mi" transform="translate(1051,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g><g data-mml-node="mi" transform="translate(1580,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g><g data-mml-node="mi" transform="translate(2101,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(2567,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(3345,0)"><path data-c="1D446" d="M308 24Q367 24 416 76T466 197Q466 260 414 284Q308 311 278 321T236 341Q176 383 176 462Q176 523 208 573T273 648Q302 673 343 688T407 704H418H425Q521 704 564 640Q565 640 577 653T603 682T623 704Q624 704 627 704T632 705Q645 705 645 698T617 577T585 459T569 456Q549 456 549 465Q549 471 550 475Q550 478 551 494T553 520Q553 554 544 579T526 616T501 641Q465 662 419 662Q362 662 313 616T263 510Q263 480 278 458T319 427Q323 425 389 408T456 390Q490 379 522 342T554 242Q554 216 546 186Q541 164 528 137T492 78T426 18T332 -20Q320 -22 298 -22Q199 -22 144 33L134 44L106 13Q83 -14 78 -18T65 -22Q52 -22 52 -14Q52 -11 110 221Q112 227 130 227H143Q149 221 149 216Q149 214 148 207T144 186T142 153Q144 114 160 87T203 47T255 29T308 24Z"/></g><g data-mml-node="mi" transform="translate(3990,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(4456,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g></g></g><g data-mml-node="mo" transform="translate(12230,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(13230.2,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(13993.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(14382.2,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(15146.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(15535.2,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msub" transform="translate(15924.2,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="TeXAtom" transform="translate(617,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D439" d="M48 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H742Q749 676 749 669Q749 664 736 557T722 447Q720 440 702 440H690Q683 445 683 453Q683 454 686 477T689 530Q689 560 682 579T663 610T626 626T575 633T503 634H480Q398 633 393 631Q388 629 386 623Q385 622 352 492L320 363H375Q378 363 398 363T426 364T448 367T472 374T489 386Q502 398 511 419T524 457T529 475Q532 480 548 480H560Q567 475 567 470Q567 467 536 339T502 207Q500 200 482 200H470Q463 206 463 212Q463 215 468 234T473 274Q473 303 453 310T364 317H309L277 190Q245 66 245 60Q245 46 334 46H359Q365 40 365 39T363 19Q359 6 353 0H336Q295 2 185 2Q120 2 86 2T48 1Z"/></g><g data-mml-node="mi" transform="translate(749,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1094,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1694,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g></g></g><g data-mml-node="mo" transform="translate(18379,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="msub" transform="translate(19379.2,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="TeXAtom" transform="translate(617,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D448" d="M107 637Q73 637 71 641Q70 643 70 649Q70 673 81 682Q83 683 98 683Q139 681 234 681Q268 681 297 681T342 682T362 682Q378 682 378 672Q378 670 376 658Q371 641 366 638H364Q362 638 359 638T352 638T343 637T334 637Q295 636 284 634T266 623Q265 621 238 518T184 302T154 169Q152 155 152 140Q152 86 183 55T269 24Q336 24 403 69T501 205L552 406Q599 598 599 606Q599 633 535 637Q511 637 511 648Q511 650 513 660Q517 676 519 679T529 683Q532 683 561 682T645 680Q696 680 723 681T752 682Q767 682 767 672Q767 650 759 642Q756 637 737 637Q666 633 648 597Q646 592 598 404Q557 235 548 205Q515 105 433 42T263 -22Q171 -22 116 34T60 167V183Q60 201 115 421Q164 622 164 628Q164 635 107 637Z"/></g><g data-mml-node="mi" transform="translate(767,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1367,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1712,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2197,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g></g></g><g data-mml-node="mo" transform="translate(22024,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(22690.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(23746.5,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(24509.5,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(24898.5,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mi" transform="translate(25662.5,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(25960.5,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/></g><g data-mml-node="mi" transform="translate(26437.5,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(27423.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(28424,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mi" transform="translate(29188,0)"><path data-c="1D6FC" d="M34 156Q34 270 120 356T309 442Q379 442 421 402T478 304Q484 275 485 237V208Q534 282 560 374Q564 388 566 390T582 393Q603 393 603 385Q603 376 594 346T558 261T497 161L486 147L487 123Q489 67 495 47T514 26Q528 28 540 37T557 60Q559 67 562 68T577 70Q597 70 597 62Q597 56 591 43Q579 19 556 5T512 -10H505Q438 -10 414 62L411 69L400 61Q390 53 370 41T325 18T267 -2T203 -11Q124 -11 79 39T34 156ZM208 26Q257 26 306 47T379 90L403 112Q401 255 396 290Q382 405 304 405Q235 405 183 332Q156 292 139 224T121 120Q121 71 146 49T208 26Z"/></g><g data-mml-node="mo" transform="translate(29828,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(30217,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(30986,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(31375,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container><ul><li>Union-Find data structures</li><li>If w in [0, E^O(1)], using counting sort or similar can make Kruskalâ€™s beat Primâ€™s</li></ul></li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Initialize T = 0</span><br><span class="line">for v in V: Make-Set(v)</span><br><span class="line">Sort E by weight</span><br><span class="line">For e = (u, v) in E (in increasing-weight order):</span><br><span class="line">    if Find-Set(u) != Find-Set(v):</span><br><span class="line">        Add e to T</span><br><span class="line">        Union(u, v)</span><br></pre></td></tr></table></figure><blockquote class="colorquote grey"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="6.482ex" height="1.645ex" role="img" focusable="false" viewbox="0 -705 2865.3 727"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/></g><g data-mml-node="mi" transform="translate(760,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(1058,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g><g data-mml-node="mi" transform="translate(1587,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1932,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/></g><g data-mml-node="mi" transform="translate(760,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(1058,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g><g data-mml-node="mi" transform="translate(1587,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1932,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g></g></svg></mjx-container>. The tree-so-far T <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.312ex;" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.751ex" role="img" focusable="false" viewbox="0 -636 778 774"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2286" d="M84 346Q84 468 166 546T360 635Q361 635 370 635T395 635T430 636T475 636T524 636H679Q694 628 694 616Q694 607 681 597L522 596H470H441Q366 596 338 592T266 568Q244 557 224 542T179 500T139 433T124 346V341Q124 253 185 185Q244 121 328 103Q348 98 366 98T522 96H681Q694 86 694 76Q694 64 679 56H526Q510 56 480 56T434 55Q350 55 289 71T172 141Q84 223 84 346ZM104 -131T104 -118T118 -98H679Q694 -106 694 -118T679 -138H118Q104 -131 104 -118Z"/></g></g></g></svg></mjx-container> MST T*</p></blockquote><h2><span id="olc">OLC</span><a href="#olc" class="header-anchor">Â¶</a></h2><ol><li>exponential number of edges to guess that form of the MST.</li><li>handshaking lemma is sum of in-degree vertices and out-degree vertices are both |E|</li></ol>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
          <category> 6.046 algorithms design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Atomicity</title>
      <link href="/sg/2023/08/24/SD_ds_data/"/>
      <url>/sg/2023/08/24/SD_ds_data/</url>
      
        <content type="html"><![CDATA[<p>Reading: 9.1-9.2.2, 9.3-9.4.1, 9.5-9.6 (9.1.5, 9.1.6, 9.5.2, <strong>9.5.3, 9.6.3</strong>)</p><h2><span id="overview">Overview</span><a href="#overview" class="header-anchor">Â¶</a></h2><blockquote class="colorquote grey"><p>An action that changes several data values can have any or all of at least four independent properties:</p><ul><li>all-or-nothing (either all or none of the changes happen)</li><li>before-or-after  (the changes all happen either before or after every concurrent action)</li><li>constraint-maintaining (the changes maintain some specified invariant)</li><li>durable (the changes last as long as they are needed).</li></ul></blockquote><p>failure masking, coordination</p><ol><li><p>scenario 1:  the processor instruction set interface as seen by a thread in the interrupt interface</p><ul><li><p>signal arriving from outside the threadâ€™s interpreter</p><ul><li><p>interrupted thread, interrupt thread, interrupt handler</p></li><li><p>Ex, an I/O operation that the other thread was waiting for may now have completed.</p></li></ul></li><li><p>sth wrong in the interrupted thread</p><ul><li><p>exception handler, in the orginal thread</p></li><li><p>Ex, deadlock, hw/sw faults, user side, the running thread encountered a missing-page exception in a virtual memory system</p></li></ul></li></ul></li><li><p>scenario 2: a register overflow at the machine level in a layered application</p><ul><li><p>Write intelligible error message in each layer</p></li><li><p>A higher layer will hide the lower layers</p></li><li><p>All-or-nothing action means an action either completes or backs out.</p></li></ul></li><li><p>missing-page exception occurs halfway of an instruction (pipelined processor)</p><ul><li>How to save the next-instruction pointer?<ul><li>every instruction is atomic -&gt; the next-instruction pointer = addr of instruction that encountered the missing page</li><li>if one instruction is not atomic, the exception will still happen in that instruction</li></ul></li><li>supervisor call (SVC) to a kernel READ procedure, keystroke to the caller<ul><li>blocking read</li><li>non-blocking read</li><li>without all-or-nothing read</li></ul></li></ul></li></ol><h2><span id="all-or-nothing">All-or-Nothing</span><a href="#all-or-nothing" class="header-anchor">Â¶</a></h2><h2><span id="before-or-after">Before-or-After</span><a href="#before-or-after" class="header-anchor">Â¶</a></h2><blockquote class="colorquote blue"><p>Problem 0: describe a situation where Two-Phase Locking yields higher performance than Simple Locking.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.033 system design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS books </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Tracing down Bio in Block Subsystems</title>
      <link href="/sg/2023/08/08/linux_bio/"/>
      <url>/sg/2023/08/08/linux_bio/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#bottom-halves">Bottom halves</a><ul><li><a href="#interface">Interface</a></li><li><a href="#block-drivers">Block drivers</a></li></ul></li><li><a href="#block-io">Block IO</a></li></ul><!-- tocstop --></div><p>This blog is to answer two questions:</p><ol><li>Layers involved of I/O requests like write sth to a file in a local computer?</li><li>How does md device (or any other block device like null block driver) receive its data?</li></ol><h2><span id="bottom-halves">Bottom halves</span><a href="#bottom-halves" class="header-anchor">Â¶</a></h2><ol><li>Bottom halves perform interrupt-related work that was not performed by the interrupt handler (top half)<ul><li>Run with all interrupts enabled</li><li>Deferring work means not now</li></ul></li><li>Work queue is a simple interface for <strong>deferring work</strong> to a generic kernel thread</li></ol><p>runqueue &amp; waitqueue</p><h3><span id="interface">Interface</span><a href="#interface" class="header-anchor">Â¶</a></h3><ol><li><p>queuing work to workqueue<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">queue_work</span><br><span class="line">queue_work_on</span><br><span class="line">queue_delayed_work</span><br><span class="line">queue_delayed_work_on</span><br></pre></td></tr></table></figure></li><li><p>schedule work to workqueue</p></li></ol><h3><span id="block-drivers">Block drivers</span><a href="#block-drivers" class="header-anchor">Â¶</a></h3><ol><li>No need to open another kernel thread when using workqueues</li><li>Waitqueue waits on the loop until the condition is met: <a href="https://stackoverflow.com/questions/11184581/why-does-wait-queue-implementation-wait-on-a-loop-until-condition-is-met">https://stackoverflow.com/questions/11184581/why-does-wait-queue-implementation-wait-on-a-loop-until-condition-is-met</a></li><li>wakeup will trigger an interrupt<ul><li><em>wake_up_interruptible</em> wakes up only the processes that are in interruptible sleeps</li></ul></li><li>BIOs can be split, merged (chain). Itâ€™s in the scheduling layer.</li><li>The null_blk driver is a bit different than others. It has two ways of receiving commands: bio based, req based.</li><li>Device drivers are normally request based. BIOs are already split/merged in the block layer (scheduling) and grouped to a req which is sent to the device drivers. It should not touch BIOs inside a req/command in the device driver. The job of device driver is to translating a req to corresponding command.</li><li>In-flight BIOs in the device driver donâ€™t conclude the BIOs in the requests.</li><li>Linux is running on the async context.</li><li>flow control on device drivers may not be a good idea. A lot of places in the block layer have already done/could do that, like scheduling layer where requests are regulated.</li></ol><h2><span id="block-io">Block IO</span><a href="#block-io" class="header-anchor">Â¶</a></h2><p>v6.3-rc2</p><p>high level: app -&gt; fs -&gt; block level</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">application</span><br><span class="line">VFS</span><br><span class="line">File system (XFS, btrfs, etc)</span><br><span class="line">Page cache</span><br><span class="line">Block layer</span><br><span class="line">- Device mapper</span><br><span class="line">Driver Level</span><br><span class="line">- I/O scheduler</span><br><span class="line">- Physical device driver</span><br></pre></td></tr></table></figure><p><a href="https://elixir.bootlin.com/linux/v6.3-rc2/source/include/linux/blk_types.h#L252">bio</a> -&gt; <a href="https://elixir.bootlin.com/linux/v6.3-rc2/source/include/linux/bvec.h#L31">bio_vec</a>/<a href="https://elixir.bootlin.com/linux/v6.3-rc2/source/include/linux/bvec.h#L78">bi_sector</a> -&gt; memory <a href="https://elixir.bootlin.com/linux/v6.3-rc2/source/include/linux/mm_types.h#L74">page</a></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">bio</span> &#123;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">bio</span>*<span class="title">bi_next</span>;</span><span class="comment">/* request queue link */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">block_device</span>*<span class="title">bi_bdev</span>;</span></span><br><span class="line"><span class="type">blk_opf_t</span>bi_opf;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">short</span>bi_flags;<span class="comment">/* BIO_* below */</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">short</span>bi_ioprio;</span><br><span class="line"><span class="type">blk_status_t</span>bi_status;</span><br><span class="line"><span class="type">atomic_t</span>__bi_remaining; <span class="comment">/* usage counter */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">bvec_iter</span><span class="title">bi_iter</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="type">blk_qc_t</span>bi_cookie;</span><br><span class="line"><span class="type">bio_end_io_t</span>*bi_end_io;</span><br><span class="line"><span class="type">void</span>*bi_private;</span><br><span class="line">...</span><br><span class="line">    </span><br><span class="line"><span class="type">atomic_t</span>__bi_cnt;<span class="comment">/* pin count */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">bio_vec</span>*<span class="title">bi_io_vec</span>;</span><span class="comment">/* the actual vec list */</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">bio_set</span>*<span class="title">bi_pool</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">bio_vec</span><span class="title">bi_inline_vecs</span>[];</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://elixir.bootlin.com/linux/v6.3-rc2/source/include/linux/blkdev.h#L121">gendisk</a> -&gt; <a href="https://elixir.bootlin.com/linux/v6.3-rc2/source/include/linux/blkdev.h#L396">request queue</a>/block device -&gt; <a href="https://elixir.bootlin.com/linux/v6.3-rc2/source/include/linux/blk-mq.h#L84">request</a></p><p><a href="https://elixir.bootlin.com/linux/v6.3-rc2/source/block/blk-core.c#L831">submit_bio()</a> -&gt; <a href="https://elixir.bootlin.com/linux/v6.3-rc2/source/block/blk-core.c#L638">submit_bio_noaccout</a> -&gt; <a href="https://elixir.bootlin.com/linux/v6.3-rc2/source/block/blk-core.c#L685">submit_bio_noacct_nocheck</a> -&gt; _submit_bio/_submit_bio_noacct</p><p>(generic_make_request<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>, v&lt;=<a href="https://elixir.bootlin.com/linux/v5.8/source/block/blk-core.c#L1100">5.8</a>)</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">request_queue</span> &#123;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">request</span>*<span class="title">last_merge</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">elevator_queue</span>*<span class="title">elevator</span>;</span></span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">percpu_ref</span><span class="title">q_usage_counter</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">blk_queue_stats</span>*<span class="title">stats</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">rq_qos</span>*<span class="title">rq_qos</span>;</span></span><br><span class="line"><span class="type">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">blk_mq_ops</span>*<span class="title">mq_ops</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">blk_mq_ctx</span> __<span class="title">percpu</span>*<span class="title">queue_ctx</span>;</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span>queue_depth;</span><br><span class="line"><span class="type">void</span>*queuedata;</span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span>queue_flags;</span><br><span class="line">...</span><br><span class="line"><span class="type">spinlock_t</span>queue_lock;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">gendisk</span>*<span class="title">disk</span>;</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">long</span>nr_requests;<span class="comment">/* Max # of requests */</span></span><br><span class="line">...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">request</span> &#123;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">request_queue</span> *<span class="title">q</span>;</span></span><br><span class="line"><span class="type">blk_opf_t</span> cmd_flags;<span class="comment">/* op and common flags */</span></span><br><span class="line"><span class="type">req_flags_t</span> rq_flags;</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">/* the following two fields are internal, NEVER access directly */</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">int</span> __data_len;<span class="comment">/* total data len */</span></span><br><span class="line"><span class="type">sector_t</span> __sector;<span class="comment">/* sector cursor */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">bio</span> *<span class="title">bio</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">bio</span> *<span class="title">biotail</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">union</span> &#123;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">list_head</span> <span class="title">queuelist</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">request</span> *<span class="title">rq_next</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">block_device</span> *<span class="title">part</span>;</span></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>bio layer<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup> -&gt; request layer -&gt; device driver<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></p><p>request queue<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup></p><p>create/delete a rq: <a href="https://elixir.bootlin.com/linux/v6.3-rc2/source/block/blk-mq.c#L4049">blk_mq_init_queue</a><sup class="footnote-ref"><a href="#fn6" id="fnref6">[6]</a></sup></p><p>process a request: <a href="https://elixir.bootlin.com/linux/v6.3-rc2/source/block/blk-mq.c#L1249">blk_mq_start_request</a></p><p>device mapper<sup class="footnote-ref"><a href="#fn7" id="fnref7">[7]</a></sup></p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://embetronicx.com/tutorials/linux/device-drivers/work-queue-in-linux-own-workqueue/">https://embetronicx.com/tutorials/linux/device-drivers/work-queue-in-linux-own-workqueue/</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://lwn.net/Articles/736534/">v4.5 block layer</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p><a href="http://books.gigatux.nl/mirror/kerneldevelopment/0672327201/ch13lev1sec3.html">http://books.gigatux.nl/mirror/kerneldevelopment/0672327201/ch13lev1sec3.html</a> <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p><a href="http://blog.vmsplice.net/2020/04/how-linux-vfs-block-layer-and-device.html">http://blog.vmsplice.net/2020/04/how-linux-vfs-block-layer-and-device.html</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li><li id="fn5" class="footnote-item"><p><a href="https://linux-kernel-labs.github.io/refs/heads/master/labs/block_device_drivers.html#request-queues-multi-queue-block-layer">https://linux-kernel-labs.github.io/refs/heads/master/labs/block_device_drivers.html#request-queues-multi-queue-block-layer</a> <a href="#fnref5" class="footnote-backref">â†©ï¸</a></p></li><li id="fn6" class="footnote-item"><p><a href="https://linux-kernel-labs.github.io/refs/heads/master/labs/block_device_drivers.html#create-and-delete-a-request-queue">https://linux-kernel-labs.github.io/refs/heads/master/labs/block_device_drivers.html#create-and-delete-a-request-queue</a> <a href="#fnref6" class="footnote-backref">â†©ï¸</a></p></li><li id="fn7" class="footnote-item"><p><a href="https://xuechendi.github.io/2013/11/14/device-mapper-deep-dive">https://xuechendi.github.io/2013/11/14/device-mapper-deep-dive</a> <a href="#fnref7" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Reliable Transport via TCP</title>
      <link href="/sg/2023/08/05/SD_rtp/"/>
      <url>/sg/2023/08/05/SD_rtp/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#reliable-transport">Reliable transport</a><ul><li><a href="#some-thinking">Some thinking</a></li></ul></li><li><a href="#tcpdump">tcpdump</a></li></ul><!-- tocstop --></div><h2><span id="reliable-transport">Reliable transport</span><a href="#reliable-transport" class="header-anchor">Â¶</a></h2><p>Reading: rtp guide</p><ol><li>Best-effort networks do not provide reliability.</li><li>TCP provides reliability and congestion control on the best-effort network.</li><li>The goal of reliable transport protocol is <strong>exactly-once, in-order</strong> delivery.</li></ol><p>This guide uses layered model (two-layer version, app + transport) as examples.</p><ol><li><p>packet structure: header + data (+ trailer) -&gt; in-order</p><ul><li>metadata: source addr, dest addr, <code>sequence number</code></li></ul></li><li><p>two machanisms -&gt; reliability</p><ul><li><code>acknowledgements</code>: Every time the receiver receives a packet, it will send a small packet â€” an â€œACKâ€ â€” back to the sender.</li><li><code>sliding-window protocol</code>: as the communication occurs, the senderâ€™s window slides across the stream of packets it has to send.<ul><li>guarantee: no more than W packets in its window at a time</li><li><img src="/sg/2023/08/05/SD_rtp/Screenshot-1223436.png" class title="Screenshot-1223436"></li></ul></li><li>terms: waterfall diagram, outstanding packet, window (the collection of outstanding packets), window size, cumulative ACKs (an ACK for packet k means the receiver has received all packets up to and including k)</li></ul></li><li><p>Error cases</p><ul><li>packet loss: <code>retransmissions</code>, the sender will retransmit a lost packet if it doesnâ€™t receive an ACK for it after a certain amount of time<ul><li><img src="/sg/2023/08/05/SD_rtp/Screenshot.png" class title="Screenshot"></li></ul></li><li>ACK loss<ul><li>The sender will retransmit the packet 2. The receiver has received two copies of packet 2.  It will ACK both of them.</li><li>Receiver should not deliver both packet 2 so it keeps track of the received packets but that have not sent to the application yet in its buffer.</li><li><img src="/sg/2023/08/05/SD_rtp/Screenshot-1225146.png" class title="Screenshot-1225146"></li></ul></li><li>terms: retransmission timeout (RTO)</li></ul></li><li><p>Real world:</p><ul><li>set RTO: RTO in the guide is assumed larger than a round-trip-time.</li><li>set W: many sender and receivers on the internet; the amount of data changes. Find an optimal W.</li></ul></li><li><p>Reliable transport protocol</p><blockquote><p>At the sender:</p><ul><li>The sender will keep a list of all of its outstanding packets.  Weâ€™ll call that list outstanding_packets; initially it is empty.</li><li>If len(outstanding_packets) &lt; W, transmit the next packet (call it packet k).  Store packet k and the current time in outstanding_packets.</li><li>When an ACK for packet k is received, remove packet k from outstanding_packets, as well as any packets with sequence number less than k.</li><li>Periodically check the packets in outstanding_packets; if any were received more than RTO seconds ago, re-transmit them.</li></ul><p>At the receiver:</p><ul><li>Send an ACK for every received packet. If the sequence number of this ACK is k, that indicates that all packets up to and including packet k have been received.</li><li>Save delivered packets â€” ignoring duplicates â€” in a local buffer.</li><li>Keep track of the next packet the receiving application expects.  After each reception, deliver as many in-order packets as possible.</li></ul></blockquote></li></ol><h3><span id="some-thinking">Some thinking</span><a href="#some-thinking" class="header-anchor">Â¶</a></h3><ol><li>A receiver knows the packes out-of-order when the receiving sequence number is not sequential.</li><li>In ACK lost case:<ul><li>The sender can not tell the difference between ack 2 lost and one where packet 3 itself is lost. Senders consider a packet has been lost when it did not receive corresponding ack signal. In this case, sender hasnâ€™t received ack3 therefore itâ€™s either the packet 3 was lost or the ack2 was lost.</li><li>Why the receiver need to send an ACK for the second copy of packet 2? Though the receiver has received the copy of packet 2, it needs to ack the sender that it is indeed received. However, it can just discard packet 2 in the second time.</li><li>If the ACK for packet 3 had arrived before the senderâ€™s retransmission of packet 2, could the sender have avoided that retransmission?  (I.e., is there a way for the sender to tell that packet 2 had actually been received?)  No, the sender will still retransmit packet 2. The sender should be aware of the packets that have been successfully received.</li></ul></li></ol><h2><span id="tcpdump">tcpdump</span><a href="#tcpdump" class="header-anchor">Â¶</a></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tcpdump -r tcpdump.dat &gt; /tmp/outfile.pcap</span><br><span class="line">mv /tmp/outfile.pcap outfile.txt</span><br></pre></td></tr></table></figure><p>example:</p><p>A packet sent from willow to maple:</p><p>00:34:41.474225 IP willow.csail.mit.edu.39675 &gt; maple.csail.mit.edu.5001: Flags [.], seq 1473:2921, ack 1, win 115, options [nop,nop,TS val 282136474 ecr 282202089], length 1448</p><p>Maple receives the packet and sends ack to willow:</p><p>00:34:41.482047 IP maple.csail.mit.edu.5001 &gt; willow.csail.mit.edu.39675: Flags [.], ack 2921, win 159, options [nop,nop,TS val 282202095 ecr 282136474], length 0</p><p>How to read the log: timestamp, IP, source addr &gt; dest addr, length is for seq in sender.</p><p>Definition in TCP differs from the guide:</p><ul><li>The ACK reflects the next byte that the receiver expects.</li><li>There is one sequence number per <em>byte of data</em>.</li></ul>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.033 system design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hw </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>The Network Layers Breakdown</title>
      <link href="/sg/2023/08/03/SD_network_layer/"/>
      <url>/sg/2023/08/03/SD_network_layer/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#network-layers">network layers</a><ul><li><a href="#organization">organization</a></li><li><a href="#end-to-end-layer">end-to-end layer</a></li><li><a href="#the-end-to-end-argument">the end-to-end argument</a></li><li><a href="#mapped-and-recursive-apps">mapped and recursive apps</a></li><li><a href="#olc">olc</a></li></ul></li><li><a href="#packet-switching">packet switching</a></li></ul><!-- tocstop --></div><p>Reading: chapter: 7.2, Lec17, Chapters 17-18 of the 6.02 notes, Chapter 19 of the 6.02 notes.</p><h2><span id="network-layers">network layers</span><a href="#network-layers" class="header-anchor">Â¶</a></h2><h3><span id="organization">organization</span><a href="#organization" class="header-anchor">Â¶</a></h3><p><u>Principle: adopt sweeping simplifications</u>, networks are organized as layers (layering of protocols).</p><p><u>three-layer reference model</u> example: a defense program has a procedure call and the procedure for single user.</p><ol><li><p>protocols involved in this example</p><ul><li><p>protocol between client stub and service stub / the main program and the procedure it calls</p></li><li><p>remote procedure call (RPC) protocol -&gt; improvement: convert single user -&gt; multiuser by RPC</p><ul><li><img src="/sg/2023/08/03/SD_network_layer/Screenshot-1142854.png" class title="Screenshot-1142854"></li></ul></li><li><p>Send/receive message to/from network -&gt; add a transport layer to communicate</p><ul><li><img src="/sg/2023/08/03/SD_network_layer/Screenshot-1145255.png" class title="Screenshot-1145255"></li></ul></li></ul></li><li><p>In usual layered organizations, a module has two interfaces. A network module has three (transport + presentation (data format, semantics) + application).</p></li><li><p><u>Layered design: Each layer provides an interface to the layer above and hides interfaces below.</u></p></li><li><p>Layers are abstracted as three parts: end-to-end layer, network layer, link layer. Application layer is not included.</p><ul><li>Data flow from top down: message/stream -&gt; segments -&gt; packets -&gt; frames<ul><li>data sent from upper layer to the lower layer is called <code>payload</code>.  The lower layer attached a <code>header</code> and <code>trailer</code> to the front and end of the data so the corresponding lower layer can process. Thatâ€™s why layers can hide</li></ul></li><li>link layer: packet switched network, send the bits of the packet across one link. Ex: ethernet, wifi, bluetooth</li><li>network layer: deliver a segment from the source to the destination. Ex: IP<ul><li><img src="/sg/2023/08/03/SD_network_layer/Screenshot-1147966.png" class title="Screenshot-1147966"></li></ul></li></ul></li></ol><h3><span id="end-to-end-layer">end-to-end layer</span><a href="#end-to-end-layer" class="header-anchor">Â¶</a></h3><blockquote><p>Each layer considers the payload transmitted by the layer above to be information that it is not expected, or even permitted, to interpret.</p></blockquote><ul><li><img src="/sg/2023/08/03/SD_network_layer/Screenshot-1149580.png" class title="Screenshot-1149580"></li></ul><p>Problems: Why the end-to-end layer is an unstructured library of service modules?</p><p>Different applications have a wide range of requirements for services and any lower layer decision in one app can be counterproductive fro at least some apps.</p><ol><li><p>RPC provides services hiding underlying network aspects from its app</p><ul><li><p>presentation services: change data formats and semantics</p></li><li><p>transport services: streams/messages -&gt; segments with lost, duplicated, out-of-order segments.</p></li><li><p>session services: search, handshake, â€¦</p></li></ul></li><li><p>Open Systems Interconnect has seven layers. The additional layers are:</p><ul><li><p>link layer -&gt; strategy layer (data link layer) + <em>physical layer</em></p></li><li><p>end-to-end layer -&gt; application + presentation + transport + <em>layer providing the session services</em></p></li></ul></li></ol><h3><span id="the-end-to-end-argument">the end-to-end argument</span><a href="#the-end-to-end-argument" class="header-anchor">Â¶</a></h3><p>Principle: <u>the end-to-end argument: the application knows best.</u> <em>Donâ€™t bury it in a lower layer, let the end points deal with it because they know best what they need.</em></p><p>Example: file transfer and checksum</p><p>When sending a file from A to B, B will recalculate the checksum anew after receiving the file to verify a complete delivery (application layer checksum).</p><p>Given the end-to-end approach, oen can add a link-layer checksum. This additional check does <strong>not</strong> eliminate the application layer check but can act as a performance enhancement for it observes failure sooner.</p><h3><span id="mapped-and-recursive-apps">mapped and recursive apps</span><a href="#mapped-and-recursive-apps" class="header-anchor">Â¶</a></h3><p>Decomposition a network has two forms: maaped, recursive.</p><ol><li><p>mapped composition: build network layer A on network layer B by mapping high-layer addresses to lower-layer network addresses.</p><ul><li>example: Appletalk (add a better network technology), Internet protocol (internetworking)</li></ul></li><li><p>recursive composition: a three-layer network rests on a link layer of another network</p><ul><li>example: tunnel (+encryption = VPN), overlay network</li><li><img src="/sg/2023/08/03/SD_network_layer/Screenshot-1153373.png" class title="Screenshot-1153373"></li></ul></li><li><blockquote><p>The Internet links many network layers by mapping them all to a universal network layer using IP.</p></blockquote><ul><li>end-to-end protocols: TCP, UDP, RTPâ€¦</li><li>application protocols: FTP (file transfer), HTTP (www), SMTP, POP (mail dispatch and pickup), IRC (text messaging), VoIP (telephone), Gnutella, bittorrent (file exchange)â€¦</li></ul></li></ol><h3><span id="olc">olc</span><a href="#olc" class="header-anchor">Â¶</a></h3><ol><li>protocol is a fancy name of contract for networks as spec for programming languages. It achieves agreements on the calling function and called one.</li><li>IP is in the network layer. TCP is in a layer above IP.</li></ol><h2><span id="packet-switching">packet switching</span><a href="#packet-switching" class="header-anchor">Â¶</a></h2><p>Takeaways from Lec17 packet switching:</p><ol><li><p>packet switched network:</p><ul><li>design objective: efficiency and reliabilty<ul><li>use address on the message</li><li>break down big source data to small packets</li></ul></li><li>communication link is associated with an address.</li><li>packet is an atomic unit of delivery. It consists of a link (source addr, destination addr) and message (bits).</li><li>network topology<ul><li>a simplified network<ul><li><img src="/sg/2023/08/03/SD_network_layer/Screenshot-1060387.png" class title="Screenshot-1060387"></li></ul></li><li>1964, <a href="https://www.rand.org/pubs/research_memoranda/RM3420.html">distributed communication network</a><ul><li><img src="/sg/2023/08/03/SD_network_layer/Screenshot-1065490.png" class title="Screenshot-1065490"></li></ul></li></ul></li></ul></li><li><p>statistical multiplexing: when too many packets come to a switch and exceed its receiving limit, it waits in queue. If queue is full, then the switch just drop the packet and let the end point deals with.</p><ul><li><p>queue adds latency of data transmission.</p></li><li><p>It is better to store the packet inside switch which piles up tasks exceeding current processing limit of a switch</p></li><li><p>multiplexing/demultiplexing</p><ul><li><img src="/sg/2023/08/03/SD_network_layer/Screenshot-1064063.png" class title="Screenshot-1064063"></li></ul></li></ul></li><li><p>Real life traffic is like temporarily burst to 10 times of average bit rate.</p><ul><li><img src="/sg/2023/08/03/SD_network_layer/Screenshot-1064957.png" class title="Screenshot-1064957"></li><li>A malicious virus example is DDOS attack on websites, that is a large amount of accessing the service out of limit of websites.</li></ul></li><li><p>Bandwidth is in terms of Herz. If itâ€™s v, it refers to a range of frequencies of data transmission around the value v.</p></li><li><p>Evaluation standards of network are: 1) rate of link, 2) delay (or latency)</p><ul><li>propagation delay: time to send one bit</li><li>transmission delay: time to send size L bits over a link with bit rate c, L/c. Itâ€™s also the time from the first bit to the last bit arriving at the switch.</li><li>processing delay: host and switch deal with packet (header, checksums)</li><li>queueing delay: time spent waiting in queue</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.033 system design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS books </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Distributed System Notes</title>
      <link href="/sg/2023/07/28/ds_basics/"/>
      <url>/sg/2023/07/28/ds_basics/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#case-study-mapreduce-2004">Case Study: MapReduce 2004</a></li><li><a href="#consistency-and-linearizability">Consistency and Linearizability</a></li><li><a href="#case-study-gfs-2003">Case Study: GFS 2003</a></li><li><a href="#primary-backup-replication">Primary/Backup Replication</a></li><li><a href="#case-study-vmware-ft-2010">Case Study: VMware FT 2010</a><ul><li><a href="#ft-design">FT design</a></li><li><a href="#failure-handling">Failure Handling</a></li><li><a href="#design-alternatives">Design Alternatives</a></li></ul></li><li><a href="#verified-primary-backup">Verified Primary/Backup</a></li><li><a href="#case-study-grove-2023">Case Study: Grove 2023</a></li><li><a href="#raft">Raft</a><ul><li><a href="#raft-review">Raft Review</a></li><li><a href="#leader-election">Leader Election</a></li><li><a href="#log">Log</a></li><li><a href="#persistence">Persistence</a></li><li><a href="#log-compaction-and-snapshots">Log Compaction and Snapshots</a></li><li><a href="#linearizability">Linearizability</a></li><li><a href="#duplicate-rpc-detection">Duplicate RPC Detection</a></li><li><a href="#read-only-operations">Read-only Operations</a></li></ul></li><li><a href="#paxos">Paxos</a><ul><li><a href="#paxos-review">Paxos Review</a></li><li><a href="#inference">Inference</a></li></ul></li><li><a href="#case-study-zookeeper-2010">*Case Study: ZooKeeper 2010</a></li><li><a href="#case-study-chubby-2006">*Case Study: Chubby 2006</a></li><li><a href="#case-study-harp-1991">*Case Study: Harp 1991</a></li></ul><!-- tocstop --></div><p>Design goals</p><ul><li><p>Infrastructure services: storage, communication, computing. The course goal is to build an abstraction that hides the distribution while realizing high performance.</p></li><li><p>performance -&gt; scalability</p><ul><li>scenario: n users &lt;=&gt; 1 web server &lt;=&gt; 1 database</li><li>When n is 1million, scaling up web servers and spliting users accounts into multiple webs can achieve performance until web-db communication becomes bottle neck, that is, scalable web servers no longer help. Then db will need to be refactored so that is splitting data into multiple dbs.</li><li>terms<ul><li><code>scalability</code>: N times computers/resources can achieve N times throughput.</li></ul></li><li>special cases<ul><li>quick response time for a single user request</li><li>all users want to update the same data</li></ul></li></ul></li><li><p>fault tolerance -&gt; availability, recoveribility</p><ul><li><p>scenario: always sth brokes when running 1000 computers vs running 1</p></li><li><p>rare events become real problems</p></li><li><p>terms</p><ul><li><p><code>availability</code>: system will keep operating when certain kinds of failures occur. It will not be available when too many failures occur.</p></li><li><p><code>recoverability</code>: system stops running/reponding to requests until the failed componets are repaired. Need to save latest data on disk etc so they can recover it when powering up.</p></li><li><p><a href="https://stackoverflow.com/questions/1371400/how-much-faster-is-the-memory-usually-than-the-disk">memory access speed V.S. disk</a></p></li><li><p>normal scale: 3 GHz microprocessor</p></li></ul></li><li><p>tools</p><ul><li>non-volatile storage: store log of states. -&gt; writing NV storage is too slow (move disk arms and wait for a disk platter to rotate)</li><li>replicated servers: use a copy -&gt; two replicas drifted out of sync</li></ul></li></ul></li><li><p>consistency</p><ul><li><blockquote><p>General-purpose infrastructure needs well-defined behavior.</p></blockquote></li><li><p>everything could broke and lead to lose replica.</p></li><li><p>strong consistency often means poor performance relative to weaker consistency.</p></li></ul></li></ul><h2><span id="case-study-mapreduce-2004">Case Study: MapReduce 2004</span><a href="#case-study-mapreduce-2004" class="header-anchor">Â¶</a></h2><h2><span id="consistency-and-linearizability">Consistency and Linearizability</span><a href="#consistency-and-linearizability" class="header-anchor">Â¶</a></h2><h2><span id="case-study-gfs-2003">Case Study: GFS 2003</span><a href="#case-study-gfs-2003" class="header-anchor">Â¶</a></h2><h2><span id="primary-backup-replication">Primary/Backup Replication</span><a href="#primary-backup-replication" class="header-anchor">Â¶</a></h2><ol><li>One way of providing fault tolerance: Replication.</li><li>Replication deals with â€œfail-stopâ€ failure of a single replica. It may not be able to detect h/w or bugs in s/w or human config errors. Geo-failure are dealt with only if replicas are physically separated.</li><li>Failures in one server are independent from another otherwise itâ€™s useless to use replication.</li><li>Whether replication is worthwhile the N*expense of computing resources depends on the consequences of failures.</li><li>Two main approaches:<ul><li>state transfer: primary sends internal memory (state) to backup</li><li>replicated state machine: clients send operations to primary and primary sends those external events to backups. All replicas have deterministic same state as the primary if they execute the operations in the same order.</li></ul></li><li>tradeoffs:<ul><li>state transfer is simpler but may be large and slow to transfer over network</li><li>replicated state machine are comparably smaller than state and generates less network traffic but complex to get right.</li></ul></li><li>example: VM-FT uses replicated state machine on single-core processor. It uses state transfer scheme when it is expanded to multi-core.</li><li>Design points of replication schema<ul><li>What state to replicate?</li><li>Does primary have to wait for backup?</li><li>When to cut over to backup?</li><li>Are anomalies visible at cut-over?</li><li>How to bring a replacement backup up to speed?</li></ul></li></ol><p>Problem 1: At what level do we want replicas to be identical?</p><p>application state: forward op stream, can be efficient. ex: GFS.</p><p>machine level, registers and RAM content: forward machine events (interrupts, DMA, &amp;c), not as efficient. ex: run an existing software without modification</p><h2><span id="case-study-vmware-ft-2010">Case Study: VMware FT 2010</span><a href="#case-study-vmware-ft-2010" class="header-anchor">Â¶</a></h2><p>Terms:</p><ol><li>vm-ft: fault-tolerant virtual machines</li><li>failstop: if something goes wrong, the computer would stop executing instead of generating incorrect results. E.g. unplug the power cable out of the server, CPU overheats.</li><li>failover: if something goes wrong, the computer will be replaced by another one.</li><li>virtual lockstep</li><li>mode: logging, replaying, normal</li><li>a deferred-execution context (similar to a tasklet in Linux) is a mechanism for deferring work to be executed later at a more appropriate time</li></ol><h3><span id="ft-design">FT design</span><a href="#ft-design" class="header-anchor">Â¶</a></h3><ol><li>Synchronization of primary and backup VMs is based on the technique of deterministic replay. Briefly talking, deterministic replay transfers the non-deterministic operations/events to the log entries of the file. The backup can read from the file and replay execution of the primary.<ul><li>non-determinism of events and operations in VMs: virtual interrupts, reading the clock cycle counter of the processor</li><li>question: non-deterministic input (capture and apply) -&gt; deterministic execution + performance unaffected (at instruction level)</li><li>However, that technique for VMware vSphere platform is introduced in 2007.</li></ul></li><li>FT protocol: No data is lost if a backup takes over after the primary fails.<ul><li>Output requirement &lt;- output rule: The backup is supposed to execute consistently as the primary after it takes over the primary VM. The rule to guarantee that is two phase commit. The primary delays sending the output until the backup VM has received and acknowledged the log entries of the output operations.</li><li>Can tolerate lost packets: incoming packets may be dropped during failure of the primary due to reasons unrelated to that failure.</li></ul></li></ol><h3><span id="failure-handling">Failure Handling</span><a href="#failure-handling" class="header-anchor">Â¶</a></h3><ol><li><p>context: time lag on the execution of the backup VM. To control the time lag to be less than 100ms and no greater than 1s, the primary VMâ€™s CPU limit is managed to increase/decrease to occupy/spare more execution time.</p></li><li><p>failure detection: use heartbeating (UDP) to monitor the traffic on the logging channel that connects primary and backup. A timeout in the flow of log entries and acknowledgements is detected as a failure.</p></li><li><p>split-brain problem: solution: (requirement) only one VM (primary or backup) takes over the execution.</p><blockquote class="colorquote blue"><p>Problem 0: How does VM-FT handle network partitions? That is, is it possible that if the primary and the backup end up in different network partitions that the backup will become a primary too and the system will run with two primaries?</p></blockquote><p>There will be only one VM executing during network partitions. The primary VM delays sending outputs to the external world until the backup receives and acknowledges the log entries sent by it. When network partitions occur, the primary and backup VMs lost information of each other. The failure whether caused by network connection or VM faults is unknown.</p><p>VM-FT hence performs an atomic op test-and-set on shared storage that stores the virtual disks of VMs when the primary or the backup wants to go live. If the op succeeds, then the VM is allowed to go live. If not, that means a VM must have been live, so the current VM halts itself. If the VM cannot access shared storage, it waits until it can.</p></li><li><p>Start a new backup on another host: (primary, backup) = (P1, B1) -&gt; (P1 is down, B1 takes over) -&gt; (B1, ?) -&gt; (B1, B2)</p><ul><li>Based on VMware VMotion: migration of a running VM from one server to another server within one second.</li><li>Modified FT VMotion clones a VM to a remote host rather than migrating it within minutes or unnoticeable interruption.</li><li>Simplified steps: the mode of B1, B2: (logging, replaying) -&gt; choose a server to run B2: cluster service decides it -&gt; cloningâ€¦</li></ul></li><li><p>To eliminate non-determinism</p><ul><li><p>on disk IO issues:</p><ul><li>parallel disk IOs try to access the same location on the shared storage -&gt; detect IO races and make it sequential</li><li>a disk op races with an application op when they are reading the same memory block at the same time -&gt;  MMU protection on pages - traps - (too expensive) =&gt; bounce buffers (cheaper) to read/write from/at</li><li>when failures happen, no way to find out the IOs issuing during that time are completed or not. -&gt; reissue the pending IOs</li></ul></li><li><p>network IO issues: async updates to a VMâ€™s state while executing ?-&gt; VM traps and interrupts + delaying the sending packets-&gt; performance challenges</p></li></ul></li></ol><p>Aside: <s>Ignored: operations on VM-FT</s></p><h3><span id="design-alternatives">Design Alternatives</span><a href="#design-alternatives" class="header-anchor">Â¶</a></h3><p>non-shared storage vs shared storage</p><p>advantages:</p><ol><li>no delaying disk writes for the primary VM</li><li>adds availability when the primary and backup VMs are far apart</li></ol><p>disadvantages:</p><ol><li>need the alternative to handle network partition</li><li>need to sync disks of VMs</li></ol><h2><span id="verified-primary-backup">Verified Primary/Backup</span><a href="#verified-primary-backup" class="header-anchor">Â¶</a></h2><h2><span id="case-study-grove-2023">Case Study: Grove 2023</span><a href="#case-study-grove-2023" class="header-anchor">Â¶</a></h2><p>Grove: a Separation-Logic Library for Verifying Distributed Systems</p><h2><span id="raft">Raft</span><a href="#raft" class="header-anchor">Â¶</a></h2><p>site:</p><ol><li><a href="http://nil.csail.mit.edu/6.824/2022/notes/l-raft.txt">http://nil.csail.mit.edu/6.824/2022/notes/l-raft.txt</a></li><li><a href="http://nil.csail.mit.edu/6.824/2022/notes/l-raft2.txt">http://nil.csail.mit.edu/6.824/2022/notes/l-raft2.txt</a></li></ol><p>Problem 0: a machine doesnâ€™t understand the real-life events like network broken, disk failures, server crashed. All it can notice is the state changes.</p><ul><li>It appears that no response to a query over the network.</li><li>Unless an outside agent will decide when to switch servers/a perfectly reliable network (never breaks)/ a single perfectly reliable server (vmware FTâ€™s test-and-set server) -&gt; possible single-point failure</li><li>How to automate it?</li></ul><p>Main idea:</p><ul><li>majority rule: same as Paxos. At lease one server is in the intersection of any two intersect which can convey info about previous decisions. Such a system often is called quorum systems.</li><li>electing a new leader</li><li>Logs of each server can be different but they will converge to be identical despite failures.</li></ul><p>The crucial property:</p><ul><li>committed: an entry that is commited wonâ€™t be forgotten despite failures.</li><li>logs with <strong>ordered</strong> commands:<ul><li>It stores the ordered commands in case leader must re-send to followers or for replay after reboot (persistence).</li><li>help to decide if the machines have identical logs</li><li>help replicas agree on a single execution order</li></ul></li><li>leader: leader ensures the identical execution order of the same commands on all servers.</li></ul><p>Raft provides:</p><ul><li>interface:<ul><li>Start(command) (index, term, isleader): only leader can start proposals.</li><li>ApplyMsg(index, command): each peer sends this message for each committed entry to local service.</li></ul></li><li>more understandable than Paxos</li></ul><p>A little about history of consensus protocols: paxos (1998), viewstamped replication (1988, 2012). Raft (2014) is more modern. They are all partition-tolerant.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Raft diagram:</span><br><span class="line">Members: Client, Follower, Leader, denoted by C, F, L respectively.</span><br><span class="line"></span><br><span class="line">Client       ----        Leader          ----                    Follower exchange:</span><br><span class="line">        Put/Get(n1) -&gt;  Start(n1)</span><br><span class="line">                        [appendLog(n1)]  AppendEntries(n1) -&gt;</span><br><span class="line">                        [committed(n1)]  &lt;- reply(n1)</span><br><span class="line">                        [execute(c1)]</span><br><span class="line">        &lt;- reply(c1)</span><br><span class="line"></span><br><span class="line">        Put/Get(n2) -&gt;  [appendLog(n2)]  AppendEntries(c1, n2) -&gt;       ApplyMsg(c1)</span><br><span class="line">                        [committed(n2)]   &lt;- reply(n1)                  [execute(c1)]</span><br><span class="line">                        [execute(c2)]</span><br><span class="line">        &lt;- reply(c2)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Problem 1: How Raft works?</p><h3><span id="raft-review">Raft Review</span><a href="#raft-review" class="header-anchor">Â¶</a></h3><ol><li><p>State machine safety: once a server has applied a log entry at a given index to its state machine, no other servers can apply a different log entry for the same index.</p><p>State machine safety is the key safety property of Raft.</p></li><li><p>Log matching property: a follower only accepts an append at index <code>i</code> if it already has the leaderâ€™s entry at <code>i-1</code> with the same term.</p></li><li><p>Raft determines a more up-to-date log by comparing the index and term of the last entries in the log. If the term is different, the log with a higher term is more up-to-date. If the term is the same, whichever log is longer is more up-to-date.</p></li></ol><p>Considering a case where a follower is unavailable while the leader commits several log enries and then is elected leader and overwrites these entries, how Raft solve this problem by puting constraints on candidates?</p><ol><li>A candidate canâ€™t win an election unless its log has all commited entries.</li><li>Raft never commits log entries from previous terms by counting replicas.</li></ol><p>A leader may only use replica counting to commit entries from its current term. When it commits a current-term entry at index <code>N</code>, it atomically advances its commitIndex to <code>N</code>. When the current-term entry can be commited, it also implies all earler entries less than <code>N</code> with older terms become commited indirectly.</p><p>The prohibition is only against declaring an <em>older-term</em> entry â€œcommittedâ€ merely because it is on a majority. You must first commit some current-term entry at or past that index. Then all prior uncommited entries will be commited.</p><p>Analysis of Figure 8d:</p><p>S1 was leader earlier and had an older-term entry at index 2 (say term 2) spread to a majority, but not safely committed. If S1 crashes before committing any current-term entry, S5 (whose log has a conflicting entry at index 2 from term 3) can win the next election and overwrite index 2 again.</p><p>Raft prevents case d by commit of a current-term entry, not just by whom elections are won. Once that current-term entry is committed:</p><ol><li><code>commitIndex</code> advances past it, so all earlier entries (including the old index 2) are committed indirectly.</li><li>Any future leader must contain that committed term 4 entry (RequestVoteâ€™s â€œup-to-dateâ€ rule + majority intersection), so a node like S5 canâ€™t win unless it also has that entry, meaning it canâ€™t overwrite index 2.</li></ol><p>If S1 were elected term 4 but crashed before committing any term-4 entry to a majority, then (d) could still happen: S5 might win and overwrite index 2.</p><h3><span id="leader-election">Leader Election</span><a href="#leader-election" class="header-anchor">Â¶</a></h3><p>Leader (srv, term): the term helps servers to follow latest leader.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Election diagram:</span><br><span class="line"></span><br><span class="line">Follower (S0, term+1) -&gt; Candidate (S0, term+1)  -&gt;  Leader (S0, term+1), if maj</span><br><span class="line">    (election timeout)                      (voting)</span><br><span class="line"></span><br><span class="line">Leader (S1, term)</span><br></pre></td></tr></table></figure><p>Election results:<br>Each term has one leader at most despite failures (network partitions, server crashes).</p><ol><li>One leader is newly elected:</li></ol><ul><li>The leader sends heartbeat messages to followers in a heartbeat interval.</li><li>A server learns about newly elected leader from heartbeats with a higher term number in AppendEntries requests.</li></ul><ol start="2"><li>Election failed for less than a maj of votes: New election starts with new term number. Old candidates quit.</li></ol><ul><li>Split votes</li><li>Not enough reachable servers</li></ul><ol start="3"><li>Old leader holds hallucination that it is still a leader.</li></ol><p>Election rules:</p><ul><li>A peer stays follower if it hears from current leader with heartbeat message.</li><li>A peer starts leader election when it doesnâ€™t receive the heartbeat message from current leader for an <code>election timeout</code>.</li><li>Each server can cast one vote per term.<ul><li>A candidate will vote for itself.</li><li>A peer will vote for the first candidate that asks</li></ul></li><li>A candidate becomes a leader when it receives votes from a majority of peers for a given term.</li></ul><p>Problem 1.1: how does Raft avoid split votes?</p><p>Split votes can happen when simultaneous candidates ask for votes from a equal number of peers. Raft uses random election timeout to avoid this problem. The election timeout must be chosen wisely. It should be at least a few heartbeat intervals in case of network delays, long enough to elect a leader before the next election starts. It should also be short enough to allow retries and react to failures quickly.</p><h3><span id="log">Log</span><a href="#log" class="header-anchor">Â¶</a></h3><p>Keeping a log for old commands is common. But changing leader is the reason to have an ordered log which helps leader to check follower states.</p><p>Every server should hold an identical log. That means no server can execute a different command for a log entry that has been executed a command by any other server.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Log diagram:</span><br><span class="line"></span><br><span class="line">Example 1:</span><br><span class="line"></span><br><span class="line">A leader (S2 or S3) for term 3 crashes before sending last AE to all.</span><br><span class="line"></span><br><span class="line">S1:  3           &lt;- term #</span><br><span class="line">S2:  3  3</span><br><span class="line">S3:  3  3</span><br><span class="line"></span><br><span class="line">Example 2:</span><br><span class="line"></span><br><span class="line">Next election, S2 is elected and crashed for term 4.</span><br><span class="line">Next election, S3 is elected and crashed for term 5.</span><br><span class="line"></span><br><span class="line">    10 11 12 13  &lt;- log entry #</span><br><span class="line">S1:  3</span><br><span class="line">S2:  3  3  4</span><br><span class="line">S3:  3  3  5</span><br><span class="line"></span><br><span class="line">Leader (S3, 6)</span><br><span class="line"></span><br><span class="line">    10 11 12 13  &lt;- log entry #</span><br><span class="line">S1:  3</span><br><span class="line">S2:  3  3  4</span><br><span class="line">S3:  3  3  5  6</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><u>The first question is could this scenario arise and how.</u></p><p>Example 2: AE(log entry) details after Leader (S3, 6):</p><ol><li>S3 is chosen as new leader for term 6.<ul><li>nextIndex[S2] = 13, nextIndex[S1] = 13</li></ul></li><li>It sends AE(13) with prevLogIndex=12, prevLogTerm=5</li><li>S2 replies false, mismatched prevLogTerm.</li><li>S3 decrements nextIndex[S2] to 12 (roll-back scheme, roll back one entry at a time)</li><li>S3 sends AE(12+13) with prevLogIndex=11, prevLogTerm=3</li><li>S2 deleted its entry 12<br>The same for S1.</li></ol><p>The result of roll-back: followers hold the identical log with the leader by deleting the tail of log with mismatched term and accepting leaderâ€™s entries after that point.</p><p>Itâ€™s ok to forget about S2â€™s (12, 4) entry. Itâ€™s not received by any server yet and hence not committed. The client will resend the discarded commands of that term by and by.</p><p><strong>New leader would not roll back committed entries from end of previous term.</strong><br>-&gt; Raft needs to ensure elected leader has all committed log entries.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Example 3:</span><br><span class="line"></span><br><span class="line">S1: 5 6 7</span><br><span class="line">S2: 5 8</span><br><span class="line">S3: 5 8</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Example 3: the longest log wins? -&gt; disclose voting details.</p><p>step 1: S2 or S3 wins election for term 5. It sends AEs to all.</p><p>step 2: S1 incurs network partition: S1 is isolated from S2 and S3.</p><p>step 3:</p><ul><li>S1: it doesnot hear from leader. Next election for term 6 starts. Canâ€™t get maj and start new election for term 7â€¦</li><li>S2 or S3: happily lives after S1 is disconnected since one of them will get maj and become leader.</li></ul><p>The problem is why wonâ€™t happy server choose 6 as next term?</p><p>Backing things up a litter, S1 is leader for term 6; crash + reboot; leader in term 7; crash and stay down. It crashes after it only sends AE to itself.</p><p>Because of leader (S1, 7), one of S2 or S3 learns about the last term is 7 while voting. So the next term will be 8.</p><p>All peers reboot. While S1 holds the longest log, it canâ€™t be a leader since entry 8 could have committed.</p><p>end of section 5.4.1:<br><code>election restriction</code>, voters only cast votes for candidate who is <strong>at least as up-to-date</strong>.</p><ul><li>candidate has higher term in last log entry, or</li><li>candidate has same last term and same length or longer log</li></ul><p>The next leader will be S2 or S3. They vote for each other even if network connectivity is intact.<br>Because they have higher term.</p><p>Then S1 will be forced to discard 6,7. -&gt; not committed -&gt; clients will resend the discarded commands</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Example 4:</span><br><span class="line"></span><br><span class="line">Leader (S2, 6); S1 crash+reboot; S2 sends AEs</span><br><span class="line"></span><br><span class="line">    Case 1      Case 2       Case 3</span><br><span class="line">S1: 4 5 5       4 4 4        4</span><br><span class="line">S2: 4 6 6 6 or  4 6 6 6  or  4 6 6 6</span><br></pre></td></tr></table></figure><p>end of section 5.3: a faster roll-back scheme than backs up one entry per request</p><p>How to roll back quickly?</p><p>S2: AE(prevLogTerm=6)<br>-&gt; Reply: S1 rejects with (XTerm, XIndex, XLen)</p><ol><li>case 1, leader doesnâ€™t have XTerm -&gt; nextIndex[S1] = XIndex</li><li>case 2, leader has XTerm -&gt; nextIndex[S1] = leaderâ€™s last entry for XTerm</li><li>case 3, follwerâ€™s log too short -&gt; nextIndex[S1] = XLen</li></ol><p>(? binary search)</p><p>Phrases:<br>XTerm: term in the conflicting entry (if any)<br>XIndex: index of first entry with that term (if any)<br>XLen: log length</p><h3><span id="persistence">Persistence</span><a href="#persistence" class="header-anchor">Â¶</a></h3><p>After a server crashes, we can repair it by replacing with a fresh (empty) server or reboot the crashed server.</p><ol><li>new: requires transfer of entire log/snapshots to new server, slow but necessary in case failure is permanent.</li><li>old: requires state that persists across crashes. Must support this for simultaneous power failures. -&gt; persistence</li></ol><p>What to remember?</p><ul><li>Essential info to let a Raft server rejoin the group. Save them after each change or before sending RPCs.</li><li>log[], a server that has latest log entries needs to keep that for furture use of new leader.</li><li>currentTerm, to ensure terms of system only increase. Each term has at most one leader to detect RPCs from stale leaders and candidates.</li><li>votedFor, a server needs to remember who it voted for in the currrent term in case it is rebooted and votes for a different candidate.</li></ul><p>What can be volatile?</p><p>If a state will be reset after reboot, it doesnâ€™t need to be persistent.</p><p>Performance cost:</p><ul><li>Persistence is often the bottleneck for performance.<ul><li>SSD (0.1ms per write) writes 100 times faster than a hard disk (10 ms per write), limiting us to 100-10,000 ops/sec.</li></ul></li><li>optimizations<ul><li>batch many log entries per disk write</li><li>persist to faster storage (battery-backed RAM)</li></ul></li><li>Another bottleneck RPC takes &lt;&lt; 1 ms on a LAN</li></ul><p>How does the service recover its state after a crash+reboot?</p><ul><li>Simple approach: start with empty state and re-play Raftâ€™s entire log.</li><li>Faster approach: snapshot + replay the tail of the log (that snapshot didnâ€™t cover)</li></ul><h3><span id="log-compaction-and-snapshots">Log Compaction and Snapshots</span><a href="#log-compaction-and-snapshots" class="header-anchor">Â¶</a></h3><p>State = operation history</p><p>service states are usually much smaller than the complete log. A server canâ€™t discard un-executed entries which is not yet reflected in the state and un-committed entries which could be part of leaderâ€™s majority.</p><p>To solve the problem of huge replicated log, service periodically creates persistent â€œsnapshotâ€. A snapshot includes copy of service state and index of last included log entry. Service tells Raft it is snapshotted through some log index so Raft can discard log before that index. A server can create a snapshot and discard prefix of log whenever.</p><p>In the case of crash+restart, service reads snapshot from disk and tells Raft last included index to avoid duplicate applying of log entries.</p><p>When followerâ€™s log ends before leaderâ€™s log starts, that part p is lost and canâ€™t be recovered by AppendEntries RPCs. Instead leader sends InstallSnapshot RPCs.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">L:           |-p-|xxxxxxxxxxxxxx|</span><br><span class="line">F: |xxxxxxxxx|</span><br></pre></td></tr></table></figure><h3><span id="linearizability">Linearizability</span><a href="#linearizability" class="header-anchor">Â¶</a></h3><p>notion of correctness for strong consistency: linearizability</p><p>An execution history is linearizable if one can find a total order of all operations, that matches real-time (for non-overlapping ops), and in which each read sees the value from the write preceding it in the order.</p><p>A history is a record of client operations, each with arguments, return value, time of start, time completed.</p><p>draw the constraint arrows by time rule + value rule</p><ul><li>the order obeys value constraints (W -&gt; R)</li><li>the order obeys real-time constraints</li></ul><p>Notation:</p><ul><li>Wx1 means write value 1 to record x, Rx1 means a read of rocord x yielded value 1.</li><li>the history is client-centric view of requests. It is linearizable if there is no cycle</li><li>the form of overlapping operations denotes concurrent operations</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">example 4:</span><br><span class="line"></span><br><span class="line">C1: |-Wx3-|          |-Wx4-|</span><br><span class="line">C2:          |-Rx3-------------|</span><br><span class="line">order: Wx3 Rx3 Wx4</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>From the examples in the lecture, it is known that:</p><ol><li>service can pick either order for concurrent operations</li><li>all clients must see the writes in the same order expecially in the cases of replicas and caches</li><li>reads must return fresh data. Stale values arenâ€™t linearizable</li><li>Duplicate request handling:<ul><li>supposing clients re-send requests if they donâ€™t get a reply, leader remembers client requests it has seen and replies with saved response from first execution when it sees duplicate.</li><li>it is linearizable to return the old saved value in this case. The reason is that the duplicate request is seen as the same process of the failed first request, which is concurrent to the write request.</li></ul></li></ol><h3><span id="duplicate-rpc-detection">Duplicate RPC Detection</span><a href="#duplicate-rpc-detection" class="header-anchor">Â¶</a></h3><p>Q: what should a client do if an operation times out? -&gt; Re-send th request</p><ul><li>server is dead or request dropped</li><li>server executed but request lost. Client still needs the result.</li></ul><p>The idea is duplicate RPC detection. Client picks an ID for each request. Re-sends will use the same ID in same RPC. Service keeps track a table indexed by ID and records value after executing. If the second RPC arrives with the same ID, the service knows itâ€™s a duplicate and generates reply from the old saved value in the table.</p><p>Q: When can we delete table entries?</p><ul><li>If new leader takes over, how to get the duplicate table?<ul><li>No need. Every server updates their duplicate table as they execute.</li></ul></li><li>If server crashes, how to restore its table?<ul><li>replay of log populates the table or snapshots which contains a copy of the table</li><li>as discussed in linearizability section, it is allowed to return the old saved value in this case.</li></ul></li></ul><p>To keep the table small, service has one table entry per client rather than one per request. Each client numbers requests sequentially. When server receives a client request with new number, it can forget about clientâ€™s lower entries and update the table entry with the new request.</p><p>If a duplicate req arrives before the original executes, the service just call Start() again. Server wonâ€™t execute a req that is already seen.</p><h3><span id="read-only-operations">Read-only Operations</span><a href="#read-only-operations" class="header-anchor">Â¶</a></h3><p>end of section 8</p><p>Q: does the Raft leader have to commit read-only operations in the log before replying?</p><p>e.g. Get(key)?</p><p>Leader cannot respond immediately to a read-only operation using its current content. The reason is that a server might have lost the recent election but not realized it yet in cases of network partitions. Then a new leader processes Put()s for the key so that value in that server becomes stale. Thus leader must commit read-only operations.</p><p>But read-heavy workload are quite normal. Committing read-only operations can take a long time. In practice, people are often willing to exchange higher performance with stale data.</p><p>The idea is leases. Modify Raft as follows: defining a lease period, after each time the leader gets an AE maj, it is entitled to respond to read-only requests for a lease period without committing those requests to the log (w/o sending AEs).</p><p>A new leader canâ€™t execute write requests until previous lease period has expired. So followers keep track of the last time they responded to an AE, and tell the new leader in the RequestVote reply.</p><p>As a result, we get faster read-only operations and the history is still linearizable.</p><h2><span id="paxos">Paxos</span><a href="#paxos" class="header-anchor">Â¶</a></h2><h3><span id="paxos-review">Paxos Review</span><a href="#paxos-review" class="header-anchor">Â¶</a></h3><p>Assumptions: non-Byzantine failures. Allows failures of missing messages and unordered requests.</p><p>P1. An acceptor must accept the first proposal that it receives.</p><p>For the acceptance of majority, one acceptor must accecpt &gt;= 1 proposals. Assign number to the proposal as (seq_number, value).</p><p>A value is chosen only when it is accepted by a majority of acceptors. -&gt; A value is chosen only when the proposal is chosen.</p><p>If multiple proposals are chosen, then it is guaranteed that all chosen proposals have the same value.</p><p>P2. If a proposal with value v is chosen, then every higher-numbered proposal <u>that is chosen</u> has value v.<br>-&gt; 2a. accepted by any acceptor<br>-&gt; 2b. issued by any proposer<br>-&gt; 2c. For any v and n, if a proposal(n, v) is issued, then there is a set S consisting of a majority of acceptors such that either (a) no acceptor in S has accepted any proposal numbered less than n, or (b) v is the value of the highest-numbered proposal among all proposals numbered less than n accepted by the acceptors in S.</p><p>To prove 2c, the proposer (n, v) controls future acceptance by <strong>requesting a promise from acceptors that no more such acceptances of proposals numbered less than n</strong>.</p><p>Proposerâ€™s algorithm:<br>(1) a <code>prepare</code> req<br>A proposer send a prososal (n)  and demands its acceptors to respond with:</p><ol><li>a promise never again to agree a proposal numbered less than n</li><li>the proposal with the highest number less than n that it has accepted (previous accepted value), if any.</li></ol><p>After the proposer gets the responses from a majority of the acceptors, it is getting into phase 2.</p><p>(2) an <code>accept</code> req, sharing the same set of acceptors as phase-1.<br>The proposer issues a proposal (n, v) where v is the value either the highest-numbered proposal among the responses or the any one selected by the proposer if reported no proposals.</p><p>P1a. An acceptor can accept a proposal numbered n iff it has not responded to a prepare request having a number greater than n.</p><p>Phase 1:<br>(1) proposer: sends a prepare req (n)<br>(2) acceptor: responds the proposal(n, v) or null</p><p>Phase 2:<br>(1) proposer: sends an accept req (n, v) to the same majority group of acceptors<br>(2) acceptor: accepts (n, v) unless there are prepare requests numbered greater than n.</p><p>Optimizations:</p><ol><li>acceptors ignore the prepare requests numbered less than its accepted request number.</li><li>acceptors notify the proposers the highest number of its prepare requests so that proposers can drop the proposals with lower numbered req.</li></ol><p>Phase 3: learner: the acceptors can respond their acceptances to some set of distinguished learners.</p><p># of distinguished learners^, reliability^ &amp; communication complexity^.</p><p>Termination policy: a distinguished proposer must be selected as the only one to issue proposals. A reliable algorithm for electing a proposer must use either randomness or real time (timeouts).</p><p>implementation:</p><p>Paxos chooses a leader to perform the role of the distinguished proposer and the distinguished learner.</p><p>For persistence, an acceptor records its response in storage before sending. And each proposer keeps the highest-numbered proposal in storage before issuing.</p><blockquote class="colorquote blue"><p>Suppose that the acceptors are <em>A</em>, <em>B</em>, and <em>C</em>. <em>A</em> and <em>B</em> are also proposers. How does Paxos ensure that the following sequence of events canâ€™t happen? What actually happens, and which value is ultimately chosen?</p><ol><li><em>A</em> sends prepare requests with proposal number 1, and gets responses from <em>A</em>, <em>B</em>, and <em>C</em>.</li><li><em>A</em> sends <code>accept(1, &quot;foo&quot;)</code> to <em>A</em> and <em>C</em> and gets responses from both. Because a majority accepted, <em>A</em> thinks that <code>&quot;foo&quot;</code> has been chosen. However, <em>A</em> crashes before sending an <code>accept</code> to <em>B</em>.</li><li><em>B</em> sends prepare messages with proposal number 2, and gets responses from <em>B</em> and <em>C</em>.</li><li><em>B</em> sends <code>accept(2, &quot;bar&quot;)</code> messages to <em>B</em> and <em>C</em> and gets responses from both, so <em>B</em> thinks that <code>&quot;bar&quot;</code> has been chosen.</li></ol></blockquote><p>After step 2, B and C have had the prepare message from A which is #1. After step 3, B would get response from C with value â€œfooâ€ and gets null from B. At step 4, B will not send accecpt(2, â€œbarâ€) but (2, â€œfooâ€).</p><h3><span id="inference">Inference</span><a href="#inference" class="header-anchor">Â¶</a></h3><p>There are protocols such as Paxos, Raft, Viewstamped Replication, Raft, Zookeeper providing strong consistency. Paxos is different for its simplicity and wide application. Many other protocols can be viewed as variants of Paxos.</p><p>Two topics are:</p><p>Problem 1: How Paxos works?</p><p>Agreement is hard :(</p><ul><li>multiple rounds for the op, tentative initialy but donâ€™t know when agreement is permanent</li><li>Agreement has to be able to complete even with failed servers. some servers decides a value but other servers donâ€™t respond. Canâ€™t distinguish between network partition (servers are running but cannot be reached by other partition) or failed servers.</li></ul><p>Two main ideas in Paxos to address these problems:</p><ul><li>many rounds are possible but they will converge on one value</li><li>majority rule: a key point is any two majorities overlap. At least one server with earlier majority is shared by the later majority.</li></ul><p>Paxos sketch:</p><ul><li>each server consists of three logical entities, acceptor, proposer, learner. Maybe more than one proposer when multiple clients submit requests to different servers at the same time.</li><li>Proposers contacts acceptors to assemble a majority. if not get a majority, new round.</li></ul><p>The crucial property:</p><ul><li>If a value was chosen, any subsequent choice must be the same value</li><li>chosen is system-wide property</li></ul><p>Why n?</p><ul><li>It distingushes among multiple rounds. Later rounds can supersede earlier rounds.</li><li>n = &lt;time, server_id&gt;, n must be unique and roughly follow time.</li><li>round(=proposal) numbers are WITHIN a particular instance.</li></ul><p>Whatâ€™s the commit point?</p><p>i.e. a point that agreement has reached or a server has executed the op</p><p>After a majority has the same (v_a, n_a). Neither v_a nor n_a is sufficient.</p><p>Thinking (discussing with Claude):</p><ol><li>why does the proposer need to pick v_a with highest n_a?</li></ol><p>The proposer needs to pick an accepted value which is associated with the highest proposal number that acceptors have seen. It represents the most recent accepted value.</p><ol start="2"><li>why does prepare handler check that n &gt; n_p?</li></ol><p>It picks a proposal number that is higher than current highest prepare seen. The proposer should not send a proposal that is older than previous ones.</p><ol start="3"><li>why does accept handler check n &gt;= n_p?</li></ol><p>The acceptor promises not to accept any proposal with number less than n_p.</p><ol start="4"><li>why does accept handler update n_p = n?</li></ol><p>The accept handler updates n_a because itâ€™s accepting a value. The real question is why n_p is updated too. If n_p &lt; n, then n_p &lt; n_a. The proposal with n_p will be rejected by the acceptor.</p><ol start="5"><li>what if proposer S2 chooses n &lt; S1â€™s n?</li></ol><p>It will be rejected by any acceptor that has seen S1â€™s proposal.</p><ol start="6"><li>what if an acceptor crashes after receiving accept?</li></ol><p>Assume that an acceptor receiving accept means that states were updated but it didnâ€™t send accept_ok, then the proposer will retry with a new proposal number and get rejected since the acceptor is dead.</p><p>One acceptor crash will not affect the the system as long as the majority of the paxos peers is alive. Since the paxos lab is not persistent, the peer will lost its states. It will get updated when it is alive.</p><ol start="7"><li>what if an acceptor reboots after sending prepare_ok?</li></ol><p>The next accept will be rejected because the acceptor forgets the previous prepare which updates n_p.</p><p>Paxos gets stuck:</p><ul><li>not a majority that can communicate</li><li>propsers retry immediately after accept_reject (should retry after a random amount of time)</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">example 1 (normal operation):</span><br><span class="line">  S1, S2, S3</span><br><span class="line">  but S3 is dead or slow</span><br><span class="line">  S1 starts proposal, n=1 v=A</span><br><span class="line">S1: p1    a1A    dA</span><br><span class="line">S2: p1    a1A    dA</span><br><span class="line">S3: dead...</span><br><span class="line">&quot;p1&quot; means Sx receives prepare(n=1)</span><br><span class="line">&quot;a1A&quot; means Sx receives accept(n=1, v=A)</span><br><span class="line">&quot;dA&quot; means Sx receives decided(v=A)</span><br><span class="line">these diagrams are not specific about who the proposer is</span><br><span class="line">(I like the diagram in the lecture handout, very concise)</span><br><span class="line"></span><br><span class="line">proposer - acceptor exchange:</span><br><span class="line">    prepare(n) -&gt;</span><br><span class="line">    &lt;- prepare_ok(n, n_a, v_a)</span><br><span class="line">    accept(n, v&#x27;) -&gt;</span><br><span class="line">    &lt;- accept_ok(n)</span><br><span class="line">    decided(v&#x27;) -&gt;</span><br><span class="line"></span><br><span class="line">--- Paxos Proposer ---</span><br><span class="line"></span><br><span class="line">proposer(v):</span><br><span class="line">  while not decided:</span><br><span class="line">    choose n, unique and higher than any n seen so far</span><br><span class="line">    send prepare(n) to all servers including self</span><br><span class="line">    if prepare_ok(n, n_a, v_a) from majority:</span><br><span class="line">      v&#x27; = v_a with highest n_a; choose own v otherwise   </span><br><span class="line">      send accept(n, v&#x27;) to all</span><br><span class="line">      if accept_ok(n) from majority:</span><br><span class="line">        send decided(v&#x27;) to all</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--- Paxos Acceptor ---</span><br><span class="line"></span><br><span class="line">acceptor state on each node (persistent):</span><br><span class="line"> n_p     --- highest prepare seen</span><br><span class="line"> n_a, v_a --- highest accept seen</span><br><span class="line"></span><br><span class="line">acceptor&#x27;s prepare(n) handler:</span><br><span class="line"> if n &gt; n_p</span><br><span class="line">   n_p = n</span><br><span class="line">   reply prepare_ok(n, n_a, v_a)</span><br><span class="line"> else</span><br><span class="line">   reply prepare_reject</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">acceptor&#x27;s accept(n, v) handler:</span><br><span class="line"> if n &gt;= n_p</span><br><span class="line">   n_p = n</span><br><span class="line">   n_a = n</span><br><span class="line">   v_a = v</span><br><span class="line">   reply accept_ok(n)</span><br><span class="line"> else</span><br><span class="line">   reply accept_reject</span><br></pre></td></tr></table></figure><p><u>Problem 2: How to integrate Paxos into a real system?</u></p><p>Paxos-based replication:</p><p>Each client ops are appended to a replicated log of servers with a separate proposal number.<br>Log entries are numbered, called instances (seq). Paxos reaches agreement on each log entry.</p><p>Paxos provides:</p><ul><li>interface:<ul><li>Start (seq, v): Propose v for seq, without waiting for agreement to complete</li><li>fate, v := Status(seq): find out the agreed value for seq. Only check local states, w/o communications between servers.</li></ul></li><li>correctness: once any agreement reached, never changes. After agreement, servers may update state</li><li>fault tolerance: tolerate non-reachability of a minority of servers</li><li>liveness: will reach agreement if a majority of servers can communicate for long enough</li></ul><p>Example (context): Server Si uses Paxos to get all servers to agree that a log entry x holds a client op (Get,  Put, Append).</p><p>Why a log is better than all replicas to agree on each op in lock-step:</p><ul><li>when state is small: agree on entire state -&gt; a tie</li><li>when state is very large: log describes changes -&gt; win</li><li>log helps to recover from failures: slow, miss messages, crash, start</li></ul><p>Summary of how to use Paxos for RSM:</p><p>A log of Paxos instances (client op). Different instancesâ€™ Paxos agreements are <strong>independent</strong>.</p><h2><span id="case-study-zookeeper-2010">*Case Study: ZooKeeper 2010</span><a href="#case-study-zookeeper-2010" class="header-anchor">Â¶</a></h2><p>ZooKeeper: Wait-free coordination for Internet-scale systems</p><p>Read: 1-2</p><blockquote class="colorquote blue"><p>Problem 0: One use of Zookeeper is as a fault-tolerant lock service (see the section â€œSimple locksâ€ on page 6). Why isnâ€™t possible for two clients to acquire the same lock? In particular, how does Zookeeper decide if a client has failed and it can give the clientâ€™s locks to other clients?</p></blockquote><p>Because a lock can only be created once and held by one client. Once a lock is created, another client that tries to acquire the same lock will read the znode with the watch flag set. Zookeeper decides a client has failed by watch events.</p><p>&gt; Claude: The key safety guarantee comes from combining these mechanisms: locks are typically implemented using ephemeral znodes, and session expiration is what ultimately determines if a client has failed. A clientâ€™s lock (ephemeral znode) will only be released when its session expires, ensuring no two clients can hold the same lock simultaneously</p><p>Zookeeper is a Raft-like service with leader-based replication.  We care about Zookeeper from two perspectives:</p><ol><li><p>APIs for a general purpose  coordination service</p></li><li><p>performance of replication: will Nx replica server bring Nx performance?</p><p>Normally, it wouldnâ€™t for leader-based replication. The server requires leader to replicate one by one, slowing down the performance inverse proportionally to the number of replicas.</p></li></ol><p>When a replica servers read-only client requests from their local state w/o other peers, reads from followers are not linearizable because they may return stale data. Even if a client is reading from an up-to-date replica, it still risks the possibility of seeing data values go backwards in time.</p><p>Zookeeper avoids this issue by changing the definition of correctness. It looses the constraints of linearizability by allowing reads to yield stale data so that clients are able to read from all replicas, changing total read capacity from O(1) to O(# servers). That highly increases the performance for read-heavy workloads.</p><p>Ordering guarantees:</p><ul><li>linearizable writes: writes are ordered with <code>zxid</code> and execute in zxid order.</li><li>FIFO client order</li></ul><img src="/sg/2023/07/28/ds_basics/zab.png" class title="zab"><ol><li><p>API overview</p></li><li><p>atomicity for mini-transaction: Zookeeper is good for small piece of data like 100MB, not as big as 100GB.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># mini-transaction example</span><br><span class="line">while true:</span><br><span class="line">x, v := getData(&quot;f&quot;)</span><br><span class="line">if setData(x + 1, version=v):</span><br><span class="line">break</span><br><span class="line">(sleep)</span><br></pre></td></tr></table></figure></li></ol><p>Scalable lock compared to threaded lock of Go:</p><p>: service creates sequential files. Each lock at most has one file requests to acquire. For example, supposing files are numbered with 0 - 3 and f0 holds the lock, the other files trying to acquire the lock look like the following diagram.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># Locks w/o herd effect</span><br><span class="line">f0                   f1              f2          f3</span><br><span class="line">holds the lock &lt;-  wait for f0 &lt;- wait for f1 &lt;- wait for f2</span><br><span class="line"></span><br><span class="line"># Locks w/ herd effect</span><br><span class="line">f0                   f1              f2          f3</span><br><span class="line">holds the lock &lt;-  wait for f0   wait for f0   wait for f0</span><br><span class="line"> ^ |                 |           |</span><br><span class="line"> |--------------------------------------------------</span><br></pre></td></tr></table></figure><h2><span id="case-study-chubby-2006">*Case Study: Chubby 2006</span><a href="#case-study-chubby-2006" class="header-anchor">Â¶</a></h2><p>The Chubby lock service for loosely-coupled distributed systems</p><p>Terms:</p><ol><li>Advisory locks are a type of locking mechanism where processes voluntarily check and respect locks, but the system doesnâ€™t enforce the locks.</li><li>Whole-file reads refer to a pattern where applications read entire files from beginning to end, rather than accessing random portions or small parts of files. This was one of the key workload assumptions in systems like Google File System (GFS).</li></ol><p>This paper introduces Chubby, a distributed lock service, for use within a distributed system consisting of fairly large numbers of small machines connected by a high-speed network. It aims to deal with the problem of electing a leader from among a set of servers. The authors only want to discuss the design and implementation through real experience.</p><h2><span id="case-study-harp-1991">*Case Study: Harp 1991</span><a href="#case-study-harp-1991" class="header-anchor">Â¶</a></h2><p>Replication in the Harp File System</p><p>Read: 1, 3-6</p><blockquote class="colorquote blue"><p>Question: Figures 5-1, 5-2, and 5-3 show that Harp often finishes benchmarks faster than a conventional non-replicated NFS server. This may be surprising, since you might expect Harp to do strictly more work than a conventional NFS server (for example, Harp must manage the replication). Why is Harp often faster? Will all NFS operations be faster with Harp than on a conventional NFS server, or just some of them? Which?</p></blockquote><p>Harp is often faster because it applies three approaches to increase performance.</p><p>First, for non-modification operations, the primary node doesnâ€™t send requests to backups and processes by local content.</p><p>Furthermore, since read operations in a file system are modifiled which changes the last viewed time of files upon reading, Harp makes a concession of consistency by allowing read requests to return to the client immediately from the primary. Such requests donâ€™t have to wait for the acknowledgements of backups and increase performance. The rest of processing read requests between primary and backup is running at the background.</p><p>Secondly, a part of work is put background compared to unreplicated NFS server which is:</p><ol><li>in the phase 2 of 2PC, backups are informed about the commit</li><li>committed records of event are applies to file system (apply)</li></ol><p>Harp is a file service in a distributed network which was designed for small clusters. It adopts primary copy replication technique and write-ahead log, providing users similar interface to NFS at that time. Additional hardwares are used for reliable storage and UPS (uninterruptible power supply) which persists the log despite (short) power failures.</p><p>Environment: nodes are connected via a network; synchronized clocks allows a skew of &lt;100ms, node failures include network, hardware, power; a crash of node is fail-stop.</p><p>Problem: how replication works?</p><p>The structure of section 4 is: overview, system behavior of failure cases, no failure case (normal case processing), failure case (fail-over), atomicity of transactions</p><p>The things I noticed are:</p><ol><li>Some familiar stuff: Harp uses primary/back replication model + WAL (limited size; volatile; redo log, not undo) to achieve reliability, consistency, correctness, availability.<ul><li>The replication models applies 2PC + view servers</li><li>It is fault-tolerant, allowing &lt;maj # of node failures</li><li>It is able to tolerate simultaneous failures.</li><li>reduce log size by exchanging and comparing LB and GLB.</li></ul></li><li>loosely synchronized clocks with a skew of &lt; 100ms.</li><li>Harp speeds up read op processing by using leases and sacrifice of a little consistency of last viewed time. When T(primaryâ€™s clock) &gt; T (backupâ€™s clock) + t (promised by backup which wonâ€™t start a new view less than this time), the read requests are sent to backups. Otherwise, the primary returns the result of reads directly.</li><li>The member of Harpâ€™s group has three roles: primary, backup, witness. Harp distributes work to all members by assigning roles with unmatched group. For example, in a system with three nodes A, B, C, A  could be primary of g0, backup of g1, and witness of g2.</li><li>Witness servers donâ€™t store files because only (n+1) servers to store is enough for a system to tolerate n failure nodes. A witness server can be promoted and demoted.</li><li>A view of the system is numbered. The higher, the most recent. Harp avoids simultaneous view changes which slow down fail-over.</li></ol><p>Other things I wasnâ€™t aware of:</p><ol><li>Harp uses Raft-like replication techniques, pre-dating Raft by 20+ years. It describes complete replicated systems and how it adapts to state machine abstraction.</li><li>question: how does it handle n/w partition for modified operations?</li><li>q: When can Harp form a new view?</li><li>Optimizations of Harp: pipelining of requests to backup (numbered event records?)</li></ol><p>Reference:</p><ol><li><a href="http://nil.csail.mit.edu/6.824/2015/notes/l-paxos.txt">http://nil.csail.mit.edu/6.824/2015/notes/l-paxos.txt</a></li><li><a href="http://nil.csail.mit.edu/6.824/2015/notes/paxos-code.html">http://nil.csail.mit.edu/6.824/2015/notes/paxos-code.html</a></li><li><a href="http://nil.csail.mit.edu/6.824/2022/notes/l-raft.txt">http://nil.csail.mit.edu/6.824/2022/notes/l-raft.txt</a></li><li><a href="http://nil.csail.mit.edu/6.824/2022/notes/l-raft2.txt">http://nil.csail.mit.edu/6.824/2022/notes/l-raft2.txt</a></li><li><a href="http://nil.csail.mit.edu/6.824/2015/notes/l-harp.txt">http://nil.csail.mit.edu/6.824/2015/notes/l-harp.txt</a></li><li><a href="http://nil.csail.mit.edu/6.824/2020/notes/l-zookeeper.txt">http://nil.csail.mit.edu/6.824/2020/notes/l-zookeeper.txt</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.824 distributed systems </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å‡ºç‹±æœ­è®°</title>
      <link href="/sg/2023/06/27/summer/"/>
      <url>/sg/2023/06/27/summer/</url>
      
        <content type="html"><![CDATA[<p>èº«ä½“çš„å›šç‰¢å’Œå¿ƒçµçš„å›šç‰¢åŒæ ·å¯æ€•ï¼Œè€Œè¿™æ¦‚æ‹¬äº†æˆ‘çš„å¤§å­¦ã€‚æ¯ä¸ªæ—¶æœŸæˆ‘æ‰€å›°æƒ‘çš„é—®é¢˜éƒ½åœ¨å˜åŒ–ã€‚</p><ul><li><p>å¤§ä¸€ï¼šè‡ªå­¦csè€Œä¸æ˜¯é€‰æ‹©è¿™ä¸ªä¸“ä¸šçš„å†³å®šæ­£ç¡®å—ï¼Ÿ<br>æˆ‘ç»™è‡ªå·±ä¸€ä¸ªå­¦æœŸæƒ³å‡ºç­”æ¡ˆï¼Œé€æ¸æ„è¯†åˆ°ç¤¾ä¼šä¸Šå¯¹éç§‘ç­ä»äº‹csçš„åè§ï¼Œäºæ˜¯é€‰æ‹©è½¬ä¸“ä¸šï¼Œæœ€åè½¬ä¸“ä¸šå¤±è´¥ã€‚</p></li><li><p>å¤§äºŒï¼šä¸ºä»€ä¹ˆæ€»æ˜¯ä¸èƒ½ç‹¬ç«‹åšå‡ºä¸€äº›å…¬å¼€è¯¾çš„é¢˜æˆ–labï¼Ÿæ€»æƒ³ç€ç‹¬ç«‹è§£å†³é—®é¢˜ä½†æ€»æ˜¯æ— æ³•åšåˆ°ï¼Œæ˜¯æ‹’ç»æƒ³åˆ«äººé—®é—®é¢˜çš„æ—¶æœŸã€‚<br>é€‰æ‹©æ”¾ç€ç­‰å¾…ä¹‹åè§£å†³ï¼Œå¼€å§‹è¡¥ä¸€äº›åŸºç¡€çŸ¥è¯†å’Œå­¦äº†ä¸€ç‚¹cã€‚</p></li><li><p>å¤§ä¸‰ï¼š</p><ul><li>åŒå€¦åœ¨çç¢æ— èŠçš„äº‹æƒ…ä¸Šåˆ†é…æ—¶é—´ï¼Œç”¨äº†ä¸€ç§æ¯”è¾ƒæç«¯çš„æ–¹å¼é€ƒé¿ï¼Œå¯¼è‡´æˆç»©å•å˜å¾—å¾ˆéš¾çœ‹<br>ä¸€ç‚¹ä¸€æ»´çš„ç§¯ç´¯ï¼Œè¿™æ®µæ—¶é—´ç»ƒä¹ äº†è®¸å¤šä¸œè¥¿ã€‚é ä¹‹å‰cçš„åŸºç¡€å’Œç»ƒä¹ çš„éƒ¨åˆ†åœ¨æ¯”åŒæœŸè¾ƒæ™šçš„æ—¶é—´æœ‰äº†ä¸ªæš‘æœŸå®ä¹ ã€‚</li><li>peer pressure: é€‰æ‹©æƒ³åšçš„äº‹è¿˜æ˜¯åŒè¾ˆä»¬åœ¨åšçš„äº‹ï¼Ÿ<br>é€‰æ‹©äº†æƒ³åšçš„äº‹ã€‚</li><li>career wonderings: èŒä¸šåˆæœŸä»€ä¹ˆæœ€é‡è¦ï¼Ÿåº”è¯¥å…»æˆä»€ä¹ˆæ ·çš„å­¦ä¹ ä¹ æƒ¯ï¼Ÿ<br>ä» mentors é‚£é‡Œä»0å¼€å§‹ä¸€çª¥ system programmingï¼Œèƒ½å¤Ÿé—®é—®é¢˜å’Œè¯»å¤§å‹é¡¹ç›®çš„ç›¸å…³ä»£ç ã€‚æ”¹å–„æ²Ÿé€šèƒ½åŠ›ï¼Œå’Œæ›´å¤šçš„ä¸“ä¸šäººå£«äº¤æµåŒæ—¶ä¹Ÿå—åˆ°è®¸å¤šäººçš„å¸®åŠ©ã€‚<img src="/sg/2023/06/27/summer/email.png" class title="email"></li></ul></li><li><p>å¤§å››ï¼šåå·æ›²æŠ˜çš„ä¸€å¹´ã€‚</p><ul><li><p>è¿·å¤±æš—æ·¡çš„æ—¥å­å¯¹æˆ‘çš„äººç”Ÿæœ‰ä»»ä½•å¸®åŠ©å—ï¼Ÿè¿™ä¸€å¹´å……æ»¡äº†å˜æ•…ï¼Œå…ˆæ˜¯ Zero Policy ç„¶åæ˜¯å¾ˆå¤šå‚çš„ hiring freezeï¼Œå¯¼è‡´æŸä¸ªå¾ˆæƒ³å»çš„å®ä¹ æœ€ç»ˆä¸èƒ½æˆè¡Œã€‚<br>å¿ƒå­˜å¸Œæœ›ã€‚ä»¥ä¸ºçš„ç»“æŸå…¶å®åªæ˜¯ä¸€åˆ‡å¼€å§‹çš„èµ·ç‚¹ï¼Œæˆ‘è¦æ‰¾åˆ°ä¸€ä¸ªé€‚åˆçš„åœ°æ–¹ç»™è‡ªå·±è¶³å¤Ÿçš„æ—¶é—´ç»§ç»­ç£¨ç‚¼èƒ½åŠ›å’Œå¢åŠ è§è¯†ã€‚</p></li><li><p>å¼€å§‹åšå»¶ä¼¸ä»»åŠ¡ï¼Œçœ‹ä¸æ‡‚ä¸€äº›èƒŒåçš„ä»£ç é€»è¾‘<br>åœ¨é—®é—®é¢˜çš„è¿‡ç¨‹ä¸­è±ç„¶å¼€æœ—<br>çº¿è·¯ï¼šzoned emulation -&gt; full emulation (block driver) -&gt; + qcow2 driver -&gt; NVMe ZNS emulation</p></li><li><p>è¯»ä¸€äº› pr/proposal/slides æ€»è§‰å¾—çœ‹ä¸é€<br>å¤šçœ‹å¤šæƒ³å¤šç»ƒ</p></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>6.046 dynamic programming</title>
      <link href="/sg/2023/01/25/6.046_dp/"/>
      <url>/sg/2023/01/25/6.046_dp/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#introduction">Introduction</a></li><li><a href="#basic">Basic</a><ul><li><a href="#rectangualar-blocks">Rectangualar blocks</a></li><li><a href="#longest-palindromic-seq">Longest Palindromic Seq</a></li></ul></li><li><a href="#medium">Medium</a><ul><li><a href="#optimal-bsts">Optimal BSTs</a></li><li><a href="#alternating-coins-game">Alternating Coins Game</a></li></ul></li><li><a href="#all-pairs-shortest-paths">All-Pairs Shortest Paths</a><ul><li><a href="#dp1">DP1</a></li><li><a href="#matrix-multiplication">Matrix multiplication</a></li><li><a href="#dp2-floyd-warshall-algorithm">DP2, Floyd-Warshall algorithm</a></li><li><a href="#johnson-s-algorithm">Johnsonâ€™s algorithm</a></li></ul></li><li><a href="#olc">OLC</a></li></ul><!-- tocstop --></div><p>DP notion:</p><ol><li>Characterize the structure of an optimal solution</li><li>Recursively define the value of an optimal solution based on optimal solutions of subproblems</li><li>Compute the value of an optimal solution in bottom-up fashion (recursion &amp; memoization)</li><li>Construct an optimal solution from the computed information</li></ol><h2><span id="introduction">Introduction</span><a href="#introduction" class="header-anchor">Â¶</a></h2><p>The main idea of dp: subtract and solve the subproblem, then reuse the results</p><p>Runtime: the number of unique problems+ the amount of merge work</p><p>In the recitation, a simple dp example is to solve the number of unique paths from (1, 1) to (M, N).</p><ul><li><img src="/sg/2023/01/25/6.046_dp/Screenshot-4617420.png" class title="Screenshot-4617420"></li><li>Subproblem: To the points on the edge, just one path; to the middle points, path to the left point + path the right point</li><li>Runtime: # subproblems = O(MN)</li><li>olc: I misunderstood that the subproblems should start from (M-1, N-1) -&gt; (M, N) which makes solutions hard to get.</li></ul><p><u>Make change example:</u> Make changes for N cents. There are 1=S1 &lt; S2 &lt; â€¦ &lt; S_M cent of coin. Find the minimal number of coins needed.</p><ul><li>Subproblem: do a exhaustive search. Pick Si, then MC(N) = min{1 + MC(N-Si)}. N &gt; maximum of subproblems of min{MC(N-Si)}</li><li>Runtime: O(MN).</li><li>Itâ€™s similar to knapsack problems (NP-complete). The linear solution here is due to the size of input is log(N), thereby itâ€™s still exponential.</li></ul><h2><span id="basic">Basic</span><a href="#basic" class="header-anchor">Â¶</a></h2><h3><span id="rectangualar-blocks">Rectangualar blocks</span><a href="#rectangualar-blocks" class="header-anchor">Â¶</a></h3><p>problem: A set of n blocks, {1, 2, â€¦, n}, l_i, w_i, h_i. J on top i, require l_j &lt; l_i, w_j &lt; w_i. Rotating not allowed. Find the maximum height.</p><p>? RB(1, 2, â€¦, n)</p><ul><li>olc: the subproblem is whether to put the next block j on top of current (j-1) blocks.</li></ul><p>Rec:</p><p>Approach 1: exhaustive search</p><ul><li><p>RB(1, 2, â€¦, n) = max{h_i + RB(â€¦except iâ€¦)} -&gt; messy constraints l, w</p></li><li><p>redefine a compatible set C, then RB(1, 2, â€¦, n) = max{h_i + RB(C_i)}</p><img src="/sg/2023/01/25/6.046_dp/Screenshot-4619728.png" class title="Screenshot-4619728"></li><li><p>Runtime: O (n^2), # subproblems = n.</p><ul><li><img src="/sg/2023/01/25/6.046_dp/Screenshot-4620149.png" class title="Screenshot-4620149"></li><li>whatâ€™s in the compatible sets C? How to find C?<ul><li>O(n^2): Scan the entire set, find the minimum for each one</li><li>O(nlogn)?</li></ul></li></ul></li></ul><p>Approach 2: weighted interval scheduling</p><p>Sorted by length and then width {1, â€¦, n}</p><p>RB(1, 2, â€¦, n) = max{(h1 + RB(C_i)), RB(2, â€¦, n)}</p><p>Runtime: O(n), # subproblems = n; + O(nlogn), sort; + O(n^2)/O(nlogn) find C set.</p><h3><span id="longest-palindromic-seq">Longest Palindromic Seq</span><a href="#longest-palindromic-seq" class="header-anchor">Â¶</a></h3><p>Input: a sequence of letters -&gt; a string X[1â€¦n], n &gt;=1</p><p>Output: (limits) answer &gt;=1</p><p>Strategy: L(i, j) is the length of longest palindromic subsequences of X[iâ€¦j] for i &lt;= j.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">X = <span class="string">'underqualified'</span></span><br><span class="line">n = <span class="built_in">len</span>(X)</span><br><span class="line"><span class="type">Dict</span> = [[<span class="number">0</span> <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)] <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">L</span>(<span class="params">i, j</span>):</span><br><span class="line"><span class="keyword">if</span> (<span class="type">Dict</span>[i][j] != <span class="number">0</span>): <span class="comment"># memoization</span></span><br><span class="line"><span class="keyword">return</span> <span class="type">Dict</span>[i][j]</span><br><span class="line"><span class="keyword">if</span> i == j:</span><br><span class="line"><span class="type">Dict</span>[i][j] = <span class="number">1</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">if</span> X[i] == X[j]:</span><br><span class="line"><span class="keyword">if</span> i + <span class="number">1</span> == j:</span><br><span class="line"><span class="type">Dict</span>[i][j] = <span class="number">2</span></span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="keyword">return</span> <span class="number">2</span> + L(i+<span class="number">1</span>, j-<span class="number">1</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line"><span class="type">Dict</span>[i][j] = <span class="built_in">max</span>(L(i+<span class="number">1</span>, j), L(i, j-<span class="number">1</span>))</span><br><span class="line"><span class="keyword">return</span> <span class="type">Dict</span>[i][j]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n): <span class="built_in">print</span>(<span class="type">Dict</span>[i])</span><br></pre></td></tr></table></figure><p>Problem 1: How to trace backwards to generate output sequence?</p><ul><li><p>ChatGPT: use dp array to trace back and print the result.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">printLPS</span>(<span class="params">i, j</span>):</span><br><span class="line">    <span class="keyword">if</span> i &gt; j:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">    <span class="keyword">if</span> i == j:</span><br><span class="line">        <span class="keyword">return</span> X[i]</span><br><span class="line">    <span class="keyword">if</span> X[i] == X[j]:</span><br><span class="line">        <span class="keyword">return</span> X[i] + printLPS(i+<span class="number">1</span>, j-<span class="number">1</span>) + X[j]</span><br><span class="line">    <span class="keyword">if</span> <span class="type">Dict</span>[i][j-<span class="number">1</span>] &gt; <span class="type">Dict</span>[i+<span class="number">1</span>][j]:</span><br><span class="line">        <span class="keyword">return</span> printLPS(i, j-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> printLPS(i+<span class="number">1</span>, j)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"Longest Palindromic Sequence: "</span>,printLPS(<span class="number">0</span>, <span class="built_in">len</span>(X)-<span class="number">1</span>))</span><br></pre></td></tr></table></figure></li></ul><p>Problem 2: How to write dp iteratively?</p><ul><li><strong>Iterating</strong>: solve subproblems in order of increasing j âˆ’ i so smaller ones are solved first</li></ul><p>Analysis: # subproblems * time to solve each subproblem</p><ul><li>Suppose X[i] are distinct, T(n) is running time on input of length n, T(n) = 2^(n-1)<ul><li>1, n=1</li><li>2T(n-1), n&gt;1</li></ul></li><li>But there are only C(n, 2) = <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="5.166ex" height="2.452ex" role="img" focusable="false" viewbox="0 -833.9 2283.6 1083.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"/></g><g data-mml-node="mo" transform="translate(469,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(858,0)"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mn" transform="translate(633,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g></g><g data-mml-node="mo" transform="translate(1894.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> distinct subproblems: (i, j) pairs with i &lt; j.</li><li>Given that smaller ones are solved, lookup is O(1)</li><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="11.256ex" height="2.452ex" role="img" focusable="false" viewbox="0 -833.9 4975 1083.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"/></g><g data-mml-node="mo" transform="translate(469,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(858,0)"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mn" transform="translate(633,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g></g><g data-mml-node="mo" transform="translate(1894.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(2505.8,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="mi" transform="translate(3228,0)"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"/></g><g data-mml-node="mo" transform="translate(3697,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mn" transform="translate(4086,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mo" transform="translate(4586,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></li><li><strong>memoizing</strong>, hash, lookup hash table or recurse</li></ul><h2><span id="medium">Medium</span><a href="#medium" class="header-anchor">Â¶</a></h2><h3><span id="optimal-bsts">Optimal BSTs</span><a href="#optimal-bsts" class="header-anchor">Â¶</a></h3><p>Given: keys K1, K2, â€¦, Kn, K1 &lt; K2 &lt; â€¦ &lt; Kn, WLOG Ki = i</p><p>weights W1, W2, â€¦, Wn (search probability)</p><p>Find BST T that minimizes: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.777ex;" xmlns="http://www.w3.org/2000/svg" width="27.575ex" height="2.563ex" role="img" focusable="false" viewbox="0 -789.6 12187.9 1132.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="munderover"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"/></g><g data-mml-node="mi" transform="translate(1089,477.1) scale(0.707)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mn" transform="translate(1123,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g></g></g><g data-mml-node="msub" transform="translate(2453.3,0)"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"/></g><g data-mml-node="mi" transform="translate(977,-150) scale(0.707)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g></g><g data-mml-node="mo" transform="translate(3946.5,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="mo" transform="translate(4668.7,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(5057.7,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="mi" transform="translate(5577.7,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(6043.7,0)"><path data-c="1D45D" d="M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z"/></g><g data-mml-node="mi" transform="translate(6546.7,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="msub" transform="translate(6907.7,0)"><g data-mml-node="mi"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(609,-150) scale(0.707)"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g></g><g data-mml-node="mo" transform="translate(8064.5,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(8453.5,0)"><path data-c="1D43E" d="M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z"/></g><g data-mml-node="mi" transform="translate(9342.5,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(9687.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(10298.7,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mn" transform="translate(11298.9,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mo" transform="translate(11798.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>, which is minimizing expected search cost. Frequently accessed keys are closer to the root and thus accessed faster.</p><ul><li>BST invariant: e(i, j) = cost of optimal BST on Ki, K_(i+1)â€¦, Kj. Then the subproblems are {sets &lt; Kr} and {sets &gt; Kr}.</li><li>Want e(1, n).</li></ul><p>Enumeration: draw trees when n=2, 3</p><p><u>Greedy solution?</u>: Pick Kr in some greedy fashion, e.g., Wr is maximum. Use the key with maximum Wr as root node.</p><ul><li><p>Greedy heuristic: the maximum weight node should have absolute minimum depth.</p></li><li><p>Why greedy does not work?</p><ul><li>Intuition: when the maximum weight node happens to be Kn, the tree is highly unbalanced with all the nodes on the left of root node.</li><li>Nick Davis ex: Kn = 4, weights: 1, 10, 8, 9<ul><li><img src="/sg/2023/01/25/6.046_dp/Screenshot-3984876.png" class title="Screenshot-3984876"></li></ul></li></ul></li></ul><p><u>DP solution?</u>:</p><ul><li>First question: what is the root node? Guess!<ul><li>Make a linear number of guesses corresponding root node</li><li>e(i, j) = e(1, r-1) + e(r+1, j), one level below e(i, j)</li><li>e(i, j) =<ul><li>wi, if i = j</li><li>MIN(e(i, r-1) + e(r+1, j) + W(i, j)), i&lt;=r&lt;=j</li></ul></li><li>W(i, j) is sum of the weights from i to j. The weights add up when it goes deeper in recursion.</li></ul></li><li>Complexity: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="19.665ex" height="2.452ex" role="img" focusable="false" viewbox="0 -833.9 8692.1 1083.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"/></g><g data-mml-node="mo" transform="translate(469,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(858,0)"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mn" transform="translate(633,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g></g><g data-mml-node="mo" transform="translate(1894.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(2505.8,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="mi" transform="translate(3228,0)"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"/></g><g data-mml-node="mo" transform="translate(3697,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(4086,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(4686,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(5352.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(6408.6,0)"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"/></g><g data-mml-node="mo" transform="translate(6877.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(7266.6,0)"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mn" transform="translate(633,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"/></g></g><g data-mml-node="mo" transform="translate(8303.1,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>. When j-i = 1, e(i, j) is certain and that makes up of C(n, 2) pairs.</li></ul><h3><span id="alternating-coins-game">Alternating Coins Game</span><a href="#alternating-coins-game" class="header-anchor">Â¶</a></h3><p>Question: Row of n coins of values V1, â€¦ , Vn, <u>n is even</u>.  In each turn, a player selects either the first or last coin from the row, removes it permanently, and receives the value of<br>the coin.</p><p>Can the first player always win? -&gt;Guaranteed not to lose<br>Try:   4 42 39 17 25 6</p><p><u>Strategy?</u></p><ul><li>Compare V1+V3+â€¦+Vn-1 against V2+V4+â€¦+Vn and pick the greater one</li><li>only pick from the chosen subset during the game</li></ul><p>Problem: maximize the amount of money won for the player moving first?</p><p><u>Optimal Strategy</u>: assume the opponent always pick best move for it -&gt; modeling in the middle</p><ul><li><p>V(i, j): max val the player can win if it is its turn and only coinds Vi, â€¦, Vj remain. V(i, j) =</p><ul><li><p>V(i, i), pick i (model the opponent behavior)</p></li><li><p>V(i, i+1), pick the maximum of the two</p></li><li><p>V(i, i+2), V(i, i+3), â€¦</p></li></ul></li><li><p>V(i, j) = max {pick Vi, pick Vj}</p><ul><li><u>complication</u>: V(i+1, j) is not the board in front of the first player that it can control. It should be the board that gets back after the opponent moves.</li><li>max {&lt;range (i+1, j)&gt; + Vi, &lt;range(i, j-1)&gt; + Vj}</li></ul></li><li><p>V(i+1, j) subproblems with opponent picking</p><ul><li>min {V(i+1, j-1), V(i+2, j)} Vs. the opponent picks Vj or Vi+1</li><li>Certain.</li></ul></li><li><p>V(i, j) = max{min{V(i+1, j-1), V(i+2, j)} + Vi, min{V(i+1, j-2), V(i+1, j-1)} + Vj}</p></li><li><p>Complexity: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="11.256ex" height="2.452ex" role="img" focusable="false" viewbox="0 -833.9 4975 1083.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"/></g><g data-mml-node="mo" transform="translate(469,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(858,0)"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mn" transform="translate(633,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g></g><g data-mml-node="mo" transform="translate(1894.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(2505.8,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="mi" transform="translate(3228,0)"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"/></g><g data-mml-node="mo" transform="translate(3697,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mn" transform="translate(4086,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mo" transform="translate(4586,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></p></li></ul><h2><span id="all-pairs-shortest-paths">All-Pairs Shortest Paths</span><a href="#all-pairs-shortest-paths" class="header-anchor">Â¶</a></h2><p>Notations+:</p><ul><li>edge-weighted graph, G = (V, E, w)</li><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.162ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 2723.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"/></g><g data-mml-node="mo" transform="translate(444,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(833,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1405,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(1849.7,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(2334.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> is the weights from u to v</li><li>Dijkstra for SSSP: O(E + VlgV)</li><li>assume w(u, v) = <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.025ex" role="img" focusable="false" viewbox="0 -442 1000 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="221E" d="M55 217Q55 305 111 373T254 442Q342 442 419 381Q457 350 493 303L507 284L514 294Q618 442 747 442Q833 442 888 374T944 214Q944 128 889 59T743 -11Q657 -11 580 50Q542 81 506 128L492 147L485 137Q381 -11 252 -11Q166 -11 111 57T55 217ZM907 217Q907 285 869 341T761 397Q740 397 720 392T682 378T648 359T619 335T594 310T574 285T559 263T548 246L543 238L574 198Q605 158 622 138T664 94T714 61T765 51Q827 51 867 100T907 217ZM92 214Q92 145 131 89T239 33Q357 33 456 193L425 233Q364 312 334 337Q285 380 233 380Q171 380 132 331T92 214Z"/></g></g></g></svg></mjx-container> if (u, v) <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.486ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="2.106ex" role="img" focusable="false" viewbox="0 -716 667 931"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2209" d="M196 25Q84 109 84 250Q84 372 166 450T360 539Q361 539 375 539T413 540T460 540L547 707Q550 716 563 716Q570 716 575 712T581 703T583 696T505 540H568Q583 532 583 520Q583 511 570 501L484 500L366 270H568Q583 262 583 250T568 230H346L247 38Q284 16 328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 447 -40T419 -41Q304 -41 228 3Q117 -211 115 -212Q111 -215 104 -215T92 -212T86 -204T84 -197Q84 -190 89 -183L196 25ZM214 61L301 230H124V228Q124 196 147 147T214 61ZM321 270L440 500Q353 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H321Z"/></g></g></g></svg></mjx-container> E</li><li>E = <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="5.683ex" height="2.452ex" role="img" focusable="false" viewbox="0 -833.9 2511.9 1083.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D703" d="M35 200Q35 302 74 415T180 610T319 704Q320 704 327 704T339 705Q393 701 423 656Q462 596 462 495Q462 380 417 261T302 66T168 -10H161Q125 -10 99 10T60 63T41 130T35 200ZM383 566Q383 668 330 668Q294 668 260 623T204 521T170 421T157 371Q206 370 254 370L351 371Q352 372 359 404T375 484T383 566ZM113 132Q113 26 166 26Q181 26 198 36T239 74T287 161T335 307L340 324H145Q145 321 136 286T120 208T113 132Z"/></g><g data-mml-node="mo" transform="translate(469,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(858,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g></g><g data-mml-node="mo" transform="translate(2122.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> in sparse case</li><li>Bellman-Ford analysis to detect no negative cycles:  no negative <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.334ex;" xmlns="http://www.w3.org/2000/svg" width="5.613ex" height="2.733ex" role="img" focusable="false" viewbox="0 -1060.7 2481.1 1208.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(989,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mn" transform="translate(1767,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mo" transform="translate(2267,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(553,-139.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mi" transform="translate(485,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container></li></ul><p>Question: given G = (V, E, w), find <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.162ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 2723.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"/></g><g data-mml-node="mo" transform="translate(444,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(833,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1405,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(1849.7,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(2334.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> for all u,v <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> V</p><ul><li><img src="/sg/2023/01/25/6.046_dp/Screenshot-3994587.png" class title="Screenshot-3994587"></li><li><p>Simple solution: APSP = run SSSP for each of V = |V| * Dijkstra</p></li><li><p>Johnsonâ€™s algorithm beats general Bellman-Ford and achives the general Dijkstra complexity bound.</p></li></ul><p>Goal: achieve <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.348ex" height="2.451ex" role="img" focusable="false" viewbox="0 -833.2 2805.9 1083.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"/></g></g><g data-mml-node="mo" transform="translate(2416.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> first and <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="16.075ex" height="2.452ex" role="img" focusable="false" viewbox="0 -833.9 7105.3 1083.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mi" transform="translate(1921,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(2907.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="msup" transform="translate(3907.4,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g></g><g data-mml-node="mi" transform="translate(5172.3,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(5470.3,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/></g><g data-mml-node="mi" transform="translate(5947.3,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(6716.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> then</p><h3><span id="dp1">DP1</span><a href="#dp1" class="header-anchor">Â¶</a></h3><ol><li>subproblems: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.334ex;" xmlns="http://www.w3.org/2000/svg" width="4.014ex" height="2.733ex" role="img" focusable="false" viewbox="0 -1060.7 1774 1208.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1267,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(553,-139.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container> = weight of shortest path u-&gt;v <u>using &lt;= m edges</u></li><li>guess: WLOG, guess last edge (x,v)</li><li>recurrence: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.334ex;" xmlns="http://www.w3.org/2000/svg" width="4.014ex" height="2.733ex" role="img" focusable="false" viewbox="0 -1060.7 1774 1208.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1267,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(553,-139.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container> = <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="20.606ex" height="2.965ex" role="img" focusable="false" viewbox="0 -1060.7 9107.8 1310.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(878,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1223,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1823,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msubsup" transform="translate(2212,0)"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1267,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mn" transform="translate(2045,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mo" transform="translate(2545,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(553,-138.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g></g></g><g data-mml-node="mo" transform="translate(5111.9,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(6112.1,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(6828.1,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(7217.1,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mo" transform="translate(7789.1,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(8233.8,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(8718.8,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> for x <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> V)<ul><li>base case: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.576ex;" xmlns="http://www.w3.org/2000/svg" width="3.055ex" height="2.463ex" role="img" focusable="false" viewbox="0 -833.9 1350.4 1088.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(553,-247) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container> = 0 if u =v; <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="2.262ex" height="1.025ex" role="img" focusable="false" viewbox="0 -442 1000 453"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="221E" d="M55 217Q55 305 111 373T254 442Q342 442 419 381Q457 350 493 303L507 284L514 294Q618 442 747 442Q833 442 888 374T944 214Q944 128 889 59T743 -11Q657 -11 580 50Q542 81 506 128L492 147L485 137Q381 -11 252 -11Q166 -11 111 57T55 217ZM907 217Q907 285 869 341T761 397Q740 397 720 392T682 378T648 359T619 335T594 310T574 285T559 263T548 246L543 238L574 198Q605 158 622 138T664 94T714 61T765 51Q827 51 867 100T907 217ZM92 214Q92 145 131 89T239 33Q357 33 456 193L425 233Q364 312 334 337Q285 380 233 380Q171 380 132 331T92 214Z"/></g></g></g></svg></mjx-container> otherwise</li></ul></li><li>acyclic (tological order): for m = 0, 1, â€¦, n-1: for u and v in V:</li><li>original problem: if no negative cycles, then <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.162ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 2723.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"/></g><g data-mml-node="mo" transform="translate(444,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(833,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1405,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(1849.7,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(2334.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> = <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.334ex;" xmlns="http://www.w3.org/2000/svg" width="5.613ex" height="2.733ex" role="img" focusable="false" viewbox="0 -1060.7 2481.1 1208.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(989,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mn" transform="translate(1767,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mo" transform="translate(2267,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(553,-139.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container> = <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.334ex;" xmlns="http://www.w3.org/2000/svg" width="3.569ex" height="2.733ex" role="img" focusable="false" viewbox="0 -1060.7 1577.4 1208.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(989,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(553,-139.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container> = â€¦ (In the worst case, traverse through all vertices without revisiting any vertex)</li></ol><p>Analysis</p><ul><li>relaxation step is: if <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.357ex;" xmlns="http://www.w3.org/2000/svg" width="15.088ex" height="1.927ex" role="img" focusable="false" viewbox="0 -694 6668.8 851.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g><g data-mml-node="mo" transform="translate(1628.2,0)"><path data-c="3E" d="M84 520Q84 528 88 533T96 539L99 540Q106 540 253 471T544 334L687 265Q694 260 694 250T687 235Q685 233 395 96L107 -40H101Q83 -38 83 -20Q83 -19 83 -17Q82 -10 98 -1Q117 9 248 71Q326 108 378 132L626 250L378 368Q90 504 86 509Q84 513 84 520Z"/></g><g data-mml-node="msub" transform="translate(2684,0)"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g></g></g><g data-mml-node="mo" transform="translate(4318.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="msub" transform="translate(5318.3,0)"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container> then <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.357ex;" xmlns="http://www.w3.org/2000/svg" width="15.088ex" height="1.927ex" role="img" focusable="false" viewbox="0 -694 6668.8 851.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g><g data-mml-node="mo" transform="translate(1628.2,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="msub" transform="translate(2684,0)"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g></g></g><g data-mml-node="mo" transform="translate(4318.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="msub" transform="translate(5318.3,0)"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container></li><li>Complexity: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="23.076ex" height="2.47ex" role="img" focusable="false" viewbox="0 -841.7 10199.7 1091.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"/></g></g><g data-mml-node="mo" transform="translate(2416.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(3028.1,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="mi" transform="translate(3750.3,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(4513.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(4902.3,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(5671.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(6338.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(7393.9,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(8156.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(8545.9,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"/></g></g><g data-mml-node="mo" transform="translate(9810.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>, no better than general Bellman-Ford</li><li>relaxation step can be: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.334ex;" xmlns="http://www.w3.org/2000/svg" width="4.014ex" height="2.733ex" role="img" focusable="false" viewbox="0 -1060.7 1774 1208.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1267,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(553,-139.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container> = <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="18.997ex" height="2.965ex" role="img" focusable="false" viewbox="0 -1060.7 8396.6 1310.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(878,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1223,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1823,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msubsup" transform="translate(2212,0)"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1267,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"/></g></g><g data-mml-node="mn" transform="translate(1767,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g><g data-mml-node="mo" transform="translate(2267,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(553,-138.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g></g></g><g data-mml-node="mo" transform="translate(4915.3,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="msubsup" transform="translate(5915.5,0)"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1267,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"/></g></g><g data-mml-node="mn" transform="translate(1767,0)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g><g data-mml-node="mo" transform="translate(2267,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(553,-139.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D465" d="M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container>for x <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> V) with overall running time of <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="8.942ex" height="2.451ex" role="img" focusable="false" viewbox="0 -833.2 3952.6 1083.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mn" transform="translate(633,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"/></g></g><g data-mml-node="mi" transform="translate(2188.6,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(2486.6,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/></g><g data-mml-node="mi" transform="translate(2963.6,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(3563.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> time</li></ul><h3><span id="matrix-multiplication">Matrix multiplication</span><a href="#matrix-multiplication" class="header-anchor">Â¶</a></h3><ol><li>standard matrix multiplication computes <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.186ex;" xmlns="http://www.w3.org/2000/svg" width="10.287ex" height="1.805ex" role="img" focusable="false" viewbox="0 -716 4547 798"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/></g><g data-mml-node="mo" transform="translate(1037.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(2093.6,0)"><path data-c="1D434" d="M208 74Q208 50 254 46Q272 46 272 35Q272 34 270 22Q267 8 264 4T251 0Q249 0 239 0T205 1T141 2Q70 2 50 0H42Q35 7 35 11Q37 38 48 46H62Q132 49 164 96Q170 102 345 401T523 704Q530 716 547 716H555H572Q578 707 578 706L606 383Q634 60 636 57Q641 46 701 46Q726 46 726 36Q726 34 723 22Q720 7 718 4T704 0Q701 0 690 0T651 1T578 2Q484 2 455 0H443Q437 6 437 9T439 27Q443 40 445 43L449 46H469Q523 49 533 63L521 213H283L249 155Q208 86 208 74ZM516 260Q516 271 504 416T490 562L463 519Q447 492 400 412L310 260L413 259Q516 259 516 260Z"/></g><g data-mml-node="mo" transform="translate(3065.8,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="mi" transform="translate(3788,0)"><path data-c="1D435" d="M231 637Q204 637 199 638T194 649Q194 676 205 682Q206 683 335 683Q594 683 608 681Q671 671 713 636T756 544Q756 480 698 429T565 360L555 357Q619 348 660 311T702 219Q702 146 630 78T453 1Q446 0 242 0Q42 0 39 2Q35 5 35 10Q35 17 37 24Q42 43 47 45Q51 46 62 46H68Q95 46 128 49Q142 52 147 61Q150 65 219 339T288 628Q288 635 231 637ZM649 544Q649 574 634 600T585 634Q578 636 493 637Q473 637 451 637T416 636H403Q388 635 384 626Q382 622 352 506Q352 503 351 500L320 374H401Q482 374 494 376Q554 386 601 434T649 544ZM595 229Q595 273 572 302T512 336Q506 337 429 337Q311 337 310 336Q310 334 293 263T258 122L240 52Q240 48 252 48T333 46Q422 46 429 47Q491 54 543 105T595 229Z"/></g></g></g></svg></mjx-container>, both n*n matrices. <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.777ex;" xmlns="http://www.w3.org/2000/svg" width="16.649ex" height="2.563ex" role="img" focusable="false" viewbox="0 -789.6 7358.7 1132.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="TeXAtom" transform="translate(466,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(345,0)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"/></g></g></g><g data-mml-node="mo" transform="translate(1329.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="munderover" transform="translate(2384.8,0)"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"/></g><g data-mml-node="TeXAtom" transform="translate(1089,477.1) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g><g data-mml-node="mo" transform="translate(521,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mn" transform="translate(1299,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g></g></g><g data-mml-node="msub" transform="translate(4962.6,0)"><g data-mml-node="mi"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g><g data-mml-node="TeXAtom" transform="translate(562,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(345,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g></g></g><g data-mml-node="msub" transform="translate(6186.9,0)"><g data-mml-node="mi"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"/></g><g data-mml-node="TeXAtom" transform="translate(462,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g><g data-mml-node="mi" transform="translate(521,0)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"/></g></g></g></g></g></svg></mjx-container></li><li>The fast running time is <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="9.476ex" height="2.468ex" role="img" focusable="false" viewbox="0 -841 4188.3 1091"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="TeXAtom" transform="translate(633,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z" transform="translate(500,0)"/><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z" transform="translate(778,0)"/><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z" transform="translate(1278,0)"/><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z" transform="translate(1778,0)"/><path data-c="38" d="M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z" transform="translate(2278,0)"/></g></g></g><g data-mml-node="mo" transform="translate(3799.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> comparing to standard algorithm being <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="5.832ex" height="2.451ex" role="img" focusable="false" viewbox="0 -833.2 2577.6 1083.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mn" transform="translate(633,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"/></g></g><g data-mml-node="mo" transform="translate(2188.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></li><li>connection to shortest paths:<ul><li>define <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.188ex;" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.507ex" role="img" focusable="false" viewbox="0 -583 778 666"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2295" d="M56 250Q56 394 156 488T384 583Q530 583 626 485T722 250Q722 110 625 14T390 -83Q249 -83 153 14T56 250ZM364 542Q308 539 251 509T148 418T96 278V270H369V542H364ZM681 278Q675 338 650 386T592 462T522 509T458 535T412 542H409V270H681V278ZM96 222Q104 150 139 95T219 12T302 -29T366 -42H369V230H96V222ZM681 222V230H409V-42H412Q429 -42 456 -36T521 -10T590 37T649 113T681 222Z"/></g></g></g></svg></mjx-container> = min, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.188ex;" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.507ex" role="img" focusable="false" viewbox="0 -583 778 666"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2299" d="M56 250Q56 394 156 488T384 583Q530 583 626 485T722 250Q722 110 625 14T390 -83Q249 -83 153 14T56 250ZM682 250Q682 322 649 387T546 497T381 542Q272 542 184 459T95 250Q95 132 178 45T389 -42Q515 -42 598 45T682 250ZM311 250Q311 285 332 304T375 328Q376 328 382 328T392 329Q424 326 445 305T466 250Q466 217 445 195T389 172Q354 172 333 195T311 250Z"/></g></g></g></svg></mjx-container> = +, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.991ex;" xmlns="http://www.w3.org/2000/svg" width="11.741ex" height="3.391ex" role="img" focusable="false" viewbox="0 -1060.7 5189.5 1498.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="TeXAtom" transform="translate(861,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1267,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g><g data-mml-node="mo" transform="translate(2359.7,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="msubsup" transform="translate(3415.5,0)"><g data-mml-node="mi"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"/></g><g data-mml-node="TeXAtom" transform="translate(553,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1267,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(553,-293.8) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(345,0)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"/></g></g></g></g></g></svg></mjx-container>, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="13.247ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 5855.2 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"/></g><g data-mml-node="mo" transform="translate(1325.8,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mo" transform="translate(2381.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(2770.6,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(3486.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(3875.6,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(4220.6,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(4665.2,0)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"/></g><g data-mml-node="mo" transform="translate(5077.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(5466.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>, V = {1,2, â€¦, n}</li><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.188ex;" xmlns="http://www.w3.org/2000/svg" width="31.85ex" height="2.209ex" role="img" focusable="false" viewbox="0 -893.3 14077.8 976.3"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="TeXAtom" transform="translate(861,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1267,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g><g data-mml-node="mo" transform="translate(2359.7,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="msup" transform="translate(3415.5,0)"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="TeXAtom" transform="translate(861,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1267,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mn" transform="translate(2045,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mo" transform="translate(2545,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g><g data-mml-node="mo" transform="translate(6623.4,0)"><path data-c="2299" d="M56 250Q56 394 156 488T384 583Q530 583 626 485T722 250Q722 110 625 14T390 -83Q249 -83 153 14T56 250ZM682 250Q682 322 649 387T546 497T381 542Q272 542 184 459T95 250Q95 132 178 45T389 -42Q515 -42 598 45T682 250ZM311 250Q311 285 332 304T375 328Q376 328 382 328T392 329Q424 326 445 305T466 250Q466 217 445 195T389 172Q354 172 333 195T311 250Z"/></g><g data-mml-node="mi" transform="translate(7623.6,0)"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"/></g><g data-mml-node="mo" transform="translate(8949.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="msup" transform="translate(10005.2,0)"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"/></g><g data-mml-node="TeXAtom" transform="translate(1136.2,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mi" transform="translate(433,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(778,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1229,0)"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="mi" transform="translate(1662,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(1960,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mo" transform="translate(2426,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(2815,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(3693,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></g></g></svg></mjx-container></li><li>computation: semiring is * and +</li><li><u>complication</u>: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="4.71ex" height="2.021ex" role="img" focusable="false" viewbox="0 -893.3 2082 893.3"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D437" d="M287 628Q287 635 230 637Q207 637 200 638T193 647Q193 655 197 667T204 682Q206 683 403 683Q570 682 590 682T630 676Q702 659 752 597T803 431Q803 275 696 151T444 3L430 1L236 0H125H72Q48 0 41 2T33 11Q33 13 36 25Q40 41 44 43T67 46Q94 46 127 49Q141 52 146 61Q149 65 218 339T287 628ZM703 469Q703 507 692 537T666 584T629 613T590 629T555 636Q553 636 541 636T512 636T479 637H436Q392 637 386 627Q384 623 313 339T242 52Q242 48 253 48T330 47Q335 47 349 47T373 46Q499 46 581 128Q617 164 640 212T683 339T703 469Z"/></g><g data-mml-node="TeXAtom" transform="translate(861,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1267,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></g></g></svg></mjx-container> is circle-multiplication of W with itself m times</li><li>complexity:  <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="23.076ex" height="2.47ex" role="img" focusable="false" viewbox="0 -841.7 10199.7 1091.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"/></g></g><g data-mml-node="mo" transform="translate(2416.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(3028.1,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"/></g><g data-mml-node="mi" transform="translate(3750.3,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(4513.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(4902.3,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(5671.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(6338.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(7393.9,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(8156.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(8545.9,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="34" d="M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z"/></g></g><g data-mml-node="mo" transform="translate(9810.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></li></ul></li><li>optimize matrix multiplication: repeated squaring<ul><li>( ( <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="3.484ex" height="1.937ex" role="img" focusable="false" viewbox="0 -833.9 1539.8 855.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"/></g><g data-mml-node="mn" transform="translate(1136.2,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g></g></g></g></svg></mjx-container> )^2 )^(2â€¦) = <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="5.688ex" height="1.937ex" role="img" focusable="false" viewbox="0 -833.9 2514.1 855.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mi"><path data-c="1D44A" d="M436 683Q450 683 486 682T553 680Q604 680 638 681T677 682Q695 682 695 674Q695 670 692 659Q687 641 683 639T661 637Q636 636 621 632T600 624T597 615Q597 603 613 377T629 138L631 141Q633 144 637 151T649 170T666 200T690 241T720 295T759 362Q863 546 877 572T892 604Q892 619 873 628T831 637Q817 637 817 647Q817 650 819 660Q823 676 825 679T839 682Q842 682 856 682T895 682T949 681Q1015 681 1034 683Q1048 683 1048 672Q1048 666 1045 655T1038 640T1028 637Q1006 637 988 631T958 617T939 600T927 584L923 578L754 282Q586 -14 585 -15Q579 -22 561 -22Q546 -22 542 -17Q539 -14 523 229T506 480L494 462Q472 425 366 239Q222 -13 220 -15T215 -19Q210 -22 197 -22Q178 -22 176 -15Q176 -12 154 304T131 622Q129 631 121 633T82 637H58Q51 644 51 648Q52 671 64 683H76Q118 680 176 680Q301 680 313 683H323Q329 677 329 674T327 656Q322 641 318 637H297Q236 634 232 620Q262 160 266 136L501 550L499 587Q496 629 489 632Q483 636 447 637Q428 637 422 639T416 648Q416 650 418 660Q419 664 420 669T421 676T424 680T428 682T436 683Z"/></g><g data-mml-node="TeXAtom" transform="translate(1136.2,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(600,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mn" transform="translate(1378,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g></g></g></g></g></svg></mjx-container>, mutliplied by <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="3.519ex" height="1.932ex" role="img" focusable="false" viewbox="0 -853.7 1555.3 853.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msup"><g data-mml-node="mn"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g><g data-mml-node="TeXAtom" transform="translate(533,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(298,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/></g><g data-mml-node="mi" transform="translate(775,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g></g></g></g></g></svg></mjx-container> times</li><li>assume no negtive cycles, complexity is <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="9.841ex" height="2.451ex" role="img" focusable="false" viewbox="0 -833.2 4349.9 1083.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"/></g></g><g data-mml-node="mi" transform="translate(2416.9,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(2714.9,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/></g><g data-mml-node="mi" transform="translate(3191.9,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(3960.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>, better than general Bellman-Ford</li></ul></li><li>transitive closure: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.666ex;" xmlns="http://www.w3.org/2000/svg" width="2.216ex" height="2.082ex" role="img" focusable="false" viewbox="0 -626 979.3 920.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"/></g><g data-mml-node="TeXAtom" transform="translate(394,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(345,0)"><path data-c="1D457" d="M297 596Q297 627 318 644T361 661Q378 661 389 651T403 623Q403 595 384 576T340 557Q322 557 310 567T297 596ZM288 376Q288 405 262 405Q240 405 220 393T185 362T161 325T144 293L137 279Q135 278 121 278H107Q101 284 101 286T105 299Q126 348 164 391T252 441Q253 441 260 441T272 442Q296 441 316 432Q341 418 354 401T367 348V332L318 133Q267 -67 264 -75Q246 -125 194 -164T75 -204Q25 -204 7 -183T-12 -137Q-12 -110 7 -91T53 -71Q70 -71 82 -81T95 -112Q95 -148 63 -167Q69 -168 77 -168Q111 -168 139 -140T182 -74L193 -32Q204 11 219 72T251 197T278 308T289 365Q289 372 288 376Z"/></g></g></g></g></g></svg></mjx-container> = 1 if <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: 0;" xmlns="http://www.w3.org/2000/svg" width="1.258ex" height="1.57ex" role="img" focusable="false" viewbox="0 -694 556 694"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="2203" d="M56 661T56 674T70 694H487Q497 686 500 679V15Q497 10 487 1L279 0H70Q56 7 56 20T70 40H460V327H84Q70 334 70 347T84 367H460V654H70Q56 661 56 674Z"/></g></g></g></svg></mjx-container> path i-&gt;j; 0 otherwise.<ul><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.188ex;" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.507ex" role="img" focusable="false" viewbox="0 -583 778 666"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2295" d="M56 250Q56 394 156 488T384 583Q530 583 626 485T722 250Q722 110 625 14T390 -83Q249 -83 153 14T56 250ZM364 542Q308 539 251 509T148 418T96 278V270H369V542H364ZM681 278Q675 338 650 386T592 462T522 509T458 535T412 542H409V270H681V278ZM96 222Q104 150 139 95T219 12T302 -29T366 -42H369V230H96V222ZM681 222V230H409V-42H412Q429 -42 456 -36T521 -10T590 37T649 113T681 222Z"/></g></g></g></svg></mjx-container> = OR, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.188ex;" xmlns="http://www.w3.org/2000/svg" width="1.76ex" height="1.507ex" role="img" focusable="false" viewbox="0 -583 778 666"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2299" d="M56 250Q56 394 156 488T384 583Q530 583 626 485T722 250Q722 110 625 14T390 -83Q249 -83 153 14T56 250ZM682 250Q682 322 649 387T546 497T381 542Q272 542 184 459T95 250Q95 132 178 45T389 -42Q515 -42 598 45T682 250ZM311 250Q311 285 332 304T375 328Q376 328 382 328T392 329Q424 326 445 305T466 250Q466 217 445 195T389 172Q354 172 333 195T311 250Z"/></g></g></g></svg></mjx-container> = AND</li><li>for dense graph <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.348ex" height="2.451ex" role="img" focusable="false" viewbox="0 -833.2 2805.9 1083.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"/></g></g><g data-mml-node="mo" transform="translate(2416.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> is best</li></ul></li></ol><h3><span id="dp2-floyd-warshall-algorithm">DP2, Floyd-Warshall algorithm</span><a href="#dp2-floyd-warshall-algorithm" class="header-anchor">Â¶</a></h3><ol><li>subproblems: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.334ex;" xmlns="http://www.w3.org/2000/svg" width="3.246ex" height="2.733ex" role="img" focusable="false" viewbox="0 -1060.7 1434.5 1208.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="TeXAtom" transform="translate(466,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g><g data-mml-node="mo" transform="translate(910,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(466,-139.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container> = weight of shortest path u-&gt;v whose <u>intermediate vertices</u> <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> {1, 2, â€¦k}. F-W insight on 70s</li><li>guess: is k <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> the path</li><li>recurrence: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.334ex;" xmlns="http://www.w3.org/2000/svg" width="3.246ex" height="2.733ex" role="img" focusable="false" viewbox="0 -1060.7 1434.5 1208.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="TeXAtom" transform="translate(466,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g><g data-mml-node="mo" transform="translate(910,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(466,-139.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container> = <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.735ex;" xmlns="http://www.w3.org/2000/svg" width="25.527ex" height="3.135ex" role="img" focusable="false" viewbox="0 -1060.7 11282.8 1385.6"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(878,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1223,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1823,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msubsup" transform="translate(2212,0)"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="TeXAtom" transform="translate(466,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g><g data-mml-node="mo" transform="translate(910,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mn" transform="translate(1688,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mo" transform="translate(2188,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(466,-139.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g><g data-mml-node="mo" transform="translate(4550.2,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="msubsup" transform="translate(4994.9,0)"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="TeXAtom" transform="translate(466,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g><g data-mml-node="mo" transform="translate(910,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mn" transform="translate(1688,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mo" transform="translate(2188,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(466,-317.1) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g></g></g><g data-mml-node="mo" transform="translate(7555.3,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="msubsup" transform="translate(8555.5,0)"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="TeXAtom" transform="translate(466,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g><g data-mml-node="mo" transform="translate(910,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mn" transform="translate(1688,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g><g data-mml-node="mo" transform="translate(2188,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(466,-317.1) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g><g data-mml-node="mi" transform="translate(521,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g><g data-mml-node="mo" transform="translate(10893.8,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container><ul><li>base case: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.576ex;" xmlns="http://www.w3.org/2000/svg" width="12.653ex" height="2.463ex" role="img" focusable="false" viewbox="0 -833.9 5592.6 1088.7"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="TeXAtom" transform="translate(466,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mn"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(466,-247) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g><g data-mml-node="mo" transform="translate(1541.2,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(2597,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(3313,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(3702,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(4274,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(4718.6,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(5203.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>, not to use any intermediate vertices</li></ul></li><li>acyclic: for k: for u and v in V:</li><li>original problem: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.162ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 2723.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"/></g><g data-mml-node="mo" transform="translate(444,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(833,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1405,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(1849.7,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(2334.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> = <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.334ex;" xmlns="http://www.w3.org/2000/svg" width="3.372ex" height="2.733ex" role="img" focusable="false" viewbox="0 -1060.7 1490.4 1208.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="TeXAtom" transform="translate(466,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(989,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(466,-139.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container> . Negative weight cycle is negative <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.334ex;" xmlns="http://www.w3.org/2000/svg" width="3.372ex" height="2.733ex" role="img" focusable="false" viewbox="0 -1060.7 1490.4 1208.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msubsup"><g data-mml-node="mi"><path data-c="1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"/></g><g data-mml-node="TeXAtom" transform="translate(466,530.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(389,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(989,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g><g data-mml-node="TeXAtom" transform="translate(466,-139.6) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(572,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g></g></g></g></g></svg></mjx-container></li></ol><p>Analysis</p><ul><li>complexity: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.348ex" height="2.451ex" role="img" focusable="false" viewbox="0 -833.2 2805.9 1083.2"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(1152,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="33" d="M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z"/></g></g><g data-mml-node="mo" transform="translate(2416.9,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container>, compared to DP1the guessing time is constant and same # of subproblems.</li></ul><h3><span id="johnson-s-algorithm">Johnsonâ€™s algorithm</span><a href="#johnson-s-algorithm" class="header-anchor">Â¶</a></h3><ol><li>idea: change weights on edges so no negative weights exist, then run Dijkstra on it. Translate to old weights and get the result.</li><li>steps<ul><li>find h: V -&gt; R such that <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="35.879ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 15858.6 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g></g><g data-mml-node="mo" transform="translate(1206.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1595.3,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(2167.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(2612,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(3097,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(3763.7,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(4819.5,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(5535.5,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(5924.5,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(6496.5,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(6941.2,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(7426.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(8037.4,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(9037.6,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mo" transform="translate(9613.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(10002.6,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(10574.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(11185.8,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(12186.1,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mo" transform="translate(12762.1,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(13151.1,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(13636.1,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(14302.8,0)"><path data-c="2265" d="M83 616Q83 624 89 630T99 636Q107 636 253 568T543 431T687 361Q694 356 694 346T687 331Q685 329 395 192L107 56H101Q83 58 83 76Q83 77 83 79Q82 86 98 95Q117 105 248 167Q326 204 378 228L626 346L360 472Q291 505 200 548Q112 589 98 597T83 616ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"/></g><g data-mml-node="mn" transform="translate(15358.6,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z"/></g></g></g></svg></mjx-container> for all u,v <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> V.</li><li>Run Dijkstra on (V, E, <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.357ex;" xmlns="http://www.w3.org/2000/svg" width="2.729ex" height="1.359ex" role="img" focusable="false" viewbox="0 -443 1206.3 600.8"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g></g></g></g></svg></mjx-container>) from s <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> V =&gt; get <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="7.271ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 3214 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"/></g><g data-mml-node="mi" transform="translate(477,-150) scale(0.707)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g></g><g data-mml-node="mo" transform="translate(934.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1323.3,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1895.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(2340,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(2825,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> for all u,v <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.09ex;" xmlns="http://www.w3.org/2000/svg" width="1.509ex" height="1.312ex" role="img" focusable="false" viewbox="0 -540 667 580"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="2208" d="M84 250Q84 372 166 450T360 539Q361 539 377 539T419 540T469 540H568Q583 532 583 520Q583 511 570 501L466 500Q355 499 329 494Q280 482 242 458T183 409T147 354T129 306T124 272V270H568Q583 262 583 250T568 230H124V228Q124 207 134 177T167 112T231 48T328 7Q355 1 466 0H570Q583 -10 583 -20Q583 -32 568 -40H471Q464 -40 446 -40T417 -41Q262 -41 172 45Q84 127 84 250Z"/></g></g></g></svg></mjx-container> V</li><li>Compute <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="6.162ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 2723.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"/></g><g data-mml-node="mo" transform="translate(444,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(833,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1405,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(1849.7,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(2334.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> by <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="7.271ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 3214 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"/></g><g data-mml-node="mi" transform="translate(477,-150) scale(0.707)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g></g><g data-mml-node="mo" transform="translate(934.3,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1323.3,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1895.3,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(2340,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(2825,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></li></ul></li><li>Proof of correctness: the shortest path is preserved but offset.</li><li>Analysis: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="58.496ex" height="2.452ex" role="img" focusable="false" viewbox="0 -833.9 25855.3 1083.9"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(763,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(1152,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mi" transform="translate(1921,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(2907.2,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(3907.4,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(4671.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(5282.7,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(6282.9,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(7045.9,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(7434.9,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mi" transform="translate(8203.9,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(9190.1,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="msup" transform="translate(10190.3,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g></g><g data-mml-node="mi" transform="translate(11455.2,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(11753.2,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/></g><g data-mml-node="mi" transform="translate(12230.2,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(12999.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(13610.4,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(14610.6,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(15373.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msup" transform="translate(15762.6,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g></g><g data-mml-node="mo" transform="translate(17027.5,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(17694.3,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mi" transform="translate(18750,0)"><path data-c="1D442" d="M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z"/></g><g data-mml-node="mo" transform="translate(19513,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(19902,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mi" transform="translate(20671,0)"><path data-c="1D438" d="M492 213Q472 213 472 226Q472 230 477 250T482 285Q482 316 461 323T364 330H312Q311 328 277 192T243 52Q243 48 254 48T334 46Q428 46 458 48T518 61Q567 77 599 117T670 248Q680 270 683 272Q690 274 698 274Q718 274 718 261Q613 7 608 2Q605 0 322 0H133Q31 0 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q146 66 215 342T285 622Q285 629 281 629Q273 632 228 634H197Q191 640 191 642T193 659Q197 676 203 680H757Q764 676 764 669Q764 664 751 557T737 447Q735 440 717 440H705Q698 445 698 453L701 476Q704 500 704 528Q704 558 697 578T678 609T643 625T596 632T532 634H485Q397 633 392 631Q388 629 386 622Q385 619 355 499T324 377Q347 376 372 376H398Q464 376 489 391T534 472Q538 488 540 490T557 493Q562 493 565 493T570 492T572 491T574 487T577 483L544 351Q511 218 508 216Q505 213 492 213Z"/></g><g data-mml-node="mo" transform="translate(21657.3,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="msup" transform="translate(22657.5,0)"><g data-mml-node="mi"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mn" transform="translate(861.3,363) scale(0.707)"><path data-c="32" d="M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z"/></g></g><g data-mml-node="mi" transform="translate(23922.3,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(24220.3,0)"><path data-c="1D454" d="M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z"/></g><g data-mml-node="mi" transform="translate(24697.3,0)"><path data-c="1D449" d="M52 648Q52 670 65 683H76Q118 680 181 680Q299 680 320 683H330Q336 677 336 674T334 656Q329 641 325 637H304Q282 635 274 635Q245 630 242 620Q242 618 271 369T301 118L374 235Q447 352 520 471T595 594Q599 601 599 609Q599 633 555 637Q537 637 537 648Q537 649 539 661Q542 675 545 679T558 683Q560 683 570 683T604 682T668 681Q737 681 755 683H762Q769 676 769 672Q769 655 760 640Q757 637 743 637Q730 636 719 635T698 630T682 623T670 615T660 608T652 599T645 592L452 282Q272 -9 266 -16Q263 -18 259 -21L241 -22H234Q216 -22 216 -15Q213 -9 177 305Q139 623 138 626Q133 637 76 637H59Q52 642 52 648Z"/></g><g data-mml-node="mo" transform="translate(25466.3,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></li></ol><blockquote class="colorquote grey"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.05ex;" xmlns="http://www.w3.org/2000/svg" width="7.111ex" height="1.645ex" role="img" focusable="false" viewbox="0 -705 3143.3 727"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/></g><g data-mml-node="mi" transform="translate(760,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(1058,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g><g data-mml-node="mi" transform="translate(1587,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1932,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(2810,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D436" d="M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z"/></g><g data-mml-node="mi" transform="translate(760,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"/></g><g data-mml-node="mi" transform="translate(1058,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"/></g><g data-mml-node="mi" transform="translate(1587,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(1932,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(2810,0)"><path data-c="2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"/></g></g></g></g></svg></mjx-container>  <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="30.5ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 13481.1 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"/></g><g data-mml-node="mo" transform="translate(444,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(833,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(1405,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(1849.7,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(2334.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(3001.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="msub" transform="translate(4057.2,0)"><g data-mml-node="mi"><path data-c="1D6FF" d="M195 609Q195 656 227 686T302 717Q319 716 351 709T407 697T433 690Q451 682 451 662Q451 644 438 628T403 612Q382 612 348 641T288 671T249 657T235 628Q235 584 334 463Q401 379 401 292Q401 169 340 80T205 -10H198Q127 -10 83 36T36 153Q36 286 151 382Q191 413 252 434Q252 435 245 449T230 481T214 521T201 566T195 609ZM112 130Q112 83 136 55T204 27Q233 27 256 51T291 111T309 178T316 232Q316 267 309 298T295 344T269 400L259 396Q215 381 183 342T137 256T118 179T112 130Z"/></g><g data-mml-node="mi" transform="translate(477,-150) scale(0.707)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g></g><g data-mml-node="mo" transform="translate(4991.5,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(5380.5,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(5952.5,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(6397.2,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(6882.2,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(7493.4,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(8493.6,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mo" transform="translate(9069.6,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(9458.6,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(10030.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(10641.8,0)"><path data-c="2B" d="M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z"/></g><g data-mml-node="mi" transform="translate(11642.1,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mo" transform="translate(12218.1,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(12607.1,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(13092.1,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></p><p><em>Proof.</em> For any u-&gt;v path p in the graph G, say p is v0 -&gt; v1 -&gt; â€¦ -&gt;vk, where v0 = u and vk = v.</p><ul><li><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.777ex;" xmlns="http://www.w3.org/2000/svg" width="23.909ex" height="2.966ex" role="img" focusable="false" viewbox="0 -967.8 10567.7 1311.1"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="msub"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1206.3,0)"><g data-mml-node="mo"><text data-variant="normal" transform="scale(1,-1)" font-size="884px" font-family="serif">Â§</text></g></g><g data-mml-node="mo" transform="translate(2084.1,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="munderover" transform="translate(3139.8,0)"><g data-mml-node="mo"><path data-c="2211" d="M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z"/></g><g data-mml-node="mi" transform="translate(1089,477.1) scale(0.707)"><path data-c="1D458" d="M121 647Q121 657 125 670T137 683Q138 683 209 688T282 694Q294 694 294 686Q294 679 244 477Q194 279 194 272Q213 282 223 291Q247 309 292 354T362 415Q402 442 438 442Q468 442 485 423T503 369Q503 344 496 327T477 302T456 291T438 288Q418 288 406 299T394 328Q394 353 410 369T442 390L458 393Q446 405 434 405H430Q398 402 367 380T294 316T228 255Q230 254 243 252T267 246T293 238T320 224T342 206T359 180T365 147Q365 130 360 106T354 66Q354 26 381 26Q429 26 459 145Q461 153 479 153H483Q499 153 499 144Q499 139 496 130Q455 -11 378 -11Q333 -11 305 15T277 90Q277 108 280 121T283 145Q283 167 269 183T234 206T200 217T182 220H180Q168 178 159 139T145 81T136 44T129 20T122 7T111 -2Q98 -11 83 -11Q66 -11 57 -1T48 16Q48 26 85 176T158 471L195 616Q196 629 188 632T149 637H144Q134 637 131 637T124 640T121 647Z"/></g><g data-mml-node="TeXAtom" transform="translate(1089,-285.4) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"/></g><g data-mml-node="mn" transform="translate(1123,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g></g></g><g data-mml-node="msub" transform="translate(5593.2,0)"><g data-mml-node="mi"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mi" transform="translate(749,-150) scale(0.707)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g></g><g data-mml-node="mo" transform="translate(6799.4,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="msub" transform="translate(7188.4,0)"><g data-mml-node="mi"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="TeXAtom" transform="translate(518,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(345,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mn" transform="translate(1123,0)"><path data-c="31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"/></g></g></g><g data-mml-node="mo" transform="translate(8904.1,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(9348.7,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mi" transform="translate(9833.7,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(10178.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container></li><li>Hence â€¦</li></ul></blockquote><p>Problem: How to find the weight function h?</p><ul><li>triangle inequality: <mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.566ex;" xmlns="http://www.w3.org/2000/svg" width="21.078ex" height="2.262ex" role="img" focusable="false" viewbox="0 -750 9316.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mo" transform="translate(576,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(965,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(1450,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(2061.2,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"/></g><g data-mml-node="mi" transform="translate(3061.4,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mo" transform="translate(3637.4,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(4026.4,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(4598.4,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g><g data-mml-node="mo" transform="translate(5265.2,0)"><path data-c="2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"/></g><g data-mml-node="mi" transform="translate(6321,0)"><path data-c="1D464" d="M580 385Q580 406 599 424T641 443Q659 443 674 425T690 368Q690 339 671 253Q656 197 644 161T609 80T554 12T482 -11Q438 -11 404 5T355 48Q354 47 352 44Q311 -11 252 -11Q226 -11 202 -5T155 14T118 53T104 116Q104 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Q21 293 29 315T52 366T96 418T161 441Q204 441 227 416T250 358Q250 340 217 250T184 111Q184 65 205 46T258 26Q301 26 334 87L339 96V119Q339 122 339 128T340 136T341 143T342 152T345 165T348 182T354 206T362 238T373 281Q402 395 406 404Q419 431 449 431Q468 431 475 421T483 402Q483 389 454 274T422 142Q420 131 420 107V100Q420 85 423 71T442 42T487 26Q558 26 600 148Q609 171 620 213T632 273Q632 306 619 325T593 357T580 385Z"/></g><g data-mml-node="mo" transform="translate(7037,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"/></g><g data-mml-node="mi" transform="translate(7426,0)"><path data-c="1D462" d="M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mo" transform="translate(7998,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"/></g><g data-mml-node="mi" transform="translate(8442.7,0)"><path data-c="1D463" d="M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z"/></g><g data-mml-node="mo" transform="translate(8927.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"/></g></g></g></svg></mjx-container> for all (u, v) in V, called <strong>a system of difference constraints</strong></li><li>application: can think as an event v is happening before event u with constraint w</li></ul><blockquote class="colorquote grey"><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="9.234ex" height="1.595ex" role="img" focusable="false" viewbox="0 -694 4081.3 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(704,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(1280,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1746,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2231,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2682,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3148,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(704,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(1280,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1746,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2231,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2682,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3148,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g></g></svg></mjx-container> <strong><em>1</em>.</strong> If (V, E, w) has a negative-weight cycle, there exists no solutioon to the above system of difference constraints.</p><p><mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -0.025ex;" xmlns="http://www.w3.org/2000/svg" width="9.234ex" height="1.595ex" role="img" focusable="false" viewbox="0 -694 4081.3 705"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mpadded"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(704,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(1280,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1746,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2231,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2682,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3148,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g><g data-mml-node="mspace"/><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(55.3,0)"><g data-mml-node="mi"><path data-c="1D447" d="M40 437Q21 437 21 445Q21 450 37 501T71 602L88 651Q93 669 101 677H569H659Q691 677 697 676T704 667Q704 661 687 553T668 444Q668 437 649 437Q640 437 637 437T631 442L629 445Q629 451 635 490T641 551Q641 586 628 604T573 629Q568 630 515 631Q469 631 457 630T439 622Q438 621 368 343T298 60Q298 48 386 46Q418 46 427 45T436 36Q436 31 433 22Q429 4 424 1L422 0Q419 0 415 0Q410 0 363 1T228 2Q99 2 64 0H49Q43 6 43 9T45 27Q49 40 55 46H83H94Q174 46 189 55Q190 56 191 56Q196 59 201 76T241 233Q258 301 269 344Q339 619 339 625Q339 630 310 630H279Q212 630 191 624Q146 614 121 583T67 467Q60 445 57 441T43 437H40Z"/></g><g data-mml-node="mi" transform="translate(704,0)"><path data-c="210E" d="M137 683Q138 683 209 688T282 694Q294 694 294 685Q294 674 258 534Q220 386 220 383Q220 381 227 388Q288 442 357 442Q411 442 444 415T478 336Q478 285 440 178T402 50Q403 36 407 31T422 26Q450 26 474 56T513 138Q516 149 519 151T535 153Q555 153 555 145Q555 144 551 130Q535 71 500 33Q466 -10 419 -10H414Q367 -10 346 17T325 74Q325 90 361 192T398 345Q398 404 354 404H349Q266 404 205 306L198 293L164 158Q132 28 127 16Q114 -11 83 -11Q69 -11 59 -2T48 16Q48 30 121 320L195 616Q195 629 188 632T149 637H128Q122 643 122 645T124 664Q129 683 137 683Z"/></g><g data-mml-node="mi" transform="translate(1280,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(1746,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"/></g><g data-mml-node="mi" transform="translate(2231,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g><g data-mml-node="mi" transform="translate(2682,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"/></g><g data-mml-node="mi" transform="translate(3148,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"/></g></g></g></g></svg></mjx-container> <strong><em>2</em>.</strong> If (V, E, w) has no negative-weight cycle, then we can find a solution to the difference constraints.</p></blockquote><h2><span id="olc">OLC</span><a href="#olc" class="header-anchor">Â¶</a></h2><ol><li><p>Bottom-up starts with the smallest subproblems first and build up to larger subproblems. Top-down starts with the original problem and breaks it down into smaller subproblems.</p></li><li><p>Bottom up via relaxation means solve subproblems by relaxing edges.</p></li><li><p>DP guess is linear.</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
          <category> 6.046 algorithms design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>6.046 augmentation</title>
      <link href="/sg/2023/01/20/6.046_augmentation/"/>
      <url>/sg/2023/01/20/6.046_augmentation/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#easy-tree-augmentation">Easy tree augmentation</a></li><li><a href="#order-statistics-trees">Order-statistics trees</a></li><li><a href="#finger-search-trees">Finger search trees</a><ul><li><a href="#level-linking">Level linking</a></li><li><a href="#search-x-from-y">Search (x from y)</a></li><li><a href="#data-in-the-leaves">Data in the leaves</a></li></ul></li><li><a href="#range-trees">Range trees</a><ul><li><a href="#1-d">1-D</a></li><li><a href="#orthogonal-range-searching">Orthogonal range searching</a></li></ul></li></ul><!-- tocstop --></div><p>The main idea of augmentation is to modify existent (off-the-shelf) data structures to store additional information.</p><h2><span id="easy-tree-augmentation">Easy tree augmentation</span><a href="#easy-tree-augmentation" class="header-anchor">Â¶</a></h2><p>Goal: store x.f (subtree rooted at x) at each node x</p><p>Theorem: Suppose x.f  can be computed (updated) in O(1) time from x,  children and children.f.  Then, modification a set S  of nodes costs O(# of ancestors of S) to update x.f.</p><ol><li>updating x means to walk up the tree to the root</li><li>Doing a logn rotation spreading out will likely cost O(log^2(n)) time. Because the sum of ancestors may be O(log^2(n)), whereas a single path in easy trees taking O(logn) time as AVL tree and B 2-3 tree.</li></ol><h2><span id="order-statistics-trees">Order-statistics trees</span><a href="#order-statistics-trees" class="header-anchor">Â¶</a></h2><p>Goal: design an ADT interface that supports insert(x), delete(x), successor(x), rank(x), select(i)</p><p>Rank(x): find x in sorted order</p><p>Select(i): find the element of ith rank</p><p>Idea: rank(x) = # elements of all that is less than x + 1. Walk up the tree to the root and recursively calcutate xâ€™.left.size + 1(depending on the initial index) where xâ€™ is less than x.</p><p>Select(i) takes advantage of special case of rank(x) to avoid recursive calls. The rank of root x is equal to x.left.size + 1. Then just walk down the tree and search ith element.</p><p>Problem: why not store ranks or depths (count down from the root) of nodes into the tree?</p><p>Shortcomings: Inserting (-inf) or the elements with decreasing order to the tree will cost linear time to update the augmented information. The rank of every element goes down by one. Meanwhile, the depths of nodes are hard to maintain due to rotations affecting most nodes. Height(x) is not affected by that because the distance from root to x is not changed.</p><ul><li><img src="/sg/2023/01/20/6.046_augmentation/Screenshot-4199697.png" class title="Screenshot-4199697"></li></ul><h2><span id="finger-search-trees">Finger search trees</span><a href="#finger-search-trees" class="header-anchor">Â¶</a></h2><p>More sophisticated operations are involved.</p><p>Idea 0: Level-linked 2-3 trees.</p><h3><span id="level-linking">Level linking</span><a href="#level-linking" class="header-anchor">Â¶</a></h3><p>store Left -&gt; Right &amp; Right -&gt; Left pointers for each nodes. =&gt; Easy to maintain in constant time</p><ul><li><img src="/sg/2023/01/20/6.046_augmentation/Screenshot-4201292.png" class title="Screenshot-4201292"></li></ul><p>Finger search property: expect searching x nearby y after searching y to run fast. =&gt; constant time + worst search time O(logn)</p><h3><span id="search-x-from-y">Search (x from y)</span><a href="#search-x-from-y" class="header-anchor">Â¶</a></h3><p>problem 1: how far it achieves?</p><ol><li>idea 1: log difference of ranks, O(log|rank(y) - rank(x)|= <strong>O(log(k))</strong></li><li>distance from x and y, varying in different data structures where b tree has level length and bst does not.</li></ol><p>Problem 2:</p><p>in 2-3 tree, x is yâ€™s predecessor with constant rank difference and logn height, thereby itâ€™s incorrect to use log difference of ranks of nodes.</p><ul><li><img src="/sg/2023/01/20/6.046_augmentation/Screenshot-4202057.png" class title="Screenshot-4202057"></li></ul><h3><span id="data-in-the-leaves">Data in the leaves</span><a href="#data-in-the-leaves" class="header-anchor">Â¶</a></h3><p>Idea 2: store data in leaves.</p><p>b tree, bst tree: put one key in one spot</p><p>b+ tree: put keys only in leaves. Most info is originally stored in leaves by space. Others else are the same as b tree.</p><ul><li><img src="/sg/2023/01/20/6.046_augmentation/Screenshot-4202657.png" class title="Screenshot-4202657"></li><li><img src="/sg/2023/01/20/6.046_augmentation/Screenshot-4202717.png" class title="Screenshot-4202717"></li></ul><p>Search: augment to store min &amp; max of subtrees</p><p>Insert: split and merge</p><img src="/sg/2023/01/20/6.046_augmentation/Screenshot-4203211.png" class title="Screenshot-4203211"><p>Initialize v to the leaf node containing y (given), then while: xxxxxx</p><p>example: <a href="https://www.youtube.com/watch?v=xVka6z1hu-I&amp;list=PLUl4u3cNGP6317WaSNfmCvGym2ucw3oGp&amp;index=13">51:00</a></p><h2><span id="range-trees">Range trees</span><a href="#range-trees" class="header-anchor">Â¶</a></h2><p>Goal: prepocess n points in d-D dimension to support query:</p><p>given box, find 1) # points in the box,</p><p>and 2) k points in the box -&gt; theta(k) for output</p><p>=&gt; O(log^d(n) + |output|)</p><h3><span id="1-d">1-D</span><a href="#1-d" class="header-anchor">Â¶</a></h3><img src="/sg/2023/01/20/6.046_augmentation/Screenshot-4207235.png" class title="Screenshot-4207235"><p>sorted array: O(logn + k)</p><p>(not balanced) BST: O(logn + klogn)</p><p>level-linked b tree: O(logn + k)</p><img src="/sg/2023/01/20/6.046_augmentation/Screenshot-4207161.png" class title="Screenshot-4207161"><p>1-D range tree: perfectly balanced BST (AVL) =&gt; O(logn + k)</p><p>Range-query(a, b): find the least common ancestor (LCA) of a and b and return the nodes and the root nodes of subtrees â€œin betweenâ€</p><ul><li><img src="/sg/2023/01/20/6.046_augmentation/Screenshot-4208177.png" class title="Screenshot-4208177"></li></ul><p>Notes:</p><ul><li>node and subtree of that node</li><li>left parent, right parent</li></ul><h3><span id="orthogonal-range-searching">Orthogonal range searching</span><a href="#orthogonal-range-searching" class="header-anchor">Â¶</a></h3><p>2-D case: Fixed y, project (x, y) to the x axis as range tree. Then the problem becomes range-search(a, b) in 1-D range tree just like before, thereby doing another 1-D range tree searching on those points projecting to the y-axis to solve it. d-D case can be done by nested searching in the same manner.</p><p>space complexity: each key k lives in O(logn) rooted subtrees which are all the ancestors of k.</p><ul><li>It means total space is O(nlogn). In d dimensions, O(nlg^(dâˆ’1)n).</li><li><img src="/sg/2023/01/20/6.046_augmentation/Screenshot-4209577.png" class title="Screenshot-4209577"></li></ul>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
          <category> 6.046 algorithms design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>A Tour of NVMe</title>
      <link href="/sg/2023/01/14/qemu_nvme/"/>
      <url>/sg/2023/01/14/qemu_nvme/</url>
      
        <content type="html"><![CDATA[<p>Content: NVMe Specification (Section 2-2.2.1 [p15-p19] + Section 3.3.1 [p79-p83]), NVMe-tutorial (slides 1-11)</p><p>Recently, Iâ€™ve been working on making the metadata for QEMU NVMe ZNS emulation persistent across QEMU restarts. The state of namespace zones does not persist and will reverse to the empty state once QEMU is restarted. With the support of the mentors in QEMU community through weekly discussions, my searching graph for this task is as follows:</p><ol><li><p>What is this task and why? Iâ€™ve read a little related work about NVMe emulation metadata: 1) Dmitry Fomichev<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> , use another file to store metadata for NVMe ZNS emulation. If the file is not specified, then the metadata is not persistent as before; 2)  Klaus Jensen<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>, the metadata for NVMe emulation is stored at the end of the namespace backing block device.</p><p>(I didnâ€™t quite understand NVMe-specific things mentioned in the source code back then)</p><p>-&gt; read about NVMe ZNS spec, NVMe spec, slides, tutorials</p></li><li><p>How to design?  Two ways: 1) extensible design: use feature bits, which can represent different zone descriptors or APIs, 2) use different sets of interfaces. The things I was not clear were the aim for an interface. Now I think it means to unify interfaces for necessary cases. Regarding to zoned storage emulation, there are three cases supposed to take in considerations, zoned emulation, full emulation and NVMe ZNS emulation. Think about the design semantically and have a thorough plan through discussion before implementing anything. As it goes further, designing skeleton must be based on the implementations in source code. It reminds me of the idea Damien talked about for zone append command of zoned format driver. Different from the way in file-posix driver where append write command emulates through regular write and wp array model, a new approach could be something similar to <code>file append</code>. The old way still works but a new method can bring more insights.</p><p>? <u>However, I didnâ€™t think through the relation between file append and zone append writeâ€¦</u></p></li><li><p>What NVMe ZNS emulation in QEMU can emulate and how much of that is doable with the new zoned.c block driver? This question was brought out in the first week of metadata design discussion by Stefan. I was unable to answer it until further looking into spec and source code.</p><p>-&gt; Existing NVMe ZNS metadata support</p><p>-&gt; How to make file-posix and zoned format driver as underlying storage of NVMe ZNS devices?</p><p>-&gt; Consider supporting persistent metadata for one zoned namespace before enabling multiple zoned namespaces.</p></li><li><p>Very naive design of the task. Checks and new problems.</p><p>Store the metadata (write pointers and configurations) at the end of the zoned namespace.</p><p>-&gt; Where to put the metadata inside the disk? I am not favored to use another file to store metadata for each namespace. Could it lead to one namespace with one file or N namespaces with one file?</p></li><li><p>Review for debugging zoned emulation. New tests. Think back to the command line for zoned emulation with considerations of real applications use QEMU. (Going back to the starting point)</p></li><li><p>Stuck at the 4th step. Whatâ€™s the next step to implement? Found the gapâ€¦</p></li></ol><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://lists.nongnu.org/archive/html/qemu-block/2020-06/msg00738.html">https://lists.nongnu.org/archive/html/qemu-block/2020-06/msg00738.html</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://gitlab.eduxiji.net/duskmoon314/qemu/-/commit/bc3a65e99254cfe001bd16a569a5aa7d20f930e8">https://gitlab.eduxiji.net/duskmoon314/qemu/-/commit/bc3a65e99254cfe001bd16a569a5aa7d20f930e8</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> QEMU </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>2022å¹´ç»ˆæ€»ç»“</title>
      <link href="/sg/2022/12/31/2022/"/>
      <url>/sg/2022/12/31/2022/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#li-ming-qian-de-chang-pian-xu-mu">é»æ˜å‰çš„é•¿ç¯‡åºå¹•</a><ul><li><a href="#man-yi-pai-de-ren-sheng-jie-zou">æ…¢ä¸€æ‹çš„äººç”ŸèŠ‚å¥</a></li><li><a href="#kai-yuan-chu-tan">å¼€æºåˆæ¢</a></li><li><a href="#sheng-huo-zhu-jiao">ç”Ÿæ´»æ³¨è„š</a><ul><li><a href="#sai-er-da-chuan-shuo">å¡å°”è¾¾ä¼ è¯´</a></li><li><a href="#huo-yan-wen-zhang">ç«ç„°çº¹ç« </a></li><li><a href="#ji-le-di-si-ke">æä¹è¿ªæ–¯ç§‘</a></li><li><a href="#wen-ming-6">æ–‡æ˜6</a></li><li><a href="#chen-si-lu-ao-le-liu">æ²‰æ€å½•ï¼ˆå¥¥å‹’ç•™)</a></li><li><a href="#an-duo-andor">å®‰å¤š Andor</a></li><li><a href="#wo-de-di-gu">æˆ‘çš„ä½è°·</a></li></ul></li></ul></li></ul><!-- tocstop --></div><h1><span id="li-ming-qian-de-chang-pian-xu-mu">é»æ˜å‰çš„é•¿ç¯‡åºå¹•</span><a href="#li-ming-qian-de-chang-pian-xu-mu" class="header-anchor">Â¶</a></h1><p>ä»Šå¹´ä»å„ç§è§’åº¦æ¥è¯´éƒ½å’Œå¾€å¹´ä¸ä¸€æ ·äº†ï¼Œè€Œé‚£ä¸ªè½¬æŠ˜ç‚¹æ­£å¦‚é¢„æœŸèˆ¬æ˜¯æš‘æœŸçš„å¼€æºå®ä¹ ã€‚æˆ‘ä»ç„¶å¤„åœ¨å¦ä¸€ç§å›°é¡¿ä¸­ï¼Œä½†å¦‚æ„¿çš„æœ‰äº†ä¸€ä¸ªæ–°èµ·ç‚¹ï¼Œå¯ä»¥é‡æ–°å®¡è§†å’Œæ”¹å˜å½“å‰ç”Ÿæ´»çš„ä½ç½®ã€‚ä¸‰ä¸ªæœˆçš„å®ä¹ ç»™äº†æˆ‘ç¬¬ä¸€æ¬¡å¼€å§‹ç‹¬ç«‹ç”Ÿæ´»çš„æ”¯ç‚¹ï¼Œä»6æœˆå¼€å§‹åˆ°ç°åœ¨ã€‚æˆ‘å¦ˆä¹Ÿå˜å¾—èƒ½ç†è§£æˆ‘å’Œèº«è¾¹åŒå­¦çš„ä¸åŒé€‰æ‹©ï¼Œæ„å¤–åœ°æ”¯æŒæˆ‘çš„å†³å®šï¼Œæˆ–è®¸æ˜¯çŸ¥é“å¥¹ä»¬å·²ç»æ— æ³•æ”¹å˜æˆ‘çš„é€‰æ‹©äº†ã€‚</p><p>æ‹–ä½æˆ‘è„šæ­¥çš„ä¸€ç›´éƒ½æ˜¯ä»¥å­¦æ ¡ä¸ºä»£è¡¨çš„æ—§ä½“åˆ¶ï¼Œè¿™å››å¹´æ¥æˆ‘çš„ç²¾åŠ›å’Œç”Ÿæ´»è´¨é‡ä¸å¹³æ—¶ç”Ÿç§‘è¯¾ç¨‹çš„æµ“åº¦æˆåæ¯”ã€‚åœ¨æˆ‘ä¸ä»¥ä¸ºæ„æ—¶å­¦æ ¡æ€»èƒ½ç»™æˆ‘ä»¥é‡å‡»ã€‚ä¸ŠåŠå¹´æˆ‘æ™ƒæ™ƒè¡è¡åœ°åœ¨æ‘†ç€ç”Ÿé”ˆä»ªå™¨çš„å®éªŒå®¤é‡ŒæŠŠæ—¶é—´åˆ‡æˆç¢ç‰‡ï¼Œä¸‹åŠå¹´æˆ‘ä¹˜è½¦æˆ–åœ°é“å¾€è¿”äºå­¦æ ¡ä¸å‡ºç§Ÿå±‹é—´åªä¸ºæ··ä¸ªå…¨å‹¤ã€‚ç”Ÿæ´»æ°´å¹³çš„æé«˜æ²¡èƒ½è®©æˆ‘å…äºå°åŸå’Œé˜²æ§ï¼Œæˆ‘æ‰€è¿½æ±‚çš„ç›®æ ‡åœ¨å­¦é™¢çš„è€å¸ˆå‰ä¼¼ä¹åªæ˜¯å¤©æ–¹å¤œè°­é•œèŠ±æ°´æœˆã€‚ç„¶åæˆ‘å†ä¸€æ¬¡æ„è¯†åˆ°åœ¨æ‰€è°“å…¬å¹³çš„è§„åˆ™é¢å‰æ²¡æœ‰åˆç†æ€§åŠä¸å®¹ç½®å–™ã€‚å¦‚æœå‰ä¸€å¹´çš„æˆ‘é¢å¯¹è¿™å­¦æœŸåŒæ ·çš„è¯¾ç¨‹ï¼Œå°šæœªç†è§£å·¥ç¨‹é¡¹ç›®å¤æ‚åº¦çš„æˆ‘æ›´å¯èƒ½ä¼šåœ¨æ³¥æ½­é‡Œè¶Šé™·è¶Šæ·±ã€‚</p><p>æˆ‘è®¤ä¸ºæ¢ç´¢ç”Ÿæ´»çš„è¾¹ç•Œæ¯”å¹³ç¨³å®é™çš„ç”Ÿæ´»æ›´é‡è¦ï¼Œæ‰€ä»¥åœ¨æš‘æœŸå®ä¹ ç»“æŸåæˆ‘å°±ä¹°ç¥¨è¿”æ ¡å¹¶å‡†å¤‡ç§Ÿæˆ¿ã€‚é˜²æ§æ”¿ç­–çš„æ”¶ç´§æ­£æ˜¯åœ¨æˆ‘å†è¸å…¥è¿™æ–¹åŸå¸‚æ„Ÿå—åˆ°çš„ï¼Œä¸‹äº†è½¦ç«™åçš„èº«ä»½ç™»è®°ï¼Œä¸‰å¤©ä¸¤æ£€ï¼Œå’Œæ ¡é—¨å£ä¿å®‰åšæŒæŸ¥ç ã€‚åœ¨æœ‰æ¬¡è¸©ç€æ‹–é‹å»å—é—¨å¤–ä¹°åƒçš„ç»“æœå›æ¥è¢«æ‹¦ä½ç”±äºæ²¡æœ‰24hæ ¸é…¸åï¼Œæˆ‘å†³å®šç¬¬äºŒæ—¥å°±æ¬åˆ°æ–°ä½å¤„ç»“æœé‚£å¤©ç«Ÿæ˜¯å°åŸçš„å¼€å§‹ã€‚å°åŸçš„è¿™ä¸¤å‘¨æˆ–è®¸å¯¹æ¯”ä¸Šæµ·æˆ–ä¹Œé²æœ¨é½ä¸ç®—é•¿ï¼Œä½†ä¹Ÿè¶³å¤Ÿè®©æˆ‘çœ‹åˆ°å¾ˆå¤šã€‚åœ¨æ¬å®¶å½“å¤©ä¹˜è½¦è·¯ä¸Šçœ‹åˆ°æ¥å¾€è¡Œäººæç€æ²‰ç”¸ç”¸çš„ä¸œè¥¿åŒ†åŒ†å¿™å¿™åœ°æ‹¥æŒ¤åœ¨é“è·¯ä¸€æ—ï¼Œåœ¨çŸ­æš‚çš„æ”¾é£é€”ä¸­çœ‹åˆ°ç´§é—­ç€é—¨çš„ç©ºç©ºè¡è¡çš„è¡—é“ï¼Œç›’é©¬è¶Šæ¥è¶Šç´§å¼ çš„è¿åŠ›ï¼Œæ’ç€é•¿é˜Ÿåšæ ¸é…¸çš„æ ¸é…¸æ£€æµ‹å¤„ã€‚</p><h2><span id="man-yi-pai-de-ren-sheng-jie-zou">æ…¢ä¸€æ‹çš„äººç”ŸèŠ‚å¥</span><a href="#man-yi-pai-de-ren-sheng-jie-zou" class="header-anchor">Â¶</a></h2><p>ä»ä»Šå¹´6æœˆå¼€å§‹å°±å¬è¯´æˆ‘ä»¬è¿™å±Šåœ¨äº’è”ç½‘å¯’å†¬ä¸‹é¦–å½“å…¶å†²ï¼Œä¸å°‘äººæ—©æ—©åœ°ä»æå‰æ‰¹å¼€å§‹é¢ã€‚æå‰æ‰¹çš„æ—¶é—´ä¹Ÿè¶Šæ¥è¶Šæ—©ï¼Œä»Šå¹´ä»6æœˆä»½å°±å¼€å§‹äº†ã€‚æˆ‘å¾€å¹´æœ¬æ‰“ç®—ä»9æœˆå¼€å§‹é¢è¯•ï¼Œä½†ç°å®æ˜¯è¿™ä¸€å¹´æˆ‘ä»æ—§æ²¡å¼€å§‹å†™è¯¾ç¨‹é¡¹ç›®ï¼Œç®€å†ä¸Šä¹å–„å¯é™ˆã€‚åŒæ—¶ï¼Œå¤–ä¼å¤§å‚çº·çº·ç¼©å‡ hc å’Œå¤§ç¯å¢ƒæ™®éçš„è£å‘˜åŠç»æµè§æ¡ï¼Œå†åŠ ä¸Šå›½å†…ä¹Ÿæ²¡æœ‰å¤šå°‘å’Œå­˜å‚¨ç›¸å…³çš„å²—ä½ï¼Œæˆ‘è¶Šæ¥è¶ŠåŒçƒ¦æ‰¾å·¥ä½œå’Œå‰æœŸæ‹Ÿåˆå‡†å¤‡ã€‚å¯¹æ¯”èµ·æ¥ï¼Œng ç›´æ¥æ‰¾å›½å¤–å·¥ä½œçš„éš¾åº¦å‡ ä¹å’Œä»å›½å†…æ‰¾å·®ä¸å¤šäº†ï¼Œå› ä¸ºéƒ½ä¸æ€ä¹ˆæ‹›äººã€‚é‚£ä¸ºä»€ä¹ˆä¸ç»§ç»­åšæƒ³åšçš„äº‹ï¼Ÿè€Œå¦‚æœæƒ³è¦åœ¨å›½é™…å¸‚åœºä¸Šæœ‰æ™®éçš„ç«äº‰åŠ›ï¼Œæˆ‘å¿…é¡»å®Œæˆæ˜å¹´æ—¥æœ¬çš„è‡³å°‘ä¸¤ä¸ªæœˆçš„å®ä¹ æˆ–è¶³å¤Ÿçš„è¯¾ç¨‹é¡¹ç›®ã€‚</p><h2><span id="kai-yuan-chu-tan">å¼€æºåˆæ¢</span><a href="#kai-yuan-chu-tan" class="header-anchor">Â¶</a></h2><p>æˆ‘ä»ç„¶åœ¨ç»§ç»­å®Œæˆæš‘æœŸé¡¹ç›®çš„ç›¸å…³ä»»åŠ¡ï¼Œå¹¶æœ‰å¹¸èƒ½ç»§ç»­å¾—åˆ°ç¤¾åŒºçš„ mentor çš„åé¦ˆå’ŒæŒ‡å¯¼ã€‚æ˜å¹´å»æ—¥æœ¬çš„å®ä¹ åœ¨ Damien çš„æœ‰åŠ›æ¨åŠ¨ä¸‹ä¹Ÿå®šäº†ï¼Œèƒ½å¤Ÿç»§ç»­æˆ‘åœ¨ç¤¾åŒºåšçš„äº‹å’Œç©ä¸€äº›æ–°ç¡¬ä»¶ã€‚ä¸ºäº†ä½¿ä¹‹æˆè¡Œï¼Œä½“éªŒäº† hard æ¨¡å¼åŠæŠ¤ç…§ï¼Œå†·æ¸…æœŸæ‰“ç¬¬ä¸‰é’ˆç–«è‹—ï¼Œç”³åŠé“¶è¡Œå¡ï¼Œå’Œå‡†å¤‡ç­¾è¯ææ–™ã€‚åœ¨åªå·®ç­¾è¯æ—¶è¢«å­¦æ ¡ä¸´æ—¶çš„æ”¿ç­–æ‰“ä¹±åªèƒ½è¢«è¿«å»¶æœŸå’Œç¼©çŸ­è¡Œç¨‹ã€‚</p><p>æˆ‘ç”Ÿæ´»çš„ä¸€ç‚¹äº®è‰²å°±æ˜¯å‚ä¸å¼€æºç¤¾åŒºäº†ã€‚éå¸¸æ„Ÿæ©è¿™é€”ä¸­é‡åˆ°çš„æœ‹å‹å’Œå„ä½ mentorï¼Œè®©æˆ‘çœ‹åˆ°äº†å¼€æºé¡¹ç›®çš„å¯èƒ½æ€§å’ŒèŒä¸šèµ·ç‚¹ã€‚æˆ‘å°¤å…¶æ„Ÿæ¿€ç¤¾åŒºçš„ä¸¤ä½ mentor, Stefan Hajnoczi å’Œ Damine Le Moalï¼Œåœ¨èŒä¸šæ–¹å‘é€‰æ‹©å’Œé¡¹ç›®ä¸Šç»™äº†æˆ‘å¾ˆå¤šå®ç”¨çš„å»ºè®®å’ŒæŒ‡å¯¼ã€‚Damien æ˜¯ç¬¬ä¸€ä¸ªçŸ¥é“æˆ‘æœ¬ç§‘ä¸“ä¸šæ˜¯ç”Ÿç§‘ä»ç„¶é¼“åŠ±æˆ‘ç»§ç»­è¿½æ±‚è‡ªå·±ç†æƒ³èŒä¸šæ–¹å‘çš„äººï¼Œè¿™è®©æˆ‘ç¬¬ä¸€æ¬¡æ­£è§†è‡ªå·±å®ç°ç†æƒ³çš„å¯èƒ½æ€§ã€‚</p><ul><li><img src="/sg/2022/12/31/2022/Screenshot-2505749.png" class title="fall"></li><li>Stefan å¸®æ‹çš„ç…§ç‰‡ :)<img src="/sg/2022/12/31/2022/IMG_6326.JPG" class title="IMG_6326"></li></ul><h2><span id="sheng-huo-zhu-jiao">ç”Ÿæ´»æ³¨è„š</span><a href="#sheng-huo-zhu-jiao" class="header-anchor">Â¶</a></h2><p>æ¯”è¾ƒæ”¾æ¾çš„æ—¶å€™å°±æ˜¯ç©æ¸¸æˆå’Œä¸æœ‹å‹åƒåƒå–å–ã€‚æ¯”è¾ƒéš¾å¿˜çš„æ—¶åˆ»åº”è¯¥æ˜¯ä¸ŠåŠå¹´å’Œæœ‹å‹åœ¨æ“åœºçš„çœ‹å°ä¸Šè¢«æœˆå…‰æ©ç›–ç€å–é…’ã€‚é‚£ä¼šå¼€æºå®ä¹ ç”³è¯·ç»“æœè¿˜æœªçŸ¥ï¼Œæˆ‘å¯¹æœªæ¥åªæœ‰è¿·èŒ«ã€‚å°¤å…¶æ˜¯é¢è¯•é‚£å‡ å¤©æ¯”è¾ƒç´§å¼ ï¼Œä¼šçº¦ç€å¥¹ä¸€èµ·èµ°ä¸€èµ°ã€‚</p><img src="/sg/2022/12/31/2022/IMG_6454.jpeg" class title="IMG_6454"><p>åœ¨å®ä¹ ä¸€å‘¨åå‡ºå»åƒé¥­ã€‚</p><img src="/sg/2022/12/31/2022/IMG_5906.jpeg" class title="IMG_5906"><p>æˆ‘å¾ˆå–œæ¬¢è§‚å¯Ÿå’–å•¡ä¸å¥¶èåˆåœ¨ä¸€èµ·çš„è¿‡ç¨‹ã€‚</p><ul><li><img src="/sg/2022/12/31/2022/IMG_6496.jpeg" class title="IMG_6496"></li><li><img src="/sg/2022/12/31/2022/IMG_5643.jpeg" class title="IMG_5643"></li></ul><h3><span id="sai-er-da-chuan-shuo">å¡å°”è¾¾ä¼ è¯´</span><a href="#sai-er-da-chuan-shuo" class="header-anchor">Â¶</a></h3><p>å¡å°”è¾¾ä¼ è¯´æ€ªæ²¡æ‰“å¤šå°‘ï¼Œå›¾å¤§è‡´è·‘äº†ä¸ªéã€‚</p><img src="/sg/2022/12/31/2022/IMG_6176.PNG" class title="IMG_6176"><img src="/sg/2022/12/31/2022/IMG_0139.PNG" class title="IMG_0139"><img src="/sg/2022/12/31/2022/IMG_0137.PNG" class title="IMG_0137"><img src="/sg/2022/12/31/2022/IMG_0138.PNG" class title="IMG_0138"><img src="/sg/2022/12/31/2022/IMG_0135.PNG" class title="IMG_0135"><img src="/sg/2022/12/31/2022/IMG_0142.jpeg" class title="IMG_0142"><img src="/sg/2022/12/31/2022/IMG_0141.jpeg" class title="IMG_0141"><img src="/sg/2022/12/31/2022/IMG_0144.jpeg" class title="IMG_0144"><h3><span id="huo-yan-wen-zhang">ç«ç„°çº¹ç« </span><a href="#huo-yan-wen-zhang" class="header-anchor">Â¶</a></h3><p>çº¢èŠ±çº¿é‡Œç‹å¥³æ€»ç®—èƒ½æœ‰ä¸ªå¥½çš„ç»“å±€ã€‚æ¸¸æˆé‡Œæ”¯æŒä»¥çº¹ç« ä¸ºåŸºç¡€çš„ç­‰çº§åˆ’åˆ†å’Œåå¯¹çš„åˆ†ä¸ºä¸¤ä¸ªé˜µè¥ï¼Œæ”¯æŒçº¹ç« çš„ä¸ºä¼ ç»Ÿæ­£ä¹‰çš„ä¸€æ–¹ã€‚ä½†èµ°è¿‡æ•™å ‚çº¿åæˆ‘æ‰æ„è¯†åˆ°è¿™ä¸¤æ–¹å…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä¹Ÿæ— æ‰€è°“æ­£ä¹‰ã€‚æˆ˜äº‰ä¸­å—ä¼¤çš„æ°¸è¿œä¼šæœ‰å¹³æ°‘ï¼Œä¿¡å¿µè¦çœ‹è‡ªå·±ç›¸ä¿¡ä»€ä¹ˆè€Œä¸æ˜¯ç›¸ä¿¡å¤§å¤šæ•°äººç›¸ä¿¡çš„ã€‚</p><h3><span id="ji-le-di-si-ke">æä¹è¿ªæ–¯ç§‘</span><a href="#ji-le-di-si-ke" class="header-anchor">Â¶</a></h3><img src="/sg/2022/12/31/2022/boat.png" class title="boat"><img src="/sg/2022/12/31/2022/disco.png" class title="disco"><h3><span id="wen-ming-6">æ–‡æ˜6</span><a href="#wen-ming-6" class="header-anchor">Â¶</a></h3><p>å»å¹´å’Œå¹´åˆçˆ±ç©çš„æ¸¸æˆã€‚</p><img src="/sg/2022/12/31/2022/civil.png" class title="civil"><h3><span id="chen-si-lu-ao-le-liu">æ²‰æ€å½•ï¼ˆå¥¥å‹’ç•™)</span><a href="#chen-si-lu-ao-le-liu" class="header-anchor">Â¶</a></h3><p>ä¹¦ä¸­å¾ˆå¤šå¤„èƒŒåçš„é€»è¾‘éƒ½æ˜¯ä¸‡äº‹ä¸‡ç‰©è‡ªæœ‰å…¶ç†æ€§ï¼Œåœ¨åƒä¸‡å¹´ä»¥åéƒ½ä¸å­˜åœ¨æˆ–åŒ–æˆè‡ªç„¶çš„ä¸€éƒ¨åˆ†ï¼Œæƒ…æ„Ÿçš„æ‰°åŠ¨è«è¿‡äºæ­¤ã€‚</p><h3><span id="an-duo-andor">å®‰å¤š Andor</span><a href="#an-duo-andor" class="header-anchor">Â¶</a></h3><p>å¾ˆå–œæ¬¢æ˜Ÿæˆ˜ä¸­çš„å°äººç‰©åœ¨ä¹±ä¸–æµ®æ²‰ä¸­çš„é£˜é›¶å²æœˆã€‚åˆæ—¶çš„å®‰å¤šè™½ç„¶è¢«å¸å›½æ‘§æ¯äº†å®¶å›­å’Œå¥´å½¹äº†è®¸å¤šå²æœˆï¼Œä½†ä¸€å¼€å§‹å¹¶æœªæƒ³åæŠ—å¸å›½ç»Ÿæ²»ã€‚æ­£ä¹‰å“ªæœ‰èƒ½å¤Ÿåƒé¥­ç¡è§‰é‡è¦ï¼Ÿåœ¨æŠ¢åŠ«äº†æŸä¸ªå¸å›½çš„é©»å†›åä»–æ‰“ç®—ç”¨ä¸°åšçš„ä½£é‡‘æ¥ä¸Šå…»æ¯è¿‡éšå¿ƒæ‰€æ¬²çš„ç”Ÿæ´»ï¼Œå´åœ¨æŸæ¬¡å»å•†åº—è´­ç‰©æ—¶è¢«é£æš´å…µä»¥ä»–è¡Œè¿¹é¬¼é¬¼ç¥Ÿç¥Ÿå’Œç ´åå¸å›½å†›æŠ“æ•çŠ¯äººä¸¢è¿›äº†ç‰¢æˆ¿ã€‚å®‰å¤šçš„äº‰è¾©åˆæˆä¸ºå¸å›½åŠ é‡åˆ¤åˆ‘çš„å€Ÿå£ï¼Œä»å…­ä¸ªæœˆçš„åˆ‘æœŸæ”¹æˆäº†å…­å¹´çš„åŠ³åŠ¨æ”¹é€ ã€‚</p><p>è¿™æ®µç‰¢ç‹±ç”Ÿæ´»æ­£æ˜¯åšå®šå®‰å¤šåæŠ—å¸å›½ç»Ÿæ²»ä¿¡å¿µçš„èµ·ç‚¹ã€‚æ˜¯åœ¨å‹è¿«ä¸­é€ä¸Šå¸å›½ç»§ç»­å¥´å½¹äººæ°‘çš„æ­¦å™¨è¿˜æ˜¯æ­»äºäº‰å–è‡ªç”±çš„é€”ä¸­ï¼Ÿè¡¥äº†ä¾ ç›—ä¸€å·çš„æ•…äº‹åï¼Œå®‰å¤šçš„æ•…äº‹æ›´æ˜¾å¾—æ‚²æ€†ã€‚åŠ å…¥åå›å†›çš„äº”å¹´åï¼Œä»–æ­»äºç›—å–æ­»æ˜Ÿåœ°å›¾çš„ä»»åŠ¡ï¼Œå’Œä»–çš„åŒä¼´ä»¬ä¸€èµ·é€ä¸Šäº†æˆ˜èƒœå¸å›½çš„å”¯ä¸€å¯èƒ½æ€§ã€‚ä»–æ˜¯çœ‹èµ·æ¥å¹³æ·¡å´å¾ˆçœŸå®çš„åæŠ—è€…ã€‚ä»æœ€å¼€å§‹å®ˆå¥½è‡ªå·±å®¶çš„ä¸€äº©ä¸‰åˆ†åœ°åˆ°ä¸»åŠ¨åŠ å…¥åå›å†›ï¼Œå†åˆ°äº”å¹´åä¾ ç›—ä¸€å·æ•…äº‹é‡Œçš„å°±ä¹‰ï¼Œä»–çš„æ€åº¦è½¬å˜ç€é‡åˆ»ç”»äº†åœ¨èº«å¤„å®Œå…¨ç»æœ›æ— ç†æ€§çš„ç¤¾ä¼šç¯å¢ƒé‡Œï¼Œåœ¨åæŠ—æ˜¯å¼‚ç±»å¤§å¤šæ•°äººè‡£æœäºæš´æ”¿æ—¶ä¸€ä¸ªæ™®é€šäººçš„é€‰æ‹©å’Œèˆå¼ƒã€‚</p><p>Nemik:  â€œThere will be times when the struggle seems impossible. I know this already. Alone, unsure, dwarfed by the scale of the enemy. Remember this. Freedom is a pure idea. It occurs spontaneously and without instruction. Random acts of insurrection are occurring constantly throughout the galaxy. There are whole armies, battalions that have no idea that theyâ€™ve already enlisted in the cause. Remember that the frontier of the Rebellion is everywhere. And even the smallest act of insurrection pushes our lines forward. And then remember this. The Imperial need for control is so desperate because it is so unnatural. Tyranny requires constant effort. It breaks, it leaks. Authority is brittle. Oppression is the mask of fear. And know this, the day will come when all these skirmishes and battles, these moments of defiance will have flooded the banks of the Empireâ€™s authority and then there will be one too many. One single thing will break the siege. Remember this. Try.â€</p><h3><span id="wo-de-di-gu">æˆ‘çš„ä½è°·</span><a href="#wo-de-di-gu" class="header-anchor">Â¶</a></h3><p>åˆæ˜¯ä¸€æ®µæ¯”è¾ƒé•¿çš„å›°é¡¿æœŸã€‚åœ¨4æœˆæˆ‘åœ¨æ—¥è®°é‡Œæè¿°æ˜¯ â€œthe lowest of the low&quot;ï¼Œå‰è·¯çš„è¿·èŒ«å’Œæ²¡æœ‰è½ç‚¹äº¤ç»‡åœ¨ä¸€èµ·ã€‚è€Œåˆ°12æœˆæˆ‘åˆé‡åˆ°äº†å¦ä¸€ä¸ªä½ç‚¹ã€‚éšä¹‹è€Œæ¥çš„æ˜¯æ„Ÿå†’ï¼Œå®¤å‹é˜³äº†ï¼Œæ‰˜ç¦å»¶æœŸã€‚å›å®¶ä¹‹åå°±é™·å…¥äº†ä¸€ç§æ·±æ·±çš„æ— åŠ›æ„Ÿï¼Œå¼€å§‹è´¨ç–‘èº«è¾¹çš„äº‹å’Œè‡ªå·±ï¼Œå¥½åƒæ·±é™·åœ¨æ³¥æ½­é‡Œã€‚æœ‰ä¸€å¤©ä¸‹åˆçªç„¶å†³å®šå‡ºå»èµ°ä¸€èµ°ï¼Œä¸¤å¤©å†…å»é‡åº†å’Œè¥¿å®‰æ™ƒæ‚ äº†ä¸‹ã€‚å›æ¥åçš„ç¬¬äºŒå¤©åˆå’Œå‡ ä½ mentor è®¨è®ºäº†ä¸‹æ‹–å»¶äº†å¿«ä¸€ä¸ªæœˆçš„ä¸€ä¸ªä»»åŠ¡ï¼Œç»ˆäºæœ‰äº†ç‚¹æ–¹å‘æ„Ÿã€‚</p><p>æ‰¾å·¥ä½œç®—æ˜¯æ¯•ä¸šå‰çš„ä¸»ä»»åŠ¡ï¼Œä½†æˆ‘ç›®å‰çš„æƒ³æ³•è¿˜æ˜¯æƒ³å…ˆåˆ·åˆ·ç®€å†ï¼Œåœ¨åˆé€‚çš„æ—¶æœºå¯»æ‰¾åˆé€‚çš„æœºä¼šã€‚æˆ‘æ›´çœ‹é‡çš„è¿˜æ˜¯æŠŠè¿‡ç¨‹å½“ä½œç›®æ ‡ï¼Œè€Œä¸ä»…ä»…ç»“æœæ‰æ˜¯å€¼å¾—äº«å—çš„ã€‚è™½ç„¶å¿ƒç†å‹åŠ›ä¹Ÿä¸€ç›´å¾ˆå¤§ï¼Œæ¯•ç«Ÿå‘¨å›´çš„äººåŸºæœ¬éƒ½æœ‰ offer äº†ï¼Œæ— è®ºæ˜¯å‡ºå›½ï¼Œä¿ç ”è¿˜æ˜¯å·¥ä½œã€‚ä½†æ˜¯æˆ‘è¿˜æ˜¯å¾ˆéš¾ç°åœ¨å†³å®šæ¯•ä¸šåä¼šåšä»€ä¹ˆï¼Œä¹Ÿå¸Œæœ›èƒ½å¤Ÿåœ¨5æœˆå‰æ‰¾åˆ°æˆ‘çš„é‚£æ¡è·¯ã€‚</p><p>åœ¨è¿™æ®µç©ºç™½æœŸåˆå›é¡¾äº†ä¸€éæ˜Ÿæˆ˜å’Œè‡ªå·±çš„å¤±è´¥äººç”Ÿã€‚</p><img src="/sg/2022/12/31/2022/IMG_0192.jpeg" class title="IMG_0192"><img src="/sg/2022/12/31/2022/IMG_0249.jpeg" class title="IMG_0249"><img src="/sg/2022/12/31/2022/IMG_0229.jpeg" class title="IMG_0229"><p><u>2022 resolution</u></p><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_0" checked="true" disabled="true"><label for="cbx_0"> start intern programs</label></li><li class="task-list-item"><input type="checkbox" id="cbx_1" checked="true" disabled="true"><label for="cbx_1"> explore open source world by participating in some communities</label></li><li class="task-list-item"><input type="checkbox" id="cbx_2" checked="true" disabled="true"><label for="cbx_2"> meet a few new friends on the way</label></li></ul><p>2023 resolution:</p><ul class="task-list"><li class="task-list-item"><input type="checkbox" id="cbx_3" disabled="true"><label for="cbx_3"> <s>finish WD internship (2 or 3 months)</s>, cancelled</label></li><li class="task-list-item"><input type="checkbox" id="cbx_4" checked="true" disabled="true"><label for="cbx_4"> find a suitable job related to storages <s>in half a year (before graduation)</s>, after graduation</label></li><li class="task-list-item"><input type="checkbox" id="cbx_5" disabled="true"><label for="cbx_5"> <s>travel in different cities: HK,  Japan, Thailandâ€¦</s>, Non of them was visited</label></li><li class="task-list-item"><input type="checkbox" id="cbx_6" disabled="true"><label for="cbx_6"> <s>learn a new language at least in the medium level (choosing from Japanese, Germany)</s>, not happening</label></li></ul>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Introduction to Zoned Storage Emulation</title>
      <link href="/sg/2022/11/17/qemu_zbd/"/>
      <url>/sg/2022/11/17/qemu_zbd/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#zoned-block-devices">Zoned block devices</a></li><li><a href="#zoned-emulation">Zoned emulation</a></li><li><a href="#starting-the-journey-with-open-source">Starting the journey with open source</a></li><li><a href="#conclusion">Conclusion</a></li></ul><!-- tocstop --></div><p>Originally written at: <a href="https://www.qemu.org/2022/11/17/zoned-emulation/">https://www.qemu.org/2022/11/17/zoned-emulation/</a></p><p>This summer I worked on adding Zoned Block Device (ZBD) support to virtio-blk as part of the <a href="https://www.outreachy.org/">Outreachy</a> internship program. QEMU hasnâ€™t directly supported ZBDs before so this article explains how they work and why QEMU needed to be extended.</p><h2><span id="zoned-block-devices">Zoned block devices</span><a href="#zoned-block-devices" class="header-anchor">Â¶</a></h2><p>Zoned block devices (ZBDs) are divided into regions called zones that can only be written sequentially. By only allowing sequential writes, SSD write amplification can be reduced by eliminating the need for a <a href="https://en.wikipedia.org/wiki/Flash_translation_layer">Flash Translation Layer</a>, and potentially lead to higher throughput and increased capacity. Providing a new storage software stack, zoned storage concepts are standardized as <a href="https://zonedstorage.io/docs/introduction/smr#governing-standards">ZBC (SCSI standard), ZAC (ATA standard)</a>, and <a href="https://zonedstorage.io/docs/introduction/zns">ZNS (NVMe)</a>. Meanwhile, the virtio protocol for block devices (virtio-blk) should also be aware of ZBDs instead of taking them as regular block devices. It should be able to pass such devices through to the guest. An overview of necessary work is as follows:</p><ol><li>Virtio protocol: <a href="https://lwn.net/Articles/914377/">extend virtio-blk protocol with main zoned storage concept</a>, Dmitry Fomichev</li><li>Linux: <a href="https://www.spinics.net/lists/linux-block/msg91944.html">implement the virtio specification extensions</a>, Dmitry Fomichev</li><li>QEMU: <a href="https://lists.gnu.org/archive/html/qemu-devel/2022-10/msg05195.html">add zoned storage APIs to the block layer</a>, Sam Li</li><li>QEMU: implement zoned storage support in virtio-blk emulation, Sam Li</li></ol><p>Once the QEMU and Linux patches have been merged it will be possible to expose a virtio-blk ZBD to the guest like this:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-blockdev node-name=drive0,driver=zoned_host_device,filename=/path/to/zbd,cache.direct=on \</span><br><span class="line">-device virtio-blk-pci,drive=drive0 \</span><br></pre></td></tr></table></figure><p>And then we can perform zoned block commands on that device in the guest os.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># blkzone report /dev/vda</span><br><span class="line">start: 0x000000000, len 0x020000, cap 0x020000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br><span class="line">start: 0x000020000, len 0x020000, cap 0x020000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br><span class="line">start: 0x000040000, len 0x020000, cap 0x020000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br><span class="line">start: 0x000060000, len 0x020000, cap 0x020000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br><span class="line">start: 0x000080000, len 0x020000, cap 0x020000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br><span class="line">start: 0x0000a0000, len 0x020000, cap 0x020000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br><span class="line">start: 0x0000c0000, len 0x020000, cap 0x020000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br><span class="line">start: 0x0000e0000, len 0x020000, cap 0x020000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br><span class="line">start: 0x000100000, len 0x020000, cap 0x020000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br><span class="line">start: 0x000120000, len 0x020000, cap 0x020000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br><span class="line">start: 0x000140000, len 0x020000, cap 0x020000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br><span class="line">start: 0x000160000, len 0x020000, cap 0x020000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></pre></td></tr></table></figure><h2><span id="zoned-emulation">Zoned emulation</span><a href="#zoned-emulation" class="header-anchor">Â¶</a></h2><p>Currently, QEMU can support zoned devices by virtio-scsi or PCI device passthrough. It needs to specify the device type it is talking to. Whereas storage controller emulation uses block layer APIs instead of directly accessing disk images. Extending virtio-blk emulation avoids code duplication and simplify the support by hiding the device types under a unified zoned storage interface, simplifying VM deployment for different types of zoned devices. Virtio-blk can also be implemented in hardware. If those devices wish to follow the zoned storage model then the virtio-blk specification needs to natively support zoned storage. With such support, individual NVMe namespaces or anything that is a zoned Linux block device can be exposed to the guest without passing through a full device.</p><p>For zoned storage emulation, zoned storage APIs support three zoned models (conventional, host-managed, host-aware) , four zone management commands (Report Zone, Open Zone, Close Zone, Finish Zone), and Append Zone. The QEMU block layer has a BlockDriverState graph that propagates device information inside block layer. The file-posix driver is the lowest level within the graph where zoned storage APIs reside.</p><p>After receiving the block driver states, Virtio-blk emulation recognizes zoned devices and sends the zoned feature bit to guest. Then the guest can see the zoned device in the host. When the guest executes zoned operations, virtio-blk driver issues corresponding requests that will be captured by viritio-blk device inside QEMU. Afterwards, virtio-blk device sends the requests to the file-posix driver which will perform zoned operations using Linux ioctls.</p><p>Unlike zone management operations, Linux doesnâ€™t have a user API to issue zone append requests to zoned devices from user space. With the help of write pointer emulation tracking locations of write pointer of each zone, QEMU block layer can perform append writes by modifying regular writes. Write pointer locks guarantee the execution of requests. Upon failure it must not update the write pointer location which is only got updated when the request is successfully finished.</p><p>Problems can always be solved with right mind and right tools. A good approach to avoid pitfalls of programs is test-driven. In the beginning, users like qemu-io commands utility can invoke new block layer APIs. Moving towards to guest, existing tools like blktests, zonefs-tools, and fio are introduced for broader testing. Depending on the size of the zoned device, some tests may take long enough time to finish. Besides, tracing is also a good tool for spotting bugs. QEMU tracking tools and blktrace monitors block layer IO, providing detailed information to analysis.</p><h2><span id="starting-the-journey-with-open-source">Starting the journey with open source</span><a href="#starting-the-journey-with-open-source" class="header-anchor">Â¶</a></h2><p>As a student interested in computer science, I am enthusiastic about making real applications and fortunate to find the opportunity in this summer. I have a wonderful experience with QEMU where I get chance to work with experienced engineers and meet peers sharing same interests. It is a good starting point for me to continue my search on storage systems and open source projects.</p><p>Public communication, reaching out to people and admitting to failures used to be hard for me. Those feelings had faded away as I put more effort to this project over time. For people may having the same trouble as me, it might be useful to focus on the tasks ahead of you instead of worrying about the consequences of rejections from others.</p><p>Finally, I would like to thank Stefan Hajnoczi, Damien Le Moal, Dmitry Fomichev, and Hannes Reinecke for mentoring me - they have guided me through this project with patience and expertise, when I hit obstacles on design or implementations, and introduced a fun and vibrant open source world for me. Also thank QEMU community and Outreachy for organizing this program.</p><h2><span id="conclusion">Conclusion</span><a href="#conclusion" class="header-anchor">Â¶</a></h2><p>The current status for this project is waiting for virtio specifications extension and Linux driver support patches got accepted. And the up-to-date patch series of zoned device support welcome any new comments.</p><p>The next step for zoned storage emulation in QEMU is to enable full zoned emulation through virtio-blk. Adding support on top of a regular file, it allows developers accessing a zoned device environment without real zoned storage hardwares. Furthermore, virtio-scsi may need to add full emulation support to complete the zoned storage picture in QEMU. QEMU NVMe ZNS emulation can also use new block layer APIs to attach real zoned storage if the emulation is used in production in future.</p>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> QEMU </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>From Virtualization to Virtual Machines</title>
      <link href="/sg/2022/09/27/SD_virtulization/"/>
      <url>/sg/2022/09/27/SD_virtulization/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#client-server-organization">Client/server organization</a></li><li><a href="#virtual-links">Virtual links</a><ul><li><a href="#coordination-of-concurrent-activities">coordination of concurrent activities</a></li><li><a href="#lock-machanisms">lock machanisms</a></li></ul></li><li><a href="#enforce-modularity-in-memory">Enforce modularity in memory</a><ul><li><a href="#controlled-sharing">controlled sharing</a></li></ul></li></ul><!-- tocstop --></div><p>chapter 5 Enforcing Modularity with Virtualization</p><p>Problem: how to build a virtual computer? how to build as many computers as we want for running the desired modules?</p><p><u>Model</u>: client and service modules connect through network</p><ol><li>bounded buffers -&gt; communication linkes</li><li>virtual memory -&gt; memory</li><li>thread -&gt; processors</li></ol><h2><span id="client-server-organization">Client/server organization</span><a href="#client-server-organization" class="header-anchor">Â¶</a></h2><ol><li><p>modularity/isolation offers</p><ul><li>reduce errors propagating</li><li>security, fault tolerance(geo-distributed)</li></ul></li><li><p>virtualization methods</p><ul><li>many VM -&gt; Multiplexing one physical instance</li><li>one VM -&gt; Emulation: preserve existing interfaces</li><li>one big VM -&gt; Aggregation: provide with many physical instance</li></ul></li><li><p>virtualize computers</p><ul><li>thread of execution: data, text, heap, stack -&gt; thread manager in the context of os(processors)</li><li>interrupt -&gt; interrupt handler in the context of os (processors, if one processor is processing an interrupt already, next interrupt may interrupt another processor)</li><li>exception -&gt; exception handler in the context of the interrupted thread</li></ul></li><li><p>Processors share the same physical memory. -&gt; controlled sharing is required -&gt; virtual memory manager(a hw gadget) in the context of os</p></li><li><p>why emulation costs a lot?</p><p>steps to interrept the instructions of the emulated machine: decode the simulated instructions -&gt; perform the operations -&gt; update the state of the simulated processors</p><p>-&gt; result to *10 overhead</p><p>-&gt; method: virtual machines: use M physical processors to emulation M virtual objects</p></li></ol><p>Ex: Editor want to send â€˜xâ€™ to File service to store.</p><ul><li><img src="/sg/2022/09/27/SD_virtulization/Screenshot-1835251.png" class title="Screenshot-1835251"></li></ul><h2><span id="virtual-links">Virtual links</span><a href="#virtual-links" class="header-anchor">Â¶</a></h2><p>Scenario : how to share a bounded buffer between SENDER and RECEIVER?</p><p>Fact: all threads share the same physical memory</p><p>problem: sequence coordination, one event in thread 1 must precede an event in another thread</p><p>If the bounded buffer is a fixed array N, and there are only one sender, one receiver, then coordinations are easy to handle:</p><p>by following this rule:</p><ol><li>if room = (IN - OUT) &lt; N, sender can put more messages to the buffer</li><li>if IN &gt; OUT, receiver can consume more messages from the buffer</li></ol><p>otherwise, it loops until conditions are satisfied, which is called spin loops(loops in which a thread is waiting for an event without giving up its processor).</p><p>six assumptions to guarantee the correctness of the program:</p><ol><li>one writer principle</li><li>Spin loops require one processor for thread</li><li>data overflow -&gt; Integers of width 64 or 96 bits/ in/out modulo N</li><li>Read/write coherence: the shared memory should make sure LOAD variable from right thread</li><li>Before-or-after atomicity of multistep LOAD and STORE sequence<ul><li>fact: a 64-bit or 96-bit integer require multiple memory cells</li><li>update in/out will require multiple LOAD/STORE</li></ul></li><li>result of executions is visible to other threads<ul><li>fact: out-of-order, an optimizing processor or compiler reorders statements to achieve better performance</li></ul></li></ol><p>Coordinations will get complicated when one-writer-principle breaks when:</p><ol><li>More than one sender/receiver(multiple sending threads, receiving threads) -&gt; break spin loopsâ€™ assumption</li><li>the bounded buffer is implemented in a different way. Like linked list where the sender and receriver can update a shared variable at the same time.</li></ol><p>Then, these updates need to be coordinated.</p><h3><span id="coordination-of-concurrent-activities">coordination of concurrent activities</span><a href="#coordination-of-concurrent-activities" class="header-anchor">Â¶</a></h3><blockquote><p>Concurrent programming needs the attention of specialists: all it takes is one subtle change to make a correct program wrong.</p></blockquote><p>when sequence coordinations go wrong?</p><p>by removing above assumptions one by one:</p><ol><li><p>race condition: it depends on the exact timing of two threads. The results caused by different scenarios are the same, which is that a particular ordering of the instructions of the threads disrupts the correctness of the program. In our case, it can be ranged from multiple senders to updating long integers required two instructions.</p></li><li><p>before-and-after actions: introduce locks</p><p>The before-and-after atomicity has been realised in many contexts. We should know they describe the same things when using different names. For example, atomicity/atomic actions, isolation/isolated actions, mutual exclusion/critical sections. The idea behind this is to find the race conditions and to avoid it in our systems.</p></li><li><p>deadlock: new problem introduced due to locks</p><img src="/sg/2022/09/27/SD_virtulization/Screenshot-4268665.png" class title="Screenshot-4268665"><p>Rule: enumerate all lock usages and ensure that all threads of the program acquire  the locks in the same order.</p></li><li><p>Livelock:  an interaction among a group of threads in which each thread is repeatedly performing some operations but is never able to complete the whole sequence of operations.</p></li></ol><h3><span id="lock-machanisms">lock machanisms</span><a href="#lock-machanisms" class="header-anchor">Â¶</a></h3><ol><li><p>Single-acquire protocol : only one thread can acquire the lock</p></li><li><p>Multiple-reader, one-writer protocol protocol</p></li></ol><p>Notice: all threads can still access the shared variables unless it is told not to. Instead of mechanically protecting the shared resources, locks serve as a flag to indicate if one thread holds the variable, the other thread should wait for it.</p><p>how to avoid those cases?</p><p>problem:  how the protected shared variables will be used?</p><p>Bootstrapping: Reduce a general problem to some narrower particular version of the same problem. Then solve the narrow problem using special cases. Finally, construct the solution to the general problem which is a mthod for solving the special case and a mthod for reducing problem. (sounds like divide-and-conquer method for me)</p><p>In the case of ACQUIRE:</p><p>making multistep operations on shared variables before-or-after actions</p><p>-&gt; making an operation on a single shared lock a before-or-after action</p><p>-&gt; build a hw instruction that is a before-or-after action</p><p>arbiter: how arbiters can fail? 5.2.8</p><h2><span id="enforce-modularity-in-memory">Enforce modularity in memory</span><a href="#enforce-modularity-in-memory" class="header-anchor">Â¶</a></h2><p>Scenario: enforce mudularity on sharing memory which is assumed to have a large address space.</p><p>Invariant: a thread can access only its references.</p><ul><li><img src="/sg/2022/09/27/SD_virtulization/Screenshot-4283451.png" class title="Screenshot-4283451"></li></ul><p>Threads need more features:</p><ol><li>one thread needs more than one domains</li><li>one thread cannot change to another domain by itself (modularity, it cannot access other threadâ€™s references, aka data)</li></ol><h3><span id="controlled-sharing">controlled sharing</span><a href="#controlled-sharing" class="header-anchor">Â¶</a></h3><ul><li><p>cliend thread and server thread share the bounded buffer.</p><ul><li><img src="/sg/2022/09/27/SD_virtulization/Screenshot-4281799.png" class title="Screenshot-4281799"></li></ul></li><li><p>the trade-offs involved in implementing parts of the memory manager in software 5.4.4</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.033 system design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CS books </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>A Naive View of Career in Storages</title>
      <link href="/sg/2022/08/02/outr_career/"/>
      <url>/sg/2022/08/02/outr_career/</url>
      
        <content type="html"><![CDATA[<p>Update in 21/05/2023: Itâ€™s strange how things turn out to be like this. I have continued working on the project with the QEMU mentorsâ€™ help till now. In all those dark days of the last year, itâ€™s something that gives me strength to go forward.</p><hr><p>Fun fact, I learned the word CAREER from a friend when I was a junior high student and I mistook it for car. Ok, itâ€™s off-topic.</p><p>What you want to do in the five years is a not easy question to answer for most people and so am I. At this stage, I am still trying things and find out what I like according to the experience. Luckily, I grow an interest in open source projects during this internship and decide to take further investigation on storage systems<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> afterwards. That leads to my answer. I would like to be an infrastructure engineer in storage systems and keep working on the open source projects.</p><h2><span id="reality-reviews">Reality reviews</span><a href="#reality-reviews" class="header-anchor">Â¶</a></h2><p>Generally, finding a job in CN is really difficult nowadays due to the pandemic and global economic recession. And finding a job with work life balance is even harder. Less job positions, more people. The situation can get worse in future because of various reasons. I do wish everyone can find the job they like.</p><p>Database is a hot spot and many companies work on it including most of the big domestic techs and several start-ups. As for the jobs related to storages that I know of, excluding the database techs, the handful techs open such positions like ByteDance, databend.</p><p>Finding a job abroad as graduates is a different question to ponder. A friend told me itâ€™s difficult but possible and gave me some examples of success. So I will at least send a resume when I am ready for such interviews.</p><h2><span id="personal-review">Personal review</span><a href="#personal-review" class="header-anchor">Â¶</a></h2><p>I always ask myself one question for those years: Can I do it?  I jumped into the university with the naive belief that I can study computer science by myself. It turns out way harder than I think :) However, studying open courses is fun as you learn more about it. My current goal is to finish some course projects left for so long. It is only for practice purpose since itâ€™s more like toy project.</p><p>On the other side, Iâ€™ve become more confident to take the road I choose. There are some constraints that should not exist not only in school but also in work. In my school, one of the constraints that will not satisfy the threshold of transferring to Computer Science related majors is GPA lower than 3.6(4.0). The list can go on and on. However, I donâ€™t think it can hide peopleâ€™s interests and passion. What defines who we are, I think, is the actions taken and thoughts to change.</p><h2><span id="later-on">Later on</span><a href="#later-on" class="header-anchor">Â¶</a></h2><p>I will be graduated in June in 2023 and plan to work since then. What I am interested is open source jobs related to system programming and storages. Hope I can make it :)</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>I am not sure â€œstorage systemâ€ is a defined word but it is in this <a href="https://course.ece.cmu.edu/~ece746/schedule.html">course page</a> so I just go with it. <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> Outreachy </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Zoned Storage Emulation So Far</title>
      <link href="/sg/2022/08/01/qemu_pj_mid/"/>
      <url>/sg/2022/08/01/qemu_pj_mid/</url>
      
        <content type="html"><![CDATA[<p>Looking back to what Iâ€™ve accomplished so far, it is quite a journey. As for the original internship project timeline, I was thinking too naively about the timeline and took no regard of difficulty of certain project task.</p><p>For the rest of the internship, the major goal is to finish the first part of the original proposal - Extending zoned storage emulation support in virtio-blk device - and get it merged. Besides, I think itâ€™s possible to finish part two - Adding support to NVMe ZNS for guest driver testing - before the project ends. Maybe not if unexpected issues appear :)</p><p>If I were starting the project over, I would ask questions earlier rather than get stuck at sth for a really long time. Itâ€™s important to ask questions, which is a way to investigate more and find out what is wrong or unknown. I read several slides about the block device and QEMU structure, zoned storage website, and codes in virtio-blk.c etc before the internship starts. Itâ€™s not very helpful because I did not know what to ask at first.</p><p>What Iâ€™ve done in last two months is finishing the most of zoned storage emulation, except zone append emulation part. One project task took longer than expected is the zone report emulation. It bothers me that Iâ€™ve taken this long to have a simple workable version. At first, I thought itâ€™s a three-week task after talking to my mentors about the developing plan in the first week. However, I have underestimated a lot of details that can mostly be spotted only during the implementations. Going through the major issues in the last several weeks, I found that:</p><ol><li>set up a full guest VM. &lt;1 week&gt;</li><li>no fake zones -&gt; Use real zoned device information.(methods switching)/right way to test &lt;1 week&gt;</li><li>errors when booting the guest os(driver side, kernel side) -&gt; no errors, the guest os gets stuck &lt;2 weeks&gt;</li><li>fix the issue of the zoned feature bit &lt;1 week&gt;</li></ol><p>The most interesting Iâ€™ve learned so far is to get the device communicate with the guest driver so that the zone report emulation can work. My mentors helped me a lot during the debugging process where Iâ€™ve learned incrementally about what happens exactly in both device side and driver side.</p>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> QEMU </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Zoned Block Devices</title>
      <link href="/sg/2022/07/05/qemu_pj_intro/"/>
      <url>/sg/2022/07/05/qemu_pj_intro/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#brief-introduction">Brief introduction</a><ul><li><a href="#zoned-storage">Zoned storage</a></li><li><a href="#virtio-blk-device">Virtio-blk device</a></li></ul></li><li><a href="#zone-state-machine-apis">Zone state machine &amp; APIs</a></li></ul><!-- tocstop --></div><p>As the <a href="https://www.qemu.org/">homepage</a> says, QEMU is a generic and open source machine emulator and virtualizer. The project Iâ€™ve been working on is adding zoned device support to virtio-blk emulation<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>.</p><p>QEMU is a big project which looks a bit intimidating at first (and afterward :). Itâ€™s also lots of fun investigating different parts to solve problems in the way. Sometimes, I feel like a lousy detective trying to figure out how things fit together. Luckily, my mentors in this project always give me a hand when I am stuck at wrong directions.</p><h2><span id="brief-introduction">Brief introduction</span><a href="#brief-introduction" class="header-anchor">Â¶</a></h2><table><thead><tr><th>Terminology</th><th>Abbr.</th><th>Concept</th></tr></thead><tbody><tr><td>Shingled Magnetic Recording</td><td>SMR</td><td>write data in zones of overlapped tracks</td></tr><tr><td>Perpendicular/Conventional Magnetic Recording</td><td>PMR/CMR</td><td>write data in discrete tracks</td></tr><tr><td>write pointer</td><td>WP</td><td>it points to the lowest LBA(Logic Block Address) that have not been written of that zone</td></tr><tr><td>sequential write required</td><td>SWR</td><td>Host Managed Model(HM): write operations must be sequential</td></tr><tr><td>sequential write preferred</td><td>SWP</td><td>Host Aware Model(HA): unconstrained writes possible</td></tr><tr><td>open zone resource</td><td>OZR</td><td>the open zone resource in a zone block device is limited</td></tr></tbody></table><h3><span id="zoned-storage">Zoned storage</span><a href="#zoned-storage" class="header-anchor">Â¶</a></h3><p>Imagining the shingles in the roof, SMR writes data in a similar overlapping manner.  BY removing the gaps, more data tracks placing on each magnetic surface reflects in wider write head of design. The recording head will advance partial width of one data track after a write. Such overlapping tracks are grouped into zones. The gaps between zones prevents data overwrite from write head changing from one zone to another. (Ignoring-physics version)</p><p>What we want to take advantage of SMR in the project is the SWR property. For example, if LBA <code>x</code>, <code>x+a</code> is in zone 1, we canâ€™t write <code>x+a</code> after write <code>x</code> because it is potentially under another zone. The area dencity of SMR results in higher disk capacity, better erasure coding, reducing adjacent-track interference exposure. Meanwhile, SMR also supports random read like CMR. Therefore SWR is good for data detection and recovery.</p><img src="/sg/2022/07/05/qemu_pj_intro/Screenshot-4060048.png" class title="HDD drives"><p>The main purpose of zoned storage emulation is to let VM Guest OS see a zoned block device file on the Host OS. However QEMU sees the zoned device as regular block device right now. Meanwhile, I should enable guest driver testing in NVMe ZNS so we can test if our previous works and benchmark it, which would be a nice topic for another blog(once I figure out how benmarking works :)</p><p>The cool vision about this project is to enable zoned storage on a regular file. It means VM Guest OS can see a regular file as zoned block device file, which is helpful for development related to zoned storage on a machine without such support. Whereas I have some doubts about the overhead and design of such improvement. For example, why should we emulate such zoned device if it maybe not offer enough performance for using? Again, another topicâ€™s saving later.</p><img src="/sg/2022/07/05/qemu_pj_intro/linux-iopath-3ad49009873f1211b8e873f9ba540a38.png" class title="Linux Zoned block device support overview"><p><sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p><h3><span id="virtio-blk-device">Virtio-blk device</span><a href="#virtio-blk-device" class="header-anchor">Â¶</a></h3><p>Virtio-blk device is a storage controller that presents hostâ€™s block devices to the guest. The structure of storage layers is designed for extensibility and performance. There is a BlockDriverState graph involved with block layers. BlockBackend provides a interface connecting block drivers to other part like qemu-io or virtio-blk device. It has a root pointer points to other nodes in the BlockDriverState graph. Format node and filter node are above protocal node. It is good for adding a BlockDriver inside the big project.</p><p>The overview of the emulation part is: the guest os sends a request of zoned commands which contains parameters to its virtio-blk driver. Then virtio-blk device receives the request which is basically a big chunk of memory and transforms it to the QEMUâ€™s struct so that block layers can execute correlated commands on the zoned block device. After that, we can transform the results to the guestâ€™s struct and send it back.</p><p>I havenâ€™t though through the performance of virtio-blk device brings in though. Roughly speaking, zoned block devices can offer better performance than regular one especially above HDD level.</p><img src="/sg/2022/07/05/qemu_pj_intro/Screenshot-6787937.png" class title="vm overview"> <h2><span id="zone-state-machine-amp-apis">Zone state machine &amp; APIs</span><a href="#zone-state-machine-amp-apis" class="header-anchor">Â¶</a></h2><p>Zone state machine tracks open zone resource of zoned block devices. Sufficient open zone resource are required for open state in HDD. Zone operations will change states in the write pointer zone models.</p><p>The basic structs of zoned block devices handling is: zone_descriptors, zone_dev, zone_report_struct. Other than the five operations ioctl provides, we would like to add zone append write in the emulation.</p><img src="/sg/2022/07/05/qemu_pj_intro/Screenshot-6799625.png" class title="Block I&#x2F;O stack"><p>â€‹<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>The project idea can be found at <a href="https://wiki.qemu.org/Internships/ProjectIdeas/VirtIOBlkZonedBlockDevices">here</a>. <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>The picture is from <a href="https://zonedstorage.io/docs/linux/overview#overview">Damien Le Moalâ€™s website</a>. You can find more about zoned storage from: <a href="https://zonedstorage.io/">https://zonedstorage.io/</a>. <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>It is from a very old 2016 presentation <a href="https://www.snia.org/sites/default/files/SDC/2016/presentations/smr/DamienLeMoal_ZBC-ZAC_Linux.pdf">ZBC/ZAC support in Linux</a>  when the initial SMR support for the kernel was still being developped. The first support release in 2017 (kernel 4.10) ended up being quite different from what this picture shows. E.g., there is no â€œzone cacheâ€ and no â€œworkqueueâ€ for report zones in the kernel.(annotations from Damien) <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> QEMU </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Deep Dive to OCW (Chinese)</title>
      <link href="/sg/2022/06/21/deep_dive_to_ocw/"/>
      <url>/sg/2022/06/21/deep_dive_to_ocw/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#dong-ji">åŠ¨æœº</a><ul><li><a href="#ke-cheng-zi-yuan">è¯¾ç¨‹èµ„æº</a></li><li><a href="#ke-cheng-ping-jie-wang">è¯¾ç¨‹è¯„ä»·ç½‘</a></li></ul></li><li><a href="#sys-basics">Sys basics</a></li><li><a href="#shi-xi">å®ä¹ </a><ul><li><a href="#xing-ye-guan-cha">è¡Œä¸šè§‚å¯Ÿ</a></li><li><a href="#xue-xi-gui-hua">å­¦ä¹ è§„åˆ’</a></li><li><a href="#kai-yuan-huo-dong">å¼€æºæ´»åŠ¨</a></li><li><a href="#yuan-cheng-gong-zuo">è¿œç¨‹å·¥ä½œ</a></li></ul></li><li><a href="#chang-jian-wen-ti">å¸¸è§é—®é¢˜</a><ul><li><a href="#chu-qi">åˆæœŸ</a></li><li><a href="#zhong-qi">ä¸­æœŸ</a></li></ul></li></ul><!-- tocstop --></div><p>å‰è¨€ï¼š<strong>æœ¬æ–‡æ˜¯ä¸€ç¯‡å¯¹ MIT open course ware åŠ MIT ç³»å…¬å¼€è¯¾ç¨‹çš„æ¨å¹¿</strong>ã€‚</p><p>å› ä¸ºæˆ‘ç»å¸¸çœ‹åˆ°ç½‘ä¸Šæœ‰å¯¹ ucb, stanford, harvard å…¬å¼€è¯¾çš„å¼ºæ¨ï¼Œä½†å¾ˆå°‘æœ‰ mit ç³»åˆ—çš„ã€‚ç ç‰åœ¨å‰ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿå†™å‡ºä¸€äº›çœŸå®çš„é—®é¢˜å’Œåˆ†äº«ä¸€äº›ä¸ªäººä½“éªŒã€‚åœ¨è‡ªå­¦è®¡ç®—æœºä¸­ï¼Œæˆ‘å°¤å…¶å—åˆ°ä¸¤ä¸ªäººçš„å½±å“ï¼Œå› æ­¤åšå®šäº†å®è·µï¼ˆlearn things by doingï¼‰æ‰æ˜¯å­¦æ‡‚ä¸€ä»¶äº‹çš„æœ€ä½³é€”å¾„ã€‚å…¶èµ·ç‚¹åˆåˆ†åˆ«æ¥æºäºä¸¤ç¯‡æ–‡ç« ï¼š</p><ol><li>Alex Chiï¼š <a href="https://survivesjtu.gitbook.io/survivesjtumanual/fu-lu/ben-ke-sheng-zhuan-ye-jie-shao-todo/cs-zi-jiu-zhi-bei">CSè‡ªæ•‘æŒ‡åŒ— - SurviveSJTUManual</a></li><li>Hu Jinming: <a href="https://conanhujinming.github.io/post/tips_for_interview/">19CSå°ç¡•æ ¡æ‹›é¢è¯•å¿ƒå¾—ä¸è‡ªå­¦CSç»éªŒåŠæ‰¾å·¥ä½œåˆ†äº« | Jinming Hu</a></li></ol><p>æˆ‘åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­é‡åˆ°äº†è®¸å¤šé—®é¢˜ï¼Œç”±äºæˆ‘æ˜¯ä¸€ä¸ªéå¸¸æ…¢çš„å­¦ä¹ è€…ï¼Œå…¶å®ƒè‡ªå­¦çš„å°ä¼™ä¼´ä»¬èƒ½å¤Ÿæ¯”æˆ‘å¿«å¾ˆå¤šçš„åˆ·ä¸€é—¨å…¬å¼€è¯¾ï¼Œè€Œæˆ‘å´å¸¸å¸¸æ­»ç£•åœ¨ä¸€ä¸ªå‘é‡Œèµ°ä¸å‡ºæ¥ã€‚éå¸¸å¹¸è¿çš„æ˜¯æˆ‘é‡åˆ°äº†ä¸€äº›æœ‹å‹å¸®åŠ©ï¼Œä¸è‡³äºåœ¨è¿™æ¡è·¯ä¸Šæ˜¯å®Œå…¨å­¤ç‹¬æ— åŠ©ã€‚ç„¶è€Œï¼Œè‡ªå­¦å…¬å¼€è¯¾å¹¶ä¸èƒ½ä¿è¯ä¸€ä»½å®Œç¾çš„å·¥ä½œ/å‡ºè‰²çš„ç»©ç‚¹/è®¸å¤šå…¶å®ƒè®¤ä¸ºæœ‰çš„ä¸œè¥¿ã€‚</p><h2><span id="dong-ji">åŠ¨æœº</span><a href="#dong-ji" class="header-anchor">Â¶</a></h2><p><strong>é—®é¢˜1:ä¸ºä»€ä¹ˆè¦è‡ªå­¦ï¼Ÿ</strong></p><p>è¿™æ›´å¤šåªæ˜¯ä¸ªäººçš„å…´è¶£çˆ±å¥½å’Œåå¥½çš„å­¦ä¹ æ–¹å¼ï¼Œå¹¶ä¸æ˜¯å¯¹æœªæ¥ç”Ÿæ´»çš„ä¿è¯ã€‚æ®æˆ‘æ‰€äº†è§£åˆ°çš„ï¼Œâ€œå…¬å¼€è¯¾åªèƒ½ä¿è¯ä¸€ä¸ªäººï¼ˆé¢è¯•è€…ï¼‰çš„ä¸‹é™â€ï¼ˆæ¥è‡ªæŸé¢è¯•å®˜ï¼‰ã€‚åŒæ—¶ï¼Œè®¡ç®—æœºç›¸å…³çš„åŒå­¦æœ‰ä¸å°‘çš„äººæ­£åœ¨è‡ªå­¦è®¡ç®—æœºç³»ç»Ÿæ–¹å‘çš„å‡ é—¨è¯¾ç¨‹ï¼Œæ— è®ºæ˜¯ä½œä¸ºé¢è¯•çš„é¡¹ç›®ï¼Œè¿˜æ˜¯ä½œä¸ºåŸºç¡€å·©å›ºä¸“ä¸šçŸ¥è¯†ã€‚ä¸è¿‡ï¼Œè‡ªå­¦è¿™äº›è¯¾ç¨‹å¯ä»¥æä¾›ä¸€ä¸ªç»§ç»­æ·±å…¥ç›¸å…³é¢†åŸŸçš„åˆ‡å…¥å£ï¼Œæ¢ç´¢è‡ªå·±çœŸæ­£å–œæ¬¢çš„æƒ³ä»äº‹çš„è¡Œä¸šã€‚å°½ç®¡è¿™å¬èµ·æ¥æœ‰äº›å¹¼ç¨šï¼Œæ¯•ç«Ÿæˆ‘è¿˜æ˜¯ä¸ªå°šæœªæ¥å—è¿‡å¤ªå¤šç¤¾ä¼šç›´æ¥æ‘§æ®‹çš„å¤§å­¦ç”Ÿï¼Œä½†è¿™å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä¸ªå€¼å¾—åæ€å›é¡¾çš„èµ·ç‚¹ã€‚</p><p><strong>é—®é¢˜2: ä»€ä¹ˆæ˜¯è‡ªå­¦ï¼Ÿ</strong></p><p>æˆ‘è®¤ä¸ºè‡ªå­¦å°±æ˜¯æŒ‡ä¸€ä¸ªäººèƒ½å¤Ÿå»å­¦ä¹ è‡ªå·±æ„Ÿå…´è¶£çš„ä»»ä½•ä¸œè¥¿ã€‚ç”±äºç–«æƒ…çš„å½±å“ï¼Œ2020 åçš„å…¬å¼€è¯¾é›¨åæ˜¥ç¬‹èˆ¬å¾—å‡ºç°ã€‚å¯¹è‹¦å­¦æ ¡è€æ—§çš„åŸ¹å…»ä½“ç³»å·²ä¹…çš„å¹¿å¤§å¤§å­¦ç”Ÿæ¥è¯´ç®—æ˜¯ä¸ªç¦éŸ³ã€‚OCW çš„ä¸åŒåœ¨äºå…¶é•¿æœŸä»¥æ¥å¯¹æ•™è‚²å…¬å¹³çš„ä¿ƒè¿›ã€‚åœ¨åŒ—ç¾çš„è¯¸å¤šé«˜æ ¡ä¸­ï¼ŒMIT çš„ CS è¯¾ç¨‹ æ— ç–‘æ˜¯åœ¨è¿™ä¸€æ–¹é¢åšå‡ºæœ€å¤šçš„ï¼Œå…¶æœ€å¤§ç¨‹åº¦çš„å¼€æ”¾äº†ç›¸å…³èµ„æºè®©å…¨ä¸–ç•Œçš„äººéƒ½èƒ½å­¦ä¹ åˆ°é¡¶å°–çš„è¯¾ç¨‹ã€‚</p><p><strong>é—®é¢˜3: æ€ä¹ˆè‡ªå­¦ï¼Ÿ</strong></p><p>æˆ‘è®¤ä¸ºå­¦ä¹ æ˜¯ä¸€ä»¶æ¯”è¾ƒç§äººçš„äº‹ï¼Œæ¯ä¸ªäººæœ‰ ta é€‚åˆçš„å­¦ä¹ æ–¹æ³•ï¼Œå­¦ä¹ ä¹ æƒ¯ã€‚æˆ‘æ›´æƒ³ä»‹ç»ä¸€äº›åœ¨å­¦ä¹ ä¸­é‡åˆ°çš„é—®é¢˜ã€‚</p><h3><span id="ke-cheng-zi-yuan">è¯¾ç¨‹èµ„æº</span><a href="#ke-cheng-zi-yuan" class="header-anchor">Â¶</a></h3><p>å…ˆç®€è¦ä»‹ç»ä¸€ä¸‹ MIT ç³»çš„å…¬å¼€è¯¾ç¨‹æ¥æºæœ‰ï¼š</p><ol><li><a href="https://ocw.mit.edu/">OCW</a>: ä¸»è¦å…¬å¼€è¯¾æ¥æºã€‚æœ€è¿‘æ”¹ç‰ˆåçš„ OCW çš„äº®ç‚¹åœ¨äºæœç´¢åŠŸèƒ½æ›´å¼ºäº†ã€‚æ’ç‰ˆçš„æ”¹è¿›å’Œ MIT å…¶å®ƒçš„å…¬å¼€è¯¾å­¦ä¹ å¹³å°é£æ ¼ï¼ˆedx é£æ ¼ï¼‰å·®ä¸å¤šäº†ã€‚</li><li><a href="https://mitxonline.mit.edu/">MITx</a> å’Œ <a href="https://openlearning.mit.edu/courses-programs/open-learning-library">MIT Open Learning Library | Open Learning</a> ï¼šä½œä¸º ocw å’Œ edx ä¸Šéƒ¨åˆ†è¯¾ç¨‹çš„å­˜æ¡£ï¼Œä½œä¸ºå¯¹ edx ä¸Šæœ‰æ—¶æœŸé™åˆ¶çš„è¯¾ç¨‹çš„è¡¥å……ã€‚</li><li>ç›´æ¥çš„è¯¾ç¨‹ç½‘é¡µã€‚MIT å¤§éƒ¨åˆ† CS è¯¾ç¨‹éƒ½æœ‰ç‹¬ç«‹çš„è¯¾ç¨‹ä¸»é¡µï¼Œå¹¶ä¸”æœ‰ä¸å°æ•°é‡æ˜¯å¼€æ”¾çš„ã€‚æˆ‘åœ¨å¤§ä¸€ä¸‹æ—¶ç»å¸¸æ²¡äº‹å°±æ ¹æ® <a href="http://catalog.mit.edu/degree-charts/computer-science-engineering-course-6-3/">6-3 è¯¾ç¨‹è®¡åˆ’</a>å»æœä¸€ä¸‹ç›¸å…³è¯¾ç¨‹ï¼Œäº†è§£ä¸€ä¸‹ä¹‹åæƒ³å­¦ä»€ä¹ˆã€‚è™½ç„¶å½“æ—¶æˆ‘ä¸»è¦åœ¨ edx çœ‹ç¼–ç¨‹åŸºç¡€ï¼Œæ•°å­¦ç±»ï¼Œç‰©ç†ï¼ŒåŒ–å­¦ï¼Œç”Ÿç‰©çš„è¯¾ç¨‹ã€‚</li><li><a href="https://stellar.mit.edu/classlink/course6.html">Stellar: Electrical Engineering and Computer Science (Course 6)</a> : æ¯ä¸ªå­¦æœŸå¼€è®¾çš„è¯¾ç¨‹å•å­ã€‚æ— æ„ä¸­æœåˆ°çš„ä¸€ä¸ªç½‘é¡µï¼Œæœ‰ public æ˜¾ç¤ºçš„ä¼šå¼€æ”¾éƒ¨åˆ†èµ„æºã€‚ä¸è¿‡å¤§éƒ¨åˆ†è¯¾ç¨‹éƒ½æ˜¯ä»…é™æ ¡å†…çš„ï¼Œé™¤äº† 6.006 å‡ ä¹ä¼šæŠŠæ¯å­¦æœŸçš„è¯¾ç¨‹èµ„æ–™éƒ½æ”¾åœ¨ä¸Šé¢ä»¥å¤–ã€‚</li></ol><p>ä¸ªäººè®¤ä¸ºä¸€é—¨é€‚åˆè‡ªå­¦çš„è¯¾ç¨‹è‡³å°‘éœ€è¦å…·å¤‡çš„æ¡ä»¶æ˜¯ï¼Œæœ‰ lecture videos + recitations + hw + solutionsã€‚å¹´ä»£æ˜¯å¦æœ€è¿‘å¾—å…·ä½“çœ‹è¯¾ç¨‹è´¨é‡ï¼Œæ¯”å¦‚æˆ‘è®¤ä¸º 6.006 ç®—æ³•è¯¾å°±æ˜¯ 10 ç‰ˆæœ¬è®²å¾—æ¯” 20 ç‰ˆæœ¬çš„æ›´å¥½ï¼Œå°¤å…¶æ˜¯ recitation éƒ¨åˆ†ï¼ŒåŠ©æ•™è®²çš„ä¸œè¥¿ä»ç„¶æ˜¯ç°åœ¨äººä»¬æ‰€çœ‹é‡çš„é—®é¢˜ã€‚ä½†ä½œä¸šæœ€å¥½åšæœ€è¿‘ç‰ˆæœ¬çš„ã€‚</p><h3><span id="ke-cheng-ping-jie-wang">è¯¾ç¨‹è¯„ä»·ç½‘</span><a href="#ke-cheng-ping-jie-wang" class="header-anchor">Â¶</a></h3><p>è™½ç„¶ç°åœ¨çŸ¥ååº¦æ›´é«˜çš„æ˜¯ä¸€ä½åŒ—å¤§åŒå­¦çš„ <a href="https://csdiy.wiki/">CS è‡ªå­¦æŒ‡å—</a>ï¼Œä½†å…¶å®è¿˜æœ‰ä¸€ä»½å†…å®¹æ›´è¯¦å®çš„<a href="https://conanhujinming.github.io/comments-for-awesome-courses/">åæ ¡å…¬å¼€è¯¾ç¨‹è¯„ä»·ç½‘</a>ã€‚åœ¨è¿™ä¸¤ä¸ªé¡¹ç›®åˆæœŸéƒ½æœ‰äº›äº†è§£ï¼Œå‰è€…çš„ç›®æ ‡æ˜¯å¸Œæœ›åŒå­¦èƒ½å¤Ÿè®¾è®¡å‡ºè‡ªå·±çš„è¯¾ç¨‹è®¡åˆ’æ–¹æ¡ˆï¼Œå»æ¢ç´¢ä¸ªäººå…´è¶£ã€‚è€Œåè€…çš„ç›®æ ‡æ˜¯ä¸ºäº†ç»™ä¹‹åè‡ªå­¦çš„åŒå­¦æŒ‡å‡ºä¸€äº›å‘å’Œåˆé€‚çš„å­¦ä¹ æ–¹å¼ã€‚</p><h2><span id="sys-basics">Sys basics</span><a href="#sys-basics" class="header-anchor">Â¶</a></h2><p>åˆšå¼€å§‹å¾ˆéš¾çŸ¥é“æƒ³åšå“ªä¸ªæ–¹å‘ï¼Œä½†ä¸å»è¯•è¯•ä½ ä¸ä¼šçŸ¥é“è‡ªå·±çœŸæ­£æƒ³è¦çš„ä¸œè¥¿ã€‚æˆ‘åœ¨åˆšå‡å­¦æ—¶åªæ˜¯å¤§è‡´åšå®šæƒ³å­¦è®¡ç®—æœºï¼Œä½†å…·ä½“æ˜¯ä»€ä¹ˆæˆ‘å¹¶ä¸æ¸…æ¥šï¼Œå¤§å­¦å‰ä¸¤å¹´å°è¯•äº†ä¸€äº›äº‹ä»¥åŠå’ŒåŒä¼´èŠäº†å¾ˆä¹…åæ‰é€æ¸æœ‰äº†æ¨¡ç³Šçš„æ–¹å‘æ„Ÿã€‚å¤§ä¸€æˆ‘ä¸»è¦æ˜ç™½ç§‘å­¦è®¡ç®—å’Œè½¯ä»¶å·¥ç¨‹å®Œå…¨æ˜¯ä¸¤ä¸ªä¸åŒçš„æ–¹å‘ã€‚è€Œä¸”ï¼Œç›¸æ¯”åº”ç”¨ï¼Œæˆ‘å¯¹çº¯æ•°å­¦ç†è®ºæ²¡æœ‰å¤ªå¤§å…´è¶£ã€‚å½“æ—¶æˆ‘è¿˜è·Ÿé£ç©äº†çŸ­æš‚æ—¶é—´çš„ WolframAlpha å’Œ ä¸€äº›åˆ«çš„è®¡ç®—è½¯ä»¶ã€‚</p><p>ä¸€ä¸ªæ¯”è¾ƒæœ‰æ•ˆåˆ¤æ–­æ˜¯å¦å¯¹æŸé—¨è¯¾ç¨‹æ„Ÿå…´è¶£çš„æ–¹å¼å°±æ˜¯å¬å®Œç¬¬ä¸€èŠ‚è¯¾å’Œå®Œæˆç¬¬ä¸€ä»½ä½œä¸šã€‚å¦‚æœåœ¨ç¬¬ä¸€èŠ‚è¯¾å°±æ‰“çŒç¡ï¼Œé‚£å¯èƒ½è¿™é—¨è¯¾ç¨‹å¹¶ä¸æ˜¯å¾ˆåˆé€‚æ·±å…¥äº†è§£ã€‚å¤§ä¸€ä¸‹æˆ‘æ‰“çŒç¡çš„è¯¾åˆ†åˆ«æœ‰ï¼šè¯»å…¬æ­£çš„è¯¾åé˜…è¯»ï¼Œå¾®è§‚ç»æµå­¦ï¼Œä¿®è¾å­¦ï¼Œç”Ÿç‰©å¯¼è®ºï¼Œè®¡ç®—æ€ç»´å¯¼è®ºï¼Œç»Ÿè®¡å­¦ï¼›å¤§äºŒä¸Šæœ‰æœºå™¨å­¦ä¹ ï¼ˆpythonï¼‰ã€‚</p><p>æ— æ³•å®Œæˆä¸€é—¨å…¬å¼€è¯¾æ˜¯ä¸€ä»¶æ­£å¸¸çš„äº‹ã€‚åœ¨ä¸åŒé˜¶æ®µæ€»ä¼šæœ‰ä¸€äº›ç‰¹åˆ«çš„åŸå› å¯¼è‡´è¿™ç§åœæ»ï¼Œå› äººè€Œå¼‚ã€‚è¿™å¹¶ä¸ä»£è¡¨æ™ºå•†ä½ä¸‹ï¼Œè€Œæ˜¯è¿™äº›äº‹æƒ…çš„ç†è§£å­¦ä¹ æœ¬æ¥å°±éœ€è¦æ—¶é—´ï¼Œå°¤å…¶æ˜¯åœ¨è‡ªå­¦æ—¶ã€‚æˆ‘å¾ˆå–œæ¬¢çš„ç§¯æå¿ƒç†å­¦çš„ä¸€å¥è¯ï¼š</p><blockquote><p>Learn to fail, or fail to learn.</p></blockquote><p>åŒæ ·çš„ï¼Œè¿™äº›é—®é¢˜ç”±è‡ªå·±å†³å®šæ˜¯å¦èƒ½å¤Ÿè§£å†³ã€‚ä¸€ä¸ªç†æƒ³çš„æƒ…å†µæ˜¯ï¼šè¿™ä¸ªè¯¾é‡Œçš„ lab éƒ½ä¼šåšï¼Œbug freeã€‚å½“çœ‹åˆ°å…¶å®ƒäººèƒ½å¾ˆå¿«çš„åšå®Œä¸€é—¨è¯¾çš„è¯¾ç¨‹é¡¹ç›®æ—¶éš¾å…å°±ä¼šæ€€ç–‘è‡ªå·±ã€‚è¿™ç§æ€€ç–‘å¯ä»¥ä»æ™ºå•†ï¼Œå­¦å†æ°´å¹³ï¼Œæ•°å­¦èƒ½åŠ›ï¼Œå‰ç½®çŸ¥è¯†åˆ°æ— åŠ©æ”¾å¼ƒã€‚</p><p>æˆ‘å¯¹ç ”ç©¶ä¸€ä¸ªå¤æ‚ç³»ç»Ÿæœ‰å¾ˆå¤§çš„å…´è¶£ã€‚å› æ­¤æˆ‘ä¹Ÿå¸Œæœ›è‡ªå·±èƒ½å¤Ÿç‹¬ç«‹åœ°çœŸæ­£å­¦å¥½ä¸€é—¨è¯¾ç¨‹ã€‚</p><h2><span id="shi-xi">å®ä¹ </span><a href="#shi-xi" class="header-anchor">Â¶</a></h2><p>é¦–å…ˆï¼Œæœ¬äººåœ¨å„æ–¹é¢éƒ½æ˜¯ä¸€ä¸ªå°ç™½ï¼Œä»¥ä¸‹æ›´å¤šæ˜¯åˆ†äº«ä¸€äº›è¿™ä¸ªæš‘å‡å‰åçš„å­¦ä¹ è®¡åˆ’å’Œå¯¹è¡Œä¸šçš„ä¸€ç‚¹çœ‹æ³•ã€‚ç§‘æŠ€è¡Œä¸šèŒä¸šå‘å±•çš„æ–¹å‘æŒºå¤šçš„ï¼Œç”±äºæˆ‘ç›®å‰å¯¹å­˜å‚¨ç³»ç»Ÿæœ€æ„Ÿå…´è¶£ï¼Œä¼šä¸»è¦è®²è¿°è¿™ä¸ªæ–¹å‘ç›¸å…³çš„æƒ³æ¢ç´¢çš„å®ä¹ æ–¹å‘ã€‚åŒæ—¶ï¼ŒåŒé¾„äººä¸­åšæ•°æ®åº“æ–¹å‘çš„äººä¹ŸæŒºå¤šçš„ï¼Œä¹Ÿä¼šè°ˆä¸€äº›éå¸¸ç²—æµ…çš„æƒ³æ³•ã€‚</p><h3><span id="xing-ye-guan-cha">è¡Œä¸šè§‚å¯Ÿ</span><a href="#xing-ye-guan-cha" class="header-anchor">Â¶</a></h3><p>å¯¹å­˜å‚¨ç³»ç»Ÿï¼ˆè½¯ä»¶æ–¹å‘ï¼‰æ›´æ„Ÿå…´è¶£ã€‚æˆ‘è®¤ä¸ºè‡³å°‘å¯ä»¥ä»ä¸‰ä¸ªæ–¹å‘æµ‹è¯•å’Œå­¦ä¹ è¿™ä¸€æ–¹å‘ã€‚</p><ol><li>storage device (current state)</li><li>database storage engines</li><li>cloud storage</li></ol><p>å­˜å‚¨æ„Ÿè§‰åˆ°èƒŒåæ€»ä¼šäº¤é›†åœ¨æŸä¸ªåœ°æ–¹ï¼Œå…³é”®æ˜¯è¦æŠŠç®€å•çš„äº‹åšå¯¹ï¼Œè€Œä¸æ˜¯é‡å¤åšæŸä¸€ä»¶äº‹ã€‚æœ€è¿‘å‘ç°è¿™ä¸ªå®ä¹ é¡¹ç›®èƒŒåå’Œå¦ä¸€äº›ç†Ÿæ‚‰çš„äººçš„å·¥ä½œè¿æ¥èµ·æ¥ï¼Œè§‰å¾—å¾ˆå·§åˆã€‚</p><details open style="display: block; position: relative; outline: none; color: rgb(34, 34, 34); font-family: Helvetica, Arial, sans-serif; font-size: 15.008px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="display: block; outline: none; cursor: pointer;"><span>&nbsp;</span>5</summary><p style="display: block; line-height: 27.0144px; margin-bottom: 10px;">æœ‰æ—¶å€™æ¯”è¾ƒç¾¡æ…•åˆ«äººèƒ½å¤Ÿé‚£ä¹ˆå¿«å°±ç¡®å®šæŠ•å…¥ä¸€ä¸ªè¡Œä¸šæ–¹å‘ï¼Œæœ‰å¾ˆå¤šåŒé¾„äººå»ä»äº‹æ•°æ®åº“å¼€å‘æ–¹å‘äº†ï¼Œåœ¨ä¸€äº›åˆåˆ›å…¬å¸åšå†…æ ¸å¼€å‘ã€‚æ¯”å¦‚ç°åœ¨ä¼—å¤šäººéƒ½å‘å¾€çš„ s å‚ï¼ˆsingularity data) æˆé•¿å¾—å°±å¾ˆå¿«å’Œ p ç¤¾ï¼ˆPingcap)ã€‚ç»å¸¸å¬åˆ°æœ‰äººè¯´æ•°æ®åº“å¼€å‘æ˜¯å¯ä»¥åšå¾ˆä¹…çš„è¡Œä¸šã€‚ä½†æˆ‘ç›®å‰å¯¹æ•°æ®åº“æ²¡æœ‰å¤ªå¤§çš„åå¥½ã€‚çœ‹äº†ä¸€äº›åœ¨ç›¸å…³å‚å·¥ä½œå‡ å¹´åè®°å½•å·¥ä½œçš„æ–‡ç« ï¼Œæˆ‘å¯¹è¿™æ ·çš„ç”Ÿæ´»æ²¡æœ‰ç‰¹åˆ«å‘å¾€ã€‚</p></details><details open style="display: block; position: relative; outline: none; color: rgb(34, 34, 34); font-family: Helvetica, Arial, sans-serif; font-size: 15.008px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="display: block; outline: none; cursor: pointer;"><span>&nbsp;</span>6/21: update</summary><p style="display: block; line-height: 27.0144px; margin-bottom: 10px;">åœ¨å’Œä¸€äº›äººèŠè¿‡åè±ç„¶å¼€æœ—ï¼Œå‰æœŸæˆ‘ä¸ç”¨å¤ªçº ç»“äºå…·ä½“åšç³»ç»Ÿç¼–ç¨‹çš„å“ªä¸ªæ–¹å‘ï¼Œåšå­˜å‚¨å¯èƒ½æ²¡æœ‰ææ•°æ®åº“çš„äººçœ‹èµ·æ¥å…‰é²œäº®ä¸½ï¼Œä½†åªè¦æ˜¯è‡ªå·±å–œæ¬¢åšçš„äº‹ï¼Œæ‰èƒ½æ›´é•¿ä¹…åœ°å‘å±•ã€‚</p></details><h3><span id="xue-xi-gui-hua">å­¦ä¹ è§„åˆ’</span><a href="#xue-xi-gui-hua" class="header-anchor">Â¶</a></h3><details open style="display: block; position: relative; outline: none; color: rgb(34, 34, 34); font-family: Helvetica, Arial, sans-serif; font-size: 15.008px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><summary style="display: block; outline: none; cursor: pointer;"><span>&nbsp;</span>22/5/28ï¼š</summary><p style="display: block; line-height: 27.0144px; margin-bottom: 10px;">å…¶å®å†™è¿™ç¯‡æ–‡æœ‰éƒ¨åˆ†åŸå› æ˜¯å¯¹ä¸‹å‘¨ä¸€å¼€å§‹çš„å®ä¹ æ„Ÿåˆ°æœ‰äº›å®³æ€•ã€‚æ–°çš„ç”Ÿæ´»æ€»æœ‰ä¸€äº›æ‹…å¿§çš„é—®é¢˜ï¼Œæ–°çš„äº¤æµï¼Œè®¤è¯†æ›´å¤šçš„äººã€‚ä¸è¿‡ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™æ ·ï¼Œæˆ‘èƒ½å¤Ÿåœ¨è¿™ä¸‰ä¸ªæœˆé‡Œå°½æˆ‘æ‰€èƒ½åœ°å»å­¦ä¹ æ–°çš„ä¸œè¥¿ï¼Œææ‡‚ä¹‹å‰æ²¡æ‡‚çš„ä¸œè¥¿ã€‚æ¯”èµ·çŠ¯é”™ï¼Œæ›´ç³Ÿç³•çš„æ˜¯è‡ªä»¥ä¸ºæ²¡é”™ã€‚æ—©å‘ç°é—®é¢˜æ‰èƒ½æ—©è§£å†³ã€‚</p></details><h3><span id="kai-yuan-huo-dong">å¼€æºæ´»åŠ¨</span><a href="#kai-yuan-huo-dong" class="header-anchor">Â¶</a></h3><p>ç°åœ¨æ¯”è¾ƒæ´»è·ƒçš„å¼€æºæ´»åŠ¨æœ‰ï¼šGSOC, Outreachy, CNCF, OSPP(å¼€æºä¹‹å¤), MLFx, Pingcapâ€™s talent planã€‚</p><p>æœ€è¿‘æœ‰ä¸ªå°å°çš„æ„Ÿè§¦ï¼Œåœ¨è¿™äº›æ´»åŠ¨ä¸­å¥³æ€§æ¯”ä¾‹å¥½å°‘ã€‚ä»Šå¹´ GSOC ä¸­é€‰äººé‡Œæœ‰æ˜¾ç¤ºçš„å¤§æ¦‚ä½äº10%ã€‚åœ¨è§‚å¯ŸæŸä¸ªè¡Œä¸šæ–¹å‘çš„æŠ€æœ¯ä»ä¸šäººå‘˜æ—¶ï¼Œæˆ‘ä¹Ÿå‡ ä¹æ²¡çœ‹åˆ°å¥³æ€§å¼€å‘è€…çš„å­˜åœ¨ã€‚</p><p>å¼€æºæ´»åŠ¨çœŸçš„éå¸¸ç¥å¥‡ï¼Œä¸€ä¸ªå¥½çš„é¡¹ç›®èƒŒåèšé›†çš„æ˜¯æ¥è‡ªå…¨ä¸–ç•Œçš„ä¸“ä¸šäººæ‰ï¼Œä¸åŒæ—¶åŒºåœ°ç‚¹è´¡çŒ®ä»£ç ã€‚</p><h3><span id="yuan-cheng-gong-zuo">è¿œç¨‹å·¥ä½œ</span><a href="#yuan-cheng-gong-zuo" class="header-anchor">Â¶</a></h3><p>æˆ‘è®¤ä¸ºå·¥ä½œæœ€é‡è¦çš„æ˜¯æ•ˆç‡è€Œä¸æ˜¯æ€¼æ—¶é•¿ã€‚æˆ‘è¿˜åœ¨é€‚åº”è¿™ç§å·¥ä½œæ–¹å¼ï¼Œç›®å‰çš„è®¤ä¸ºæ¯”è¾ƒåˆç†çš„æ—¶é—´åˆ†é…æ˜¯ï¼š9-12ï¼Œ12-1ï¼ˆåˆé¥­ï¼‰ï¼Œ1-6ã€‚ä¹‹åçš„é—®é¢˜å°±æ˜¯å¦‚ä½•èƒ½å¤Ÿåˆ©ç”¨è¿™æ®µæ—¶é—´é«˜æ•ˆåœ°å®Œæˆä»»åŠ¡ã€‚ç„¶è€Œå®é™…æ‰§è¡Œä¸­ï¼Œæ—¶é—´å®‰æ’ä¼šæ›´åŠ çµæ´»ï¼Œå¯èƒ½ä¸€å¤©å¾ˆå¿™ä¸€å¤©å¾ˆé—²ï¼Œçœ‹è‡ªå·±æ€ä¹ˆåˆ†é…å·¥ä½œäº†ã€‚</p><h2><span id="chang-jian-wen-ti">å¸¸è§é—®é¢˜</span><a href="#chang-jian-wen-ti" class="header-anchor">Â¶</a></h2><h3><span id="chu-qi">åˆæœŸ</span><a href="#chu-qi" class="header-anchor">Â¶</a></h3><p>é—®é¢˜1: å­¦ä»€ä¹ˆï¼Ÿ</p><p>å­¦ä¹ æ˜¯ä¸€ä»¶éœ€è¦æŠ•å…¥æ—¶é—´ç²¾åŠ›çš„äº‹ï¼Œæˆ‘ä¸€ç›´è®¤ä¸ºå…´è¶£æ˜¯æœ€å¥½çš„è€å¸ˆã€‚åœ¨åˆšå¼€å§‹å¯¹è¿™ä¸ªä¸“ä¸šè¿˜ä¸€æ— æ‰€çŸ¥æ—¶ï¼Œæˆ‘ä»¬ä¼šå€¾å‘äºçœ‹åˆ«äººå°¤å…¶æ¨èçš„ã€‚æ¯”å¦‚ <a href="https://github.com/izackwu/TeachYourselfCS-CN">TeachYourselfCS-CN</a>ï¼Œ<a href="https://github.com/ossu/computer-science-cn">Open Source Society University</a>ï¼Œæˆ–è€…çŸ¥ä¹ä¸ŠæŸç¯‡åˆ—ä¸¾äº†å„ä¸ªåŒ—ç¾æŸæ ¡è¯¾ç¨‹åçš„æ–‡ç« ã€‚è¿™äº›æ¨èå†…å®¹æœ‰ä¸€ä¸ªé—®é¢˜ï¼šåˆ—ä¸¾çš„è¯¾ç¨‹å¤ªå¤šè€Œæ²¡æœ‰å®é™…ç»éªŒï¼Œé‡Œé¢çš„å‘æ²¡æœ‰è¯´æ˜ã€‚è€Œè¯¾ç¨‹è¯„ä»·ç½‘å¯ä»¥ç»™å‡ºæ¯”è¾ƒè´´åˆå®é™…æƒ…å†µçš„è¯„è¿°ï¼Œå› ä¸ºå¤§å¤šæ•°äººæ˜¯è‡ªå·±ä¸Šæ‰‹å»åšäº†è¯¾ç¨‹é¡¹ç›®çš„ï¼Œåœ¨ä¸»é¡µä¸­ä¹Ÿè¯¦ç»†è¯´æ˜äº†å¯èƒ½çš„é—®é¢˜ã€‚</p><p>é—®é¢˜2: é‡åˆ°è‡ªå·±éš¾ä»¥è§£å†³çš„é—®é¢˜æ€ä¹ˆåŠï¼Ÿ</p><p>è”ç³»å’Œäº¤æµã€‚å’Œäº†è§£è¿™æ–¹é¢çš„äººäº¤æµï¼Œé—®å¯¹é—®é¢˜ã€‚</p><h3><span id="zhong-qi">ä¸­æœŸ</span><a href="#zhong-qi" class="header-anchor">Â¶</a></h3><p>é—®é¢˜1: å­¦å®Œä¸€é—¨å…¬å¼€è¯¾çš„æ ‡å‡†ï¼Ÿ</p><p>åˆšå¼€å§‹æˆ‘ä»¥ä¸ºå­¦å®Œä¸€é—¨è¯¾æŒ‡çš„æ˜¯åšæ¯ä¸€é“ç»ƒä¹ é¢˜ï¼Œçœ‹æ¯ä¸€é¡µè¯¾åé˜…è¯»ï¼Œæœ€åç»“æœå°±åƒèƒŒå•è¯åªèƒŒabandon ä¸€æ ·ã€‚å°¤å…¶æ˜¯åœ¨é‡åˆ°ä¸ä¼šçš„é¢˜ï¼Œå—æŒ«æ„Ÿç›´çº¿ä¸Šå‡ï¼Œå¯¼è‡´å¾ˆé•¿çš„åœæ»ã€‚æˆ‘å¤±è´¥å­¦å®Œçš„å…¬å¼€è¯¾å®åœ¨æ˜¯æœ‰ç‚¹å¤šäº†ï¼Œå› ä¸ºä¸åŒçš„åŸå› ã€‚</p><p>å¦ä¸€ä¸ªè¯¯åŒºå°±æ˜¯è¿‡é«˜çš„æ ‡å‡†ä¸‹æ²¡æœ‰åˆé€‚çš„æ€è€ƒé—®é¢˜çš„æ–¹å¼ã€‚æ¯”å¦‚æˆ‘æœ‰æ®µæ—¶é—´åœ¨æƒ³å†™ binary search tree æ—¶ï¼Œè¯•äº†å‡ éä¸å¯¹æˆ‘å°±å¼€å§‹æ€€ç–‘è‡ªå·±å¤ªå‚»äº†ï¼ŒèŠ±äº†è¿™ä¹ˆé•¿æ—¶é—´æ²¡ä»€ä¹ˆè¿›å±•ã€‚ä½†å…¶å®åœ¨å†™è¿˜ä¸ç†Ÿæ‚‰çš„ä¸œè¥¿æ—¶ï¼Œ test drive development æ‰æ˜¯æ¯”è¾ƒå¥½çš„æ–¹å¼ã€‚æˆ‘å½“æ—¶ä¼°è®¡è¿åŸºæœ¬çš„è¯­æ³•ç»“æ„éƒ½æ²¡ææ¸…æ¥šâ€¦â€¦</p><p>é—®é¢˜2: æ€æ ·æ‰ç®—å­¦å¥½ä¸€é—¨è¯¾ï¼Ÿæ¯”å¦‚èƒ½å¤Ÿå†™åœ¨ç®€å†çš„è¯¾ç¨‹é¡¹ç›®ã€‚</p><p>é€šè¿‡æœ€è¿‘çš„å®ä¹ ç›¸å¯¹å®Œæ•´å¾—è¿‡äº†ä¸€éå®Œæˆä¸€ä¸ªä¸­ç­‰é¡¹ç›®ï¼ˆ450+150hï¼‰æµç¨‹ï¼Œæˆ‘å‘ç°äº†ä¸€äº›è‡ªå·±ä¹‹å‰ç†è§£æœ‰åå·®çš„åœ°æ–¹ï¼Œæ¢³ç†å¦‚ä¸‹ã€‚</p><ol><li>å…ˆè¿›è¡Œç›¸å¯¹ç®€å•çš„ä»»åŠ¡ï¼Œå½“å¯¹ä¾æ‰˜çš„é¡¹ç›®ä¸å¤ªäº†è§£æ—¶ã€‚å¥½å¤„æ˜¯å¯ä»¥åœ¨éš¾åº¦ä¸å¤ªé«˜çš„ä»»åŠ¡ä¸­ç†Ÿæ‚‰æ‰€éœ€ç†è§£çš„éƒ¨åˆ†ç»“æ„ã€‚ç„¶åå†å®Œæˆç›¸å¯¹å›°éš¾çš„ä»»åŠ¡æ—¶ï¼Œä¸å¿…å†ç»å†ä¸€éä¸ç†Ÿæ‚‰æŸäº› callback çš„å‘ã€‚</li><li>é˜…è¯»å…ˆä»æ„Ÿå…´è¶£çš„éƒ¨åˆ†å¼€å§‹ã€‚ä½œä¸ºæœ‰ç‚¹å›¤ç§¯ç‹‚çš„äººï¼Œæˆ‘ç»å¸¸æ‰”ä¸€å †ä¸œè¥¿åˆ°æ”¶è—å¤¹ï¼Œä½†å¤§éƒ¨åˆ†å†…å®¹åªæ˜¯è‰è‰åœ°ç•¥è¯»äº†ä¸€ä¸‹ï¼Œå¹¶æ²¡æœ‰å¤ªå¤šæ·±å…¥çš„æ€è€ƒã€‚æœ€è¿‘æƒ³å‡ºäº†ä¸€ä¸ªåŠæ³•æˆ–è®¸å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé€‰æ‹©è‡ªå·±æœ€æ„Ÿå…´è¶£çš„ä¸€ä¸ªä¸»é¢˜ï¼Œç›¸å…³çš„èµ„æ–™ï¼ˆåŒ…å«ä»£ç ï¼Œç»ƒä¹ ç­‰ï¼‰å¯ä»¥æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œï¼Œç„¶åé›†ä¸­æ—¶é—´é˜…è¯»å­¦ä¹ ã€‚ç„¶åå¯ä»¥é™„ä¸€ä¸ª topic_log.md åœ¨ç›¸åŒè·¯å¾„ä¸‹ã€‚</li><li>åšè¯¾ç¨‹é¡¹ç›®ï¼ˆåªé€‚ç”¨äº lab é—´æ²¡æœ‰ä¾é æ€§ï¼‰å¯ä»¥è·³è·ƒå¼åœ°é€‰æ‹©æ„Ÿå…´è¶£çš„ä»»åŠ¡å…ˆå®Œæˆã€‚åŒæ ·çš„ï¼Œæœ€è¿‘æ‰“ç®—è¯•è¯•è¿™æ ·èƒ½å¦è§£å†³æŒ¤å‹çš„å¤ªå¤šè¯¾ç¨‹ä»»åŠ¡ã€‚</li><li>åšè¯¾ç¨‹é¡¹ç›®çš„è¿‡ç¨‹åŒæ ·æ˜¯å­¦ä¹ æ ·ä¾‹ï¼Œtest case çš„è¿‡ç¨‹ã€‚ç‹¬ç«‹æ€è€ƒå¾ˆé‡è¦ï¼Œä½†ä»å­¦è¿™äº›ï¼ˆä¸æ˜¯è¯´æŠ„è¢­ï¼‰å¼€å§‹å¯ä»¥æ›´å¥½åœ°å»¶ä¼¸æ€è€ƒï¼Œä¸ç„¶è€å¡åœ¨ä¸€ä¸ª taskï¼ˆåœ¨è¯´æˆ‘è‡ªå·±ï¼‰ã€‚</li><li>åœ¨å¼€å§‹ä¸€ä¸ªè¾ƒå¤§çš„é¡¹ç›®æ—¶ï¼Œé™¤äº†æ€è€ƒå¤§è‡´çš„ä»»åŠ¡éœ€è¦å®Œæˆå“ªäº›ï¼ˆè®¾è®¡ï¼‰ä»¥å¤–ï¼Œåœ¨å¼€å§‹å…¥æ‰‹å®ç°æ—¶å¯ä»¥å…ˆæ€è€ƒä¸€ä¸ªæœ€å°çš„å¯ä»¥å®ç°æµ‹è¯•çš„å•å…ƒ (Test driven development)ã€‚æ¯”è¾ƒå¥½æŸ¥ bug</li></ol><p>é—®é¢˜3: å½“å­¦ä¹ å…¬å¼€è¯¾ç¨‹æ—¶ï¼Œæˆ‘ä»¬åœ¨å­¦ä»€ä¹ˆï¼Ÿ</p><p>è¿‘ä¸€å¹´æŠ•å…¥åˆ°æŸä¸ªå¼€æºé¡¹ç›®ä¸‹çš„æŸä¸ªä»»åŠ¡ä¸­ï¼Œå‡ºç°è¿‡å‡ æ¬¡é†é†çŒé¡¶çš„æ—¶åˆ»ï¼Œçªç„¶å°±ç†è§£äº†ä¹‹å‰è§‰å¾—éå¸¸ç”Ÿç¡¬çš„ç†è®ºå’Œå®šä½åˆ°æ›´å°çš„é—®é¢˜ã€‚å­¦ç³»ç»Ÿç±»è¯¾ç¨‹åº”è¯¥ä¹Ÿå’Œå®ç°ä»»åŠ¡æœ‰åŒæ ·çš„æ€è·¯å’Œæ–¹æ³•ï¼Œè¡¡é‡æ ‡å‡†ä¸ºé€šè¿‡æµ‹è¯•ï¼Œä½†æ¯ä¸ªäººç¼ºå¤±çš„éƒ¨åˆ†å’Œå¯¹è¿‡ç¨‹çš„é¢†ä¼šéƒ½æ˜¯ä¸åŒçš„ã€‚å¦‚æœæˆ‘ä¸çŸ¥é“è‡ªå·±åœ¨å­¦ä»€ä¹ˆï¼Œå°±å¾ˆéš¾ç»§ç»­è¿›è¡Œä¸‹å»ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> OCW </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>A Vocabulary Term</title>
      <link href="/sg/2022/06/17/outr_vocab/"/>
      <url>/sg/2022/06/17/outr_vocab/</url>
      
        <content type="html"><![CDATA[<p>Looking back, the first vocabulary term that comes to mind is â€œbuilding from source.â€ Throughout the application process, I was required to compile a new kernel and library from source. Though I was unfamiliar with the term, I figured it couldnâ€™t be that difficult to look it up on Google.</p><p>The goal of this task is to allow QEMU to use new liburing APIs, which requires a new kernel that supports them. At the start of the application process, I was hesitant to ask the mentors at QEMU. All of them are senior engineers. A stupid question could make me look bad. It would be better if I tried every method I could find first.</p><p>The most difficult problem I encountered was when I thought I understood the issue but facts revealed otherwise. During that time, I had several misunderstandings:</p><ol><li>Debugging the Linux kernel rather than compiling a host kernel.</li><li>Building a gues os image rather than a host kernel from source.</li><li>Researching io uring in QEMU/Linux.</li><li>Installing a liburing package (v2.0) rather than compiling it from source.</li></ol><p>I thought the QEMU development environment was proper. So I moved to next step which is io uring testing. I couldnâ€™t figure out how the testing framework in QEMU fit together. So I attempted to contact Roosh, the former intern working on io uring support in QEMU. Though it can be intimidating to connect with people, I canâ€™t think of a better way to figure out my problems. She was very nice and recommended that I try Fedora Linux, which makes building a kernel much easier.</p><p>The misunderstandings lingered on. After seeking assistance from the mentors at QEMU, I finally understood the real issue of the task. The seeking graph was as follows<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-&gt; gdb/tracing problems? </span><br><span class="line">-&gt; Nope! </span><br><span class="line">-&gt; Kernel problem(#1,#2) found</span><br><span class="line">-&gt; Kernel set. Still not working </span><br><span class="line">-&gt; liburing version check</span><br><span class="line">-&gt; Package built. Still not working</span><br><span class="line">-&gt; liburing problem found(#4)</span><br><span class="line">-&gt; Build from source. Right version. Still not working</span><br><span class="line">-&gt; Compilation error. </span><br><span class="line">-&gt; Change to newest liburing.git. Working.</span><br></pre></td></tr></table></figure><p>It is difficult to determine whether or not to ask questions. During my internship, I am experiencing the same issue, and my mentors provide me with sound advice. Donâ€™t be afraid to ask if you spend more than an hour researching or debugging something. The sooner we can find problems, the better we will be able to solve them.</p><p>One concern about asking questions at open source events is what we can give back to those who help us all the time. I believe the answer is to do our best to contribute to the community.</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>The details can be found in my previous blog: <a href="https://sgzerolc.github.io/sg/2022/04/15/qemu-develop/">Begginnerâ€™s Guide to Setting up QEMU Devel Env</a>. <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> Outreachy </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Applying to Outreachy</title>
      <link href="/sg/2022/06/03/outr_intro/"/>
      <url>/sg/2022/06/03/outr_intro/</url>
      
        <content type="html"><![CDATA[<p>Hi there :)</p><p>Iâ€™m Sam Li, a Chinese junior student studying computer science on my own. The first two years were especially difficult for me because I had to balance my course plan and school courses, and I had many failures to find the right way to study a CS course. However, along the way, I met several friends who share my interests and we have a lot of fun talking about it. Thatâ€™s where I first learned about open source organizations, which eventually led me to GSOC and Outreachy.</p><p>It is a great honor for me to be chosen by QEMU for Outreachy 2022, and it is the happiest moment of my life thus far. Besides, Iâ€™ve had the best mentors in the world. At the start of the application process, I assumed that this journey would help me develop my characters. Several changes have occurred in my life during the first week of work. I start running again, and I run a little longer each day. Moreover, I have a more consistent schedule for working remotely. In comparison to the time when I was very shy in public speaking, I am now more open to communicating with others. It may not always be very productive. But, thanks to the mentorsâ€™ help, I believe I am on the right track.</p><p>There is more to my personality. I enjoy reading history and science fiction. Itâ€™s fascinating how history depicts the past while science fiction depicts the future, both of which reflect some reality for the present. Dead Poets Society is my favorite film. Iâ€™m always disappointed by the endings and Neilâ€™s fate. Civilization VI is a game that I enjoy playing. Itâ€™s a turn-based board game in which you can shape the path of the civilization.</p><p>Authenticity, meaningful work, and adventure are three of my core values.</p><p>My values are built on the foundation of authenticity. Honesty, in my opinion, is the best way to treat people. Itâ€™s also how I handle things. I canâ€™t stand untruths and would rather get to the bottom of it. The desire to discover what things really are prevents me from giving up when I face adversity. And here I am, in this project, to learn system programming.</p><p>Meaningful work is also very important to me. Whatâ€™s the point of doing something if youâ€™re not proud of it? There are various criteria that vary depending on the individual. For me, Iâ€™ve discovered an interest in storage systems, and Iâ€™ll try to figure out what specific goal I want to achieve in the internship before graduating from university.</p><p>I feel alive when Iâ€™m on an adventure. Most of the time, adventure entails risks. I am not interested in following the mainstream, where some people believe that a higher degree automatically solves some life problems, such as the high unemployment rate in these years. So I give up something in order to figure out what I really want to do with my life. It may sound naive, but I really want to see more of the world, either geographically or professionally. Iâ€™d like to thank Roosh, Zhi Guo, and all of my mentors Stefan, Damien, Hannes, and Dmitry for their support and guidance along the way, as well as Outreachy for this opportunity.</p>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> Outreachy </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>&lt;OS Lab Notes</title>
      <link href="/sg/2022/05/20/os_xv6/"/>
      <url>/sg/2022/05/20/os_xv6/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#lab1-unix-utilities">Lab1 unix utilities</a><ul><li><a href="#primes">primes</a></li><li><a href="#find">find</a></li><li><a href="#xargs">xargs</a></li></ul></li><li><a href="#lab2-syscalls">Lab2 syscalls</a><ul><li><a href="#trace">trace</a></li><li><a href="#sysinfo">sysinfo</a></li></ul></li><li><a href="#lab3-page-tables">Lab3 page tables</a><ul><li><a href="#print-pt">print pt</a></li><li><a href="#kernel-page-table">kernel page table</a></li><li><a href="#copyin">copyin</a></li></ul></li><li><a href="#tool">Tool</a><ul><li><a href="#valgrind">valgrind</a></li><li><a href="#address-sanitizer">address sanitizer</a></li><li><a href="#c">C</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="lab1-unix-utilities">Lab1 unix utilities</span><a href="#lab1-unix-utilities" class="header-anchor">Â¶</a></h2><h3><span id="primes">primes</span><a href="#primes" class="header-anchor">Â¶</a></h3><p>Problem: run commands in pipeline</p><p>Few gaps I didnâ€™t think straight for the first time:</p><ul><li><p>Write process tree: pass array as input<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pass ints to pipe</span></span><br><span class="line">write(fd, &amp;<span class="type">int</span>, <span class="keyword">sizeof</span> <span class="type">int</span>);</span><br></pre></td></tr></table></figure></li><li><p>Pipe usage: the meaning of â€œcreate one process that reads from its left neighbor over a pipe and writes to its right neighbor over another pipeâ€ is as follows. Thinking about a pipeline like a | b | c, the process is read from pipe(a_to_b) and write(b_to_c). Donâ€™t forget to <code>pipe</code> the int array before using the pipe.</p></li><li><p>Understood this we could break this lab into two parts, the main part feeds numbers to a function which will produce primes from the numbers. Feeding is in the parent process and function execution is in the child process. In this way, the function can share the parentâ€™s data memory and they can run simultaneously.</p></li><li><p>Fd resources: fds are limited.<br><u>Read blocks until it is impossible for new data to arrive (book).</u><br>Princle: close file descriptors that a process doesnâ€™t need.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (fork() == <span class="number">0</span>) &#123;</span><br><span class="line">    close(<span class="number">0</span>);</span><br><span class="line">    dup(numbers[<span class="number">0</span>]);</span><br><span class="line">    close(numbers[<span class="number">1</span>]);</span><br><span class="line">    getPrimes(numbers);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    close(numbers[<span class="number">0</span>]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; i &lt;= RANGE; ++i) &#123;</span><br><span class="line">        write(numbers[<span class="number">1</span>], &amp;i, <span class="keyword">sizeof</span>(i));</span><br><span class="line">    &#125;</span><br><span class="line">    close(numbers[<span class="number">1</span>]);</span><br><span class="line">    wait(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Leaves of the process tree: hang because read blocks somehow.</p></li></ul><h3><span id="find">find</span><a href="#find" class="header-anchor">Â¶</a></h3><p>c basics: <a href="https://stackoverflow.com/questions/18481740/pointer-expressions-ptr-ptr-and-ptr">++, pointer</a></p><ul><li>value of ++p is p after the increment, value of p++ is p before the increment,</li><li>*ptr++, *(ptr++), first dereferences the pointer, then increments the pointer<br>*++ptr, first increments the pointer, then dereferences the pointer<br>++*ptr, first dereferences the pointer, then increments dereferenced value</li><li><a href="https://stackoverflow.com/questions/24853/what-is-the-difference-between-i-and-i">i++ vs ++i</a><br>â€œ++iâ€ is known as the pre-increment operator, which increments the value of â€˜iâ€™ immediately and returns the incremented value. On the other hand, â€œi++â€ is known as the post-increment operator, which increments the value of â€˜iâ€™ but returns the original value that â€˜iâ€™ held before being incremented (from codeforce answers).</li></ul><h3><span id="xargs">xargs</span><a href="#xargs" class="header-anchor">Â¶</a></h3><p>c basics: <a href="https://stackoverflow.com/questions/8824057/pointer-to-string-array-in-c">string array</a></p><ul><li>r/w in low level, read char to lines</li><li>int getline(char line[], int lim); int readlines(char *lineptr[], int maxlines);<br>Btw, the â€œmany $â€ sentence is an explanation not a bug.</li></ul><h2><span id="lab2-syscalls">Lab2 syscalls</span><a href="#lab2-syscalls" class="header-anchor">Â¶</a></h2><p>Create a syscall in xv6: uapp.c -&gt; user.h -&gt; <s>user/usys.pl</s> usys.S -&gt; <code>ecall</code>| -&gt; syscall -&gt; process</p><h3><span id="trace">trace</span><a href="#trace" class="header-anchor">Â¶</a></h3><p>Problem: what is a trace?</p><p>Trace is a user call helping to track one particular syscall in the execution process.<br>Problem: whatâ€™s the relation between sys_call and sys_proc?</p><h3><span id="sysinfo">sysinfo</span><a href="#sysinfo" class="header-anchor">Â¶</a></h3><p>Itâ€™s easy to overlook the spelling error. One bracket makes you question about everything:)</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (copyout(myproc()-&gt;pagetable, addr, (<span class="type">char</span> *)&amp;info, <span class="keyword">sizeof</span>(info) &lt; <span class="number">0</span>); <span class="comment">// off-by-one-bracket error</span></span><br><span class="line"><span class="keyword">if</span> (copyout(myproc()-&gt;pagetable, addr, (<span class="type">char</span> *)&amp;info, <span class="keyword">sizeof</span>(info)) &lt; <span class="number">0</span>);  <span class="comment">// correct one</span></span><br></pre></td></tr></table></figure><h2><span id="lab3-page-tables">Lab3 page tables</span><a href="#lab3-page-tables" class="header-anchor">Â¶</a></h2><h3><span id="print-pt">print pt</span><a href="#print-pt" class="header-anchor">Â¶</a></h3><p>You canâ€™t write it without knowing the page table implementation in xv6. At first, it needs a simple and straightforward solution and then optimize it. I was thinking about using iteration or recursion, which took a while.</p><h3><span id="kernel-page-table">kernel page table</span><a href="#kernel-page-table" class="header-anchor">Â¶</a></h3><ol><li>problem: When to start paging? -&gt; page table set up: panic</li><li>Hypothesis:<ul><li>Traps due to missing mappings</li><li>scheduler</li></ul></li><li>Experiment:<ul><li>modify allocproc: seems correct</li><li>modify scheduler: move around w_satp, errors occur -&gt; scheduler goes wrong</li></ul></li><li>Problem 1: how scheduler goes wrong? -&gt; Key point: context switching (thanks to @GuoZhi)<ul><li><code>pit</code>: Problem 2: why truncate2 OK but truncate3 not? -&gt; We shouldnâ€™t be worried if we can get grade part ok. And itâ€™s time to move to real problem.</li><li>aside: Problem 3: lost some freepages in kernmem</li></ul></li><li>Observations:<ul><li>Allocproc sets up one processâ€™s kernel stack</li></ul></li></ol><h3><span id="copyin">copyin</span><a href="#copyin" class="header-anchor">Â¶</a></h3><p>Task: add user mappings to user processâ€™s kernel page table</p><ol><li>Problem: when user mappings  are changed in <code>exec</code> ? what should be done in <code>exec</code> ?</li><li>Hypothesis:</li><li>Experiment:<ul><li><code>pit</code>: no need to change copyin_new yet. The task is to make it work.</li></ul></li><li>Predictions:</li><li>Observations:</li></ol><h2><span id="tool">Tool</span><a href="#tool" class="header-anchor">Â¶</a></h2><h3><span id="valgrind">valgrind</span><a href="#valgrind" class="header-anchor">Â¶</a></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">valgrind -leak-resolution=high -leak-check=full -show-reachable=yes -track-fds=yes ./program</span><br></pre></td></tr></table></figure><img src="/sg/2022/05/20/os_xv6/p2.png" class title="p2"><h3><span id="address-sanitizer">address sanitizer</span><a href="#address-sanitizer" class="header-anchor">Â¶</a></h3><p>flags.</p><h3><span id="c">C</span><a href="#c" class="header-anchor">Â¶</a></h3><ol><li><a href="https://stackoverflow.com/questions/4437527/why-do-we-use-the-volatile-keyword">volatile</a> means variables can be changed from outside the program which compiler is not aware of.</li><li>function pointer: void (*func)())</li></ol><p>Qemu 5.1<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>, Mac m1, Riscv-toolchain 10.1</p><p>6.s081 20fall labs</p><img src="/sg/2022/05/20/os_xv6/step-by-step-debugging.png" class title="step-by-step-debugging"><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>stuck for a long time due to not very familiar with C in 21/03/20 <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>build from source. Configure prefix to /opt/qemu. More can be found <a href="https://github.com/BASARANOMO/xv6-labs-2020/issues/1">here</a>. <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.s081 operating systems </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Programming Lab Reports</title>
      <link href="/sg/2022/05/14/ex_python/"/>
      <url>/sg/2022/05/14/ex_python/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#lab1">Lab1</a></li><li><a href="#lab-2-snekoban">Lab 2 snekoban</a></li></ul><!-- tocstop --></div><p>goal: design and implement data structures in labs and practice python programming</p><h2><span id="lab1">Lab1</span><a href="#lab1" class="header-anchor">Â¶</a></h2><p>Problem: correlation</p><h2><span id="lab-2-snekoban">Lab 2 snekoban</span><a href="#lab-2-snekoban" class="header-anchor">Â¶</a></h2><p>Problem 0: why assertion in test fails while it can run correctly in the GUI?</p><p>Answer: do not modify the input game.</p><p>time: stuck for one hour</p><p>where (goes wrong): Figured out in assertionErrors in vscode: somehow the pytest in pycharm lost the critical information: modify the input game type</p><p>Experiment 1: disable the assertions for checking modifications</p><p>Result: passed all the basic tests.</p><p>Experiment 2: is dict deep copied?</p><p>Result: no. It turns out that dict(some_dict) or some_dict.copy() is shallow copy. Deep copy should use copy.deepcopy(some_dict) or be a lamb :) to copy every element in the dict.</p><p>Thus it solves the problem.</p>]]></content>
      
      
      <categories>
          
          <category> programming </category>
          
          <category> 6.009 programming </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Flash SSD Operations</title>
      <link href="/sg/2022/04/28/storages_ssd_op/"/>
      <url>/sg/2022/04/28/storages_ssd_op/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#nand-flash-ssds">Nand Flash SSDs</a><ul><li><a href="#basics">basics</a></li><li><a href="#performance">performance</a></li><li><a href="#garbage-collection">garbage collection</a></li><li><a href="#mapping-table">mapping table</a></li><li><a href="#wear-leveling">wear leveling</a></li></ul></li><li><a href="#disk-drive-modeling">Disk drive modeling</a></li></ul><!-- tocstop --></div><h2><span id="nand-flash-ssds">Nand Flash SSDs</span><a href="#nand-flash-ssds" class="header-anchor">Â¶</a></h2><h3><span id="basics">basics</span><a href="#basics" class="header-anchor">Â¶</a></h3><ol><li><p>Terminology in flash: banks consist of blocks; and blocks consist of pages.</p><ul><li>banks/planes: consist of a large number of cells</li><li>blocks: size 128 KB or 256 KB</li><li>pages: size 4 KB</li><li>cell level<ul><li>one level: store a single bit into a transistor(1/0)</li><li>multi-level: store two bits into different levels of charge(00/01/10/11)â€¦ etc</li></ul></li></ul><ul><li><p>Flash-based SSDs</p><ul><li>Flash translation layer(FTL)</li><li>Logical block address(LBA)</li></ul></li></ul></li><li><p>basic flash operations</p><ul><li>Read(a page)</li><li>Erase(a block)</li><li>Program(a page)</li></ul></li><li><p>Page has state: <code>INVALID</code>, <code>ERASED</code>, <code>VALID</code></p></li><li><p>raw flash performance</p><ul><li>device property: <strong>a page can be written until the entire block first be erased.</strong></li><li>Given above property: program-erase cycle<ol><li>latency: we should move data that is about to be erased to another place.</li><li>Problem of reliability: wear out</li></ol></li></ul></li><li><p>FTL organization</p><ul><li>direct mapped: an operation to logical page N is mapped to physical page N.<ul><li>Bad: causing the flash constantly overwritten and worn out eventually</li></ul></li><li>log structured: in-memory mapping table<ul><li>Good:use logging to speedup recovery</li></ul></li></ul></li></ol><h3><span id="performance">performance</span><a href="#performance" class="header-anchor">Â¶</a></h3><p>Performance problem:</p><ol><li><p>Flash operation: erase &gt;&gt; program(10*) &gt;&gt; read (10*)</p><ul><li>How to improve:<ol><li>parallel</li><li>reduce write amplification</li></ol></li></ul></li><li><p><u>garbage collection</u>(Log-structured FTL): old versions of data takes over the space.</p><p>Overwritten -&gt; garbage data -&gt; data migration</p></li><li><p>high cost of in-memory <u>mapping table</u>(Log-structured FTL)</p></li></ol><p>Riliability problem:</p><ol><li><p>Wear out</p><p>(Head crash in mechanical disk in contrast)</p><ul><li><u>wear leveling</u>: spread writes across the blocks evenly</li></ul></li><li><p>Disturbance: When accessing a page within a flash, some bits can get flipped in neighboring pages.</p><ul><li>sequential programming: write pages in order can reduce the disturbance.</li></ul></li></ol><h3><span id="garbage-collection">garbage collection</span><a href="#garbage-collection" class="header-anchor">Â¶</a></h3><p>â€¦</p><h3><span id="mapping-table">mapping table</span><a href="#mapping-table" class="header-anchor">Â¶</a></h3><h3><span id="wear-leveling">wear leveling</span><a href="#wear-leveling" class="header-anchor">Â¶</a></h3><h2><span id="disk-drive-modeling">Disk drive modeling</span><a href="#disk-drive-modeling" class="header-anchor">Â¶</a></h2><p>os view of storage device: linear array of logical blocks.</p>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> storage systems </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Programming Excercises in CSAPP</title>
      <link href="/sg/2022/04/23/ex_cpp/"/>
      <url>/sg/2022/04/23/ex_cpp/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#ps0">Ps0</a></li><li><a href="#sec-1">Sec 1</a></li><li><a href="#ps1-a-debugging-memory-allocator">Ps1: a debugging memory allocator</a></li></ul><!-- tocstop --></div><h2><span id="ps0">Ps0</span><a href="#ps0" class="header-anchor">Â¶</a></h2><p>seems nice.</p><h2><span id="sec-1">Sec 1</span><a href="#sec-1" class="header-anchor">Â¶</a></h2><ol><li><p>canâ€™t call ++it when it == container.end(), otherwise segmentation fault.</p></li><li><p>Prefer ++i than i++</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">i = <span class="number">1</span>;</span><br><span class="line">j = ++i; <span class="comment">//(i is 2, j is 2)</span></span><br><span class="line">   </span><br><span class="line">i = <span class="number">1</span>;</span><br><span class="line">j = i++; <span class="comment">// (i is 2, j is 1)</span></span><br></pre></td></tr></table></figure></li></ol><h2><span id="ps1-a-debugging-memory-allocator">Ps1: a debugging memory allocator</span><a href="#ps1-a-debugging-memory-allocator" class="header-anchor">Â¶</a></h2><p>Context:</p><ol><li>malloc is not perfect and can fail due to various reasons such as size was too big/memory is exhausted/â€¦</li><li>undefined behavior: any program that invokes undefined behavior has no meaning.</li></ol><p>Syntax:</p><ol><li><p>const</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// const pointer point to const member function which takes const pointer </span></span><br><span class="line"><span class="comment">// to a const int. The last const means this is a const member function</span></span><br><span class="line"><span class="comment">// (can&#x27;t modify variables of the this instance)</span></span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">int</span>* <span class="type">const</span> <span class="title">myClassMethod</span><span class="params">(<span class="type">const</span> <span class="type">int</span>* <span class="type">const</span> &amp; param)</span> <span class="type">const</span></span>; </span><br></pre></td></tr></table></figure></li><li><p>type casting</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// internal metadata</span></span><br><span class="line">std::unordered_map&lt;<span class="type">uintptr_t</span>, <span class="type">size_t</span>&gt; payload;</span><br><span class="line">payload.<span class="built_in">insert</span>(&#123;(<span class="type">uintptr_t</span>)ptr, sz&#125;);</span><br></pre></td></tr></table></figure></li></ol><p>Problem:</p><ol><li>How to count the allocations?<ul><li>augmentation</li></ul></li><li>When will allocation fail?<ul><li>Stuck for two hours. I thought I could not modify funcation signature(return type). Therefore I overlooked the right direction.</li><li><s>?relation in heap max address and failed allocations.</s> Answer: when malloc fails, base_alloc(malloc) will return a nullptr, which is the usual case.</li></ul></li><li>allocated address of heap: overlap with other regions<ul><li>Key: heap_first</li><li>Answer: should set heap_min only once</li></ul></li></ol><p>Design:</p><ol><li>Basic version:<ul><li>use hash table(pointer value/address: size)</li><li>bounded metadata: last N freed allocations, and set N = 10.<ul><li>should check size once updates data</li></ul></li></ul></li><li>augmentation: use a struct</li></ol><img src="/sg/2022/04/23/ex_cpp/Screenshot-3286619.png" class title="Screenshot-3286619"><p>Problem:</p><ol><li>where to put metadata?<ul><li>global use</li></ul></li><li>How to bound metadata?<ul><li>First, what is bounded metadata?<ul><li>ex: a <em>bounded</em> amount of metadata about freed allocations, such as statistics or a list of the last N freed allocations.</li></ul></li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> programming </category>
          
          <category> cs 61 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Beginner&#39;s Guide to Setting up QEMU Devel Env</title>
      <link href="/sg/2022/04/15/qemu-develop/"/>
      <url>/sg/2022/04/15/qemu-develop/</url>
      
        <content type="html"><![CDATA[<p>Example: test io_uring.c in QEMU</p><p>Environment: Fedora 35</p><p>It requires a host<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup> os having a new kernel, QEMU and liburing.git(one specific version).</p><p><strong>build the kernel from source</strong>:</p><p>various mistakes can arrive when installing new kernel from source. However, there are certain steps requiring more attention.</p><p>When I found a seemly <a href="https://www.cyberciti.biz/tips/compiling-linux-kernel-26.html">good tutorial</a> and tried it: Read error message to know which type of error and google it.</p><ol><li><p>security check in config file(this part is literally killing me :): you can disable security check by <a href="https://askubuntu.com/questions/1329538/compiling-the-kernel-5-11-11">modifying config file</a>.</p><p>If you meet a SSL error when <code>make modules_install</code> like me after disabling the security check above and discover that <a href="https://askubuntu.com/questions/820883/how-to-resolve-ssl-error-during-make-modules-install-command">sign file missing</a>, you may check  <code>CONFIG_SYSTEM_TRUSTED_KEYS='certs/signing_key.pem'</code> and remake again.</p></li><li><p>Orders of make commands:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">make menuconfig</span><br><span class="line">make -j 8</span><br><span class="line">make modules</span><br><span class="line">make bzImage</span><br><span class="line">sudo make modules_install</span><br><span class="line">sudo make install</span><br><span class="line">sudo kernel-install add &lt;version&gt; /boot/vmlinuz-&lt;version&gt;  <span class="comment"># Fedora linux</span></span><br></pre></td></tr></table></figure></li></ol><p><strong>build QEMU from source</strong>: Follow the documentation</p><p><strong>build liburing from source:</strong> After this step, liburing support can be found in config with version 2.2 and QEMU should run correctly.</p><ol><li><p>check a few things before <code>make install</code>:</p><ul><li><p>right kernel version:  <code>uname -ra</code> -&gt; <code>5.17-rc7</code></p></li><li><p>No liburing package(liburing and liburing-devel) installed</p></li></ul></li><li><p>Orders of commands: configure it first</p><p>after fetching liburing.git:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./configure --libdir=/usr/lib64 --libdevdir=/usr/lib64  <span class="comment"># /usr/lib for Ubuntu Linux</span></span><br><span class="line">make &amp;&amp; sudo make install</span><br></pre></td></tr></table></figure></li></ol><p>It should work by now.</p><p><strong>Qemu:</strong></p><p>it is better to know common commands to trace, debug, test.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># default setting:</span></span><br><span class="line">x86_64-softmmu/qemu-system-x86_64 -m 512 --enable-kvm</span><br><span class="line"></span><br><span class="line"><span class="comment"># create img:</span></span><br><span class="line">./qemu-img create -f qcow2 test.qcow2 16G</span><br><span class="line">./qemu-img create test.img 2G</span><br><span class="line"></span><br><span class="line"><span class="comment"># add test</span></span><br><span class="line">path/to/qemu-system-x86_64 -m 1024 -enable-kvm -drive <span class="keyword">if</span>=virtio,file=path/to/test.img,format=raw,aio=io_uring,cache=none</span><br><span class="line"></span><br><span class="line"><span class="comment"># trace</span></span><br><span class="line"><span class="comment"># want to trace: ioq_*, luring_*, qemu_luring_* and write into txt files.</span></span><br><span class="line">./configure --target-list=x86_64-softmmu --enable-kvm --enable-debug --enable-trace-backends=simple</span><br><span class="line"><span class="comment"># in qemu dir:</span></span><br><span class="line">path/to/qemu-system-x86_64 -m 1024 -enable-kvm -drive <span class="keyword">if</span>=virtio,file=path/to/test.img,format=raw,aio=io_uring,cache=none --trace events=reach.txt</span><br><span class="line"><span class="comment"># gdb</span></span><br><span class="line">gdb -q --args path/to/qemu-system-x86_64 -drive file=test.img,<span class="keyword">if</span>=virtio,aio=io_uring --enable-kvm -smp 2 -m 1G</span><br></pre></td></tr></table></figure><p><strong>Err log:</strong></p><p>I have met a lot of issues<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup> when setting up the enviroument. Luckily, the mentors of QEMU are very good and patient to go through this with me.</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>it should be noticed that the host and guest in QEMU stand for. QEMU host is where QEMU runs and guest is to run on QEMU. In QEMUâ€™s term, â€œâ€“enable-kvmâ€ ensures QEMU is running on the host and â€œ-kernelâ€ implies a guest os running. <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>Attach a <a href="https://gist.github.com/sgzerolc/9a142bcc544fa13819db523397898685">log</a> here. I will reorganize it when outreachy application term finishes. <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> QEMU </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šå­™å­å…µæ³•è¯‘æ³¨ã€‹â€”â€”è¯»è®°</title>
      <link href="/sg/2022/04/15/read_art_of_war/"/>
      <url>/sg/2022/04/15/read_art_of_war/</url>
      
        <content type="html"><![CDATA[<blockquote><p>çŸ¥å½¼çŸ¥å·±ï¼Œç™¾æˆ˜ä¸æ®†ï¼›ä¸çŸ¥å½¼è€ŒçŸ¥å·±ï¼Œä¸€èƒœä¸€è´Ÿï¼›ä¸çŸ¥å½¼ï¼Œä¸çŸ¥å·±ï¼Œæ¯æˆ˜å¿…æ®†ã€‚ ï¼ˆ3ï¼Œ20ï¼‰</p></blockquote><p>know yourself ä¸ç®¡åœ¨å“ªéƒ½æ˜¯æ°¸æ’çš„è¯é¢˜ã€‚</p><blockquote><p>æ˜”ä¹‹å–„æˆ˜è€…ï¼Œå…ˆä¸ºä¸å¯èƒœï¼Œä»¥å¾…æ•Œä¹‹å¯èƒœã€‚ä¸å¯èƒœåœ¨å·±ï¼Œå¯èƒœåœ¨æ•Œã€‚</p><p>æ•…å–„æˆ˜è€…ï¼Œèƒ½ä¸ºä¸å¯èƒœï¼Œä¸èƒ½ä½¿æ•Œä¹‹å¿…å¯èƒœã€‚</p><p>æ•…æ›°ï¼šèƒœå¯çŸ¥ï¼Œè€Œä¸å¯ä¸ºã€‚</p><p>ä¸å¯èƒœè€…ï¼Œå®ˆä¹Ÿï¼›å¯èƒœè€…ï¼Œæ”»ä¹Ÿã€‚å®ˆåˆ™ä¸è¶³ï¼Œæ”»åˆ™æœ‰ä½™ã€‚</p><p>å–„å®ˆè€…ï¼Œè—äºä¹åœ°ä¹‹ä¸‹ã€‚å–„æ”»è€…ï¼Œè—äºä¹å¤©ä¹‹ä¸Šã€‚</p><p>æ•…èƒ½è‡ªä¿è€Œå…¨èƒœä¹Ÿã€‚   ï¼ˆ4ï¼Œ21ï¼‰</p></blockquote><p>æ”»å®ˆæ˜¯æ ¹æ®è‡ªå·±çš„å¼ºå¼±å†³å®šçš„ã€‚ä¸è¿‡æˆ˜äº‰å’Œå†³ç­–ä¸åŒçš„æ˜¯ï¼Œæˆ˜äº‰è¦å‡å°‘æŸä¼¤ï¼Œè€Œå†³ç­–çš„æˆæœ¬ç›¸å¯¹æ›´ä½ã€‚æ‰€ä»¥æˆ˜äº‰è¦å…¨èƒœï¼Œè€Œå†³ç­–è¦è€ƒè™‘ç»“æœçš„é‡è¦æ€§ã€‚</p><blockquote><p>å¤ä¹‹æ‰€è°“å–„æˆ˜è€…ï¼Œèƒœäºæ˜“èƒœè€…ä¹Ÿã€‚æ•…å–„æˆ˜è€…ä¹‹èƒœä¹Ÿï¼Œæ— æ™ºåï¼Œæ— å‹‡åŠŸã€‚æ•…å…¶æˆ˜èƒœä¸å¿’ã€‚</p><p>ä¸å¿’è€…ï¼Œå…¶æ‰€æªå¿…èƒœï¼Œèƒœå·²è´¥è€…ä¹Ÿã€‚</p><p>æ•…å–„æˆ˜è€…ï¼Œç«‹äºä¸è´¥ä¹‹åœ°ï¼Œè€Œä¸å¤±æ•Œä¹‹è´¥ä¹Ÿã€‚</p><p>æ˜¯æ•…èƒœå…µå…ˆèƒœè€Œåæ±‚æˆ˜ï¼Œè´¥å…µå…ˆæˆ˜è€Œåæ±‚èƒœã€‚ï¼ˆ4ï¼Œ22ï¼‰</p></blockquote><p>è¿™é‡Œæ˜¯è¯´è¦å…ˆæœ‰å–èƒœçš„å½¢ï¼Œè€Œå½¢æ¥è‡ªäºæˆ˜å‰éƒ¨ç½²ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> read </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>IO_uring&#39;s API and Implementation in QEMU</title>
      <link href="/sg/2022/04/08/qemu_iouring/"/>
      <url>/sg/2022/04/08/qemu_iouring/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#qemu-structures">Qemu structures</a></li><li><a href="#brief-introducation">brief introducation</a></li><li><a href="#api">API</a></li><li><a href="#implementation">Implementation</a></li></ul><!-- tocstop --></div><h2><span id="qemu-structures">Qemu structures</span><a href="#qemu-structures" class="header-anchor">Â¶</a></h2><table><thead><tr><th>Terminology</th><th>Concept</th></tr></thead><tbody><tr><td>Protocols</td><td>file system, block device, NBD, Ceph, gluster</td></tr><tr><td>virtio</td><td>behave like a memory-mapped register bank, different register layout</td></tr><tr><td>Network cards</td><td>e1000 card on the PCI bus</td></tr><tr><td>Host formats</td><td>raw, qcow2, qed, vhdx</td></tr></tbody></table><ol><li><p>what?</p><p>QEMU is a virtual machine trying to emulate OS without actual hw so as to run multiple OS in single machine.</p></li><li><p>why?</p><p>The general purpose of virtual machine is to trick the guest os that it is running on the real host os. Qemu is designed to manage this big memory to achieve better formance in emulation.</p></li><li><p>how?</p><ul><li>â€œAcceleratorâ€: Trap and emulate</li><li>â€œParavirtualizationâ€: tradeoff between virtualization in os and emulation in devices -&gt; virtio</li></ul></li></ol><img src="/sg/2022/04/08/qemu_iouring/Screenshot.png" class title="Screenshot"><p>I/O path in VM<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>: host view of qemu is like additional RAM(a big chunk of memory and thatâ€™s it)</p><img src="/sg/2022/04/08/qemu_iouring/Screenshot-9477410.png" class title="Screenshot-9477410"><h2><span id="brief-introducation">brief introducation</span><a href="#brief-introducation" class="header-anchor">Â¶</a></h2><p>Terminology in QEMUâ€™s event loop:</p><table><thead><tr><th>Event sources</th><th>Abbr.</th><th>Usage</th></tr></thead><tbody><tr><td>Bottom-halves</td><td>BHs</td><td>Invoke a function in another thread or deferring a func call to avoid reentrancy</td></tr><tr><td>Asynchronous I/O context</td><td>aio_ctx</td><td>Event loop</td></tr></tbody></table><ol><li><p>Io_uring is a kernel ring buffer for asynchronous communication with kernel.</p><ul><li>Current integration into qemu: use epoll for completion check; use io_uring_enter() for submission; check completion on irq</li><li>Improvement: want to use fd registration</li></ul></li><li><p>Two ways to solve blocking mode problems(blocked processes are suspended): nonblocking mode, I/O multiplexing syscalls(async IO).</p><p>Async IO syscalls like select, poll, epoll</p><ol><li>Scenario: server wants to know if new input comes. Run program to know states -&gt; Ask Linux kernel which file changes -&gt; monitor file descriptors</li><li>poll: choose specific fds to monitor. Select:choose a range of fds to monitor.</li><li>Poll and select need kernel to check fds whether are available for writing, which takes a lot of time. Epoll(not for regular files) avoids the problem: create, control<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>, wait</li></ol></li><li><p>Coroutines in qemu: write multiple processes in a sequential way compared to callback<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup> for correct order in scheduling.</p><ol><li><p>rules of scheduling:</p><ul><li>Explicit: other cpu sees coroutines.</li><li>only one coroutine executes at a time; canâ€™t be interrupted</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># using callbacks: the list can go on and on</span><br><span class="line">start():</span><br><span class="line">send(&quot;ask&quot;,step1)</span><br><span class="line">step1():</span><br><span class="line">read(step2)</span><br><span class="line">step2():</span><br><span class="line">send(&quot;hi, %s&quot;,name, step3)</span><br><span class="line">step3():</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"># using coroutines</span><br><span class="line">coroutine_say_hi():</span><br><span class="line">co_send(&quot;ask&quot;)</span><br><span class="line">name = co_read()</span><br><span class="line">co_send(&quot;hi, %s&quot;, name)</span><br><span class="line"># done here</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>API<sup class="footnote-ref"><a href="#fn4" id="fnref4">[4]</a></sup></p><p>Struct: coroutine</p><p>Transfer of control: enter, yield</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">void</span> coroutine_fn <span class="title function_">CoroutineEntry</span><span class="params">(<span class="type">void</span> *opaque)</span>;</span><br><span class="line">Coroutine *<span class="title function_">qemu_coroutine_create</span><span class="params">(CoroutineEntry *entry, <span class="type">void</span> *opaque)</span>;</span><br></pre></td></tr></table></figure></li></ol></li><li><p>event loop in QEMU</p><p>two stucts appear in io_uring: AioContext, BH.</p><p>common APIs<sup class="footnote-ref"><a href="#fn5" id="fnref5">[5]</a></sup> in even loop are: aio_set_fd_handler(),  aio_set_event_handler(), aio_timer_init(), aio_bh_new()</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">QEMUBH</span> &#123;</span></span><br><span class="line">    AioContext *ctx;</span><br><span class="line">    <span class="type">const</span> <span class="type">char</span> *name;</span><br><span class="line">    QEMUBHFunc *cb;</span><br><span class="line">    <span class="type">void</span> *opaque;</span><br><span class="line">    QSLIST_ENTRY(QEMUBH) next; <span class="comment">// point to next eleent</span></span><br><span class="line">    <span class="type">unsigned</span> flags;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">AioContext</span> &#123;</span></span><br><span class="line">    BHList bh_list;</span><br><span class="line">    QSIMPLEQ_HEAD(, BHListSlice) bh_slice_list;</span><br><span class="line">...</span><br><span class="line">    QSLIST_HEAD(, Coroutine) scheduled_coroutines;</span><br><span class="line">    QEMUBH *co_schedule_bh;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ThreadPool</span> *<span class="title">thread_pool</span>;</span></span><br><span class="line">...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ol><h2><span id="api">API</span><a href="#api" class="header-anchor">Â¶</a></h2><h2><span id="implementation">Implementation</span><a href="#implementation" class="header-anchor">Â¶</a></h2><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://archive.fosdem.org/2020/schedule/event/vai_io_uring_in_qemu/attachments/slides/4145/export/events/attachments/vai_io_uring_in_qemu/slides/4145/io_uring_fosdem.pdf">Io_uring in qemu</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p><a href="https://github.com/torvalds/linux/blob/v4.10/fs/eventpoll.c#L1849">linux/eventpoll.c</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>Callback function is reentrant code meaning it can be called even while a call to it is underway. Like recv(pkt, via_ron), it is called when a packet arrives for the client program. <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li><li id="fn4" class="footnote-item"><p><a href="https://github.com/qemu/qemu/blob/master/include/qemu/coroutine.h#L58">qemu/include/qemu/coroutine.h</a> <a href="#fnref4" class="footnote-backref">â†©ï¸</a></p></li><li id="fn5" class="footnote-item"><p><a href="https://github.com/qemu/qemu/blob/master/include/block/aio.h#L466">qemu/include/block/aio.h</a> <a href="#fnref5" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> FOSS </category>
          
          <category> QEMU </category>
          
      </categories>
      
      
        <tags>
            
            <tag> code reading </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>os virtual machine</title>
      <link href="/sg/2022/04/06/os_virtual_machine/"/>
      <url>/sg/2022/04/06/os_virtual_machine/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#what-and-why">what and why</a></li><li><a href="#trap-and-emulate">Trap and emulate</a><ul><li><a href="#procedure">procedure</a></li><li><a href="#page-table">Page table</a></li><li><a href="#device">device</a></li></ul></li><li><a href="#hardware-support">hardware support</a></li></ul><!-- tocstop --></div><p>After taking a glance at QEMU, I decide to review this lecture to gain more understandings of virtual machine.</p><h2><span id="what-and-why">what and why</span><a href="#what-and-why" class="header-anchor">Â¶</a></h2><ol><li>Virtual machine: simulation of a computer</li><li>Why: we want run lots of guest service in one physical machine</li></ol><h2><span id="trap-and-emulate">Trap and emulate</span><a href="#trap-and-emulate" class="header-anchor">Â¶</a></h2><h3><span id="procedure">procedure</span><a href="#procedure" class="header-anchor">Â¶</a></h3><img src="/sg/2022/04/06/os_virtual_machine/Screenshot-9333584.png" class title="Screenshot-9333584"><h3><span id="page-table">Page table</span><a href="#page-table" class="header-anchor">Â¶</a></h3><p>Shadow page table in VMM</p><ul><li><img src="/sg/2022/04/06/os_virtual_machine/Screenshot-9334514.png" class title="Screenshot-9334514"></li></ul><p>Problem: It canâ€™t be allowed that guest pgtbl satp escapes and modifies host pgtbl</p><p>To prevent guest escaping from VMM, guest canâ€™t run in host supervisor mode. VMM will modify virtual state to provide illusions for guests.</p><h3><span id="device">device</span><a href="#device" class="header-anchor">Â¶</a></h3><ol><li>emulation: trap and emulate</li><li>Virtual device: device interface is designed to decrease trap times, which saves houndreds of CPU cycles</li><li>Pass-through: NIC</li></ol><h2><span id="hardware-support">hardware support</span><a href="#hardware-support" class="header-anchor">Â¶</a></h2><img src="/sg/2022/04/06/os_virtual_machine/hs.png" class title="hardware_support">]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.s081 operating systems </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Intro to xv6</title>
      <link href="/sg/2022/04/01/os_basics/"/>
      <url>/sg/2022/04/01/os_basics/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#design-points">Design points</a></li><li><a href="#interfaces">Interfaces</a><ul><li><a href="#process">Process</a></li><li><a href="#file-descriptor-and-i-o">File descriptor and I/O</a></li><li><a href="#pipe">Pipe</a></li><li><a href="#fs">Fs</a></li></ul></li><li><a href="#organization">Organization</a></li><li><a href="#virtual-memory-techniques">Virtual memory techniques</a><ul><li><a href="#page-tables">Page tables</a></li></ul></li><li><a href="#traps">Traps</a><ul><li><a href="#trap-machanism">Trap machanism</a></li><li><a href="#page-fault-exceptions">Page fault exceptions</a></li><li><a href="#device-interrupts">Device interrupts</a></li></ul></li><li><a href="#concurrency-control">Concurrency control</a><ul><li><a href="#lock">Lock</a></li><li><a href="#threads">Threads</a></li></ul></li><li><a href="#file-systems">File systems</a></li><li><a href="#case-study-ext3">case study: ext3</a></li><li><a href="#network-stack">Network stack</a></li><li><a href="#case-study-meltdown">case study: meltdown</a></li><li><a href="#case-study-rcu">case study: RCU</a><ul><li><a href="#design">Design</a></li><li><a href="#mechanisms">Mechanisms</a></li><li><a href="#usages">Usages</a></li></ul></li><li><a href="#basics">Basics</a><ul><li><a href="#c">C</a></li><li><a href="#risc-v-convention">RISC-V convention</a></li><li><a href="#gdb">GDB</a></li><li><a href="#lookup-table">Lookup table</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="design-points">Design points</span><a href="#design-points" class="header-anchor">Â¶</a></h2><ol><li>Few mechanisms provide enough generality: xv6 provides a Unix-like interface which contains the basic concepts to resolve the tradeoff between supporting many devices and using a simple interface.</li><li>What is one syscall in xv6? Xv6 has one <code>kernel</code> runs programs (<code>process</code>), process in the user space calls (<code>syscall</code>) kernel to provide services.<ul><li>Each process has memory which cantains instructions, data and stack. Stacks manages procedure calls.</li><li>Kernel provides services as process, memory, fd, pipes, fs.</li><li>Shell is a command-line user interface. Itâ€™s a user program.</li></ul></li><li>Chap1: xv6 provides simplicity and generality for Unix-like os flavour but it does not follow POSIX standard and follow users notion. All xv6 processes run as root. The functionalities it misses are user-level threads, â€¦ (Intended to develop this)</li><li>Chap2:<ul><li>xv6 runs entire os in kernel. The concept is monolithic though it provides less kernel services than some microkernel.</li><li>xv6â€™s process has one thread. Modern os supports several threads within a process</li></ul></li><li>Chap3: 3-level page table to save memory when most va is not mapped. The idea is to allocate pages on demand.</li><li>Chap4:  Xv6 kernel handles all traps. It has separate io path for three cases for convenience (<s>for commonality only single path</s>): traps from user space, traps from kernel space, timer interrupts.<ul><li>k/u isolation security: Xv6 simplifies the CPU h/wâ€™s trap handling sequence by making kernel s/w switch to kpgtbl, kstack and save regs except pc.</li></ul></li><li>Chap5: device and timer interrupts while executing in the kernel and user programs.</li><li>Chap7: the scheduling policy is running processes in turn as is <code>round robin</code></li><li>Chap8: xv6 provides Unix-like fs and stores data on a virtio disk for persistence.</li></ol><h2><span id="interfaces">Interfaces</span><a href="#interfaces" class="header-anchor">Â¶</a></h2><h3><span id="process">Process</span><a href="#process" class="header-anchor">Â¶</a></h3><ol><li>Xv6 time-shares processes by switching the available CPU between the process waiting to execute.</li><li>Xv6 allocates memory for each process implicitly:<ul><li><code>fork</code> allocates the enough memory for its child process (copy of the parentâ€™s memory), <code>exec</code> allocates the memory for the executable file</li><li>run-time memory is changed by <code>sbrk(n)</code>, which grows the data memory of process by n.</li></ul></li><li>Xv6 manages processes:<ul><li>create: <code>fork</code></li><li>close: <code>exit</code>, <code>wait</code> (wait for the childâ€™s process)</li><li>replace the process memory of calling process with new file img: <code>exec</code></li></ul></li></ol><h3><span id="file-descriptor-and-i-o">File descriptor and I/O</span><a href="#file-descriptor-and-i-o" class="header-anchor">Â¶</a></h3><ol><li><p>File descriptors abstract I/O objects like device, file, pipes.</p></li><li><p>Every fd has its own offset. Fds share the offset of the file if the fd is crated by <code>dup</code> or <code>fork</code>. Thatâ€™s why I/O direction in the shell is easy to implement.</p><ul><li><p><code>fork</code> copies parentâ€™s fd table as well while <code>exec</code> preserves the fd table of calling process. So exec can change the original fd.</p></li><li><p><code>dup</code>: <code>ls existing-file non-existing-file &gt; tmp1 2&gt;&amp;1</code>, &amp;1 means dup(1) which shares err files with output file tmp1, therefore tmp1 would have correct and wrong ones.</p></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cat &lt; input.txt </span></span><br><span class="line"><span class="comment">// Read from stdin</span></span><br><span class="line"><span class="type">char</span> *argv[<span class="number">2</span>];</span><br><span class="line">argv[<span class="number">0</span>] = <span class="string">&#x27;cat&#x27;</span>;</span><br><span class="line">argv[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (fork() == <span class="number">0</span>) &#123;</span><br><span class="line">  close(<span class="number">0</span>);</span><br><span class="line">  open(<span class="string">&quot;input.txt&quot;</span>, O_RDONLY);</span><br><span class="line">  exec(<span class="string">&quot;cat&quot;</span>, argv);</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="comment">// (echo hello; echo world) &gt;output.txt</span></span><br><span class="line"><span class="comment">// fork version: </span></span><br><span class="line"><span class="keyword">if</span> (fork() == <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="comment">// write 1 hello;</span></span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  wait(<span class="number">0</span>); </span><br><span class="line">  <span class="comment">// write 1 world</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// dup version:</span></span><br><span class="line">fd = dup(<span class="number">1</span>);</span><br><span class="line">write(<span class="number">1</span>, );</span><br><span class="line">write(fd, );</span><br></pre></td></tr></table></figure></li><li><p>Processes have 3 private fds, 0 for stdin, 1 for stdout, 2 for stderr.</p><ul><li><code>read</code>, <code>write</code>: returns 0 if data r/w completes, &gt; 0 if in the process, &lt; 0 if err occurs</li><li><code>pipe</code>: A pipe is a kernel buffer. It has a pair of fds, one for read and one for write.They share the data read from or written to.</li></ul></li></ol><h3><span id="pipe">Pipe</span><a href="#pipe" class="header-anchor">Â¶</a></h3><ol><li><p>The read on the pipe blocks until itâ€™s improssible to receive new data.</p><p>If stdin is associated with either end of pipe, then exec will wait if there is the new data waiting to r/w. So the pipe ends before write/read are alway closed in this chunk.</p><ul><li>Pipe[0] read, pipe[1] write.</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// wc &lt; &quot;hello world&quot;</span></span><br><span class="line"><span class="keyword">if</span>(fork() == <span class="number">0</span>) &#123;</span><br><span class="line">close(<span class="number">0</span>); </span><br><span class="line">dup(p[<span class="number">0</span>]); <span class="comment">// p[0] donates its data to file descriptor 0</span></span><br><span class="line">close(p[<span class="number">0</span>]); <span class="comment">// p[0] no longer needed in child since stdin is a copy</span></span><br><span class="line">close(p[<span class="number">1</span>]);</span><br><span class="line">exec(<span class="string">&quot;/bin/wc&quot;</span>, argv);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">close(p[<span class="number">0</span>]);</span><br><span class="line">write(p[<span class="number">1</span>], <span class="string">&quot;hello world\n&quot;</span>, <span class="number">12</span>);</span><br><span class="line">close(p[<span class="number">1</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Process tree: <code>grep fork sh.c | wc -l</code></p><p>The child process creates a pipe to connect the left end of the pipe with the right end. Fork + runcmd will then run the cmd of the left end and the right end. The right end of the pipeline can also be a pipe. Therefore a processes tree generates.</p><ul><li><code>echo hi | wc</code></li><li><code>sleep 10 | echo hi</code></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> PIPE:</span><br><span class="line">  pcmd = (<span class="keyword">struct</span> pipecmd*)cmd;</span><br><span class="line">  <span class="keyword">if</span>(pipe(p) &lt; <span class="number">0</span>)</span><br><span class="line">    panic(<span class="string">&quot;pipe&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span>(fork1() == <span class="number">0</span>)&#123;</span><br><span class="line">    ... <span class="comment">//p[1]</span></span><br><span class="line">    runcmd(pcmd-&gt;left);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span>(fork1() == <span class="number">0</span>)&#123;</span><br><span class="line">    ... <span class="comment">//p[0]</span></span><br><span class="line">    runcmd(pcmd-&gt;right);</span><br><span class="line">  &#125;</span><br><span class="line">... <span class="comment">// close pipe ends</span></span><br><span class="line">  wait(<span class="number">0</span>);</span><br><span class="line">  wait(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">break</span>;</span><br></pre></td></tr></table></figure></li><li><p>Pipe vs temp files: in memory vs in disk</p><ul><li><code>echo hello world | wc</code></li><li><code>echo hello world &gt;/tmp/xyz; wc &lt;/tmp/xyz</code></li></ul></li></ol><h3><span id="fs">Fs</span><a href="#fs" class="header-anchor">Â¶</a></h3><ol><li><p>Fs -&gt; data files -&gt; File/Dir -&gt; filename + inode -&gt; type +length + location + Links -&gt; (filename, reference/to/inode)</p></li><li><p>Find file: path/to/file, <code>/</code> is the root path; relative path.</p></li><li><p>Create file/device file: <code>mkdir</code>, <code>mknod</code>. Mknod associates kernel device with the major and the minor device numbers. The kernel diverts syscalls to the device implementation instead of fs.</p></li><li><p>A file has an underlying file called inode. It cantains metadata.</p><ul><li><code>fstat</code></li></ul></li><li><p>Fs utilities are user-level programs. The command line interfaces can add the same user-level programs to provide such utilities. However,<code>cd</code> is built into the shell because the forked child process cannot change the memory of the parent process.</p></li></ol><h2><span id="organization">Organization</span><a href="#organization" class="header-anchor">Â¶</a></h2><ol><li>Os MUST provides time-sharing resources and applicable isolation(interact when required) among processes.<ul><li>Fancy terms: <code>multiplexing, isolation, interaction</code></li></ul></li><li>Letâ€™s count what does xv6 have:<ul><li>1 monolithic kernel</li><li>many processes (the unit of isolation)</li><li>runs on a multi-core RISC-V microprocessor: 64-bit, â€œLP64â€ C</li><li>hardwares: RAM, ROM, screen, disk (simulated by qemu -machine virt)</li></ul></li><li>Design points:<ul><li>Abstract physical resources: Library Vs Outside manager<ul><li>Library: Applications access devices like a library. App decides when to leave the process.</li><li>Manager: Os manages who enters/leaves the process and when.</li></ul></li><li>Provide strong isolation: if one process is down, others should not be corrupted by it.<ul><li>hw support of CPU when executes instructions: RISC-V provides three modes: <code>machine, supervisor, user</code>.</li><li>privileged instruction - kernel space, user-mode instruction - user space</li><li>A user app invoking kernel service must transit to the kernel space first: RISC-V  <code>ecall</code> . It switches CPU u -&gt; k and enters k at an entry point controlled by k</li></ul></li><li>What part of os runs in supervisor mode:<ul><li>Term: <code>monolithic kernel</code>: all. Good to coperate/share and bad side is unsafe.</li><li>Term: <code>microkernel</code>: part. Good side is safe and bad to coperate/share.</li><li>Term: Os running processes as service is called <code>server</code></li></ul></li></ul></li><li>Process provides strong isolation<ul><li>mechanisms implementing process: user/super mode flag, address spaces, time-slicing of threads</li><li>hw support: Xv6 manages process memory via page tables (RISC-V support).</li></ul></li><li>Process internals:<ul><li>Process has private memory system/address space. An address space contains user memory starting at va 0. Xv6 uses 38 bits of 39 bits. Max address is 2^38 - 1.<br>| user text and data | user stack |  heap| trapframe|trampoline|<br>0 ------------------------------------------------------------&gt;                              MAXVA</li><li>Process has kernel states and user states. Kernel states are its pgtbl, kernel stack, run state.</li><li>A process has a <u>thread</u> of execution that <u>executes the processâ€™s instructions</u>. Thread state (local variables, function call,return address) is stored on the threadâ€™s stacks.</li><li>A process has two stacks: u stack, k stack.</li><li>A process makes sys call by <code>ecall</code>, exit k space by <code>sret</code>.</li></ul></li><li>I/O path<ul><li>Initialization: console,  vm stuff (page table,process table, trap vector, interrupt handler, device interrupts), fs stuff (buffer cache, inode cache, file table, hard disk)</li><li>Boot xv6 and start the first process<ul><li>RISC-V Machine mode -&gt; Supervisor mode; xv6 jumps to kernel space<img src="/sg/2022/04/01/os_basics/boot.png" class title="boot"></li></ul></li></ul></li></ol><h2><span id="virtual-memory-techniques">Virtual memory techniques</span><a href="#virtual-memory-techniques" class="header-anchor">Â¶</a></h2><ol><li><p>paging hardware:</p><ul><li>terms<ul><li>RISC-V hw supports page table. Its instructions deals with <code>va</code>.</li><li>Sv39 RISC-V only uses the bottom 39 bits to represent <code>va</code>.</li><li>Storage cell DRAM is where r/w physical memory.</li><li>Virtual memory is not physical as va and pa but the abstraction and machanisms to manage va and pa.</li></ul></li><li>geometry: <code>va</code> (39 bit) = PTE_index (27 bit) +  flag bit (12 bit). PA (56 bit) = PPN (upper 44 bits of the PTE) + offset (lower 12 bits of VA). 2^27 = # of PTE.</li><li><code>satp</code>: supervisor address translation and protection, reserves the <code>pa</code> of page tables.<ul><li><img src="/sg/2022/04/01/os_basics/pt.png" class title="pt">   </li></ul></li></ul></li><li><p>Cache of (VA, PA) is Translation Lookside Buffer when finding PA for the VA</p><ul><li>TLB will be cleared when switching page table. RISC-V instruction for that is:<code>sfence_vma</code></li></ul></li><li><p>Address space:</p><ul><li><p>Xv6 maintains 1 page table per process in the user space and 1 page table for kernel space.</p></li><li><p>Kernel uses <u>direct mapping</u> to get access to RAM and memory mapped devices.</p></li><li><p>Not directly mapped: high-memory mapping</p><ul><li>trampoline page</li><li>stack pages: have an unmapped guard page with PTE invalid.</li></ul></li><li><p>process address space and kernel address space</p><img src="/sg/2022/04/01/os_basics/vm.png" class title="vm">     </li></ul></li><li><p>I/O path</p><ul><li>physical memory allocation: free pages are stored in the linked list.</li><li>Syscall<ul><li>sbrk: grow/shrink the memory</li><li>exec: create the user part of an address space</li></ul></li></ul></li></ol><h3><span id="page-tables">Page tables</span><a href="#page-tables" class="header-anchor">Â¶</a></h3><p>Translation of <code>va</code> to <code>pa</code>: Page tables are stored as a three-level tree in physical memory. The 27 bits of a virtual address denote the indices of three levels. The root level tree is a 4KB page which holds 512 PTEs which point to the next-level page via the physical address (PPN) stored at the PTE. Each of those pages hold the 512 PTEs for the final level in the tree. If any PTE required by the va is not there, a page fault exception occurs.</p><p>High-memory mapping indirectly maps trampoline page and kernel stack (along with the guard page) high of virtual address space. They are also accessiable through direct mapping, making one virtual address mapped twice. Using direct mapping only would waste physical memory whose corresponding virtual memory is unmapped for allocating guard pages. If a kernel stack page in the kernel address space overflows, kernel panics for invalid mapping of the correspnding guard page.</p><p>Each process has a page table. If the user stack of a process overflows, the hardware generates a page-fault exception for invalid mapping. The kernel is not a process. A process is a running program together with all the state the kernel needs to manage it.</p><p>The limitations of xv6â€™s paging mechanism:</p><ol><li>Direct mapping and known address of the physical RAM supported by QEMU.</li><li>The RISC-V feature of protection at the level of physical address is not used.</li><li>Xv6 allocates 4096-byte pages. It doesnâ€™t support small allocations and thus cannot use sophicated data structures that require dynamic allocation.</li></ol><h2><span id="traps">Traps</span><a href="#traps" class="header-anchor">Â¶</a></h2><h3><span id="trap-machanism">Trap machanism</span><a href="#trap-machanism" class="header-anchor">Â¶</a></h3><ol><li>What: <code>trap</code> refers to event that mandatorily forces a transfer of control from the execution of ordinary instructions to special code that handles the event. Three kinds of such event are.syscalls, exception and device interrupt.<ul><li>syscalls: <code>ecall</code></li><li>exception: u/k illegal instruction, e.g. divide by zero, invalid virtual address</li><li>device interrupt: device signals when r/w req finishes</li></ul></li><li>RISC-V machinery:<ul><li>The kernel writes address/value to registers to control io path (risc-v detects regs)<ul><li><code>stvec</code>, addr of trap handler</li><li><code>sepc</code>, risc-v saves program counter when a trap occurs. <code>sret</code> copies <code>sepc</code> to <code>pc</code> when returned from trap.</li><li><code>scause</code>, risc-v saves the cause of the trap</li><li><code>sscratch</code>, a value at the start of a trap handler (as from scratch)</li><li><code>sstatus</code>, <code>SIE</code> set if interrupts are enabled. <code>SPP</code> tells user/supervisor mode a trap came from and controls what <code>sret</code> returns</li></ul></li><li>The registers related to traps handled in supervisor mode. Xv6 has a similar set of registers for traps handled in machine mode.</li><li>Each CPU has its own set of registers. &gt;=1 CPU may be handling a trap at anytime.</li><li>Procedures of risc-v h/w: if an interrupt -&gt; no, disable SIE -&gt; <code>pc =&gt; sepc</code>, <code>sw SPP =&gt; sstatus</code> -&gt; set scause, su mode -&gt; <code>stvec =&gt; pc</code> -&gt; execute new pc</li></ul></li><li>Trap machanism<ul><li><img src="/sg/2022/04/01/os_basics/trap.png" class title="trap"></li></ul></li><li>Traps from user space</li><li>Traps from kernel space</li></ol><h3><span id="page-fault-exceptions">Page fault exceptions</span><a href="#page-fault-exceptions" class="header-anchor">Â¶</a></h3><p>key mechanism: when a CPU cannot translate a virtual address to a physicall address, the CPU generates page-fault exception.</p><p>Copy-on-write (COW) fork</p><ul><li>fork allocates physical memory for the child and copies parentâ€™s memory into it. The idea of COW fork is to share the parentâ€™s memory to the child. We cannot let the parent and the child to directly access the physical memory because of disruption of multiple writes.</li></ul><p>However, a safer way is to share memory with the read-only permission.</p><ol><li>If either parent or child can write a given page, the CPU raises a page-fault exception.</li><li>The trap handler responds by allocating a new physical page and copying the memory from the physical page that the faulted address points to.</li><li>The kernel then changes the PTE in the faulting processâ€™s page table to point to the copy and to allow r/w. After that, it resumes the faulting process.</li><li>The process will write to the new physical page (copy).</li><li>Meanwhile, the users of that original physical page can still read it without copying.</li></ol><p>COW fork needs book-keeping to track when the physical page can be freed. An optimization is that if there is only one user of the physical page, no copy is needed.</p><p>COW is an optimization mechanism and needed for a case when two or more processes have separate memory spaces and are isolated[^4]. The kernel optimizes it by allowing copies only when it is needed such as writes. Itâ€™s different than the case of shared memory model where multiple processes modify the same memory space and see the change.</p><p>Lazy allocation: When an application asks for more memory, the kernel is aware of the size increase but doesnâ€™t allocate physical memory until a page fault incurs on one of those address.</p><p>Demand paging: The kernel creates the page table for the user address space and marks it invalid.</p><ul><li>Paging to disk: store only a fraction of user pages in RAM and map the rest on disk in a paging area. The pages on disk (paged out) are marked invalid and must be read from disk to RAM (paged in)  for an application to access, which is triggered by a page fault on a invalid memory access.</li><li>If there is no physical RAM, a RAM page must be evicted to the paging area on disk (paged out) and marked invalid.</li><li>Eviction is expensive.</li></ul><p>Demand paging is advantageous when the memory is scarce.</p><p>Memory mapped file</p><p>MMAP creates a new mapping of the contents of a file on disks in the virtual address space of the calling process/program. The program then accesses the file pages as if they reside in memory. OS automatically evicts unused pages if memory fills up.</p><p>The procedures of MMAP are:</p><ol><li>Mmap retruns a pointer to the memory-mapped file contents.</li><li>The OS reserves a part of virtual address space of the calling process/program.</li><li>The program accesses the fileâ€™s contents via the pointer.</li><li>The OS attempts to retrieve a page (<code>va</code>).</li><li>If no valid mapping exists for the va, a page fault exception occurs which loads the fileâ€™s content on disk to physical pages and creates a new mapping from the <code>va</code> to the new <code>pa</code>. The initiating CPU core also caches this PTE in its local translation lookaside buffer (TLB).</li></ol><h3><span id="device-interrupts">Device interrupts</span><a href="#device-interrupts" class="header-anchor">Â¶</a></h3><ol><li>Interrupts are one type of trap. Trap handler recognizes a device interrupt and calls the driverâ€™s interrupt handler.</li><li>Device drivers execute in two contexts:<ul><li><code>Top half</code>: run in a processâ€™s kernel thread, read/write()</li><li><code>Bottom half</code>: interrupt handler copies the input data to buffer and wake up top-half code to do op. It runs in the <code>interrupt context</code> which is also referred to <code>atomic context</code>, unable to block.</li><li>Linux has opposite names for those two contexts.</li></ul></li><li>Terms<ul><li><code>interrupt context</code> is time-critical that is not associated with processes. Interrupt handler putting one process sleep may let other process blocking therefore it cannot sleep in this context.</li><li><code>process context</code> is the mode of operation the kernel is in while it is executing on behalf of a process (LKD3 Chap7). Process can sleep or invoke the schedulor</li></ul></li><li>Driver is programmed by memory mapped I/O.</li><li>How xv6 displays â€œ$â€ in console?<br>device -&gt; (uart-&gt;interrupt -&gt;) console</li><li>How xv6 displays â€œlsâ€ in console?<br>key stroke -&gt; keyboard -&gt; (uart input -&gt; merge to byte -&gt; interrupt)-&gt;interrupt handler</li><li>Riscv interrupts related registers: SIE(supervisor interrupt enable), SSTATUS(supervisor status), SIP(supervisor interrupt pending), SCAUSE: means interrupts, STVEC: program counter of user program that cpu runs when trap/interrupts/page faults occur</li><li>timer interrupts: to maintain its clock and enable it to switch among processes. Execute in the machine mode.<ul><li>CLINT (core-local interruptor)</li><li>time-slice CPU</li></ul></li><li>Interrupts have high CPU overhead, ways to reduce the need for interrupts<ul><li>single interrupt for a batch of incoming requests</li><li>disable interrupts and check the device for attention: <code>polling</code>, wastes CPU time when the device is mostly idle</li><li>dynamically switch between interrupts and polling</li></ul></li><li>Date movement to h/w<ul><li>programmed I/O: UART driver, kernel buffer =&gt; user buffer =&gt; h/w, low speed</li><li>DMA (direct memory access): most modern drivers, user-space buffers &lt;=&gt; device hardware, high speed</li></ul></li></ol><h2><span id="concurrency-control">Concurrency control</span><a href="#concurrency-control" class="header-anchor">Â¶</a></h2><h3><span id="lock">Lock</span><a href="#lock" class="header-anchor">Â¶</a></h3><ol><li>Xv6 has two locks: spinlocks and sleeplocks<ul><li>spinlocks<ul><li>continue polling for the lock. Hold a lock for a short time. Cannot <code>yield CPU</code> (a thread switch).</li><li>Cost: polling</li><li><strong>disable interrupts</strong>: if a lock can be interruptted, then the interrupt acquires the same lock that is being used which leads to dead lock.  -&gt; concurrency in same CPU</li><li>sw vs atomic_swap: sw differs in different CPU settings. It may have one more instruction which disables the atomicity. -&gt; concurrency in different CPU</li></ul></li><li>Sleeplocks:<ul><li>sleep until certain condition occurs. Hold a lock for a long time. Can yield CPU. (ex, mutex)</li><li>Cost: high CPU overhead due to context switch (open another kernel thread)</li><li><code>locked</code>, a word that is zero when the lock is available and non-zero when it is held.</li></ul></li></ul></li><li>Why locks: one data stucture are accessed by multiple processes(race condition) -&gt; atomicity in critical section.</li><li>How? system designers should define orders of locks for the purpose of performance and correctness</li><li>memory barrier: tells the compiler and CPU to <strong>not reorder</strong> loads or stores across the barrier, <code>__sync_synchronize()</code></li></ol><p>Scenario 1: race condition in kfree()</p><p>Attempt 1: corse-grain locking/two processs are accessing one sharing data structure and one of them updates the data.</p><p>scenario 2: rename files: rename(â€œd1/xâ€, â€œd2/yâ€)</p><p>Attempt 2: lock operations not data structures.</p><p>Terminology:</p><ol><li>Deadlock: unlocking A requires B, unlocking B requires A, A and B are locked. example: deadly embrace</li></ol><p>Limitations of xv6: xv6 avoids lock-free programming. Although, programming with locks is also hard.</p><h3><span id="threads">Threads</span><a href="#threads" class="header-anchor">Â¶</a></h3><ol><li><p>Why threads? Run parallel programs</p></li><li><p>What: One thread is the state of one serial execution. Thread states include PC, REGS, STACK, [state:runnning, runable, sleeping]</p></li><li><p>How: problems of implementing threads</p><p>Assumption: one core(CPU) one thing -&gt; thread either sleeps or runs on one core</p><ul><li>how to switch between processes(scheduling)</li><li>What to save and restore in switching</li><li>Compute-bound threads: long-running program</li></ul></li><li><p>Cooperative scheduling is user processes explicitly give up control to kernel</p></li><li><p>Scheduling policies:</p><ul><li>+priority: fairness Vs throughput<ul><li><code>priority inversion</code>: low-priority process and high-priority process share a lock</li><li><code>convoys</code>: many high-priority processes are waiting for a low-priority process that acquires a shared lock</li></ul></li><li>implementation: sleep+wakeup<ul><li><code>sleep</code> disabled interrupts -&gt; single-CPU</li><li><code>sleep</code> + lock -&gt; xv6 (multiprocessor systems), FreeBSD</li><li>use explicit process queue,<code>waitqueue</code> -&gt; Linux</li></ul></li><li><code>wakeup:signal</code>, wakeup one/all process<ul><li>many processes are waiting for that particular channel, <code>thundering herd</code></li></ul></li></ul></li><li><p>scheduler</p><ul><li>A kernel thread gives up its CPU (<code>sched</code>) and switches to the kernel thread which previously-called <code>sched</code> in <code>scheduler</code>.</li><li>xv6 holds <strong>p-&gt;lock</strong> in <code>swtch</code>: the caller of <code>swtch</code> acquires p-&gt;lock in one thread and the callee of <code>swtch</code> releases it in other. This breaks convention of locks where the holder of a lock will also release it.</li></ul></li></ol><p>Problem1: what if the process runs for a long time?  -&gt; [Pre-emptive scheduling]  the process is:</p><ul><li>user processes run</li><li>time interrupts make it give up control to kernel</li><li>kernel then yields the CPU</li></ul><p>Problem2: lost wake-up problem, wakeup before sleeping and no wakeup while sleeping</p><ul><li>another process blocking (acquire lock that is not released by sleep(object)) while sleeping -&gt; Fixed by sleep(lock, object). Sleep will realese the lock after sleeping. It holds the lock before sleeping.</li><li>sleep/wakeup + spinlock, a synchronization method</li></ul><p>Example of <u>context switching</u> <code>swtch</code> between a kernel thread and a scheduler thread (kernel/proc.c):</p><ul><li><p>The xv6 scheduler has a dedicated <strong>thread (saved registers and stack)</strong> per CPU. A register set is called <code>context</code>. In xv6, the context struct contains the process and cpu structs.</p></li><li><p>Switching threads means saving the registers of the old thread and restoring the previously-saved registers of the new thread.</p></li><li><p>Switching plan: <code>swtch</code> saves <code>ra</code>, <code>sp</code> where swtch was called and the current context in p-&gt;context. Then it restores regs from new context.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># sched:swtch(&amp;p-&gt;context, &amp;mycpu()-&gt;context);</span><br><span class="line">swtch:</span><br><span class="line">        sd ra, 0(a0)</span><br><span class="line">        sd sp, 8(a0) # sw contents of sp, Offset(RegSource)</span><br><span class="line">        ...</span><br><span class="line"></span><br><span class="line">        ld ra, 0(a1) # ld RegDest, Offset(RegSource)</span><br><span class="line">        ld sp, 8(a1)</span><br><span class="line">        ...</span><br><span class="line">        ret</span><br></pre></td></tr></table></figure></li></ul><h2><span id="file-systems">File systems</span><a href="#file-systems" class="header-anchor">Â¶</a></h2><p>Design points:</p><ol><li>on-disk data structures for dir and files tree</li><li>crash recovery</li><li>coordinate multi-process to maintain invariants</li><li>in-memory cache for fast retrieval of data</li></ol><img src="/sg/2022/04/01/os_basics/Screenshot-6244321.png" class title="A file on disk"><h2><span id="case-study-ext3">case study: ext3</span><a href="#case-study-ext3" class="header-anchor">Â¶</a></h2><h2><span id="network-stack">Network stack</span><a href="#network-stack" class="header-anchor">Â¶</a></h2><h2><span id="case-study-meltdown">case study: meltdown</span><a href="#case-study-meltdown" class="header-anchor">Â¶</a></h2><h2><span id="case-study-rcu">case study: RCU</span><a href="#case-study-rcu" class="header-anchor">Â¶</a></h2><p>Readings:</p><ol><li>RCU Usage In the Linux Kernel: One Decade Later, 2013</li><li>LWN<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>: rcu basics, <a href="https://lwn.net/Articles/262464/">https://lwn.net/Articles/262464/</a></li></ol><p>Terms:</p><ol><li>detry, directory entry metadata</li><li>NMI, non maskable interrupts (cannot be disabled)</li><li>type safe memory is memory that keeps its type after being deallocated.</li><li>explicit tracking includes reference counts, reader-writer locks, events, etc.</li></ol><blockquote><p>The most basic form of RCU is a way of waiting for things to finish. â€¦ The greatest advantage of RCU is that it can wait for each of 20,000 different things without having to explicitly track each and every one of them, and without worrying about performance, deadlock scenarios and memory-leak hazards etc. that are inherent in schemes using explicit tracking.</p></blockquote><p>RCU is faster than other synchronization mechanisms in the kernel by allowing a single updater and multiple readers. It caters three needs: read while updating, low computation + storage overhead (a few bytes/dentry) and deterministic completion.</p><h3><span id="design">Design</span><a href="#design" class="header-anchor">Â¶</a></h3><ol><li>It has a read-side critical section and a synchronization section.<ul><li>Read_lock, read_unlock: By disabling thread preemption (a thread cannot context switch in the critical section). Can be called many times. -&gt; non-blocking</li><li>call_rcu, synchronize_rcu: wait for the completion of all the previous caller of rcu into the critical section. It does not wait for the caller after synchronize_rcu is invoked.</li></ul></li><li>The design is based on scheduler context switch, maintaining state shared between CPUs.</li><li>Handles compiler and memory reordering (processor) carefully. Assign_pointer, dereference.</li><li>RCU maintains multiple versions of objects and only frees them until all pre-existing critical sections completes.</li></ol><h3><span id="mechanisms">Mechanisms</span><a href="#mechanisms" class="header-anchor">Â¶</a></h3><ol><li><p>publish-subscribe: enforce ordering for insertions and reads</p><p>This mechanism is designed to cope with behaviors of CPU and compiler.</p><ul><li>There is not guarantee that the sequential assignments are in-order from the views of compiler and CPU. <code>Rcu_assign_pointer</code> enforces the assignment of gp is the last one of current assignments.</li><li>The value-speculation compiler optimizations: compiler guesses p, fetches p-&gt;a, p-&gt;b and p-&gt;c, then fetches the actual p value to check if the guess is right. <code>Rcu_dereference</code></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// #1 publication: allow assignment without values uninitialized </span></span><br><span class="line"><span class="comment">// and avoid using memory barriers.</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">foo</span> &#123;</span></span><br><span class="line">  <span class="type">int</span> a;</span><br><span class="line">  <span class="type">int</span> b;</span><br><span class="line">  <span class="type">int</span> c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">foo</span> *<span class="title">gp</span> =</span> <span class="literal">NULL</span>;</span><br><span class="line">p = kmalloc(size, GFP_kernel);</span><br><span class="line">p-&gt;a = <span class="number">1</span>;</span><br><span class="line">p-&gt;b = <span class="number">2</span>;</span><br><span class="line">p-&gt;c = <span class="number">3</span>;</span><br><span class="line">rcu_assign_pointer(gp, p) <span class="comment">// gp = p</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">// #2</span></span><br><span class="line">p = gp;</span><br><span class="line"><span class="keyword">if</span> (p != <span class="literal">NULL</span>) &#123;</span><br><span class="line">  do_something_with(p-&gt;a, p-&gt;b, p-&gt;c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// subscribtion: subscribe to a given value of the specifiled pointer </span></span><br><span class="line"><span class="comment">// and make sure the deference ops see initialization before any </span></span><br><span class="line"><span class="comment">// publish op</span></span><br><span class="line">rcu_read_lock();</span><br><span class="line">p = rcu_dereference(gp);</span><br><span class="line"><span class="keyword">if</span> (p != <span class="literal">NULL</span>) &#123;</span><br><span class="line">  do_something_with(p-&gt;a, p-&gt;b, p-&gt;c);</span><br><span class="line">&#125;</span><br><span class="line">rcu_read_unlock();</span><br></pre></td></tr></table></figure></li><li><p>wait for pre-existing rcu readers to complete, for deletion</p><ul><li>It is implied that read-side critical sections have completed before the next context switch. Because no sleep or blocking is allowed in the critical sections.</li><li>A grace period waits for completion of pre-existing reads and will extend as needed.</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">foo</span> &#123;</span></span><br><span class="line">  <span class="class"><span class="keyword">struct</span> <span class="title">list_head</span> <span class="title">list</span>;</span></span><br><span class="line">  <span class="type">int</span> a;</span><br><span class="line">  <span class="type">int</span> b;</span><br><span class="line">  <span class="type">int</span> c;</span><br><span class="line">&#125;;</span><br><span class="line">LIST_HEAD(head);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* . . . */</span></span><br><span class="line">p = search(head, key);</span><br><span class="line"><span class="keyword">if</span> (p == <span class="literal">NULL</span>) &#123;</span><br><span class="line">  <span class="comment">/* Take appropriate action, unlock, and return. */</span></span><br><span class="line">&#125;</span><br><span class="line">q = kmalloc(<span class="keyword">sizeof</span>(*p), GFP_KERNEL);</span><br><span class="line"><span class="comment">// read-copy-update: copies</span></span><br><span class="line">*q = *p; </span><br><span class="line"><span class="comment">// and updates</span></span><br><span class="line">q-&gt;b = <span class="number">2</span>; </span><br><span class="line">q-&gt;c = <span class="number">3</span>;</span><br><span class="line">list_replace_rcu(&amp;p-&gt;<span class="built_in">list</span>, &amp;q-&gt;<span class="built_in">list</span>);</span><br><span class="line"><span class="comment">// do context_switch() on each CPU.</span></span><br><span class="line">synchronize_rcu();</span><br><span class="line">kfree(p);</span><br></pre></td></tr></table></figure></li><li><p>multiple versions of recently updated objects, for reader</p><ul><li>Deletion example: two versions of one pointer values are only kept in the critical sections. After exiting, on readers references that pointer and it will be safely freed.</li></ul></li></ol><h3><span id="usages">Usages</span><a href="#usages" class="header-anchor">Â¶</a></h3><ol><li>wait for completion. Put a spin_lock around rcu critical section. The NMI sys runs every NMI handler in the critical section.</li><li>reference counting. Users of the data item execute in the critical section. When freeing a data item, use call_rcu to free the memory after no other threads using the data item. Itâ€™s efficient for getting rid of updates, memory barriers, atomic operations, etcâ€¦</li><li>type safe memory. Reverse page map maps a physical page (page_t) to all the virtual address (anon_vma_t) mappings that include that physical page.   Deallocating a page without waiting for all threads to relinquish the pointer to the page.</li><li>publish-subscribe. Rcu_assign_pointer publishes a pointer and concurrent readers read through rcu_dereference.</li><li>read-write lock alternative. Read in the critical section, write synchronize with other writes using spin locks.</li></ol><h2><span id="basics">Basics</span><a href="#basics" class="header-anchor">Â¶</a></h2><h3><span id="c">C</span><a href="#c" class="header-anchor">Â¶</a></h3><ol><li><p><a href="https://stackoverflow.com/questions/8011700/how-do-i-extract-specific-n-bits-of-a-32-bit-unsigned-integer-in-c">bit mask</a>:</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Want the last X bits</span></span><br><span class="line"><span class="type">unsigned</span>  mask;</span><br><span class="line">mask = (<span class="number">1</span> &lt;&lt; X) - <span class="number">1</span>; <span class="comment">// -1 is like fliping the bit</span></span><br><span class="line">lastXbits = value &amp; mask;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Want X bits in the middle</span></span><br><span class="line"><span class="type">unsigned</span>  mask;</span><br><span class="line">mask = ((<span class="number">1</span> &lt;&lt; X) - <span class="number">1</span>) &lt;&lt; startBit;</span><br><span class="line">isolatedXbits = value &amp; mask;</span><br></pre></td></tr></table></figure></li><li><p>struct vs packed struct: if the fileds aligned</p><ul><li>Fact: misaligned load/store can be slow or unsupported (platform-dependent)</li></ul></li></ol><h3><span id="risc-v-convention">RISC-V convention</span><a href="#risc-v-convention" class="header-anchor">Â¶</a></h3><p>Understanding RISC-V Calling Convention by Nick Riasanovsky:</p><ol><li><p>RISC-V abstract machine: Base ISA: Program counter, 32 general-purpose registers (x0â€“x31).</p><ul><li><p>Unlike high-level programming language, convention is a choice to organize code like naming and line &lt; 80. Assembly is built on convention. Three parts is key to understand assembly: <strong>registers, function calls, and entering/exiting a function (prologue/epilogue)</strong>.</p></li><li><p>.section; .global means it can call this function from other files; .text means itâ€™s executable code<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup></p></li></ul></li><li><p>Registers</p><ul><li>RISC-V has 32 registers. <code>sp</code> holds the current base of the stack. <code>ra</code> return address. <code>pc</code> holds the address of the current instruction.  <code>t</code> for temporary. <code>a</code> regs -&gt; 8 arguments, 2 return values in <code>a0-a1</code>.<ul><li><img src="/sg/2022/04/01/os_basics/Screenshot-9679149.png" class title="Screenshot-9679149"></li><li><code>f</code> reg for floating point</li></ul></li></ul></li><li><p>Function calls</p><ul><li>Used after a function call(), <code>s</code> regs; unused after a call(), <code>t</code> regs.</li><li>(not persistent) Making a call, pass arguments in <code>a2-a7</code>; (persistent) after a call, get return values in <code>a0-a1</code></li></ul></li><li><p>Prologue/Epilogue</p><ul><li><p>guarantees:</p><blockquote><ul><li>The sp will have the same value when exiting the function that it did entering (unless we store return values on the stack).</li><li>All s registers will have the same value exiting the function that they did entering.</li><li>The function will return to the value stored in ra, assuming no abnormal execution.</li></ul></blockquote><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">def prologue():</span><br><span class="line">sp -= space of (s registers + local var);</span><br><span class="line">store any saved regs used;</span><br><span class="line">store ra if call();</span><br><span class="line"></span><br><span class="line">def epilogue():</span><br><span class="line">reload any saved regs;</span><br><span class="line">reload ra;</span><br><span class="line">sp = previous sp;</span><br><span class="line">jump back to return address</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li><li><p>Stack Frames: stack grows downwards and heap grows upwards</p><ul><li>return address, to prev.frame(fp), saved registers, local variablesâ€¦ (higher &lt;- lower addr)</li></ul></li><li><p>Why this convention? Avoid to save every regs</p></li><li><p>Debug tips using convention</p><blockquote><ul><li>Check that you stored <code>ra</code> properly. For recursion make sure you link <code>ra</code> for each recursive call. You can test this by putting a break point at the end of the epilogue and seeing where you return.</li><li>Check that you donâ€™t use any <code>t</code> registers after a function call.</li><li>Check that <code>sp</code> enters and exits with the same value.</li><li>Check the number of times you enter the prologue equals the number of times you enter the epilogue.</li><li>Make sure you restore every register you modified.</li></ul></blockquote></li><li><p>Instructions</p><ul><li><p><code>w</code> (word) is 32 bit in RISC-V, <code>d</code> (double) is 64 bit, <code>i</code> (immediate) is constant (see 6.004 isa reference card for the maximum value it can represent)</p></li><li><p>Reg is 32-bit (4 byte) wide in RV32; 64 bit in RV64 etc.</p></li><li><p><code>ra</code> is the destination reg</p></li><li><p><code>csrr</code>: Read CSR (Control System Register)</p></li><li><p><code>mhartid</code> is Hart ID Register: The mhartid CSR is an MXLEN-bit read-only register containing the integer ID of <u>the hardware thread running the code</u> (Riscv privileged spec 3.1.5)</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">csrr a1 mhartid</span><br><span class="line">csrr rd, csr  -&gt; csrrs rd, csr, x0</span><br></pre></td></tr></table></figure></li><li><p><code>jal</code>, jump and link; <code>jalr</code>, jump and link register;</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// call()</span><br><span class="line">jal ra lable // link ra with pc + 4 (store pc + 4 in ra), jump to lable (pc = lable); </span><br><span class="line">jalr ra rd imm // link ra with pc + 4, jump to reg (pc = rd + imm)</span><br><span class="line"></span><br><span class="line">// no call(), just jump to lable</span><br><span class="line">jal x0 lable // j lable</span><br><span class="line">jalr x0 rd imm // jr rd imm</span><br></pre></td></tr></table></figure></li></ul></li></ol><h3><span id="gdb">GDB</span><a href="#gdb" class="header-anchor">Â¶</a></h3><p>gdb notes from lecture and csapp, <a href="https://sourceware.org/gdb/onlinedocs/gdb/">more</a>:</p><ol><li><p><code>file filename</code>: read symbols from that file</p></li><li><p>show source code:<code>tui enable</code>, <code>layout split</code> -&gt; both C and asm,  <code>layout source</code> -&gt; only C</p><ul><li><code>layout reg</code>, <code>layout asm</code>: show reg, assembly</li><li><code>layout next</code>: steps through layouts</li></ul></li><li><p>info: breakpoints, program, functions, stack, frame, registers,</p><ul><li><code>info b</code></li></ul></li><li><p>execution: <code>step</code>, <code>continue</code>, <code>finish</code>, <code>run</code>, <code>until</code></p><ul><li><p><code>until 3</code>: run until breakpoint 3</p></li><li><p><code>si</code>: execute one instruction</p></li></ul></li><li><p>breakpoints: you can disable/enble, break/delete it</p><ul><li>conditional breakpoints: break, only when a condition holds (e.g. variable has a certain value)</li><li><code>clear sum</code>: Clear any breakpoints at the entry to function sum</li></ul></li><li><p>watchpoints: break when a memory location changes value, <code>wa</code></p><ul><li><code>watch -l address</code>: when the address contents change</li><li><code>watch expression</code>: when expression changes</li></ul></li><li><p>examine data:</p><ul><li><code>print /[format] $rax</code></li><li><code>print /d (int)$rax</code>: Print contents of %rax in decimal after sign-extending lower 32-bits. -&gt; negative value</li><li><code>print *(int *) 0xbffff890</code>: Print integer at address 0xbffff890</li><li><code>print *(int *) ($rsp+8)</code> : Print integer at address %rsp + 8</li><li><code>print (char *) 0xbfff890</code>: Examine a string stored at 0xbffff890</li><li><code>x/[num][size][format] where </code>:  <code>num</code>, number of objects to display, <code>size</code> = size of each object (b=byte, h=half-word, w=word, g=giant (quad-word)), <code>format</code> = how to display each object (d=decimal, x=hex, o=octal, t=binary etc.)</li></ul></li><li><p>Example</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//malloc can fail</span></span><br><span class="line"><span class="type">int</span> *a = (<span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="number">12</span>*<span class="keyword">sizeof</span>(<span class="type">int</span>)); <span class="comment">//allocated memory is not initialized, should change to alloc(12,sizeof(int))</span></span><br><span class="line"><span class="keyword">if</span> (a == <span class="literal">NULL</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//macro shouldnot be used interchangeably.</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MULT(x,y) ((x)*(y))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MULT(x,y) (x * y)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> ADD(x,y) x + y</span></span><br></pre></td></tr></table></figure></li></ol><h3><span id="lookup-table">Lookup table</span><a href="#lookup-table" class="header-anchor">Â¶</a></h3><p>RISC-V regs:</p><table><thead><tr><th>reg</th><th style="text-align:center">name</th><th>saver</th><th>description</th></tr></thead><tbody><tr><td>x0</td><td style="text-align:center">zero</td><td>-</td><td>hardwired zero, always 0</td></tr><tr><td>x1</td><td style="text-align:center">ra</td><td></td><td>return address</td></tr><tr><td>x2</td><td style="text-align:center">sp</td><td>callee</td><td>stack pointer</td></tr><tr><td>x3</td><td style="text-align:center">gp</td><td>-</td><td>global pointer</td></tr><tr><td>x4</td><td style="text-align:center">tp</td><td>-</td><td>thread pointer</td></tr><tr><td>x5-7</td><td style="text-align:center">t0-2</td><td></td><td>temporary registers</td></tr><tr><td>x8</td><td style="text-align:center">s0/fp</td><td>callee</td><td>saved register / frame pointer</td></tr><tr><td>x9</td><td style="text-align:center">s1</td><td>callee</td><td>saved register</td></tr><tr><td>x10-11</td><td style="text-align:center">a0-1</td><td></td><td>function arguments / return values</td></tr><tr><td>x12-17</td><td style="text-align:center">a2-7</td><td></td><td>function arguments</td></tr><tr><td>x18-27</td><td style="text-align:center">s2-s11</td><td>callee</td><td>saved registers</td></tr><tr><td>x28-31</td><td style="text-align:center">t3-6</td><td></td><td>temporary registers</td></tr><tr><td>pc</td><td style="text-align:center">-</td><td>-</td><td>program counter</td></tr></tbody></table><p>Related readings:</p><ol><li>A nice blog explains pipe and inter-process communication in details: <a href="https://www.rozmichelle.com/pipes-forks-dups/">https://www.rozmichelle.com/pipes-forks-dups/</a></li><li>risc-v examples: <a href="https://marz.utk.edu/my-courses/cosc230/book/example-risc-v-assembly-programs/">https://marz.utk.edu/my-courses/cosc230/book/example-risc-v-assembly-programs/</a></li></ol><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>Rcu <a href="https://docs.kernel.org/RCU/index.html">doc</a>. More rcu readings: <a href="https://docs.kernel.org/RCU/rcu.html">https://docs.kernel.org/RCU/rcu.html</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>RISC-V Assembler Reference, <a href="https://michaeljclark.github.io/asm.html">https://michaeljclark.github.io/asm.html</a> <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.s081 operating systems </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Carpe Diem</title>
      <link href="/sg/2022/03/30/april/"/>
      <url>/sg/2022/03/30/april/</url>
      
        <content type="html"><![CDATA[<p>3æœˆæœ‰åŠä¸ªæœˆå¤„äºé—²ç½®çŠ¶æ€ã€‚å…ˆæ˜¯è¢«è¾…å¯¼å‘˜çº¦è°ˆå¯¼è‡´å¯¹å½“å‰çŠ¶æ€çš„çƒ¦èºä¸å®‰ï¼Œçœ‹äº†ä¸€å‘¨çš„é—²ä¹¦ï¼›è°ƒæ•´å¥½äº†çŠ¶æ€å­¦äº†ä¸€å‘¨ååˆæ„Ÿå†’ğŸ˜·äº†ä¸€å‘¨ã€‚å”¯ä¸€çš„å¥½æ¶ˆæ¯å°±æ˜¯ outreachy åˆç”³è¿‡äº†ï¼Œè¿™æ„å‘³ç€æˆ‘å¯ä»¥ç»§ç»­å°è¯•ä¸‹ä¸€é˜¶æ®µçš„æµ‹è¯•ã€‚</p><p>æœ€å¥½çš„å­¦ä¹ æ–¹å¼å°±æ˜¯ç»ƒä¹ ï¼Œè¿™æ˜¯è€ç”Ÿå¸¸è°ˆäº†ã€‚æœ¬æ–‡å°è¯•è¯´æ˜å¦‚ä½•ç»ƒä¹ ä»¥åŠæˆ‘ä¼šåšçš„ä¸€äº›å®è·µï¼Œè¿™äº›ä¸ªäººå®éªŒä¸ä¸€å®šä¼šæœ‰ç»“æœï¼Œä½†å¯¹æˆ‘æ¥è¯´å»åšäº†å°±æ˜¯å¯¹ carpe diem çš„æœ€ä½³å®è·µã€‚ç”±äºæˆ‘ä¸æ˜¯ä¸ªèªæ˜çš„äººï¼Œå’ŒåŒä¼´ç›¸æ¯”åˆç¼ºä¹å·çš„ç²¾ç¥ã€‚ä¸è¿‡æœ€åæƒ…å†µå°±å»å’–å•¡åº—æ‰“å·¥å¥½äº†ï¼Œæˆ‘å¯¹é‡‘é’±çš„è¿½é€ä»…é™äºç»´æŒä¸€ä¸ªæç®€çš„é«˜è´¨é‡ç”Ÿæ´»ç»„æˆã€‚æ¯”èµ·é³æ¬¡æ ‰æ¯”çš„å•†åœºï¼Œæˆ‘æ›´å–œæ¬¢è‡ªç„¶çš„çº¯ç²¹ã€‚ä»Šå¤©ä»å®éªŒå®¤æ´—ç“¶å­å‡ºæ¥åå‘ç°ç©ºä¸­çš„å¥½å¤šåªé¹¤ç©¿æ¢­åœ¨èŒ‚å¯†çš„æ ‘æ—ä¹‹ä¸Šï¼Œæœ‰åªæ’‘ç€ä¸¤æ¡å¤§é•¿è…¿åœåœ¨äº†å•è–„çš„æ ‘å¶ä¸Šï¼Œä¹Ÿæ˜¯è›®å¥‡ç‰¹çš„ã€‚ä¸æ˜ç™½ä»–ä¸ºä»€ä¹ˆèƒ½å¤Ÿè¿™æ ·ç«‹ç€ã€‚ï¼ˆæ‰¯è¿œäº†ï¼‰</p><p>è¯¾ç¨‹å­¦ä¹ è®¡åˆ’æ‰“ç®—åœ¨è¿™ ??? ä¸ªæœˆå¤§è‡´ç»“æŸã€‚æ›´é‡è¦çš„æ˜¯æˆ‘å¯ä»¥é€šè¿‡ gsoc/outreachy çš„æŸäº›å¼€æºç»„ç»‡ç»™çš„é¡¹ç›®åšä¸€äº›é’ˆå¯¹ os, db çš„ç»ƒä¹ ï¼Œå…³é”®æ˜¯ä»è¿™ä¸ªè¿‡ç¨‹å¾—åˆ°å·¥ç¨‹é¡¹ç›®çš„å®è·µæœºä¼šã€‚</p><p>ç¼–ç¨‹è¯­è¨€æˆ‘ä¸»è¦ä½¿ç”¨ c/c++ ï¼Œpython ç»ƒç®—æ³•é¢˜ï¼Œç¨å¾®äº†è§£ go, rust, java ã€‚åˆ«çš„å°å·¥å…·çœ‹æƒ…å†µã€‚</p><p>å¾ˆå¤šäººçš„æ•°æ®åº“å­˜å‚¨æ–¹å‘çš„å­¦ä¹ è·¯çº¿æ˜¯ï¼šå…¬å¼€è¯¾é¡¹ç›® -&gt; è‡ªå·±å†™ä¸ªå°å‹å­˜å‚¨å¼•æ“/æ•°æ®åº“/å®ä¹  * N(maximal) ã€‚æˆ‘åº”è¯¥ä¼šæ ¹æ®å¾—åˆ°çš„å®é™…æœºä¼šè€ƒè™‘æœªæ¥å‡ å¹´çš„ä»ä¸šæ–¹å‘ã€‚</p><img src="/sg/2022/03/30/april/e4dd1718fe09a4da.jpeg" class title="virtual">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>db execution</title>
      <link href="/sg/2022/03/17/db_execution/"/>
      <url>/sg/2022/03/17/db_execution/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#sorting">Sorting</a></li><li><a href="#aggregations">Aggregations</a></li><li><a href="#joins">Joins</a><ul><li><a href="#nested-loop-join">Nested loop join</a></li><li><a href="#sort-merge-join">Sort-merge join</a></li><li><a href="#hash-join">Hash join</a></li></ul></li></ul><!-- tocstop --></div><p>Execution process: the operators are arranged in a tree.</p><img src="/sg/2022/03/17/db_execution/Screenshot-7600728.png" class title="Screenshot-7600728"><h2><span id="sorting">Sorting</span><a href="#sorting" class="header-anchor">Â¶</a></h2><p>supported feature: ORDER BY, DISTINCT, GROUP BY</p><p>Problem: canâ€™t guarantee sorting data to fit in memory</p><p>Approach: external merge sort: splits the data set into separate runs, sorts them individually, and then combine into larger sorted runs.</p><ol><li>run: a list of key/value pairs.<ul><li>Key: attributes to compare</li><li>Value: record id/tuple</li></ul></li></ol><img src="/sg/2022/03/17/db_execution/Screenshot-7652824.png" class title="Screenshot-7652824"><ol start="2"><li><p>Procedure</p><ul><li><p>Sorting: sort in memory and then write back to a file on disk</p></li><li><p>Merging: combine sorted sub-files into single file</p></li></ul></li><li><p>2-way external merge sort</p><ul><li><p>data set = N pages, buffer pool = B pages</p></li><li><p>Pass:read and write each page in file.</p><img src="/sg/2022/03/17/db_execution/Screenshot-7653767.png" class title="Screenshot-7653767"></li><li><p>Number of passes = 1 + log<sub>2</sub><sup>N</sup></p><ul><li><p>1 represents pass 0 which reads every B pages of the table into buffer pool(memory).</p></li><li><p>In this case, B &gt;= 3(2I, 1O).</p></li></ul></li><li><p>totoal I/O cost: 2N*(# of passes)</p><img src="/sg/2022/03/17/db_execution/Screenshot-7653299.png" class title="Screenshot-7653299"></li><li><p><u>Problem</u>:  the worker blocks on disk I/O -&gt; more buffer pages wonâ€™t help in this case</p><ul><li>Approach:<strong>double buffering optimazation</strong>: <strong>prefetching</strong> the next run in the background and storing it in a second buffer while the system is processing the current run.</li><li>pro: reduce the wait time for I/O requests</li><li>Multi-thread env</li></ul></li></ul></li><li><p>General(k-way) merge sort</p><p>let k = B -1, #of runs = N/B * B</p><p>#of sorted runs = N/B, merge k runs</p><p>#of passes = 1 + log<sub>B-1</sub><sup>(N/B)</sup>   , total I/O cost = 2N*(# of passes)</p></li><li><p>optimize sorting by using b+ tree: Retrieve tuples in desired sort order by simply traversing the leaf pages of the tree.</p><p>The point is <strong># of I/O access</strong>.</p><p>Case 1: clustered b+ tree: if the index is a clustered index, traverse the tree</p><img src="/sg/2022/03/17/db_execution/Screenshot-7655087.png" class title="Screenshot-7655087"><p>case 2: unclustered b+ tree: else, donâ€™t do it.</p></li></ol><h2><span id="aggregations">Aggregations</span><a href="#aggregations" class="header-anchor">Â¶</a></h2><ol><li><p>Aggregations: Collapse values for a single attribute from multiple tuples into a single scalar value.</p><ul><li>two approaches for implementations: sorting, hashing</li><li>-&gt; GROUP BY, DISTINCT</li></ul></li><li><p>Sorting -&gt; ordering query</p><p>optimization: perform filter first: reduce the amount of data requiring to be sorted.</p><img src="/sg/2022/03/17/db_execution/Screenshot-7657643.png" class title="Screenshot-7657643"></li><li><p>Hashing -&gt; no ordering</p><p>Like sorting algorithms, DBMS spills data to disk when data doesnâ€™t fit in memory. Two phases for external hashing aggregate: partition, rehash.</p><p>The point is the location of operations given context.</p><ul><li><p>problem 1: what to split?</p><ol><li>partition: one or more pages that contain the set of keys with the same hash value.</li></ol></li><li><p>problem 2 : how to split?</p><ol><li><p>hash function: used to split tuples into partitions on disk</p><img src="/sg/2022/03/17/db_execution/Screenshot-7658353.png" class title="Screenshot-7658353"></li><li><p>rehash: Build <strong>in-memory hash table</strong> for each partition and compute the aggregation</p><p>Assume: each partition fits in memory.</p><img src="/sg/2022/03/17/db_execution/Screenshot-7658396.png" class title="Screenshot-7658396"></li></ol></li><li><p>summarization: result form: (GroupKey -&gt; RunningVal)</p><p>scenario: Insert new tuples(Gâ€™, Râ€™) into the hash table</p><ul><li>like dictionary insertion: Gâ€™ existed, update R to Râ€™; Gâ€™ not existed, insert (Gâ€™, Râ€™)</li></ul></li></ul></li></ol><h2><span id="joins">Joins</span><a href="#joins" class="header-anchor">Â¶</a></h2><ol><li><p>inner equijoin algorithm: joins tables where keys are equal.</p></li><li><p>goal: minimize repetitions</p></li><li><p>Join operators: choose what to join and smart joins</p></li><li><p>operator output: For a tuple r âˆˆ R and a tuple s âˆˆ S that match on join attributes, the join operator concatenates r and s together into a new output tuple.</p><ul><li><p>early materialization (data): Copy the values for the attributes in outer and inner tuples into a new output tuple. -&gt; no need to go back in the query plan</p><img src="/sg/2022/03/17/db_execution/Screenshot-7661256.png" class title="Screenshot-7661256"></li><li><p>late materialization( record ids): Only copy the joins keys along with the record ids of the matching tuples -&gt; suits for column store</p><img src="/sg/2022/03/17/db_execution/Screenshot-7661462.png" class title="Screenshot-7661462"></li></ul></li><li><p>cost analysis criteria: # of disk I/Os used to compute join</p><p>Only count input costs. Because outputs depend on the date computed afterwards.</p><p>The point is to find appropriate algorithms in certain scenario.</p></li><li><p>Variables used in this lecture:</p><ul><li>M pages in table R (Outer Table), m tuples total</li><li>N pages in table S (Inner Table), n tuples total</li></ul></li></ol><h3><span id="nested-loop-join">Nested loop join</span><a href="#nested-loop-join" class="header-anchor">Â¶</a></h3><ol><li><p>Nested loop join: two nested FOR loops that iterate over the tuples in both tables and compares each unique of them.</p><ul><li><p>locality:DBMS uses smaller table as the outer table and buffers it in memory.</p></li><li><p>Index: find matches</p></li></ul></li><li><p>Stupid/Simple NLJ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foreach tuple r âˆˆ R:</span><br><span class="line">foreach tuple s âˆˆ S:</span><br><span class="line">emit, if r and s match</span><br></pre></td></tr></table></figure></li><li><p>Block NLJ:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">foreach block B_R âˆˆ R:</span><br><span class="line">foreach block B_S âˆˆ S:</span><br><span class="line">foreach tuple r âˆˆ B_R: </span><br><span class="line">foreach tuple s âˆˆ B_s:</span><br><span class="line">emit, if r and s match</span><br></pre></td></tr></table></figure></li><li><p>Index NLJ</p></li></ol><h3><span id="sort-merge-join">Sort-merge join</span><a href="#sort-merge-join" class="header-anchor">Â¶</a></h3><ol><li><p>Sort-merge join: sorts the two tables on their join key(s)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sort R,S on join keys</span><br><span class="line">cursorR â† Rsorted, cursorS â† Ssorted</span><br><span class="line">while cursorR and cursorS:</span><br><span class="line">if cursorR &gt; cursorS:</span><br><span class="line">increment cursorS</span><br><span class="line">if cursorR &lt; cursorS:</span><br><span class="line">increment cursorR</span><br><span class="line">elif cursorR and cursorS match:</span><br><span class="line">emit</span><br><span class="line">increment cursorS</span><br></pre></td></tr></table></figure></li><li><p>Cost analysis: sort + merge</p></li></ol><h3><span id="hash-join">Hash join</span><a href="#hash-join" class="header-anchor">Â¶</a></h3><ol><li>hash join: use a hash table to split up the tuples into smaller chunks based on their join attribute(s).</li><li>basic hash join</li><li>Grace hash join/Hybrid hash join</li></ol>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 15-445 databases </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>22å²ç”Ÿæ—¥â€”â€”è½¬æŠ˜æœŸ</title>
      <link href="/sg/2022/03/12/22/"/>
      <url>/sg/2022/03/12/22/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#ge-ren-jiao-yu">ä¸ªäººæ•™è‚²</a><ul><li><a href="#zao-qi">æ—©æœŸ</a></li><li><a href="#chu-shi-ocw">åˆè¯† ocw</a></li><li><a href="#shi-cuo">è¯•é”™</a></li></ul></li><li><a href="#zhi-ye-fa-zhan">èŒä¸šå‘å±•</a></li><li><a href="#wu-yong-zhi-xue">æ— ç”¨ä¹‹å­¦</a></li></ul><!-- tocstop --></div><p>å’Œå‰ä¸¤å¹´ç›¸æ¯”ï¼Œç°åœ¨çš„çŠ¶æ€æ¯”ä¹‹å‰å¥½å¾—å¤šäº†ï¼Œè€Œæˆ‘å¸Œæ±‚çš„å¯¹ä¸ªäººç”Ÿæ´»çš„å®Œå…¨æŒæ§ä¹Ÿå°±åœ¨çœ¼å‰ã€‚æ¯”èµ·20å²æ—¶è½¬ä¸“ä¸šé¢è¯•å—åˆ°çš„æ‰“å‡»å’Œ21å²å›°é¡¿åœ¨å„ç§ç”Ÿç§‘è¯¾ç¨‹é—´å­¦ä¹  CS åŸºç¡€è¯¾ï¼Œæˆ‘æœ‰æ›´å¤§çš„å¯èƒ½åœ¨è¿™ä¸€å¹´å®Œæˆ CS ç³»ç»Ÿæ–¹å‘åŸºç¡€è¯¾ç¨‹çš„å­¦ä¹ å’Œå¼€å§‹çœŸæ­£çš„è¯•ç‚¼ã€‚æˆ‘ä¸æ˜¯ä¸ªèªæ˜çš„äººï¼Œä¼šæœ‰ä¸€äº›å¤©é©¬è¡Œç©ºçš„æƒ³æ³•å’Œä¸ªäººç†æƒ³ä¸»ä¹‰ã€‚è‡ªæˆ‘æ•™è‚²ä¹Ÿæ˜¯çº æ­£æˆ‘çš„ä¸€äº›æ€§æ ¼ç¼ºé™·çš„è¿‡ç¨‹ï¼Œåœ¨ã€Šç§¯æå¿ƒç†å­¦ã€‹é‡Œæˆ‘ç»ˆäºè®¤è¯†åˆ°å®Œç¾ä¸»ä¹‰å¯¼è‡´çš„æ‹–å»¶ç—‡ã€‚è€Œåœ¨è¿‘ä¸‰å¹´å­¦ä¹ å…¬å¼€è¯¾ç¨‹çš„ç»å†é‡Œï¼Œæˆ‘é‡åˆ°äº†å¾ˆå¤šå¤±è´¥ï¼Œä¹Ÿæ”¹å˜äº†å¾ˆå¤šåˆæ—¶çš„æƒ³æ³•ï¼Œä½†æˆ‘æ²¡æœ‰æ”¾å¼ƒå…¥å­¦æ—¶çš„ä¿¡å¿µâ€”â€”æˆ‘è¦å­¦å¥½è®¡ç®—æœºè¯¾ç¨‹ã€‚è¿™ä¹‹é—´è®½åˆºçš„åœ°æ–¹åœ¨äºï¼šå¡«å¿—æ„¿æ—¶è¿™æ‰€å­¦æ ¡ï¼ˆå³ä½¿åˆ†å¤Ÿï¼‰æ²¡å¡«ä»»ä½• CS ç›¸å…³ä¸“ä¸šç„¶ååœ¨äº”åˆ†é’Ÿçš„è½¬ä¸“ä¸šé¢è¯•ä¸­è¢«åˆ·äº†ã€‚ä¸è¿‡æˆ‘çš„ç”Ÿæ´»é‡Œè®½åˆºä¹‹å¤„åˆ°å¤„éƒ½æ˜¯:)</p><h2><span id="ge-ren-jiao-yu">ä¸ªäººæ•™è‚²</span><a href="#ge-ren-jiao-yu" class="header-anchor">Â¶</a></h2><p>æˆ‘çš„å­¦ä¹ æ–¹å¼æ–¹æ³•ç»å†äº†å¾ˆå¤šå˜åŒ–ï¼Œä½†æˆ‘å§‹ç»ˆè®¤ä¸º<strong>æ•™è‚²</strong>æ˜¯ä¸€ä¸ªäººæ”¹å˜è‡ªå·±çš„æœ€å¥½é€”å¾„ã€‚</p><h3><span id="zao-qi">æ—©æœŸ</span><a href="#zao-qi" class="header-anchor">Â¶</a></h3><p>é«˜è€ƒç»“æŸåæˆ‘è¿·ä¸Šäº†â€œè‡ªæˆ‘æå‡â€çš„è¯´æ³•ï¼Œå®šäº†ä¸€äº›ä¸å¤ªå¯è¡Œçš„å°ç›®æ ‡ã€‚è¿™ç§è¿‡åº¦ç®€åŒ–çš„è¯ä¼šæ¨¡ç³ŠçœŸæ­£çš„æƒ³æ³•å’Œæ‰€å¤„çš„çœŸå®ç¯å¢ƒï¼Œè€Œæˆ‘å½“æ—¶åˆæ¯”è¾ƒå®¹æ˜“ç›¸ä¿¡å¤–æ¥ä¿¡æ¯å’Œæƒå¨ï¼Œé€ æˆä¸€äº›é”™è¯¯åˆ¤æ–­ã€‚æ¯”å¦‚â€œæŸæ ¡è½¬ä¸“ä¸šæ”¿ç­–å®½æ¾â€œï¼Œâ€MIT ç§‘æŠ€è¯„è®ºï¼šç”Ÿç‰©ä¸è®¡ç®—æœºç»“åˆæ˜¯æœªæ¥â€œï¼Œâ€œæŸæ ¡A-å­¦ç§‘ï¼šç”Ÿç‰©â€â€¦</p><h3><span id="chu-shi-ocw">åˆè¯† ocw</span><a href="#chu-shi-ocw" class="header-anchor">Â¶</a></h3><p>æˆ‘è®¤ä¸ºå›½å¤–åæ ¡å…¬å¼€è¯¾çš„å®è·µæ„ä¹‰æ˜¯æœ€å¼ºçš„ï¼Œæ˜¾ç„¶æœ€å¼€å§‹æˆ‘å¹¶æ²¡æœ‰è¿™æ ·æƒ³ã€‚ä»åˆä¸­æ—¶å°±ä»æœ‹å‹é‚£é‡Œå¾—çŸ¥ç½‘æ˜“å…¬å¼€è¯¾ï¼Œä½†å½“æ—¶é˜…å†å°šæµ…ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„åˆ¤æ–­èƒ½åŠ›ï¼Œå­¦ä¹ ç»éªŒå’Œè®¾å¤‡å»æœ‰æ•ˆå­¦ä¸€é—¨è¯¾ç¨‹ï¼ŒåªåŠ å…¥æ”¶è—å¤¹ç§¯ç°äº†ã€‚åˆ°é«˜ä¸€æ—¶æˆ‘åˆå¼€å§‹å°è¯•å­¦å…¬å¼€è¯¾ï¼Œæ¯”å¦‚ stanford cs106A ï¼Œç„¶è€Œæˆ‘2000å—çš„ç ´æ—§ç”µè„‘æ²¡æ³•å®‰è£… Eclipse ä»¥åŠæˆ‘çš„è‹±è¯­èƒ½åŠ›çœ‹è®²ä¹‰æœ‰ä¸€äº›å›°éš¾ï¼Œæœ€é‡è¦çš„æ˜¯å½“æ—¶æˆ‘å¯¹è®¡ç®—æœºæ²¡æœ‰åå¥½ï¼Œå½“è§£å†³ä¸äº†ç½‘ç»œè®¾å¤‡çš„é—®é¢˜åæˆ‘å°±æ²¡æœ‰ç»§ç»­ä¸‹å»ã€‚æˆ‘ä»ç„¶è®°å¾—é‚£é—¨è¯¾æ˜¯é€šè¿‡ä¸€ä¸ªæœºå™¨äººå‰åå·¦å³ç§»åŠ¨æ¥å®Œæˆç¨‹åºè®¾è®¡ä»‹ç»çš„ï¼Œå¦‚æœæœ‰æ›´å¤šç¼–ç¨‹ç»ƒä¹ ä¼šæ˜¯ä¸€é—¨ä¸é”™çš„è¯¾ç¨‹ã€‚é«˜è€ƒé‚£å¹´ç»å†äº†ä¸€äº›äº‹åå†³å®šä»Šåè¦å­¦è®¡ç®—æœºè¯¾ç¨‹ï¼Œç¬¬ä¸€æ¬¡æ¥è§¦ ocw æ˜¯åœ¨å¤§å­¦é‡Œï¼Œæˆ‘è§‰å¾—å—ç›ŠåŒªæµ…ã€‚è™½ç„¶æˆ‘ä»å¼€å­¦æ—¶å°±å¼€å§‹çœ‹ 6.0001 å’Œæ•°å­¦ç‰©ç†çš„å¯¼è®ºè¯¾ç¨‹ï¼Œä½†å—é™äºç½‘ç»œæˆ‘æ²¡èƒ½å¤Ÿæ¥è§¦æ›´å¤šè¯¾ç¨‹èµ„æºã€‚ç„¶è€Œ edx, coursera, khan academy ç­‰åœ¨çº¿è¯¾ç¨‹æ•™è‚²å¹³å°ä»è®©æˆ‘çœ‹åˆ°äº†è‡ªæˆ‘æ•™è‚²çš„å¯èƒ½æ€§ï¼Œç„¶åå°±æ˜¯å…¬å¼€è¯¾å­¦ä¹ è¯•é”™äº†ã€‚</p><h3><span id="shi-cuo">è¯•é”™</span><a href="#shi-cuo" class="header-anchor">Â¶</a></h3><ol><li>GitHub ä¸Šä¸å°‘å…³äºè‡ªå­¦ CS çš„è¯¾ç¨‹è¡¨ï¼šæœ‰äº›è¯¾ç¨‹æ¯”è¾ƒæ—§äº†ï¼Œæ²¡æœ‰åˆé€‚çš„èµ„æºï¼Œä¸ç¬¦åˆä¸ªäººè¯¾ç¨‹å­¦ä¹ ç›®æ ‡</li><li>MIT GIR çš„åŸºç¡€è¯¾ç¨‹ï¼šåŒ…æ‹¬ç”Ÿç‰©ï¼Œæ•°å­¦ï¼Œç‰©ç†ï¼ŒåŒ–å­¦ç­‰åŸºç¡€å­¦ç§‘çš„å¯¼è®ºè¯¾ã€‚å­¦è¿‡ã€‚</li><li>MIT åœ¨å¼€æ”¾çš„æ•°å­¦/è®¡ç®—æœº/ç”µå­ç±»è¯¾ç¨‹ï¼šå‘ç°è‡ªå·±æ²¡å…´è¶£/å­¦ä¸æ‡‚å¤ªæ·±å…¥çš„æ•°å­¦è¯¾ç¨‹ï¼Œæ¯”å¦‚å¸¸å¾®åˆ†æ–¹ç¨‹åªå­¦äº†ä¸‰åˆ†ä¹‹ä¸€å°±ä¸å†å­¦äº†ã€‚è™½ç„¶å¬è¯´ä¿¡å·é‚£é—¨è¯¾ç¨‹å¾ˆæ£’ï¼Œä½†ä»ä¸æ˜¯å…´è¶£æ‰€åœ¨ï¼Œæ²¡å­¦ã€‚å·®ä¸å¤šåœ¨å¤§ä¸€ä¸‹å†³å®šæŒ‰ MIT 6-3 çš„è¯¾ç¨‹è®¡åˆ’ï¼Œä½†å­¦ä¸æ‡‚ 6.042J ä¸€åº¦è®©æˆ‘æ€€ç–‘è‡ªå·±åˆ°åº•é€‚ä¸é€‚åˆå­¦ CS, 6.004 17 edx è¯¾ç¨‹ä¹Ÿæä¸èµ·å…´è¶£å­¦ã€‚</li><li>6-3/edx è¯¾ç¨‹ï¼šå¤§å­¦å‰ä¸¤å¹´çš„ç”Ÿç§‘çš„äº‹è®©æˆ‘è§‰å¾—éå¸¸éš¾å—ï¼Œåœ¨è¯¾ç¨‹é—´éš™å­¦ä¹ è¯¾ç¨‹çš„çŠ¶æ€ä¹Ÿå¾ˆç³Ÿç³•ã€‚å¤§äºŒä¸Šæ„Ÿè§‰ä»€ä¹ˆä¸œè¥¿éƒ½å­¦ä¸æ‡‚ï¼Œé‡æ‹¾6.042çœ‹ä¹¦çœ‹å¾—å¤´ç–¼ï¼Œé¢˜åˆæ²¡æœ‰ç­”æ¡ˆï¼›å­¦6.009 lab1 çš„ correlation é€»è¾‘æƒ³äº†å¾ˆä¹…ä¹Ÿæƒ³ä¸å‡ºæ¥ï¼Œçœ‹è®²ä¹‰ä¹Ÿæ„Ÿè§‰åªæ˜¯çº¸ä¸Šè°ˆå…µï¼›ç¿»äº†ä¸‹ effective python æ„Ÿè§‰æ²¡ä»€ä¹ˆç”¨ï¼›edx ä¸Šæœºå™¨å­¦ä¹ çš„ä¸€é—¨è¯¾ç¨‹ä¹Ÿæ²¡ä»€ä¹ˆå…´è¶£ã€‚ç„¶åå°±çœ‹åˆ°äº†èƒ¡ Sir ï¼ˆ@èƒ¡æ´¥é“­ï¼‰çš„å…¬å¼€è¯¾å­¦ä¹ çš„å¸–å­å’Œåšå®¢ï¼ŒåŠ äº†ç¾¤åæ‰“ç®—æ”¹å­¦ Berkeley 61B/C ã€‚åæ¥åˆçœ‹åˆ°è¿Ÿ Sirï¼ˆ@Alex Chiï¼‰çš„æ–‡å­—ï¼Œè§‰å¾—å­¦ä»¥è‡´ç”¨æ‰æ˜¯æˆ‘å­¦ä¹ æœ€ä¸»è¦çš„ç›®æ ‡ã€‚</li><li>Berkeley 61B/C è¯¾ç¨‹ï¼šå¤§äºŒååŠæ®µæ—¶é—´å°±æ˜¯åœ¨è¿™ä¸¤é—¨è¯¾ä¸ŠæŒ£æ‰äº†ï¼ŒæœŸé—´å­¦äº†CS 106Lã€‚æ²¡æœ‰æŒæ¡åˆé€‚çš„å­¦ä¹ æŠ€å·§å’Œæµ‹è¯•æ˜¯è‡ªå­¦éå¸¸å¤§çš„éš¾é¢˜ã€‚å¦‚æœä¸èƒ½çŸ¥é“æ‰€å†™çš„ä»£ç æ˜¯å¦æ­£ç¡®ï¼Œå°±ä¸èƒ½æœ‰æ•ˆçš„å­¦ä¹ å’Œæ”¹æ­£ã€‚</li><li>6-3 è¯¾ç¨‹ç»§ç»­ï¼šå¤§ä¸‰ä¸Šå¼€å§‹æˆ‘åˆå¼€å§‹ç»§ç»­è¿™éƒ¨åˆ†è¯¾ç¨‹ï¼Œå­¦äº† 6.006, 6.031, 6.033, 6.004, 6.046çš„éƒ¨åˆ†å†…å®¹ï¼Œå†™äº†ç‚¹ os, db çš„ä»£ç ã€‚å¯¹æ‰å®åŸºç¡€çš„æ¸´æ±‚è®©æˆ‘æ²¡æ³•åœ¨æ²¡ææ‡‚è¿™äº›ä»£ç æ—¶å¼€å§‹å®ä¹ ï¼Œæ˜¥æ‹›ä¹‹åæˆ–è®¸æ²¡æœ‰åˆé€‚çš„å®ä¹ æœºä¼šï¼Œä½†æˆ‘è¿˜æ˜¯ä¸å¾—ä¸è¿™ä¹ˆåšã€‚æˆ‘éœ€è¦æœ‰ä¸€ä¸ªèƒ½å¤Ÿä»å¤´å¼€å§‹çš„èµ·ç‚¹ï¼Œè¿™æ ·ä»¥åä¸ç®¡é‡åˆ°æ€æ ·çš„éš¾é¢˜ï¼Œæˆ‘éƒ½å¯ä»¥é‡æ–°ç«™åœ¨è¿™ä¸ªèµ·ç‚¹æ€è€ƒé—®é¢˜çš„å‘å±•ã€‚</li><li>HASS è¯¾ç¨‹ï¼šæˆ‘è®¤ä¸ºç¤¾ç§‘è¯¾ç¨‹çš„å­¦ä¹ èƒ½è®©æˆ‘æ›´ç†è§£è¿™ä¸ªç¤¾ä¼šå„ä¸ªç³»ç»Ÿçš„è¿ä½œæ–¹å¼ã€‚å¯æƒœæˆ‘å¤§ä¸€ä¸‹åœ¨çœ‹ç›¸å…³è¯¾ç¨‹æ—¶ï¼Œæ¯”å¦‚å¾®è§‚ç»æµå­¦ï¼Œå…¬æ­£ï¼Œä¿®è¾å­¦ï¼Œéƒ½åŸºæœ¬ä¸Šåœ¨ç¬¬ä¸€èŠ‚è¯¾ç¡ç€äº†ï¼Œå…¬æ­£æ˜¯çœ‹è®²ä¹‰çœ‹å›°çš„ã€‚è€Œç»è¿‡äº†æ–°å† å’Œä¸€äº›ç¤¾ä¼šäº‹ä»¶åï¼Œæˆ‘è®¤ä¸ºæˆ‘åº”è¯¥æ˜ç™½æ€æ ·å»çœ‹å¾…è¿™äº›äº‹æƒ…ï¼Œæˆ‘éœ€è¦çŸ¥é“æ€æ ·æ”¹å–„å¿ƒç†å¥åº·ï¼Œäºæ˜¯çœ‹äº†æ”¿æ²»å“²å­¦å’Œç§¯æå¿ƒç†å­¦çš„å¯¼è®ºè¯¾ã€‚ä¸–ç•Œçš„å˜åŒ–æ˜¯è¿™æ ·å¿«ï¼Œç‹¬ç«‹æ€è€ƒæ˜¯ä¸€ä¸ªéœ€è¦é•¿æœŸå­¦ä¹ çš„è¯¾ç¨‹ï¼Œåªæœ‰åœ¨ç°å®ä¸­æ‰èƒ½æ£€éªŒå’Œçº æ­£ã€‚</li></ol><h2><span id="zhi-ye-fa-zhan">èŒä¸šå‘å±•</span><a href="#zhi-ye-fa-zhan" class="header-anchor">Â¶</a></h2><p>æˆ‘ä»Šåè¦ä»äº‹å­˜å‚¨ç³»ç»Ÿç›¸å…³çš„å·¥ä½œï¼Œé‡åˆ°çš„å›°éš¾ä¼šæœ‰å¾ˆå¤šï¼Œä½†æˆ‘åªéœ€è¦æŠŠå¯ä»¥æ”¹å˜çš„éƒ¨åˆ†åšäº†ã€‚</p><h2><span id="wu-yong-zhi-xue">æ— ç”¨ä¹‹å­¦</span><a href="#wu-yong-zhi-xue" class="header-anchor">Â¶</a></h2><p>[null]</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>db index</title>
      <link href="/sg/2022/03/05/db_index/"/>
      <url>/sg/2022/03/05/db_index/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#hash-tables">Hash tables</a><ul><li><a href="#static-hashing">Static hashing</a></li><li><a href="#dynamic-hashing">Dynamic hashing</a></li></ul></li><li><a href="#b-tree">B+ tree</a><ul><li><a href="#design-choices">Design choices</a></li><li><a href="#optimizations">Optimizations</a></li></ul></li><li><a href="#index">Index</a><ul><li><a href="#trie-index">Trie index</a></li><li><a href="#radix-tree">Radix tree</a></li><li><a href="#inverted-index">Inverted index</a></li></ul></li><li><a href="#concurrency-control">Concurrency control</a><ul><li><a href="#locks-vs-latches">Locks vs. latches</a></li><li><a href="#latch-designs">Latch designs</a></li><li><a href="#practice">Practice</a></li></ul></li></ul><!-- tocstop --></div><p>DBMSâ€™s execution engine needs to access pages before doing operation on those.</p><p>Design decisions when implementing data structures for the DBMS:</p><ol><li>Data organization: memory layout and information to store -&gt; access</li><li>Concurrency: multiple threads to access without causing problems -&gt; efficient access</li></ol><p>There are two types of data structures: hash table, trees.</p><h2><span id="hash-tables">Hash tables</span><a href="#hash-tables" class="header-anchor">Â¶</a></h2><ol><li><p>Complexity: space: O(n); runtime: amortized O(1) lookup</p></li><li><p>hash tables implementations:</p><ul><li><p>hashing functions: collision rate</p></li><li><p>schemes: <em>handle key collisions</em> after hashing</p></li></ul></li></ol><h3><span id="static-hashing">Static hashing</span><a href="#static-hashing" class="header-anchor">Â¶</a></h3><p>The size of the hash table is fixed. DBMS has to rebuild a larger hash tables if it runs out of storage space.</p><p>Assume: knowing the number of elements it wants to store.</p><ol><li><p>Linear probe hashing</p><ul><li><p>collision: linearly seach the adjacent slots until an open one is found</p><img src="/sg/2022/03/05/db_index/Screenshot-7503728.png" class title="Screenshot-7503728"></li><li><p>Non-unique keys: the same key may be associated with multiple different values or tuples</p><ul><li>approach 1: separate linked list</li><li>approach 2: redundant keys: store the same key multiple times in the table</li></ul></li><li><p>deletion: removing the entry from the slot -&gt; canâ€™t find the slots having collisions with the deleted one.</p><ul><li><p>approach 1: tombstone: instead of deletion, replace it with magic entry indicating to keep scanning for future lookups.</p><img src="/sg/2022/03/05/db_index/Screenshot-7504450.png" class title="Screenshot-7504450"></li><li><p>Approach 2: movement:  shift the adjacent data after deleting an entry to fill the now empty slot.</p><img src="/sg/2022/03/05/db_index/Screenshot-7504407.png" class title="Screenshot-7504407"></li></ul></li></ul></li><li><p>Robin Hood Hashing: steals slots from â€œrichâ€ keys and give them to â€œpoorâ€ keys</p><p>Each key tracks the number of positions they are from where its <em>optimal position</em> in the table</p><img src="/sg/2022/03/05/db_index/Screenshot-7509790.png" class title="Screenshot-7509790"></li><li><p>Cuckoo Hashing: Use multiple hash tables with different hash function seeds.</p><img src="/sg/2022/03/05/db_index/Screenshot-7510112.png" class title="Screenshot-7510112"><img src="/sg/2022/03/05/db_index/Screenshot-7510099.png" class title="Screenshot-7510099"></li></ol><h3><span id="dynamic-hashing">Dynamic hashing</span><a href="#dynamic-hashing" class="header-anchor">Â¶</a></h3><p>property: Dynamic hash tables resize themselves on demand</p><ol><li><p>Chained hashing: linked list to handle collisions</p><img src="/sg/2022/03/05/db_index/Screenshot-7510352.png" class title="Screenshot-7510352"></li><li><p>extendible hashing: splits buckets in case of letting chains to grow forever</p><p>Local/global depth bit: track slots</p><p>problem 1: what to split: data movement: move data within the buckets of the <em>split chain</em>; all other buckets are left untouched.</p><p>problem 2: when to split: if the bucket is full, splits the bucket and reshuffle its elements.</p><p>observe: the changed pointers to slots are on the split chain.</p><img src="/sg/2022/03/05/db_index/Screenshot-7510635.png" class title="Screenshot-7510635"><img src="/sg/2022/03/05/db_index/Screenshot-7510667.png" class title="Screenshot-7510667"></li><li><p>linear hashing: maintains a split pointer that keeps track of the next bucket to split instead of immediately splitting a bucket when it overflows.</p><p>Procedures:</p><ol><li>Add a new slot in split pointers, and create a new hash function</li><li>Decide whether to apply the new hash fuction on new query index.</li><li>Delete original hash function and replace with new hash function when run out of slots.</li></ol><ul><li><p>Insertion -&gt; when buckets are full</p></li><li><p>Deletion: reverse of insertion: pointers move backwards -&gt; when buckets are empty</p><img src="/sg/2022/03/05/db_index/Screenshot-7511632.png" class title="Screenshot-7511632"><img src="/sg/2022/03/05/db_index/Screenshot-7513367.png" class title="Screenshot-7513367"></li></ul></li></ol><p>â€‹</p><h2><span id="b-tree">B+ tree</span><a href="#b-tree" class="header-anchor">Â¶</a></h2><ol><li>table index: index of a tableâ€™s attributes. The table is stored in the sort order specified by the primary key. Can be either heap- or index-organized storage</li><li>Trade-off on the number of indexes to create per database: storage overhead Vs. maintenance overhead</li></ol><p>Overview:</p><ol><li><p>b+ tree: a self-balancing tree data structure that keeps data sorted and allows searches, sequential access, insertion, and deletions in O(log(n)). Good at read/write large blocks of data.</p><img src="/sg/2022/03/05/db_index/Screenshot-7514359.png" class title="Screenshot-7514359"></li><li><p>difference with b tree: b+ tree stores values only in leaf nodes; b tree store values in all nodes.</p></li></ol><p><strong>Structure:</strong></p><ol><li><p>Key-value pair: inner node: store pointers; leaf node: values.</p><img src="/sg/2022/03/05/db_index/Screenshot-7515275.png" class title="Screenshot-7515275"><ul><li>Leaf node values have two approaches: 1) record IDs: pointers to the location of tuple; 2) tuple data: store the actual contents of the tuple in each node</li></ul></li><li><p>node: Arrays at every node are sorted by the keys.</p></li></ol><p><strong>Operations:</strong></p><ol><li><p>Insertion:</p><p>Split leaves when the tree got too full</p><ul><li>Leaf node: copy up middle key</li><li>inner node: push up middle key</li></ul></li><li><p>deletion</p><p>Redistribute by borrowing from sibling when lead is not half full; Merge nodes when redistribution fails.</p><ul><li>Leaf node: delete the key</li><li>Inner node: delete entry in parent pointing to the key</li></ul></li><li><p>selection conditions: Support search provides <em>any</em> of the attributes of the search key.</p><p>-&gt; Hash index requires <em>all</em> attributes in the search key.</p></li><li><p>Non-unique indexes</p><p>like hash tables: 1) duplicate keys, 2)store value lists.</p><img src="/sg/2022/03/05/db_index/Screenshot-7517327.png" class title="Screenshot-7517327"></li><li><p>duplicate keys approaches</p><ul><li><p>Append record IDs</p><img src="/sg/2022/03/05/db_index/Screenshot-7517457.png" class title="Screenshot-7517457"></li><li><p>overflow leafnodes: Allow leaf nodes to spill into overflow nodes that contain<br>the duplicate keys.</p><ul><li>complex to maintain</li></ul><img src="/sg/2022/03/05/db_index/Screenshot-7517477.png" class title="Screenshot-7517477"></li></ul></li><li><p>Clustered indexes: If a table does not contain a primary key, the DBMS will automatically make a hidden row id primary key</p><p>(think about VEB tree)</p><img src="/sg/2022/03/05/db_index/Screenshot-7517887.png" class title="Screenshot-7517887"><p>Sorting:</p><ol><li>heap clustering: tuples are sorted in the heapâ€™s pages using the order specified by a clustering index. DBMS can jump directly to the pages if clustering indexâ€™s attributes are used to access tuples</li></ol><img src="/sg/2022/03/05/db_index/Screenshot-7517956.png" class title="Screenshot-7517956"><ol start="2"><li>index scan page sorting: sort all the tuples that it needs based on their page id.</li></ol><img src="/sg/2022/03/05/db_index/Screenshot-7517996.png" class title="Screenshot-7517996"></li></ol><h3><span id="design-choices">Design choices</span><a href="#design-choices" class="header-anchor">Â¶</a></h3><ol><li><p>node size</p><ul><li><p>~ storage device: the faster the storage device is, the smaller the node size is. Because we want to reduce the number of accesses in slower device like HDD compared with RAM. And the amortized runtime of read over large chunk of data is more optimal.</p></li><li><p>~ workload: there are two types of workload: point query; sequential scan. A point query would prefer small pages to reduce extra info while sequential scan likes large pages to reduce the number of fetches.</p></li></ul></li><li><p>merge threshold</p><ul><li>like lazy allocation in os</li><li>Delaying merge to reduce the amount of reorganization like expensive write latches.</li></ul></li><li><p>variable length keys</p><ul><li><p>good in a way: 1)space saving: reduce a small subset of large keys lead to lot of wasted space</p></li><li><p>approach 1: pointers  -&gt; embedded devices: registers, cache</p><p>Store the keys as pointers to the tupleâ€™s attribute</p></li><li><p>approach 2: Variable Length Nodes -&gt; infeasible: large memory management overhead</p><p>allow nodes to have variable length.</p></li><li><p>approach 3: padding -&gt; infeasible: big waste of memory</p><p>Set each keyâ€™s size to the size of the max key and pad out all the shorter keys.</p></li><li><p>approach 4: key map/indirection</p><p>Embed an array of pointers that map to the key + value list within the node. Place prefix of each key alongside the index.</p><ul><li>unlike approach 1, a4 stores the dictionary index that needs small space not the key pointers, which allows storing prefix alongside of the index.</li></ul><img src="/sg/2022/03/05/db_index/Screenshot-7569559.png" class title="Screenshot-7569559"></li></ul></li><li><p>Intra-node search: search within the node</p><ul><li><p>A1: linear: Scan node keys from beginning to end.</p></li><li><p>A2: binary: Jump to middle key, pivot left/right depending on comparison</p></li><li><p>A3: interpolation: Approximate location of desired key based on known distribution of keys -&gt; infeasible: limited applicability to keys with certain properties and complexity, only seen in academic use</p><p>take advantage of metadata(max, min ,avg â€¦) and infer approximate location</p><img src="/sg/2022/03/05/db_index/Screenshot-7578914.png" class title="Screenshot-7578914"></li></ul></li></ol><h3><span id="optimizations">Optimizations</span><a href="#optimizations" class="header-anchor">Â¶</a></h3><ol><li><p>Prefix compression: extract prefix and store unique suffix for each key -&gt; keys in the same node have overlapping prefix</p><img src="/sg/2022/03/05/db_index/Screenshot-7578988.png" class title="Screenshot-7578988"></li><li><p>duplication: write key once and maintain a list of record ids with the key -&gt; non-unique keys</p><p>~ MVCC</p><img src="/sg/2022/03/05/db_index/Screenshot-7579194.png" class title="Screenshot-7579194"></li><li><p>suffix truncation:  only storing the minimum differentiating prefix of each key at a given inner node.  -&gt; No need to search the entire key</p><ul><li>leave few redundant digits: fault tolerance -&gt; indeterminable insertion/deletion  due to an identical prefix</li></ul><img src="/sg/2022/03/05/db_index/Screenshot-7579249.png" class title="Screenshot-7579249"></li><li><p>bulk insert: sort the keys and build the index from the bottom up -&gt; fastest way to build a new b+ tree</p><ul><li>Trade-off: leaving vacancy or not when packing the leaves depends on context</li></ul><p>Keys: 3, 7, 9, 13, 6, 1; sorted keys: 1, 3, 6, 7, 9, 13</p><img src="/sg/2022/03/05/db_index/Screenshot-7579810.png" class title="Screenshot-7579810"></li><li><p>Pointer swizzling: store raw pointers instead of page ids for pinned page in the buffer pool  -&gt; reduce expensive buffer pool fetches</p><img src="/sg/2022/03/05/db_index/Screenshot-7580430.png" class title="Screenshot-7580430"></li></ol><h2><span id="index">Index</span><a href="#index" class="header-anchor">Â¶</a></h2><ol><li><p>what is index: provide fast access to data items.</p></li><li><p>methods</p><ul><li><p>implicit indexes: provide primary key with integerity constraints</p></li><li><p>partial indexes: Create an index on a subset of the entire table. -&gt; reduce full page fetches overhead</p><img src="/sg/2022/03/05/db_index/Screenshot-7581006.png" class title="Screenshot-7581006"></li><li><p>covering indexes(index-only scans): locate data records in the table and not to return data -&gt; reduces contention on the DBMSâ€™s buffer pool resources</p><img src="/sg/2022/03/05/db_index/Screenshot-7581138.png" class title="Screenshot-7581138"></li><li><p>index include columns: Embed additional columns in indexes<br>to support index-only queries.</p><ul><li>Extra columns are only stored in the leaf nodes and are not part of the search key</li></ul><img src="/sg/2022/03/05/db_index/Screenshot-7581440.png" class title="Screenshot-7581440"></li><li><p>Function/expression indexes: use expressions when declaring an index. store the output of a function or expression as the key instead of the original value. -&gt; ? which queries can use that index</p><img src="/sg/2022/03/05/db_index/Screenshot-7581987.png" class title="Screenshot-7581987"></li></ul></li></ol><h3><span id="trie-index">Trie index</span><a href="#trie-index" class="header-anchor">Â¶</a></h3><ol><li><p>make oberservations: the inner node keys in a B+Tree cannot tell you whether or not a key exists in the index -&gt; at least one buffer pool page miss per level in the tree</p></li><li><p>approach: trie index</p><ul><li><p>Properties: complexity in operations and space</p></li><li><p>trie key span: digital representation of keys</p><ul><li><p>Fan-out of node, height of tree</p><p>å›¾ä¸­ï¼šç©ºè¡¨ç¤ºè¯¥å€¼ä¸å­˜åœ¨ï¼ŒæŒ‡é’ˆæŒ‡å‘ä¸‹ä¸€ä¸ªä½ç½®ï¼Œä½¿ç”¨0/1çš„äºŒè¿›åˆ¶è¡¨ç¤º</p><img src="/sg/2022/03/05/db_index/Screenshot-7584309.png" class title="Screenshot-7584309"></li></ul></li></ul></li></ol><h3><span id="radix-tree">Radix tree</span><a href="#radix-tree" class="header-anchor">Â¶</a></h3><p>variant of trie index. Omit all nodes with only a single child.</p><img src="/sg/2022/03/05/db_index/Screenshot-7584321.png" class title="Screenshot-7584321"><img src="/sg/2022/03/05/db_index/Screenshot-7584401.png" class title="Screenshot-7584401"><h3><span id="inverted-index">Inverted index</span><a href="#inverted-index" class="header-anchor">Â¶</a></h3><ol><li><p>make observations: Tree indexs above are useful for point and range queries; not good for keyword searches</p></li><li><p>Approach: inverted index(full-text search index) -&gt; keyword search</p><p>stores a mapping of words to records that contain those words in the target attribute.</p></li><li><p>supported query type:</p><ul><li>phrase searches: records that contain a list of words in the given order</li><li>proximity searches: two words occur within n words of each other</li><li>wildcard searches:words that match some pattern (e.g., regular expression).</li></ul></li><li><p>design decisions</p><ul><li>decision 1: what to store: depend on the context</li><li>decision 2: when to update: update is expensive. So stage updates and then update in batches</li></ul></li></ol><h2><span id="concurrency-control">Concurrency control</span><a href="#concurrency-control" class="header-anchor">Â¶</a></h2><ol><li>make observations: multi-threads world means that cpu cores and disk I/O stalls matters.</li><li>come up with a protocol: a protocol needs criteria<ul><li><em>logical correctness</em>: thread view</li><li>Physical correctness: internal representation of object soundness -&gt; memory leak</li></ul></li></ol><h3><span id="locks-vs-latches">Locks vs. latches</span><a href="#locks-vs-latches" class="header-anchor">Â¶</a></h3><ol><li>Locks: protects the contents of a database (e.g., tuples, tables, databases) from other transactions -&gt; object view</li><li>Latches: protects critical sections the DBMSâ€™s internal data structures (e.g., data structure, regions of memory) from other threads -&gt; operation view<ul><li>Read mode: Multiple threads are allowed to read the same item at the same time</li><li>write mode: Only one thread is allowed to access the item.</li></ul></li></ol><h3><span id="latch-designs">Latch designs</span><a href="#latch-designs" class="header-anchor">Â¶</a></h3><p>latch takes advantage of CPUâ€™s atomic compare-and-swap(CAS) instruction. A thread can check the contents of a memory location to see whether it has a certain value.</p><p>Definition: <a href="https://stackoverflow.com/questions/15059958/what-is-a-scalable-lock">scalability</a> of latches means if latches perform well when there is a lot of contention.</p><p>Approaches:</p><ol><li><p>Blocking OS mutex: os build-in mutex infra.</p><p>User space -&gt; kernel space -&gt; fail/blocked -&gt; descheduled</p><ul><li><p>Pro: no extra work for DBMS</p></li><li><p>Con: ~ os scheduling: Non-scalable (about 25ns per lock/unlock invocation)</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">std::mutex m;</span><br><span class="line">m.<span class="built_in">lock</span>();</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">m.<span class="built_in">unlock</span>();</span><br></pre></td></tr></table></figure></li><li><p>Test-and-set spin latch(TAS)</p><p>use CAS to update value -&gt; fail -&gt; DBMSâ€™s choice now(keep trying/descheduled)</p><ul><li>Spin latch: a location in memory that  threads try to update.</li><li>pro: efficient operations</li><li>con: not scalable nor cache-friendly</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ex: std::atomic&lt;T&gt;</span></span><br><span class="line">std::atomic_flag latch;</span><br><span class="line">...</span><br><span class="line"><span class="keyword">while</span> (latch.<span class="built_in">test_and_set</span>(...))&#123;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Reader-writer locks</p><p>based on two modes of latches, keep track of reads and writes.</p><img src="/sg/2022/03/05/db_index/Screenshot-7590990.png" class title="Screenshot-7590990"><ul><li><p>pro: concurrent reads</p></li><li><p>con: extra work for DBMS management; larger storage overhead</p></li></ul></li></ol><h3><span id="practice">Practice</span><a href="#practice" class="header-anchor">Â¶</a></h3><ol><li><p>Hash table</p><ul><li><p><strong>observation 1: Limited ways threads access the data structureï¼ˆtop-down)</strong> -&gt; no deadlock problem -&gt; global latch</p></li><li><p>Trade-off: Parallelism vs. storage, computational overhead of accessing the table, efficiency</p></li><li><p>approach 1: page latches</p><img src="/sg/2022/03/05/db_index/Screenshot-7591456.png" class title="Screenshot-7591456"><img src="/sg/2022/03/05/db_index/Screenshot-7591517.png" class title="Screenshot-7591517"></li><li><p>approach 2: slot latches</p><img src="/sg/2022/03/05/db_index/Screenshot-7591600.png" class title="Screenshot-7591600"></li></ul></li><li><p>b+tree</p><p>Observation 1: several way to access b+ tree(top-down/sibling pointers/â€¦) -&gt; come up with a protocol to allow multiple threads to read and update a b+ tree</p><p>Problem 1: modify same node at the same time</p><p><u>Problem 2</u>: one thread traversing the tree while another thread splits/merges nodes</p><img src="/sg/2022/03/05/db_index/Screenshot-7594900.png" class title="Screenshot-7594900"><ul><li><p>Solution: latch crabbing/coupling protocol -&gt; top-down direction</p><ul><li>define safe node: A â€œsafeâ€ node is one that will not split or merge when updated (not full on insertion or more than half full on deletion -&gt; write view(insert/delete)</li><li>Procedures:<ol><li>get latch for the parent</li><li>get latch for the child</li><li>release latch for the parent if it is deemed â€œsafeâ€</li></ol></li></ul></li><li><p>Basic latch crabbing protocol for operations</p><ul><li><p>Search: top-down</p></li><li><p>Insert/delete: If latched child is safe, release latches on all its ancestors</p><p>Delete 38:<img src="/sg/2022/03/05/db_index/Screenshot-7595740.png" class title="Screenshot-7595740"></p><p>Insert 25:<img src="/sg/2022/03/05/db_index/Screenshot-7595952.png" class title="Screenshot-7595952"></p></li></ul></li><li><p>observation 2: first step of all the updates on the b+tree is <strong>taking a write latch on the root.</strong> -&gt; <strong>bottleneck with higher concurrency</strong></p><ul><li>No need to acquire write latch on the safe node update.</li></ul></li><li><p>Better latching algorithm: assume the target leaf node is safe, use READ latches on the way. If it the node is not safe, apply the old method(WRITE latch on the root)</p></li></ul><p><u>Problem 3</u>: leaf node scan -&gt; dead lock</p><ul><li><p>observation: threads acquire locks in two directions at the same time</p><img src="/sg/2022/03/05/db_index/Screenshot-7597088.png" class title="Screenshot-7597088"></li></ul><p>Problem 4: delayed parent updates</p><p>Problem 5: versioned latch coupling</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 15-445 databases </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>hw3 dynamic programming</title>
      <link href="/sg/2022/03/05/hw3_dp/"/>
      <url>/sg/2022/03/05/hw3_dp/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#ps8">ps8</a></li><li><a href="#recitation">Recitation</a></li></ul><!-- tocstop --></div><p>key word: state, dependency</p><h2><span id="ps8">ps8</span><a href="#ps8" class="header-anchor">Â¶</a></h2><ol><li><p>Problem 1: reduce state? We can easily think of at lease one state in this case which is the number of peppers Peter can pick.</p></li><li><p>(Rethink dp problem in a week)</p><ul><li><p>Problem 1.1: in which way sorting affect the results?</p><p>-&gt; data structures/algorithms</p></li><li><p>problem 2: how to make it acyclic?</p><p>in building block problem, the key problem is pre-processing part.</p></li></ul></li><li><p>princess plum: define subproblems?</p><p>a bottom-up way:</p>  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">count_paths</span>(<span class="params">F</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    Input:  F | size-n direct access array of size-n direct access arrays</span></span><br><span class="line"><span class="string">              | each F[i][j] is either &#x27;t&#x27;, &#x27;m&#x27;, or &#x27;x&#x27;</span></span><br><span class="line"><span class="string">              | for tree, mushroom, empty respectively</span></span><br><span class="line"><span class="string">    Output: m | the number of distinct optimal paths in F</span></span><br><span class="line"><span class="string">              | starting from (0,0) and ending at (n-1,n-1)</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    n = <span class="built_in">len</span>(F)</span><br><span class="line">    K = [[-<span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>)] * (n+<span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n + <span class="number">1</span>)]</span><br><span class="line">    X = [[<span class="number">0</span>] * (n + <span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n+<span class="number">1</span>)]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> F[i - <span class="number">1</span>][j - <span class="number">1</span>] == <span class="string">&#x27;t&#x27;</span>:</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">1</span> <span class="keyword">and</span> j == <span class="number">1</span>:</span><br><span class="line">                K[<span class="number">1</span>][<span class="number">1</span>], X[<span class="number">1</span>][<span class="number">1</span>] = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">if</span> F[i - <span class="number">1</span>][ j - <span class="number">1</span>] == <span class="string">&#x27;m&#x27;</span>: m = <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>: m = <span class="number">0</span></span><br><span class="line">            K[i][j] = <span class="built_in">max</span>(K[i-<span class="number">1</span>][j], K[i][j-<span class="number">1</span>]) + m</span><br><span class="line">            <span class="keyword">if</span> K[i][j-<span class="number">1</span>] + m == K[i][j]: X[i][j] += X[i][j-<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">if</span> K[i-<span class="number">1</span>][j] + m == K[i][j]: X[i][j] += X[i-<span class="number">1</span>][j]</span><br><span class="line">    <span class="keyword">return</span> X[n][n]</span><br></pre></td></tr></table></figure></li></ol><p>ps9</p><p>Techniques:</p><ol><li>store parent pointers to track info.</li></ol><h2><span id="recitation">Recitation</span><a href="#recitation" class="header-anchor">Â¶</a></h2><p>Problem: <strong>state</strong>, dependency?</p><ol><li>longest increasing subsequence</li></ol><p>Iterative / Recursive: A Fibonacci example</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">fib</span>(<span class="params">n</span>):</span><br><span class="line">    a0 = <span class="number">0</span></span><br><span class="line">    a1 = <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">    <span class="built_in">print</span>(a0)</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span>(a1)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n+<span class="number">1</span>):</span><br><span class="line">            <span class="built_in">sum</span> = a0 + a1</span><br><span class="line">            a0 = a1</span><br><span class="line">            a1 = <span class="built_in">sum</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br><span class="line">        </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib</span>(<span class="params">n</span>):</span><br><span class="line">  <span class="comment"># without memoization recursive version</span></span><br><span class="line">  <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">  <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">return</span> fib(n-<span class="number">1</span>) + fib(n-<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>Partitions</p><ol><li>subset sum: solve with dp in O(nS) time</li></ol><p>Complexity</p><p>problem: how does running time compare to input?</p><ol><li>Decision problems: assignment of inputs to No (0) or Yes (1).<ul><li>Classes: R, EXP, P(focus in this class)</li></ul></li><li>Decidablilitiy: problem is decidable if runtime of existing program is finite.</li><li>Reductions: solve problem A -&gt; by solving problem B we know how to solve</li></ol>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
          <category> 6.006 algorithms </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hw </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šé‚£ä¸å‹’æ–¯å››éƒ¨æ›²ã€‹â€”â€” çœŸå®çš„è™šæ„</title>
      <link href="/sg/2022/03/03/elena/"/>
      <url>/sg/2022/03/03/elena/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#bei-jing">èƒŒæ™¯</a></li><li><a href="#jiao-yu">æ•™è‚²</a></li><li><a href="#hun-yin-sheng-yu-chi-hun">å©šå§»/ç”Ÿè‚²/ç¦»å©š</a></li><li><a href="#du-li-he-gong-zuo">ç‹¬ç«‹å’Œå·¥ä½œ</a></li><li><a href="#qing-gan-guan-xi">æƒ…æ„Ÿå…³ç³»</a></li></ul><!-- tocstop --></div><p>æœ€åˆæ¥è§¦åˆ°è¿™å¥—ä¹¦è¿˜æ˜¯18å¹´æ—¶ï¼Œæ–­æ–­ç»­ç»­åœ°ä»Šå¤©æ‰ç®—çœ‹å®Œã€‚æˆ‘ä¸€ç›´å¯¹è®²è¿°åœ°è¿‡äºçœŸå®çš„ä¹¦ä¸å¿å’è¯»ï¼Œè¿™æœ¬ä¹¦æŠŠä¸¤ä½ä¸»äººå…¬è±å†œï¼ˆæ ¼é›·ç§‘ï¼‰ï¼Œè‰æ‹‰ï¼ˆèµ›é²ç½—ï¼‰é—´å¤æ‚çš„å‹è°Šåˆ»ç”»åœ°éå¸¸æœ‰äº²åˆ‡æ„Ÿï¼Œæˆ‘åœ¨çœ‹è¿™å¥—ä¹¦æ—¶æ€»ä¼šå‘ç°è‡ªå·±æ—¢æœ‰è±å†œçš„ä¸€äº›ç‰¹è´¨ä¹Ÿæœ‰è‰æ‹‰çš„ä¸€é¢ï¼Œä¹¦ä¸­çš„æ–‡å­—è®©æˆ‘åæ€è¿™äº›ç‰¹ç‚¹æ˜¯æ€æ ·å½±å“æˆ‘çš„ä¸–ç•Œè§‚çš„ã€‚ä¸ä»…å¦‚æ­¤ï¼Œè¿™å¥—ä¹¦è®²è¿°äº†ä¸€ä¸ªæ®‹é…·çš„å…³äºå¥³æ€§çš„çœŸç›¸ï¼Œç©¿æ‚çš„æƒ…èŠ‚å³ä½¿åœ¨ç°å®ä¸­å‘ç”Ÿä¹Ÿä¸ä¼šçªå…€ã€‚é‚£å°±æ˜¯å¥³æ€§å—åˆ°çš„ç³»ç»Ÿæ€§åè§ä¸ä¼šç”±äºé˜¶çº§çš„æå‡è€Œå‘ç”Ÿæ”¹å˜ï¼Œæ— è®ºè¿™ä¸ªå¥³äººæ˜¯å·¥äººé˜¶çº§ï¼Œä¸­äº§é˜¶çº§è¿˜æ˜¯ä¸Šæµç¤¾ä¼šï¼Œéƒ½ä¸å¯é¿å…åœ°é™·å…¥ä¸€äº›ç‰¹æ®Šçš„ç‰¢ç¬¼ä¸­ï¼Œæ¯”å¦‚æ•™è‚²ï¼Œç”Ÿè‚²ï¼Œå®¶åº­æš´åŠ›ï¼Œæƒ…æ„Ÿå…³ç³»ç­‰ã€‚ç”±äºæˆ‘å¯¹ç°å®ç”Ÿæ´»ä¸­ä¸­äº§é˜¶çº§åŠä»¥ä¸Šçš„å®¶åº­æ¨¡å¼ä¸å¤ªäº†è§£ï¼Œæ‰€ä»¥æœ¬æ–‡çš„è®¨è®ºä»…é™äºæ­¤ä¹¦å‘ç”Ÿçš„åœ°ç‚¹å¹´ä»£è®¾æƒ³ï¼Œå°½ç®¡æˆ‘æ€€ç–‘ç°å®ä¸­çš„æ¨¡å¼å¹¶ä¸ä¼šåç¦»å¤ªå¤šã€‚</p><h2><span id="bei-jing">èƒŒæ™¯</span><a href="#bei-jing" class="header-anchor">Â¶</a></h2><p>ä¸»äººå…¬å‡ºç”Ÿçš„åœ°æ–¹æ˜¯äºŒåä¸–çºªä¸‰å››åå¹´ä»£é‚£ä¸å‹’æ–¯ä¸€ä¸ªç ´è´¥çš„ç¤¾åŒºï¼Œæ‰€åœ¨çš„å®¶åº­éƒ½åœ¨ç”Ÿå­˜çº¿ä¸ŠæŒ£æ‰ã€‚è±å†œæ˜¯å®¶ä¸­é•¿å¥³ï¼Œæœ‰ä¸€ä¸ªå¦¹å¦¹ï¼Œä¸¤ä¸ªå¼Ÿå¼Ÿï¼Œçˆ¶äº²åœ¨å¸‚æ”¿åºœåšé—¨æˆ¿ã€‚è‰æ‹‰æœ‰ä¸ªå“¥å“¥ï¼Œçˆ¶äº²æ˜¯ä¸ªé‹åŒ ã€‚ç¤¾åŒºä¸­å¤§å¤šéƒ½æ˜¯è¿™æ ·çš„å®¶åº­ï¼Œé™¤äº†å¡æ‹‰å¥‡å®¶å’Œç´¢æ‹‰æ‹‰å®¶ã€‚å¡æ‹‰å¥‡å®¶å¼€äº†è‚‰é£Ÿåº—åœ¨æ—©æœŸå¾ˆèµšé’±ï¼Œè€Œç´¢æ‹‰æ‹‰å®¶é€šè¿‡æ”¾é«˜åˆ©è´·å’Œä¸€äº›ç°è‰²äº§ä¸šåœ¨æ•´ä¸ªé‚£ä¸å‹’æ–¯éƒ½æ¨ªè¡Œéœ¸é“ã€‚</p><img src="/sg/2022/03/03/elena/Screenshot-6311043.png" class title="Screenshot-6311043"><p>å¥¹ä»¬çš„å‹è°Šäº’ç›¸æ”¯æ’‘ç€å½¼æ­¤èµ°è¿‡äº†å¾ˆè‰°éš¾çš„æ—¶åˆ»ã€‚å°è¯•ç€å†™äº†å‡ éä½†æ„Ÿè§‰è‡ªå·±çš„æ–‡ç¬”å†™ä¸å‡ºå¥¹ä»¬ä¹‹é—´æ·±åˆ»è€Œå……æ»¡çŸ›ç›¾çš„å…³ç³»ï¼Œå°±ä½œç½¢äº†ã€‚</p><h2><span id="jiao-yu">æ•™è‚²</span><a href="#jiao-yu" class="header-anchor">Â¶</a></h2><p>æˆ‘è®¤ä¸ºæ•™è‚²å’Œå®¶åº­æ˜¯äººç”Ÿä¸­æœ€é‡è¦çš„ä¸œè¥¿ï¼Œè¿™ä¸€ç‚¹æ˜¯å—è‹å§¿ä¸°é‚£ç¯‡æ¼”è®²çš„å½±å“ä¹Ÿæ˜¯ä¸ªäººåœ¨å®è·µä¸­çš„ä½“ä¼šã€‚ç„¶è€Œæ•™è‚²ä¸åªä»£è¡¨ç€å­¦æ ¡çš„æ•™è‚²ï¼Œæˆ‘è®¤ä¸ºæ•™è‚²ä¸­æœ€é‡è¦çš„ä¸€éƒ¨åˆ†å°±æ˜¯è‡ªæˆ‘æ•™è‚²ï¼Œå¦‚æœä¸çŸ¥é“æœ€åçš„ç›®æ ‡å…·ä½“æ˜¯ä»€ä¹ˆï¼Œé‚£ä¹ˆç°åœ¨åˆèƒ½æœ‰ä»€ä¹ˆæ”¯ç‚¹å‘¢ï¼Ÿä¹¦ä¸­è‰æ‹‰å’Œè±å†œæ¥å—åˆ°çš„æ•™è‚²æ˜¯æ˜æ˜¾ä¸åŒçš„ï¼Œè±å†œå‡­å€ŸåŠªåŠ›è€ƒä¸Šäº†å½“æ—¶æœ€æœ‰åçš„å­¦åºœä¹‹ä¸€æ¯”è¨é«˜å¸ˆï¼Œæ˜¯ç»è¿‡è§„èŒƒè®­ç»ƒçš„å¤§å­¦ç”Ÿï¼›è€Œè‰æ‹‰å°å­¦è¾å­¦åå°±å†ä¹Ÿæ²¡æœ‰å—åˆ°ä»»ä½•æ­£è§„çš„æ•™è‚²ã€‚æˆ‘éå¸¸æ•¬ä½©ä¸¤ä½ä¸»äººå…¬çš„æ±‚çŸ¥æ¬²ï¼Œè‰æ‹‰åœ¨çŸ¥é“ä¸èƒ½åœ¨ä¸Šå­¦åæ²¡æœ‰è‡ªæš´è‡ªå¼ƒè€Œæ˜¯åˆ°ç¤¾åŒºé‡Œå”¯ä¸€ä¸€å®¶å›¾ä¹¦é¦†ç”¨ä¸€å®¶å››å£äººçš„åå­—å€Ÿä¹¦ï¼Œä¹‹åä¹Ÿé™†ç»­å­¦ä¹ äº†æ‹‰ä¸è¯­å’Œå¸Œè…Šè¯­ï¼Œå› ä¸ºè±å†œå‘Šè¯‰è¿‡å¥¹åˆä¸­é«˜ä¸­å°±å­¦è¿™äº›ä¸œè¥¿ã€‚è€Œåœ¨å¤±è´¥çš„å©šå§»ç»“æŸåï¼Œå¥¹è¿·ä¸Šäº†è®¡ç®—æœºçŸ¥è¯†ï¼Œäºæ˜¯å¼€å§‹å­¦ä¹ å‡½æˆçš„è®¡ç®—æœºè¯¾ç¨‹ï¼Œæœ€åé€šè¿‡æŠ€æœ¯æ”¹å˜äº†è‡ªå·±çš„ç”Ÿæ´»ï¼Œåˆ›ç«‹äº†ä¸€å®¶ç›¸å…³çš„å…¬å¸ã€‚è€Œè±å†œå°½ç®¡æ²¡æœ‰åƒåŒå­¦ä¸€æ ·æ˜¾èµ«çš„å®¶ä¸–ï¼Œä½†å¥¹ä¸€ç›´åŠªåŠ›å­¦ä¹ ç€è‡ªå·±æ¬ ç¼ºçš„æœ‰åŠ›çš„è¯­è¨€è¡¨è¾¾èƒ½åŠ›ï¼Œæ€è€ƒæ€æ ·å»æœ‰åŠ›åœ°ç»„ç»‡è¯­è¨€ã€‚åœ¨çˆ¶æ¯ä¸åŒæ„å¥¹å»ä¸Šå¤§å­¦æµªè´¹é’±æ—¶ï¼Œå¥¹åšå®šåœ°è¡¨æ˜äº†è‡ªå·±çš„è§‚ç‚¹ã€‚</p><p>ç„¶è€ŒåŸåŒºçš„åŒé¾„äººå¹¶æ²¡æœ‰è¿™æ ·çš„å¹¸è¿ï¼Œå¤§å¤šæ•°äººéƒ½æ˜¯æ—©æ—©è¾å­¦ã€‚å’Œå¥¹ä»¬ä¸€èµ·é•¿å¤§çš„å¥³ç”Ÿæ²¡èƒ½å¤Ÿå¾—åˆ°æ”¹å˜çš„æœºä¼šï¼Œåœ¨åæ¥çš„å¾ˆå¤šäº‹ä¸Šåªèƒ½ä»»äººæ‘†å¸ƒï¼ŒåŠ¨è¾„æ‰“éª‚ã€‚å½“æ—¶çš„ç´¢æ‹‰æ‹‰å…„å¼Ÿç»å¸¸å¼€ç€è½¦åœ¨åŸåŒºé‡Œæ‰¾é’æ˜¥æœŸçš„å¥³ç”Ÿï¼Œæœ‰å¥³ç”Ÿç”šè‡³ä¼šç¾¡æ…•è¢«æ¬ºå‡Œçš„æ‹–è¿›è½¦é‡Œçš„äººã€‚åªæœ‰è‰æ‹‰çŸ¥é“ä»–ä»¬åˆ°åº•ä¼šå¯¹é‚£ä¸ªå¥³å­©åšä»€ä¹ˆäº‹ï¼Œå¹¶å‘Šè¯‰è±å†œå¦‚æœå¥¹è¢«è¿™ä¹ˆå¯¹å¾…ä¸€å®šè¦å«å¥¹ã€‚å¥¹ä¼šåˆ’ç ´ç´¢æ‹‰æ‹‰å…„å¼Ÿçš„å–‰å’™ã€‚æ€§æ•™è‚²åœ¨ç¤¾ä¼šä¸­æ™®éæ˜¯ä¸ªéš¾ä»¥å¯é½¿çš„è¯é¢˜ï¼Œæœ¬æ¥åªæ˜¯äº†è§£ä¸€äº›æ­£å¸¸çš„ç”Ÿç†å¸¸è¯†å’Œæ‰‹æ®µï¼Œä½†å´æœªèƒ½å—åˆ°å®¶é•¿å’Œå­¦æ ¡çš„é‡è§†ã€‚æƒ³åˆ°æ—å¥•å«å‘ç”Ÿçš„æ‚²å‰§ï¼Œæˆ‘è‡³ä»Šä¹Ÿæ²¡èƒ½è¯»å®Œå¥¹å†™çš„é‚£æœ¬ä¹¦ã€‚</p><img src="/sg/2022/03/03/elena/IMG_0236.PNG" class title="IMG_0236"><img src="/sg/2022/03/03/elena/IMG_0237-6316928.PNG" class title="IMG_0237"><h2><span id="hun-yin-sheng-yu-chi-hun">å©šå§»/ç”Ÿè‚²/ç¦»å©š</span><a href="#hun-yin-sheng-yu-chi-hun" class="header-anchor">Â¶</a></h2><p>å©šå§»çš„æœ¬è´¨æ˜¯ä¸€ç§å¥‘çº¦å…³ç³»ï¼ŒåŒ…å«æƒåˆ©å’Œä¹‰åŠ¡ï¼Œè™½ç„¶ç¤¾ä¼šä¸Šå¸¸ä»¥çˆ±æƒ…æ¥çŸ«é¥°å®ƒã€‚æˆ‘è®¤ä¸ºæ²¡æœ‰çˆ±æƒ…ç¼”ç»“è¿™æ ·çš„å…³ç³»æ˜¯éå¸¸ä¸å¯é çš„ï¼Œæˆ‘è¿˜è®¤ä¸ºçˆ±æƒ…æ˜¯ä¸€ç§æµåŠ¨çš„çŠ¶æ€ï¼Œå¹¶ä¸èƒ½è¢«å©šå§»æ‰€åŒ…æ‹¬ã€‚</p><p>ä¸»äººå…¬çš„å©šå§»éƒ½æ˜¯ä¸åŒæ–¹å‘çš„æ‚²å‰§ã€‚è‰æ‹‰åœ¨ç»“å©šå½“å¤©å‘ç°æ¸©å’Œå¤–è¡¨çš„ä¸ˆå¤«ä¸‹çš„ä¼ªå–„å’Œæš´åŠ›ï¼Œå¹¶è¢«å©šå†…å¼ºæš´ï¼Œç»å†äº†æ¼«é•¿æ—¶é—´çš„æŠ˜ç£¨ç»ˆäºæŠ›ä¸‹ä¸€åˆ‡ç¦»å¼€äº†ä¸ˆå¤«ã€‚è±å†œçš„å©šå§»æˆ–è®¸æ›´å¸¸è§çš„è¢«çœ‹æˆä¸€ä¸ªå¹¸ç¦çš„å©šå§»å§ã€‚è±å†œå«ç»™äº†ä¸€ä¸ªå­¦é˜€å®¶æ—çš„å„¿å­ï¼Œç¦»å¼€äº†ç ´æ—§çš„è€åŸåŒºåˆ°æ¯”è¨ç”Ÿæ´»ï¼Œæœ‰ç‹¬æ ‹æˆ¿å­ï¼Œä¸ˆå¤«æœ‰ä¸°åšçš„æ”¶å…¥ã€‚ç„¶è€Œäº‹å®æ˜¯å¥¹åœ¨æ¸©åå¦‚æ°´çš„ç”Ÿæ´»ä¸­è¢«æ¯èŒå›°ä½ï¼Œæ¯å¤©å¿™ç€åšå„ç§å®¶åŠ¡äº‹ã€‚ç”Ÿå­©å­å…»å­©å­å‡ ä¹éƒ½æ˜¯è±å†œä¸€ä¸ªäººåœ¨å¿™ï¼Œä¸ˆå¤«æ²¡æœ‰å¸®åŠ©å¥¹ä»»ä½•äº‹æƒ…ï¼Œå¤±å»äº†å­¦ä¹ å’Œå†™ä½œçš„è‡ªç”±ã€‚å¥¹äºæ˜¯æƒ³éš¾é“è‡ªå·±ä¸Šäº†å¤§å­¦é‚£ä¹ˆå¤šå¹´å°±æ˜¯ä¸ºäº†åšè¿™äº›äº‹è¯·å—ï¼Ÿè±å†œè™½ç„¶è¡¨é¢ä¸Šæœ‰ç²¾è‡´çš„ç”Ÿæ´»ï¼Œæœ‰æƒåŠ¿å¤§çš„å©†å®¶ï¼Œæœ‰å¤§å­¦æ•™æˆçš„ä¸ˆå¤«ï¼Œä½†æ˜¯å¥¹åœ¨ç¹æ‚çš„çç¢å®¶åŠ¡äº‹ä¸­æ— æ³•åšæƒ³åšçš„äº‹æƒ…ã€‚ä¸ˆå¤«åœ¨å°å­©åˆšå‡ºç”Ÿæ—¶å®Œå…¨ä¸ç®¡ï¼Œåªé¡¾ç€è‡ªå·±å†™ä½œçœ‹ä¹¦å­¦ä¹ ï¼Œå­©å­å“­äº†åªèƒ½è±å†œå»å“„å’Œç…§é¡¾ã€‚è¿™æ ·åœ¨å¦‚æ­»æ°´çš„ç¯å¢ƒé‡Œè¿‡äº†å¾ˆå¤šå¹´ã€‚</p><h2><span id="du-li-he-gong-zuo">ç‹¬ç«‹å’Œå·¥ä½œ</span><a href="#du-li-he-gong-zuo" class="header-anchor">Â¶</a></h2><p>æˆ‘ä¸€ç›´è®¤ä¸ºç°ä»£å¥³æ€§æœ€é‡è¦çš„ä¸€ç‚¹å°±æ˜¯è¦ç‹¬ç«‹ã€‚ç‹¬ç«‹ä¸æ˜¯æŒ‡å­¤ç«‹ï¼Œæ˜¯æŒ‡ä¸ç”¨ä¾é™„ä»»ä½•äººï¼Œåœ¨ç”Ÿæ´»ä¸­ä»¥å¹³ç­‰åˆä½œçš„æ€åº¦å¯¹äººã€‚è€Œç‹¬ç«‹ç¦»ä¸å¼€å·¥ä½œï¼Œå·¥ä½œèƒ½äº§ç”Ÿä¸ªäººä»·å€¼ï¼Œç»™äººä¸€ä¸ªæ”¯ç‚¹å‰è¿›ã€‚</p><p>è‰æ‹‰æ²¡ç¦»å¼€ä¸ˆå¤«å‰åªèƒ½ä¾é™„ç€ä¸ˆå¤«å­˜åœ¨ï¼Œç›´åˆ°å¥¹ç¦»å¼€åæ‰¾åˆ°äº†ä¸€ä»½è‚‰é£Ÿå‚å·¥ä½œå¥¹æ‰è§‰å¾—è‡ªå·±æ‰¾åˆ°äº†ä¸€ç§é•¿ä¹…å¤±å»çš„è‡ªç”±ã€‚è€Œè±å†œé•¿ä¹…è¢«å›°åœ¨å®¶åº­ä¸­ä¸èƒ½å¤Ÿç»§ç»­å†™ä½œï¼Œæ‰€å†™çš„æ–‡å­—ä¸ˆå¤«ä»æ¥éƒ½ä¸ä¼šçœ‹åªæ˜¯æ•·è¡äº†äº‹ï¼Œç›´åˆ°é‡æ–°å¼€å§‹å†™ä½œåæ‰ç†é¡ºäº†è‡ªå·±çš„æƒ³æ³•ï¼Œæœ‰äº†æ›´è¿‘ä¸€æ­¥çš„æ€è€ƒã€‚å¥¹ä»¬éƒ½åœ¨ç”Ÿæ´»ä¸­é€æ¸æ‰¾åˆ°äº†è‡ªå·±çš„ä½ç½®ï¼Œç„¶åå¼€å§‹å‘æ˜åˆ›é€ ã€‚</p><h2><span id="qing-gan-guan-xi">æƒ…æ„Ÿå…³ç³»</span><a href="#qing-gan-guan-xi" class="header-anchor">Â¶</a></h2><p>ä¹¦ä¸­ä¸€ä¸ªå¾ˆäº‰è®®çš„äººç‰©å°±æ˜¯å°¼è¯ºã€‚å°¼è¯ºçš„è™šä¼ªçš„ä¸åŒåœ¨äºä»–ä¼ªè£…è‡ªå·±æˆä¸€ä¸ªå…³å¿ƒå¥³æ€§ï¼Œèµç¾å¥³æ€§ï¼Œé¼“åŠ±å¥³æ€§æ‘†è„±å‹è¿«çš„äººï¼Œå®é™…ä¸Šä»–å¯¹å¦»å­ä¹Ÿæ˜¯å’Œå¤§å¤šæ•°ç”·æ€§åŒæ ·çš„æ–¹å¼ã€‚ä¹¦ä¸­å’Œå‰§é‡Œå°¼è¯ºéƒ½å±•ç°å‡ºå¸…æ°”æœ‰é­…åŠ›å­¦è¯†çš„äººï¼Œä½†å®é™…ä¸Šä»–åªæ˜¯ä¸ªå’Œä»–çˆ¶äº²ä¸€èˆ¬è™šä¼ªè‡ªç§çš„äººã€‚ä¹¦ä¸­å½¢å®¹ä»–çš„æ‰åæ˜¯æ²¡æœ‰æ ¹åŸºçš„ï¼Œä»–ç›¸ä¿¡æƒå¨ï¼Œæ˜¯ä¸ªè¿½åé€åˆ©çš„æŠ€æœ¯å®˜åƒšã€‚ä»–å¯ä»¥å¯¹ä»»ä½•ä¸€ä¸ªå¥³äººâ€”â€”å¯¹ä»–æœ‰åˆ©çš„â€”â€”è¯´çˆ±å¥¹ï¼Œç„¶åè½¬å¤´ç¦»å¼€åå°±ä¸é—»ä¸é—®ï¼Œç›´åˆ°è‡ªå·±å“ªå¤©éœ€è¦å€Ÿç”¨å¥¹çš„å¸®åŠ©å†å›æ¥ã€‚ä»–æŠ›å¼ƒè¿‡è‰æ‹‰â€”â€”å½“æ—¶è‰æ‹‰ä»¥ä¸ºä»–ä»¬æ˜¯çœŸå¿ƒç›¸çˆ±ï¼Œäº’ç›¸å¸®åŠ©å­¦ä¹ çš„â€”â€”ç•™ä¸‹æ€€å­•çš„è‰æ‹‰åœ¨ååƒ»çš„ä½å¤„é‡Œæ— äººé—®æ´¥ï¼Œä»–æŠ›å¼ƒè¿‡ä¸€ä¸ªè¿·æ‹ä»–æ‰åçš„å¥³å­¦ç”Ÿâ€”â€”åæ¥æœ‰äº†ä¸€ä¸ªå°å­©â€”â€”ä¹‹åå°±å®Œå…¨æŠ›è¯¸è„‘åäº†â€¦</p><p>ï¼ˆæ”¹å¤©å†å†™ï¼‰</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> read </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>recitation ds</title>
      <link href="/sg/2022/03/01/recitation_ds/"/>
      <url>/sg/2022/03/01/recitation_ds/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#gfs">GFS</a></li><li><a href="#mapreduce">Mapreduce</a></li><li><a href="#zfs">ZFS</a></li><li><a href="#consistency-guarantees">consistency guarantees</a><ul><li><a href="#design-process">Design process</a></li><li><a href="#baseball-example">Baseball example</a></li><li><a href="#some-thinking">Some thinking</a></li></ul></li><li><a href="#raft">Raft</a><ul><li><a href="#background">Background</a></li><li><a href="#consensus-algorithms">Consensus algorithms</a></li><li><a href="#intuition-of-terms">Intuition of terms</a></li><li><a href="#olc-notes">olc notes</a></li></ul></li></ul><!-- tocstop --></div><p>æœ¬æ–‡ä¸»è¦è®°å½•å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿéƒ¨åˆ†çš„è®¾è®¡ç»†èŠ‚å’Œå®ç°éƒ¨åˆ†ç›¸å…³é—®é¢˜çš„æƒ³æ³•ã€‚</p><h2><span id="gfs">GFS</span><a href="#gfs" class="header-anchor">Â¶</a></h2><p>GFS: machine failures</p><p>ç®€å•æ¥è¯´ï¼ŒGFSæ˜¯ä¸€ä¸ªä½¿ç”¨æ‹·è´çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒçš„ç»“æ„åŒ…å«controller, chunk server, clientã€‚è¿™äº›è§’è‰²çš„äº¤äº’æ¥å®Œæˆæ‹·è´çš„åŠŸèƒ½ï¼Œä»¥é˜²æ­¢å¤§é›†ç¾¤ä¸­æŸä¸ªæœºå™¨çš„å´©æºƒã€‚å®ƒå’Œunixæ–‡ä»¶ç³»ç»Ÿçš„åŒºåˆ«åœ¨äºï¼ŒGFSæ›´èƒ½é€‚ç”¨æœ‰å¾ˆå¤§å·¥ä½œé‡å†™å…¥å†™å‡ºè¯»å…¥è¯»å‡ºçš„æƒ…å†µï¼ˆæœ‰æ•°ç™¾TBè®¡çš„å­˜å‚¨é‡çš„æ•°åƒç£ç›˜åœ¨æ•°åƒæœºå™¨ä¸Šçš„å¤§é›†ç¾¤æ”¶åˆ°æ•°ç™¾ç”¨æˆ·å¹¶è¡Œçš„è®¿é—®ï¼‰</p><h2><span id="mapreduce">Mapreduce</span><a href="#mapreduce" class="header-anchor">Â¶</a></h2><p>â€¦</p><h2><span id="zfs">ZFS</span><a href="#zfs" class="header-anchor">Â¶</a></h2><p>â€¦</p><h2><span id="consistency-guarantees">consistency guarantees</span><a href="#consistency-guarantees" class="header-anchor">Â¶</a></h2><p>What: Consistency guarantee is a contract between the data provider and clients. It can affect a system in three aspects: consistency, performance and availability.</p><p>How: A system designer should understand the particular kind of need of clients and how the system operates to decide which consistency guarantee.</p><p>Why: It matters because the system can be the best version for clientâ€™s needs, faster without loss of correctness.</p><ul><li><img src="/sg/2022/03/01/recitation_ds/sixcg.png" class title="six consistency guarantees"></li></ul><h3><span id="design-process">Design process</span><a href="#design-process" class="header-anchor">Â¶</a></h3><blockquote><p>Data availability is a term used by computer storage manufacturers and storage service providers to describe <strong>how data should be available at a required level of performance in situations ranging from normal through disastrous</strong>.</p></blockquote><p>The paper describes four intermediate consistency protocols between strong consistency and eventual consistency, which gives more flexibility while preserving correctness. Giving the example of baseball game, it lists six peoples to use the data store for different purposes. Here, I will give the reasoning process to the table 2.</p><p>The consitency and performance have inverse correlation. In other words, if the data is more consistent, it means the server which updates the data needs to pass on the new data to every other servers. One server crashed would cause the wrong data got transferred. Therefore strong consistency model has excellent consistency and poor performance and vice versa.</p><p>The four intermediate consistency models can get higher performance than strong consistency due to partial correctness of the data. They donâ€™t need the data in every server is consistent at the same time giving the specific applications providing. Bounded staleness has poor availability as the strong consistency for the same reason of requirement for time. The server can not guarantee the correctness in specific time.</p><ul><li><img src="/sg/2022/03/01/recitation_ds/tradeoffs.png" class title="tradeoffs"></li></ul><h3><span id="baseball-example">Baseball example</span><a href="#baseball-example" class="header-anchor">Â¶</a></h3><p>A baseball game example: minimal consistency of read operation in a simple data store(replicated storage systems) containing only two teamsâ€™ scores.</p><ol><li><p>Official scorekeeper: the scorekeeper is the only person to write the data. They need the most updated scores so that strong consistency seems the appropriate one. However they are the only server to write the data and pass on to others. Therefore read my writes would be sufficient.</p></li><li><p>umpire: strong consistency. They canâ€™t provide wrong scores because itâ€™s a fair game.</p></li><li><p>Radio reporter: They need tell the audience a more updated scores than before. Consistent prefix is not enough because they are using scorekeeperâ€™s data and old scores can emerge later than new ones. Therefore it have to maintain the monotonic reads at the same time. Alternatively, monotonic reads with bounded staleness can achieve the same goal.</p></li><li><p>sportswriter: bounded staleness. They need the most updated scores but not in a hurry. So they can wait for the final score at least it is correct one.</p></li><li><p>statistician: for one teamâ€™s score, they need strong consistency; for one seasonâ€™s score, they need read my writes for the same reason as scorekeeper.</p></li><li><p>stat watcher: eventual consistency. Itâ€™s ok to provide out-of-date data.</p><img src="/sg/2022/03/01/recitation_ds/line_score.png" class title="line_score"><img src="/sg/2022/03/01/recitation_ds/scores_read.png" class title="scores_read"></li></ol><h3><span id="some-thinking">Some thinking</span><a href="#some-thinking" class="header-anchor">Â¶</a></h3><ol><li><p>What systems need weaker consistency? I think the systems that incline to performance and donot heavily rely on real-time computing results such as bank accounts. For example, social media systems like twitter. Updates of tweets are not critical for users.</p></li><li><p>I think understandability is a worthy design goal. If even the developers can hardly understand the protocol, how can they make improvements based on the customer needs and develop relevent features on top of it.</p></li><li><p>To decide on a particular consistency model, I think it requires a thorough study of current target customers and future costs it may bring giving the current design goal. Different cloud storage providers have made different decisions. Amazon S3 uses eventual consistency to improve the performance and availibility<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>. It gains more availibility with the proliferation of geo-replicated services.  However Azure aims for specific organizations which needs strong consistency for correctness. I think they are targeting different customer bases.</p></li></ol><h2><span id="raft">Raft</span><a href="#raft" class="header-anchor">Â¶</a></h2><p>What is Raft<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>?</p><p>Raft is a protocol for implementing distributed consensus algorithms so that distributed system can reach agreements having same states. Simply speaking, itâ€™s a way that makes client and its many servers have x = 3 when the client sets x to 3.</p><p>Rules: A Raft cluster has several servers (&gt;=5). A server node has 3 states: follower, candidate, leader. Each node has a log and a state machine.</p><ul><li><p>state machine of servers: an election term</p><img src="/sg/2022/03/01/recitation_ds/state_machine.png" class title="state machine"></li><li><p>Time is split into <code>terms</code>, like logical clocks in Raft.</p></li><li><p>Raft servers communicate through RPCs in parallel. Servers retry RPC if they donot receive a response in a timely manner.</p><ul><li>RequestVote RPCs</li><li>AppendEntries RPCs</li></ul></li></ul><p>Problem 1: a split vote if 2 nodes become candidates at the same time in leader election</p><p>Re-elect until one node becomes leader (receive a <strong>majority</strong> of votes. Majority means over a half of members.). Majority != max.</p><p>Problem 2: network partition in log replication</p><p>The system will reach consensus again when the network partition is healed for following reason. When a node sees the higher election term, it will step down, which means to roll back its uncommitted entries and match the new leaderâ€™s log.</p><h3><span id="background">Background</span><a href="#background" class="header-anchor">Â¶</a></h3><ol><li><p>Goal of Raft is understandability without losing performance.</p></li><li><p>Backgroud: Paxos, the previous main-stream consensus algorithms, is hard to understand and complicate to maintain the systems built on top of that.</p></li><li><p>Replicated state machine, a replicated log containing the state machine commands from clients. Consensus algorithms usually have properties as: safety (network delay/partition, packet loss, duplication, reordering), availabilty (if a majority of servers in the system is running, the sys can work. The failed ones can work after recovering from state on storage), time irrelevant consistency, <strong>Majority Rules</strong>.</p></li><li><p>Why leave Paxos? Error prone, hard to implement/maintain/understand</p><p>(lol a section to describe why Paxos is so hard)</p><ul><li><p>Single-decree decomposition is hard to maintain replicated log where it separates partial logs of the system and then merges them into one in the end. Consensus algorithms should have constraints on the order of committed logs.</p></li><li><p>Big gap between the theory and real systems in multi-Paxos. And correctness is hard to maintain when the system built on top of Paxos eventually produces its own architecture.</p></li></ul></li><li><p>Raft improves understandability by</p><ul><li>divide and conquer: decompose consensus to independent part: leader election, log replication, safety and membership changes</li><li>simplify state space: reduce #states to consider. Ex: randomization: introduce non-determinism with random timeout settings, which reduces state space</li></ul></li></ol><h3><span id="consensus-algorithms">Consensus algorithms</span><a href="#consensus-algorithms" class="header-anchor">Â¶</a></h3><p>First, keep in mind that Raft is a protocol to manage replicated logs.</p><p>Problem 1: what is the leader of a Raft cluster? How it works?</p><ol><li>A leader manages the replicated log</li><li>A leaderâ€™s tasks<ul><li>receives/handles requests from client: client -&gt; leader; client -&gt; follower -&gt; leader</li><li>sends messages to all its followers: replicates its log entries/heartbeat</li></ul></li><li>A follower that receives no communication over a period of time will become a candidate with <code>current_term += 1</code> &amp; state transition.</li><li>Randomized retry approach: Raft randomly chooses election timeouts from a fixed interval (150-300 ms) to reduce the frequency of mulitple servers having timeouts together. It means each candidate has random election timeout. This approach is to solve the availability issues that a ranking systems can not.</li><li>Eventually, after a leader is elected, the log consistency converges due to consistency check of appendEntries RPCs.</li></ol><p>Problem 2: log replication</p><ol><li>A log entry is <strong>committed</strong> when the leader replicates it on a <strong>majoritiy</strong> of the servers.</li><li>A log entry represents a command not the result of a command, which makes preceding entries trackable.</li><li>Consistency check:<ul><li>send (i): [entry(i-1)][entry(i)] to server S_i, S_i checks if entry(i-1) in its log and only replicates entry(i) when the check passed.</li><li>if the follower is inconsistent with the leader, the check will find the latest entries that both servers agree and overwrite the following with the leaderâ€™s after that point.</li></ul></li><li>A <code>nextIndex</code> approach.</li><li>A leaderâ€™s right<ul><li>A leader can modify its followersâ€™ log entries.</li><li>A leader can append new entries to its own log (but cannot delete/overwrite its log)</li></ul></li></ol><img src="/sg/2022/03/01/recitation_ds/fig6.png" class title="fig6"><p>Operation sequences lead to the failure cases:</p><ol><li>has missing entries<br>(a) server a crashed at term 6<br>(b) server b crashed at term 4</li><li>has extra uncommitted entries<br>(c) server c was the leader for term 6, added serveral entries to its log but only committed some of its entries.<br>(d) server d was the leader for term 7, added serveral entries to its log but committed none of its entries.</li><li>has missing entries and extra uncommitted entries<br>(e) server e was the leader for term 4, added serveral entries to its log but only committed some of its entries. Then it crashed and remained down for several terms.<br>(f) &gt; Server f was the leader for term 2, added several entries, then crashed before committing any of them. It restarted quickly and became the leader for term 3, behaved the same as term 2. Then it crashed again and never came back for several terms.<br>-&gt; Implies that a server having more entries than other servers in one term could be the leader for that term.<br>-&gt; And no entries will get replicated after a server receiving the entries crashed. No entries will get committed after a leader crashed.</li></ol><img src="/sg/2022/03/01/recitation_ds/fig7.png" class title="fig7"><p>Problem 3: Why does Raft need a leader?</p><p>Problem 4: Safety measures and restrictions</p><p>Problem 5: failures</p><ol><li>leader crashes: consistency guarantees</li><li>follower/candidate crashes: retry RPCs indefinitely. Supported by idempotent property of Raft RPCs.</li><li>network partition</li></ol><p>Problem 6: cluster membership changes. Operatiosn like replacing disks/servers, changing the degree of replication.</p><img src="/sg/2022/03/01/recitation_ds/fig10.png" class title="fig10"><p>Problem 7: log compaction</p><p>Snapshotting in Raft</p><h3><span id="intuition-of-terms">Intuition of terms</span><a href="#intuition-of-terms" class="header-anchor">Â¶</a></h3><ol><li><p><code>Leader Election</code>: When an election term starts, the candidate sends <code>&quot;VOTE FOR ME&quot;</code> messages to others. If the receiving node hasnâ€™t voted yet in this term then it votes for the candidate and the node resets its <code>election timeout</code>. Once a candidate has a majority of votes it becomes leader and the node resets its election timeout. The leader begins sending out <code>Append Entries</code> messages to its followers. Followers then respond to each <code>Append Entries</code> message in <code>heartbeat timeout</code>. This election term will continue until a follower stops receiving heartbeats and becomes a candidate<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>.</p></li><li><p><code>Log Replication</code>: Leader notifies its followers the committed entry by replicating all changes to all nodes from it. An entry is committed once a majority of followers acknowledge it and a response is sent to the client.</p></li><li><p>Process: follower =&gt; candidate =&gt; leader, If followers donâ€™t hear from a leader then they can become a candidate. The candidate becomes the leader if it gets votes from a majority of nodes.</p></li><li><p>2 timeout settings control election:</p><ul><li><p>The <code>election timeout</code> is the amount of time a follower waits until becoming a candidate, randomized to be between 150ms and 300ms.</p></li><li><p>The leader sends messages to its followers in intervals specified by the <code>heartbeat timeout</code>.</p></li></ul></li><li><p><a href="https://en.wikipedia.org/wiki/Byzantine_fault">Byzantine Fault</a>: a metaphor for untrusted components in systems. Every component can go wrong and itâ€™s hard to infer which one is wrong.</p></li><li><p>An operation is idempotent which means performing the same op multiple times has the same effect as performing it once.</p></li><li><blockquote><p>Availabilty of Raft is the ability of the system to respond to clients in a timely manner.</p></blockquote></li><li><blockquote><p>MTBF, mean time between failures. Typical server MTBFs are several months+</p></blockquote></li></ol><img src="/sg/2022/03/01/recitation_ds/fig2.png" class title="fig2"><h3><span id="olc-notes">olc notes</span><a href="#olc-notes" class="header-anchor">Â¶</a></h3><ol><li><p>In Raft, a leader is a server that manages replicated log of the system. Leader receives all calls from clients and sends requests to its followers in normal condition.</p></li><li><p>Raft handle the following three types of failures:</p><ul><li>leader failures</li><li>candidate or follower failures</li><li>network partitions</li></ul></li></ol><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://stackshare.io/stackups/amazon-s3-vs-microsoft-azure#:~:text=Amazon%20S3%20belongs%20to%20%22Cloud,you%20can%20store%20is%20unlimited.">Amazon S3 vs Microsoft Azure</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li><li id="fn2" class="footnote-item"><p>A <a href="https://raft.github.io/">visualization</a> of Raft <a href="#fnref2" class="footnote-backref">â†©ï¸</a></p></li><li id="fn3" class="footnote-item"><p>The explanations of terms come from a visualization of Raft <a href="#fnref3" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.033 system design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> paper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šæ–‡æ˜6ã€‹â€”â€”çœ‹ä¸è§çš„ä¸–ç•Œ</title>
      <link href="/sg/2022/02/17/civilization/"/>
      <url>/sg/2022/02/17/civilization/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#shi-jie-guan">ä¸–ç•Œè§‚</a></li><li><a href="#shi-jian-jiu-shi-jin-bi">æ—¶é—´å°±æ˜¯é‡‘å¸</a></li><li><a href="#wei-ren-de-bang-zhu">ä¼Ÿäººçš„å¸®åŠ©</a></li><li><a href="#yin-shi-li-dao">å› åŠ¿åˆ©å¯¼</a><ul><li><a href="#guan-cha-shi-jie">è§‚å¯Ÿä¸–ç•Œ</a></li><li><a href="#jie-dian-cun-dang">èŠ‚ç‚¹å­˜æ¡£</a></li></ul></li></ul><!-- tocstop --></div><p>æ–‡æ˜6æ˜¯ä¸ªå›åˆåˆ¶ç­–ç•¥æ¸¸æˆï¼Œåœ¨å¯’å‡70ä¸ªå°æ—¶å·¦å³çš„æ—¶é—´é‡Œæˆ‘å¼€äº†å‡ å±€å­˜æ¡£äº†åå‡ æ¬¡ï¼Œæœ€ååªèµ¢äº†ä¸¤å±€ã€‚è™½ç„¶æ–‡æ˜ç”¨äº†ç›¸å¯¹ç®€åŒ–çš„å½¢å¼å±•ç°ï¼Œæ–‡æ˜çš„å‘å±•è¿‡ç¨‹å’Œäººå¯¹ä¸–ç•Œçš„æ¢ç´¢æœ‰ç›¸é€šä¹‹å¤„ï¼Œè¿™ä¹Ÿæ˜¯å¸å¼•æˆ‘çš„åœ°æ–¹ä¹‹ä¸€ã€‚æœ¬æ–‡ä¸»è¦è®°å½•å¯¹æ¸¸æˆç©æ³•çš„æ€è€ƒè¿‡ç¨‹ä»¥åŠä¸€äº›å¤©é©¬è¡Œç©ºçš„æƒ³æ³•ã€‚</p><img src="/sg/2022/02/17/civilization/imag.png" class title="imag"><h2><span id="shi-jie-guan">ä¸–ç•Œè§‚</span><a href="#shi-jie-guan" class="header-anchor">Â¶</a></h2><p>æ–‡æ˜æœ‰å››ç§èƒœåˆ©çš„æ–¹å¼ï¼Œç§‘æŠ€ï¼Œæ–‡åŒ–ï¼Œå®—æ•™ï¼Œç»Ÿæ²»ï¼Œå¦‚æœè®¾å®šçš„å›åˆæ•°ç»“æŸäº†ä»æ²¡æœ‰ä»»ä½•ä¸€æ–¹è¾¾æˆèƒœåˆ©ï¼Œé‚£ä¹ˆåˆ†æ•°æœ€é«˜çš„ç©å®¶èµ¢ã€‚</p><p>æ–‡æ˜çš„å‘å±•åˆ†æˆç§‘æŠ€æ ‘å’Œå¸‚æ”¿æ ‘ï¼Œå¯¹åº”çš„å†å²å‘å±•çš„ä¸åŒæ—¶æœŸï¼Œä»æ°æ—ï¼Œå†œè€•æ–‡æ˜ï¼Œä¸­ä¸–çºªï¼Œæ–‡è‰ºå¤å…´ï¼Œç°ä»£ï¼ŒåŸå­èƒ½æ—¶ä»£åˆ°ä¿¡æ¯æ—¶ä»£ï¼Œä¸åŒçš„ç§‘æŠ€å’Œå¸‚æ”¿æœ‰ç›¸åº”çš„å‰ç½®ï¼Œè¾¾æˆèƒ½å¤Ÿè§£é”ä¸‹ä¸€æ­¥è¡ŒåŠ¨ã€‚</p><p>ç©å®¶é€‰æ‹©éš¾åº¦å’Œåœ°å›¾å¼€å±€ã€‚</p><h2><span id="shi-jian-jiu-shi-jin-bi">æ—¶é—´å°±æ˜¯é‡‘å¸</span><a href="#shi-jian-jiu-shi-jin-bi" class="header-anchor">Â¶</a></h2><p>ç”Ÿäº§åŠ›å†³å®šå»ºç­‘å®Œæˆçš„å›åˆæ•°ï¼Œå½“è§£é”äº†ä¸»è¦å»ºç­‘åï¼Œå¯ä»¥ç”¨æ—¶é—´æˆ–è€…é‡‘å¸æ¥è·å¾—é™„åŠ å»ºç­‘ã€‚æ–‡æ˜é‡Œæˆ‘è®¤ä¸ºæœ€é‡è¦çš„å°±æ˜¯é‡‘å¸ï¼Œå…¶æ¬¡æ˜¯èµ„æºã€‚é‡‘å¸å¯ä»¥æ¢å–æ—¶é—´ï¼Œä»»ä½•èƒ½å¤Ÿæ¢å¾—æ—¶é—´çš„è¡ŒåŠ¨éƒ½åº”è¯¥é‡‡å–ã€‚</p><p>ç§‘æŠ€æ ‘ç›¸æ¯” breadth-first search é‡‡ç”¨ depth-first search æœ€å¥½ï¼Œåœ¨ç¡®å®šç›®æ ‡çš„æƒ…å†µä¸‹è¿™èƒ½æœ€å¤§ç¨‹åº¦çš„å¢åŠ ç§‘æŠ€ç‚¹ã€‚åœ¨ç»™å®šçš„æ—¶æœŸå†…æ‰¾åˆ°èƒ½å¤Ÿæœ‰æœ€å¿«å‘å±•é€Ÿåº¦çš„å¯èƒ½æ–¹æ³•ï¼Œè¿™éœ€è¦çŸ¥é“å¯èƒ½æ€§å¤§çš„æ–¹å¼ï¼Œå¹¶ä¸”ç¡®ä¿èµ°çš„ä¸‹ä¸€æ­¥èƒ½å¤Ÿæ¢å¾—æ›´å®½çš„è·¯ã€‚</p><h2><span id="wei-ren-de-bang-zhu">ä¼Ÿäººçš„å¸®åŠ©</span><a href="#wei-ren-de-bang-zhu" class="header-anchor">Â¶</a></h2><p>ä¸–ç•Œæ˜¯å¤æ‚çš„ï¼Œå•ä¸€æ–¹å¼çš„æƒ³æ³•ä¸èƒ½å¤Ÿè§£å†³é—®é¢˜ã€‚</p><p>æ–‡æ˜ä¸­ä¼Ÿäººçš„å­˜åœ¨èƒ½å¤Ÿæ ¹æ®å…¶ç±»åˆ«èƒ½å¤Ÿç»™äºˆä¸åŒåŠ æˆï¼Œä½†è¿™ç§åŠ æˆæ˜¯å› äººè€Œå¼‚çš„ã€‚åŸæœ¬æˆ‘ä»¥ä¸ºåªè¦æœ‰å¤§ç§‘å­¦å®¶çš„å¸®åŠ©ï¼Œé‚£ä¹ˆç§‘æŠ€å‘å±•å°±ä¸æˆé—®é¢˜äº†ã€‚äºæ˜¯æŸä¸€å±€é‡Œæˆ‘ç»™æ‰€æœ‰åŸå¸‚éƒ½å»ºäº†å­¦é™¢ï¼Œä»¥åŠé™„åŠ çš„å»ºç­‘ï¼Œå¯æ˜¯å…¶ä»–ç±»åˆ«çš„å»ºç­‘å—åˆ°ç”Ÿäº§åŠ›çš„é™åˆ¶éƒ½æ²¡èƒ½å¾—åˆ°å¾ˆå¥½çš„å‘å±•ã€‚è€Œè¿™åˆå½±å“åˆ°äº†å­¦é™¢çš„å»ºè®¾ï¼Œè¿›å…¥æ¶æ€§å¾ªç¯ï¼Œæ•°ä¸æ¸…å¤šå°‘æ¬¡éƒ½æ­¢æ­¥äºå·¥ä¸šæ—¶æœŸã€‚</p><p>å¾ˆé«˜å…´çš„æ˜¯æˆ‘æœ€æ–°èµ¢çš„è¿™å±€ç»ˆäºè·å¾—äº†å›¾çµã€‚</p><img src="/sg/2022/02/17/civilization/ima.png" class title="ima"><p>è™½ç„¶æ–‡æ˜æœ€å¼ºçš„ buff æ˜¯ä¿¡æ¯æ—¶ä»£çš„å¤§ç§‘å­¦å®¶è¨æ‹‰å§†ï¼Œèƒ½å¤Ÿç»™ä¿¡æ¯æ—¶ä»£æ‰€æœ‰çš„ç§‘æŠ€å¯åŠ¨å°¤é‡Œå¡æ—¶åˆ»ã€‚</p><img src="/sg/2022/02/17/civilization/image.png" class title="image"><h2><span id="yin-shi-li-dao">å› åŠ¿åˆ©å¯¼</span><a href="#yin-shi-li-dao" class="header-anchor">Â¶</a></h2><p>æ–‡æ˜çš„åŸºç¡€åœ¨äºåŸå¸‚å‘å±•ï¼ŒåŸå¸‚å‘å±•ç¹è£æ‰èƒ½è·å¾—æ›´å¤šé‡‘å¸ï¼Œå¸¦æ¥æ›´å¤šåˆ«çš„é€‰æ‹©ã€‚è·å¾—æ–°åŸå¸‚çš„æ–¹å¼æœ‰ä¸¤ä¸ªï¼Œå†›äº‹æ å¤ºå’Œå¼€æ‹“è€…è‡ªå»ºã€‚ä»æ–‡æ˜å‘å±•å¼€å§‹è·å–æ–°åŸå¸‚æ˜¯æœ€å¥½çš„ï¼Œå› ä¸ºåŸå¸‚å¤Ÿå¤šå‘å±•å•†ä¼šå’Œå»ºç«‹è´¸æ˜“è·¯çº¿æ‰èƒ½è·å¾—æ›´å¤šçš„é‡‘å¸ã€‚æ¯å±€èƒ½å¤Ÿè·å¾—500é‡‘å¸å·¦å³çš„åŠ æˆå°±ç®—æ¯”è¾ƒå¥½çš„å‘å±•è¶‹åŠ¿äº†ï¼Œè¿™ä¸€èˆ¬éœ€è¦10ä¸ªåŸå¸‚å·¦å³ã€‚æˆ‘è¾“çš„å‡ å±€é‡ŒåŸå¸‚çš„æ•°é‡ç›¸å¯¹éƒ½è¾ƒå°‘ï¼Œåªæœ‰6ä¸ªåŸå¸‚ï¼Œå‘å±•é€Ÿåº¦ä¹Ÿä¸è¡Œã€‚</p><p>åŸå¸‚è‡ªå»ºå–å†³äºå½“å‰äººå£«çš„äººå£å’Œæœªå¼€å‘çš„åœŸåœ°èµ„æºã€‚å»ºç­‘è·å¾—æœ‰äººå£æ•°é‡è¦æ±‚ï¼Œå¼€æ‹“è€…ä¼šå‡å°‘ä¸€ä¸ªäººå£ï¼Œå¦‚æœåŸå¸‚å‘å±•é€Ÿåº¦ä¸è¶³é‚£ä¹ˆå½“å‰åŸå¸‚å‘å±•å°±ä¼šåœæ»ã€‚è€Œå†›äº‹æ å¤ºåªè¦æœ‰æ¯”ç›®æ ‡åŸå¸‚å¤Ÿå¼ºçš„å†›é˜Ÿå°±è¡Œã€‚æ–‡æ˜é‡Œæˆ˜äº‰è®¾ç½®çš„éš¾åº¦ä¸é«˜ï¼Œåªæœ‰ç©å®¶èƒ½å¤Ÿé€‰æ‹©å¤šä¸ªåŸå¸‚æ‰“å‡»ï¼Œè€Œå…¶ä½™ç”µè„‘ç”¨æˆ·ç©å®¶åªæœ‰åœ¨é‚»å›½çš„å†›é˜Ÿå·²ç»åˆ°æˆ–è¿‡äº†è¾¹ç•Œæ‰ä¼šæ”»å‡»ï¼ˆæˆ–è®¸ä¹‹åèƒ½æ‰¾åˆ°æœ‹å‹ä¸€èµ·ç©ï¼‰ã€‚</p><p>æˆ‘æœ€æ–°ç©çš„ä¸€å±€é€‰æ‹©çš„æ˜¯å®é™…åœ°çƒåœ°å›¾æ¨¡æ‹Ÿï¼Œéšæœºå¸‚æ”¿ç§‘æŠ€æ¨¡å¼ï¼Œéšæœºå›ä¸»æ˜¯è¥¿ç­ç‰™è²åˆ©æ™®ä¸‰ä¸–ã€‚ä»–çš„å¤©èµ‹ä¸»è¦æ˜¯é‡‘å¸ï¼Œç”Ÿäº§åŠ›å’Œå®—æ•™ã€‚å‘å±•é‡å•†ä¸»ä¹‰èƒ½å¤Ÿè·å¾—æ›´å¤šçš„é‡‘å¸å’Œç”Ÿäº§åŠ›ï¼Œè€Œå®—æ•™ä¿¡ä»°ä¸æ•Œäººä¸åŒèƒ½å¤Ÿä½¿å†›é˜Ÿè·å¾—æ›´å¤šæˆ˜æ–—åŠ›ã€‚ç©åˆ°ä¸­é—´æˆ‘è§‰å¾—é€šè¿‡æˆ˜äº‰æ å¤ºèƒ½å¤Ÿè·å¾—æ›´å¤šç§‘æŠ€ç‚¹ï¼Œäºæ˜¯é€‰æ‹©å’Œç§‘æŠ€å‘å±•ç¬¬ä¸€çš„é‚»å›½åˆšæœï¼ˆéæ´²ï¼‰å‘åŠ¨æˆ˜äº‰ã€‚å½“æ—¶å†›é˜Ÿéƒ½åœ¨æ¬§æ´²å—éƒ¨ï¼Œå®£æˆ˜è¿‡ååŒ—éæœ€æ¥è¿‘åˆšæœçš„åŸå¸‚åœ¨è¾¹ç•Œå°±å—åˆ°äº†æ”»å‡»ï¼Œè€Œå¤§é‡å†›é˜Ÿç»è¿‡äº”ä¸ªå›åˆå·¦å³åˆ°äº†è¾¹ç•Œå°±ç›´æ¥è¢«ç§‘æŠ€ç­‰çº§æ›´é«˜çš„åˆšæœæ‰“è´¥äº†ï¼Œæ–‡æ˜ç­‰çº§å¯¹æˆ˜äº‰çš„ç›´æ¥å½±å“å¾ˆå¤§ã€‚</p><img src="/sg/2022/02/17/civilization/i.png" class title="i"><h3><span id="guan-cha-shi-jie">è§‚å¯Ÿä¸–ç•Œ</span><a href="#guan-cha-shi-jie" class="header-anchor">Â¶</a></h3><p>æˆ‘è®¤ä¸ºæ–‡æ˜é‡Œä»»ä½•çš„å•ä¸€å› ç´ éƒ½å¯¹ç»“æœæ²¡æœ‰ç»å¯¹ä½œç”¨ï¼Œæ‰€ä»¥ä¸ç”¨åœ¨æ„ä¸€æ—¶ä¸€åœ°çš„å¾—å¤±ã€‚ä¾¦å¯Ÿå…µå»æ¢ç´¢å…¶å®ƒåœ°æ–¹é‡åˆ°åˆ«çš„æ–‡æ˜æ˜¯å¿…è¦çš„ï¼Œä½†æ˜¯åŸºç¡€çš„æ˜¯åŸå¸‚å‘å±•ï¼Œå‘¨å›´é‚»å›½çš„å‘å±•æƒ…å†µæ¯”è¿œæ–¹çš„ä¸–ç•Œæ›´é‡è¦ã€‚è¥¿ç­ç‰™æ‰€å¤„çš„åœ°æ–¹é è¿‘æµ·ä½†é¦–éƒ½é©¬å¾·é‡Œå¹¶ä¸åœ¨æµ·å²¸ï¼Œè€Œä¸èƒ½å‡ºæµ·å°±é™åˆ¶äº†æ–°å¤§é™†åŸå¸‚çš„å¼€æ‹“ï¼Œæ‰€ä»¥åœ¨æœ€å¼€å§‹æˆ‘å°±æƒ³åŠæ³•å…ˆå‘å±•èˆªæµ·ä¸šï¼ŒåŒæ—¶å®æ„¿èŠ±é‡‘å¸æ‰©å¤§è¾¹å¢ƒä¹Ÿä¸èƒ½åœ¨æŸæ¡è·¯ä¸Šå¡æ­»äº†ã€‚</p><p>å‘¨è¾¹å›½å®¶å¯ä»¥å‘åŠ¨æˆ˜äº‰çš„å¤„äºåŒä¸€å±‚æ¬¡çš„æ–‡æ˜ä¸»è¦æœ‰è‹±å›½ï¼Œå¾·å›½ï¼Œç½—é©¬ã€‚ç½—é©¬ç§‘æŠ€æ°´å¹³æ¯”æˆ‘ç•¥é«˜ã€‚ç”±äºæ³•å›½å›ä¸»å…³ç³»å’Œæˆ‘ä¸å¤§å¥½ï¼Œç»å¸¸è°´è´£æˆ‘ï¼ˆï¼Ÿï¼‰ï¼Œå·´é»ä¹Ÿé˜»ç¢äº†æˆ‘å¾€è‹±å¾·é‚£è¾¹è·‘ï¼Œæ‰€ä»¥æœ€å¼€å§‹æˆ‘å°±å é¢†äº†å·´é»ï¼Œè¿™å¯¼è‡´æˆ‘çš„å†›é˜Ÿä¸»è¦é›†ä¸­åœ¨æ¬§æ´²ã€‚åœ¨æ‰“åˆšæœå¤±è´¥åï¼Œæˆ‘çš„æ‰“ç®—æ˜¯é€šè¿‡æ å¤ºè‹±å›½å°†å†›é˜Ÿä»ç«æªæ‰‹å‘å±•åˆ°æ­¥å…µã€‚äºæ˜¯æˆ‘è¯»å–å­˜æ¡£åˆ°æ‰“åˆšæœå‰ï¼Œå é¢†äº†è‹±å›½ä¸¤åº§åŸå¸‚ã€‚å é¢†è‹±å›½åæˆ‘å‘ç°å¾·å›½çš„è¾¹ç•Œçº¿å·²ç»è¢«å‘¨è¾¹å›½å®¶é”æ­»äº†ï¼Œè€Œå¾·å›½æ–‡æ˜è¿˜æœªå‘å±•å‡ºèˆªæµ·æœ¯ï¼Œç›¸æ¯”ä¸–ç•Œå…¶å®ƒå›½å®¶åŸºæœ¬åœæ»ä¸å‰äºæ˜¯æˆ‘åˆå é¢†äº†å¾·å›½ï¼Œæ²¡æƒ³åˆ°å¾·å›½åªæœ‰è¿™ä¸€åº§åŸå¸‚ï¼Œä»–ä»¬ä¸€ç›´è¢«è¾¹ç•Œé”ä½æ²¡æœ‰å¼€æ‹“æ–°çš„åŸå¸‚ã€‚è¿™æ—¶å€™æˆ‘çš„å†›é˜Ÿå·²ç»å‘å±•åˆ°äº†çº¿åˆ—æ­¥å…µï¼Œæ¯”æ­¥å…µä½ä¸€ä¸ªç­‰çº§ã€‚</p><p>æ–‡æ˜æˆ‘æ›´å€¾å‘çš„èƒœåˆ©æ–¹å¼ä¸€ç›´éƒ½æ˜¯ç§‘æŠ€èƒœåˆ©ï¼Œæ¯•ç«Ÿæ˜¯ä¸ªç†å·¥ç”ŸğŸ˜¼ã€‚æˆ˜äº‰æ å¤ºçš„ä¸»è¦ç›®çš„ä¹Ÿæ˜¯å‘å±•ç§‘æŠ€ã€‚ç”±äºå†›é˜Ÿå‘å±•æ°´å¹³ä»æ¯”ä¸ä¸Šç§‘æŠ€æ›´é«˜çš„åˆšæœï¼Œä¹Ÿä¸ºäº†æ‰“å¼€é€šå¾€åˆ«çš„å›½å®¶çš„å¤§é—¨æˆ‘åˆå é¢†äº†ç›¸é‚»çš„ç½—é©¬ä¸¤ä¸ªåŸå¸‚ã€‚è¿™æ—¶å€™å†›é˜Ÿå‘å±•åˆ°äº†æ­¥å…µç¨‹åº¦ï¼ŒåŸå¸‚èƒ½å¤Ÿå»ºç«‹æœºåœºï¼Œè´¸æ˜“è·¯çº¿ä¹Ÿå¼€æ‹“å¾—å¤Ÿå¤šï¼Œæ¯å›åˆåŠ æˆ300é‡‘å¸å·¦å³ã€‚åŒæ—¶æˆ‘å‘ç°åœ¨ä¸–ç•Œæ’åä¸­æˆ‘æœ€é¢†å…ˆçš„èƒœåˆ©æ–¹å¼æ˜¯ç»Ÿæ²»èƒœåˆ©ï¼Œå¹¶ä¸”ç»Ÿæ²»èƒœåˆ©çš„ç¨‹åº¦æ¯”ä¸‰ç§å…¶å®ƒå›ä¸»é¢†å…ˆçš„æ–¹å¼è¦é«˜ã€‚æ‰€ä»¥æˆ‘é€‰å®šäº†ç»Ÿæ²»èƒœåˆ©çš„æ–¹å¼ï¼Œè¿™æ‰å‘ç°éœ€è¦å é¢†å…¶å®ƒæ‰€æœ‰å›½å®¶çš„é¦–éƒ½ã€‚</p><p>åœ¨åæ¥å‘å±•è¿‡ç¨‹ä¸­åˆšæœçš„æ–‡åŒ–èƒœåˆ©ç¨‹åº¦æœ‰ä¸€æ®µæ—¶é—´å’Œæˆ‘çš„ç»Ÿæ²»èƒœåˆ©ç¨‹åº¦å·®ä¸å¤šã€‚ç”±äºå¥‡è§‚èƒ½å¸¦æ¥æ–‡åŒ–åŠ æˆï¼Œæˆ‘é€‰æ‹©äº†åˆšæœä¸¤åº§å¥‡è§‚æœ€å¤šçš„åŸå¸‚ä½œä¸ºæˆ˜ç•¥ç›®æ ‡ã€‚è½°ç‚¸æœºå’Œæˆ˜æ–—æœºçš„å‡ºç°å’Œæ–‡æ˜éš¾åº¦ä¸é«˜çš„æˆ˜äº‰æ¨¡å¼ä½¿è¥¿ç­ç‰™ä¸€æ­¥æ­¥å é¢†äº†åˆšæœï¼Œä¸­å›½å’Œæ—¥æœ¬çš„é¦–éƒ½ã€‚è¿™æ—¶å€™æˆ‘ç¡®å®šè‡ªå·±åŸºæœ¬ä¸Šèƒ½èµ¢äº†ï¼Œå‰©ä¸‹çš„åªæ˜¯æ—¶é—´é—®é¢˜ã€‚</p><p>é˜¿å…¹ç‰¹å…‹ç”±äºåœ¨å…¶å®ƒå¤§é™†ï¼Œæˆ‘æ´¾å‡ºäº†ä¸¤è‰˜æˆ˜èˆ°å’Œä¸¤æ”¯æœºæ¢°åŒ–æ­¥å…µç¡®å®šå®ƒé¦–éƒ½çš„ä½ç½®ï¼Œç„¶åå¸ƒç½®é£æœºåœ¨ç–†åŸŸä¸œä¾§ç©ºè¢­ã€‚æœ€åä¸€ä¸ªé¦–éƒ½åè€ŒèŠ±äº†é¢å¤–çš„æ—¶é—´ï¼Œè™½ç„¶ä¹‹å‰æ å¤ºè¿‡æŒªå¨çš„åŸå¸‚ä½†æˆ‘å¿˜è®°è‡ªå·±å¹¶æœªå é¢†å®ƒçš„é¦–éƒ½ï¼ŒæŸ¥çœ‹ä¸–ç•Œæ’åé¢æ¿åæˆ‘æ‰å‘ç°æœ‰æ¼ç½‘ä¹‹é±¼ï¼Œç¡®å®šäº†æœ€åä¸€ä¸ªæˆ˜ç•¥ç›®æ ‡ã€‚æ”»ä¸‹ååˆ°è¿™é‡Œç»ˆäºè·å¾—äº†ç»Ÿæ²»èƒœåˆ©ã€‚</p><img src="/sg/2022/02/17/civilization/m.png" class title="m"><h3><span id="jie-dian-cun-dang">èŠ‚ç‚¹å­˜æ¡£</span><a href="#jie-dian-cun-dang" class="header-anchor">Â¶</a></h3><p>æ¸¸æˆèƒ½å¤Ÿå­˜æ¡£ï¼Œäººç”Ÿå´ä¸èƒ½é‡æ¥ã€‚ä»Šåæˆ‘ä¹Ÿä¼šé‡åˆ°æ›´å¤šå¤±è´¥ã€‚åªè¦ä¸è‡ªå·±è®¤è¾“ï¼Œä»»ä½•äº‹æƒ…éƒ½æœ‰è½¬æœºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> game </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Quotes</title>
      <link href="/sg/2022/01/11/algernon/"/>
      <url>/sg/2022/01/11/algernon/</url>
      
        <content type="html"><![CDATA[<h3><span id="flowers-for-algernon">Flowers for Algernon</span><a href="#flowers-for-algernon" class="header-anchor">Â¶</a></h3><p>â€œçºªå°¼å®‰å°å§å¦‚æœä½ æœ‰æœºä¼šè¯»åˆ°è¿™ä¸ªè¯·ä¸è¦ä¸ºæˆ‘éš¾è¿‡ã€‚æˆ‘å¾ˆæ„Ÿæœºæˆ‘å°±åƒä½ è¯´çš„å¾—åˆ°ç”Ÿå‘½ä¸­çš„å¼ŸäºŒæ¬¡æœºä¼šã€‚å› ä¸ºæˆ‘å­¦åˆ°å¾ˆå¤šæˆ‘ä»¥å‰ç”šè‡³ä¸çŸ¥åˆ°è¿™ä¸–ç•Œä¸ŠçœŸçš„å­˜åœ¨çš„äº‹æƒ…ã€‚æˆ‘å¾ˆé«˜å…´èƒ½å¤Ÿçœ‹åˆ°è¿™äº›å³ä½¿åªæ˜¯å¾ˆçŸ­çš„æ—¶é—´ã€‚æˆ‘å¾ˆé«˜å…´æˆ‘å‘ç°äº†æ‰€æœ‰å…³äºæˆ‘çš„å®¶äººå’Œæˆ‘çš„äº‹ã€‚å¥½åƒåœ¨æˆ‘æƒ³èµ·ä»–ä»¬å¹¶ä¸”çœ‹è¿‡ä»–ä»¬ä¹‹å‰æˆ‘å¹¶æ²¡æœ‰å®¶äººä¼¼çš„ä½†ç°åœ¨æˆ‘çŸ¥åˆ°æˆ‘æœ‰å®¶äººè€Œä¸”æˆ‘å’Œå¤§å®¶ä¸€æ ·ä¹Ÿæ˜¯ä¸€ä¸ªäººã€‚â€œ</p><p>â€œAny one who has common sense will remember that the bewilderments of the eyes are of two kinds, and arise from two causes, either from coming out of the light or from going into the light, which is true of the mindâ€™s eye, quite as much as of the bodily eye; and he who remembers this when he sees any one whose vision is perplexed and weak, will not be too ready to laugh; he will first ask whether that soul of man has come out of the brighter life, and is unable to see because unaccustomed to the dark, or having turned from darkness to the day is dazzled by excess of light. And he will count the one happy in his condition and state of being, and he will pity the other; or, if he have a mind to laugh at the soul which comes from below into the light, there will be more reason in this than in the laugh which greets him who returns from above out of the light into the den.â€ (Plato, The Republic)</p><p>æœ‰äº›å¸¸è¯†çš„äººéƒ½ä¼šè®°å¾—ï¼Œçœ¼ç›çš„å›°æƒ‘æœ‰ä¸¤ç§ï¼Œä¹Ÿæ¥è‡ªä¸¤ç§èµ·å› ï¼Œä¸æ˜¯å› ä¸ºèµ°å‡ºå…‰æ˜ï¼Œå°±æ˜¯å› ä¸ºèµ°è¿›å…‰æ˜æ‰€è‡´ï¼Œä¸è®ºæ˜¯äººä½“çš„çœ¼ç›æˆ–å¿ƒçµçš„çœ¼ç›ï¼Œéƒ½æ˜¯å¦‚æ­¤ã€‚è®°å¾—è¿™ä»¶äº‹çš„äººï¼Œå½“ä»–ä»¬çœ‹åˆ°åˆ«äººè¿·èŒ«ã€è™›å¼±çš„çœ¼ç¥ï¼Œä»–ä»¬ä¸ä¼šä»»æ„å˜²ç¬‘ï¼Œè€Œä¼šå…ˆè¯¢é—®è¿™ä¸ªäººçš„çµé­‚æ˜¯å¦åˆšä»æ›´æ˜äº®çš„ç”Ÿå‘½èµ°å‡ºæ¥ï¼Œå› ä¸ºä¸é€‚åº”é»‘æš—è€Œæ— æ³•çœ‹æ¸…å‘¨é­ï¼›æˆ–æ˜¯ä»–åˆšä»é»‘æš—èµ°å…¥å…‰æ˜ï¼Œå› ä¸ºè¿‡å¤šçš„å…‰èŠ’è€Œç›®çœ©ã€‚ä»–ä¼šè®¤ä¸ºå…¶ä¸­ä¸€ä¸ªäººçš„æƒ…å†µä¸å¿ƒå¢ƒæ˜¯å¿«ä¹çš„ï¼Œå¹¶å¯¹å¦ä¸€ä¸ªäººäº§ç”Ÿæ€œæ‚¯ã€‚æˆ–æ˜¯ï¼Œä»–å¯èƒ½æƒ³å˜²ç¬‘ä»å¹½å†¥èµ°è¿›å…‰æ˜çš„çµé­‚ï¼Œä½†è¿™æ€»æ¯”å˜²ç¬‘ä»å…‰æ˜ä¸–ç•Œå›åˆ°é»‘æš—æ´ç©´çš„äººæ›´æœ‰é“ç†ã€‚(ä¸Šè¯‘)</p><h3><span id="dead-poets-society">Dead Poets Society</span><a href="#dead-poets-society" class="header-anchor">Â¶</a></h3><p>I went to the woods because I wished to live deliberately, to front only the essential facts of life, and see if I could not learn what it had to teach, and not, when I came to die, discover that I had not lived. I did not wish to live what was not life, living is so dear; nor did I wish to practise resignation, unless it was quite necessary. I wanted to live deep and suck out all the marrow of life, to live so sturdily and Spartan-like as to put to rout all that was not life, to cut a broad swath and shave close, to drive life into a corner, and reduce it to its lowest terms, and, if it proved to be mean, why then to get the whole and genuine meanness of it, and publish its meanness to the world; or if it were sublime, to know it by experience, and be able to give a true account of it in my next excursion. For most men, it appears to me, are in a strange uncertainty about it, whether it is of the devil or of God, and have somewhat hastily concluded that it is the chief end of man here to â€œglorify God and enjoy him forever.â€</p><p>æˆ‘åˆ°æ—ä¸­å»ï¼Œå› ä¸ºæˆ‘å¸Œæœ›è°¨æ…åœ°ç”Ÿæ´»ï¼Œåªé¢å¯¹ç”Ÿæ´»çš„åŸºæœ¬äº‹å®ï¼Œçœ‹çœ‹æˆ‘æ˜¯å¦å­¦å¾—åˆ°ç”Ÿæ´»è¦æ•™è‚²æˆ‘çš„ä¸œè¥¿ï¼Œå…å¾—åˆ°äº†ä¸´æ­»çš„æ—¶å€™ï¼Œæ‰å‘ç°æˆ‘æ ¹æœ¬å°±æ²¡æœ‰ç”Ÿæ´»è¿‡ã€‚æˆ‘ä¸å¸Œæœ›åº¦è¿‡éç”Ÿæ´»çš„ç”Ÿæ´»ï¼Œç”Ÿæ´»æ˜¯é‚£æ ·çš„å¯çˆ±ï¼›æˆ‘å´ä¹Ÿä¸æ„¿æ„å»ä¿®è¡Œè¿‡éšé€¸çš„ç”Ÿæ´»ï¼Œé™¤éæ˜¯ä¸‡ä¸å¾—å·²ã€‚æˆ‘è¦ç”Ÿæ´»å¾—æ·±æ·±åœ°æŠŠç”Ÿå‘½çš„ç²¾é«“éƒ½å¸åˆ°ï¼Œè¦ç”Ÿæ´»å¾—ç¨³ç¨³å½“å½“ï¼Œç”Ÿæ´»å¾—æ–¯å·´è¾¾å¼çš„ï¼Œä»¥ä¾¿æ ¹é™¤ä¸€åˆ‡éç”Ÿæ´»çš„ä¸œè¥¿ï¼Œåˆ’å‡ºä¸€å—åˆˆå‰²çš„é¢ç§¯æ¥ï¼Œç»†ç»†åœ°åˆˆå‰²æˆ–ä¿®å‰ªï¼ŒæŠŠç”Ÿæ´»å‹ç¼©åˆ°ä¸€ä¸ªè§’éš…é‡Œå»ï¼ŒæŠŠå®ƒç¼©å°åˆ°æœ€ä½çš„æ¡ä»¶ä¸­ï¼Œå¦‚æœå®ƒè¢«è¯æ˜æ˜¯å‘å¾®çš„ï¼Œé‚£ä¹ˆå°±æŠŠé‚£çœŸæ­£çš„å‘å¾®å…¨éƒ¨è®¤è¯†åˆ°ï¼Œå¹¶æŠŠå®ƒçš„å‘å¾®ä¹‹å¤„å…¬å¸ƒäºä¸–ç•Œï¼›æˆ–è€…ï¼Œå¦‚æœå®ƒæ˜¯å´‡é«˜çš„ï¼Œå°±ç”¨åˆ‡èº«çš„ç»å†æ¥ä½“ä¼šå®ƒï¼Œåœ¨æˆ‘ä¸‹ä¸€æ¬¡è¿œæ¸¸æ—¶ï¼Œä¹Ÿå¯ä»¥ä½œå‡ºä¸€ä¸ªçœŸå®çš„æŠ¥é“ã€‚å› ä¸ºï¼Œæˆ‘çœ‹ï¼Œå¤§å¤šæ•°äººè¿˜ç¡®å®šä¸äº†ä»–ä»¬çš„ç”Ÿæ´»æ˜¯å±äºé­”é¬¼çš„ï¼Œè¿˜æ˜¯å±äºä¸Šå¸çš„å‘¢ï¼Œç„¶è€Œåˆå¤šå°‘æœ‰ç‚¹è½»ç‡åœ°ä¸‹äº†åˆ¤æ–­ï¼Œè®¤ä¸ºäººç”Ÿçš„ä¸»è¦ç›®æ ‡æ˜¯â€œå½’è£è€€äºç¥ï¼Œå¹¶æ°¸è¿œä»ç¥é‚£é‡Œå¾—åˆ°å–œæ‚¦â€ã€‚ï¼ˆå¾è¿Ÿè¯‘ï¼‰</p><h3><span id="wo-men-nei-xin-de-chong-tu">æˆ‘ä»¬å†…å¿ƒçš„å†²çª</span><a href="#wo-men-nei-xin-de-chong-tu" class="header-anchor">Â¶</a></h3><p>æœ‰æ„è¯†åœ°å»ä½“éªŒç—›è‹¦ï¼Œè™½ç„¶ä»¤äººç—›è‹¦ï¼Œå´å¯ä»¥æˆä¸ºä¸€é¡¹éå¸¸å®è´µçš„èµ„æœ¬ã€‚æˆ‘ä»¬è¶Šå»é¢å¯¹å†²çªï¼Œè¶Šå»å¯»æ±‚è‡ªå·±çš„è§£å†³é€”å¾„ï¼Œæˆ‘ä»¬çš„å†…å¿ƒå°±è¶Šè‡ªç”±ï¼Œè¶Šèƒ½å¾—åˆ°æ›´å¤šçš„åŠ›é‡ã€‚å”¯æœ‰æˆ‘ä»¬è‡ªæ„¿å»æ¥å—æ­£é¢å†²å‡»æ—¶ï¼Œæ‰å¯èƒ½æ¥è¿‘æˆ‘ä»¬çš„ç†æƒ³ï¼Œåšè‡ªå·±äººç”Ÿçš„èˆ¹é•¿ã€‚è€Œé‚£ç§ç”±å†…å¿ƒè¿Ÿé’è€Œå¸¦æ¥çš„ï¼Œå½¢æ˜¯è€Œå®éçš„æ‰€è°“å®‰å®ï¼Œæ ¹æœ¬ä¸å€¼å¾—ç¾¡æ…•ï¼Œå®ƒä¼šä½¿æˆ‘ä»¬å˜å¼±ï¼Œä½¿æˆ‘ä»¬è½»æ˜“æ²¦ä¸ºå¤ªå¤šå½±å“çš„ç‰ºç‰²å“ã€‚(å¡å°”Â·éœå°¼)</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> read </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>3 processors</title>
      <link href="/sg/2021/12/31/6.004_processor/"/>
      <url>/sg/2021/12/31/6.004_processor/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#15-cache">15 Cache</a><ul><li><a href="#direct-mapped-cache-problem-conflict-misses">Direct-mapped cache problem: conflict misses</a></li><li><a href="#n-way-set-associative-cache-n-dm-cache">N-way set-associative cache = N DM cache</a></li><li><a href="#associativity-implies-choices">Associativity implies choices</a></li><li><a href="#write-policy">Write policy</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="15-cache">15 Cache</span><a href="#15-cache" class="header-anchor">Â¶</a></h2><p>Goal: minimize the average memory access time by building a hierarchical memory system that had both low latency and high capacity.</p><p>Choice: block size -&gt; replacement policy -&gt; write policy</p><h3><span id="direct-mapped-cache-problem-conflict-misses">Direct-mapped cache problem: conflict misses</span><a href="#direct-mapped-cache-problem-conflict-misses" class="header-anchor">Â¶</a></h3><blockquote><p>Assuming a 1024-line DM cache with a block size of 1:</p><p>Consider running the 3-instruction LOOP A code with the instructions located starting at word address 1024 and the data starting at word address 2048 where the program is making alternating accesses to instruction and data, <em>e.g.</em>, a loop of LD instructions.</p><p>Address conflict will cause the current resident of a cache line to be evicted in favor of the new request.</p></blockquote><p>Conflict misses occur when two address call from cpu reflects to the same cache line.</p><p>If we use fully-associative cache instead, there will be no conflict misses since every address call reflects to different cache line at the high cost of specs/time.</p><p>To fix above problem,  it required a cache that could hold two 3-word blocks in DM cache while FA cache needs two of its cache lines and achieve a 100% hit ratio.</p><h3><span id="n-way-set-associative-cache-n-dm-cache">N-way set-associative cache = N DM cache</span><a href="#n-way-set-associative-cache-n-dm-cache" class="header-anchor">Â¶</a></h3><p>improvements compared to DM cache: reduce confilcting addresses</p><blockquote><p>N-way SA cache can accommodate up to N blocks whose addresses map to the same cache index.</p></blockquote><p>Associativitity: increase the number of cache locations checked on each access.</p><p>similar to how big the block size to achieve higher hit ratio, how many ways do we need to avoid the cache line conflicts in DM cache?</p><p>è¿™é‡Œçš„wayä¸»è¦æŒ‡cacheä¸­æœ‰å¤šå°‘æ¡çº¿è·¯èƒ½å¤ŸåŒæ—¶è¿›è¡ŒtagæŸ¥è¯¢ã€‚</p><blockquote><p>The mapping from addresses to cache lines is designed to avoid conflicts between neighboring locations.</p></blockquote><p>we only need to worry about conflicts between the different regions: code, stack and data.</p><blockquote><p>Associativity tradeoffs: thereâ€™s little additional impact on the miss ratio beyond 4 to 8 ways.</p></blockquote><h3><span id="associativity-implies-choices">Associativity implies choices</span><a href="#associativity-implies-choices" class="header-anchor">Â¶</a></h3><p>when conflict misses occur, which location in cache to store new data fetched from main memory? This question leads to the replacement policies with the goal of minimizing the impact on the hit ration in the future.</p><blockquote><p>Idea: If a block has not been recently accessed, itâ€™s less likely to be accessed in the near future. (Principle of locality)</p></blockquote><p>LRU replacement policy: replace the block that was accessed furthest in the past.</p><p>Except random policy and LRU, other strategies will occasionally cause a particular program to execute much more slowly than expected.</p><h3><span id="write-policy">Write policy</span><a href="#write-policy" class="header-anchor">Â¶</a></h3><p>How to handle memory writes in the cache when updating main memory with the new data?</p><ul><li><p>write-through: whenever the CPU sends a write request to the cache, the cache then performs the same write to main memory.</p><ul><li>pro:CPU locations: up-to-date value</li><li>Con:DRAM write is slow: bottleneck could be</li></ul><blockquote><p>what if the program is constantly writing a particular memory location, <em>e.g.</em>, updating the value of a local variable in the current stack frame?</p></blockquote></li><li><p>Write-behind: let the CPU continue execution while the cache waits for the write to main memory to complete</p><blockquote><p>if thereâ€™s another cache miss while the write is still pending, everything will have to wait at that point until both the write and subsequent refill read finish, since the CPU canâ€™t proceed until the cache miss is resolved.</p></blockquote></li><li><p>Write-back(best write policy):  the contents of the cache are updated and the CPU continues execution immediately.</p><blockquote><p>The updated cache value is only written to main memory when the cache line is chosen as the replacement line for a cache miss.</p></blockquote></li></ul><p>write-back minimizes the number of accesses to main memory, preserving the memory bandwidth for other operations.</p><p>Implementation:</p><ul><li>how to replace a cache line?</li></ul><p>We can avoid unnecessary write-backs by adding another state bit to each cache line: the <em>dirty</em> bit. The dirty bit is set to 0 when a cache line is filled during a cache miss.</p>]]></content>
      
      
      <categories>
          
          <category> computer architecture </category>
          
          <category> 6.004 computation structures </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>hw2 graph</title>
      <link href="/sg/2021/12/30/hw2_graph/"/>
      <url>/sg/2021/12/30/hw2_graph/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#ps5">ps5</a></li><li><a href="#ps6">ps6</a></li><li><a href="#ps7">ps7</a></li><li><a href="#recitation">Recitation</a><ul><li><a href="#bfs">BFS</a></li><li><a href="#dfs">DFS</a></li><li><a href="#weighted-graph">Weighted graph</a></li><li><a href="#all-pairs-shortest-paths">All pairs shortest paths</a></li></ul></li><li><a href="#olc">olc</a></li></ul><!-- tocstop --></div><h2><span id="ps5">ps5</span><a href="#ps5" class="header-anchor">Â¶</a></h2><p>BFS</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># BFS</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">BFS</span>(<span class="params">Adj, s</span>):</span><br><span class="line">    parent = [<span class="literal">None</span> <span class="keyword">for</span> v <span class="keyword">in</span> Adj]</span><br><span class="line">    parent[s] = s</span><br><span class="line">    level = [[s]]</span><br><span class="line">    <span class="keyword">while</span> <span class="number">0</span> &lt; <span class="built_in">len</span>(level[-<span class="number">1</span>]):</span><br><span class="line">        level.append([])</span><br><span class="line">        <span class="keyword">for</span> u <span class="keyword">in</span> level[-<span class="number">2</span>]:</span><br><span class="line">            <span class="keyword">for</span> v <span class="keyword">in</span> Adj[u]:</span><br><span class="line">                <span class="keyword">if</span> parent[v] <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">                    parent[v] = u</span><br><span class="line">                    level[-<span class="number">1</span>].append(v)</span><br><span class="line">    <span class="keyword">return</span> parent</span><br></pre></td></tr></table></figure><p>Analysis:</p><ol><li><p>overall runtime of this BFS: O(|V| + |E|) or O(|E|)</p><ul><li>inner loop takes O(|E|) time: it cycles through all deg(v) outgoing edges from vertex v.</li><li>Parent has length |V|</li></ul></li><li><p>Graph radius</p></li><li><p>network</p><p>Approach: construct a graph.</p><p>Idea: add an additional node s (a super node) to the graph with an edge to every entry point.</p></li><li><p>search for connected components</p></li></ol><h2><span id="ps6">ps6</span><a href="#ps6" class="header-anchor">Â¶</a></h2><p>DFS</p><ol><li><p>topological sort: DAG</p><ul><li>Simple graph has no self-loops, DAG has no loops</li></ul></li><li><p>relaxation</p><ul><li>Tree: In a tree, there is a unique simple path between any pair of vertices, as two distinct simple paths could be used to construct a cycle.</li></ul></li><li><p>DAG relaxation</p></li><li><p>Bellman ford: detect loops and negative weight</p></li><li><p>Input</p></li><li><p>DAG problem</p><ul><li><p>Use DFS to check visiting order is the particular topological order</p></li><li><p>Topological tree has no backward edges/loops.</p></li><li><p>Auxiliary information: index</p></li></ul></li></ol><h2><span id="ps7">ps7</span><a href="#ps7" class="header-anchor">Â¶</a></h2><ol><li>Feel smooth when thinking it as water flow.<ul><li>How pq breaks ties may change the visiting order</li><li>It should be clear how to implement operations.</li><li>think about connected components ï¼ˆè¿™ä¸ªå›¾çš„å‡å°çš„æ–¹å¼æ˜¯é€šè¿‡æ‰”æ‰å·²ç»ç¡®å®šæ˜¯æœ€çŸ­è·¯å¾„çš„ç‚¹æ¥è¿›è¡Œçš„</li></ul></li><li>negitive weights: detect negative loops<ul><li>connected component C: one vertex can reach any vertex<ul><li>we donâ€™t know if the graph is connected. Likewise, it should be considered if a graph is a DAG/connected/weighted/â€¦(graphâ€™s property)</li><li>how to find a connected component: considering it is a undirected graph, use DFS/BFS to find C.</li></ul></li><li>Whether has negative loops<ul><li>Yes, V in C is -inf, V not in C is inf</li><li>No, use Dijkstra</li></ul></li></ul></li></ol><h2><span id="recitation">Recitation</span><a href="#recitation" class="header-anchor">Â¶</a></h2><p>Terminology:</p><ol><li>Bipartite graph: a graph whose vertices can be divided into two disjoint and independent sets U and V, that is, every edge connects a vertex in U to one in V.</li><li>DFS search: search a graph from a specific vertex or an entire.</li><li>DAG: A directed graph containing no directed cycle is called a directed acyclic graph or a DAG</li><li>Topological sort: in a DAG G=(V, E), a linear ordering of the vertices such that for each edge (u, v) in E, vertex u appears before vertex v in the ordering.</li></ol><p>The problem solving process: transform raw input to IN, apply the algorithm we are familiar with, read raw output to OUT.</p><p>Then calculate the runtime and prove for correctness and efficiency.</p><img src="/sg/2021/12/30/hw2_graph/Screenshot-7934843.png" class title="Screenshot-7934843"><h3><span id="bfs">BFS</span><a href="#bfs" class="header-anchor">Â¶</a></h3><p><strong>level sets</strong> L_i is the set of vertices reachable from s via a shortest path of length i. Breadth-first search discovers levels in increasing order starting with i = 0 where L_0 = {s}</p><h3><span id="dfs">DFS</span><a href="#dfs" class="header-anchor">Â¶</a></h3><p>Relaxation: search for a solution to an optimization problem by sorting with a solution that is not optimal, then iteratively improves the solution until it becomes an optimal solution to the original problem.</p><p>Think of the initial distance values as being very â€œtightâ€ or â€œconstrainedâ€ (e.g., initialized to infinity), and relaxation as <strong>loosening</strong> the constraint when a shorter (better) path is found</p><ul><li>delta (s, v): weight of the shortest path</li><li>d (s, v) = +inf (except d(s, s) = 0)</li><li>if d(s, v) = delta (s, v), d(s, v) fully relaxed</li></ul><p>How to relax? And when to stop relaxing?</p><img src="/sg/2021/12/30/hw2_graph/edge_relaxation.png" class title="edge_relaxation"><p>The definition of topological sort depends on the acyclic property of DAG.</p><p><u>The important part is reasoning process so that we can reason by ourselves to get the answer</u></p><p>edge classification</p><ul><li>tree edge(DFS traverse)</li><li>not tree edge<ul><li>Back/forward/cross edge</li></ul></li></ul><p>Problem 1: how this concept relates to DFS?</p><p>Problem 1.1: how that defers to undirected graph compared with directed graph?</p><p>topological sort -&gt; directed, acyclic, graph</p><p>Problem 2: how this concept relates to topological sort?</p><h3><span id="weighted-graph">Weighted graph</span><a href="#weighted-graph" class="header-anchor">Â¶</a></h3><p>problem 0: how to build a shortest path algorithm?</p><p>simple case: take an edge, split it up, put in fake nodes. Then use BFS</p><p>Problem 1: shortest path with odd edges?</p><p>æ¯”è¾ƒæœ‰è¶£çš„æ˜¯å¯ä»¥æŠŠä¸¤ä¸ªçŠ¶æ€çœ‹æˆä¸¤ä¸ªå¹³é¢ã€‚</p><p>Idea: track state during path building</p><p>problem 2: fast way, least fuel. An edge has a fixed fuel cost and a varying time cost, depending on the time table Tc (in minutes), where M = 24 Ã— 60</p><p>Idea: choose a more reasonable state to track and reason carefully.</p><h4><span id="bellman-ford">Bellman-ford</span><a href="#bellman-ford" class="header-anchor">Â¶</a></h4><p>Notice: negative weight</p><p>-&gt; detect loops</p><h4><span id="dijkstra">Dijkstra</span><a href="#dijkstra" class="header-anchor">Â¶</a></h4><p>Notice: non-negative weight</p><p>è®²ä¹‰ä¸­åˆ†æˆä¸¤éƒ¨åˆ†æ¥çœ‹è¿™ä¸ªç®—æ³•ã€‚æ•´ä½“ä¸Šçœ‹ï¼š Dijkstra åƒä¸€ä¸ªæµåŠ¨çš„æ°´é¾™å¤´é˜€é—¨ï¼Œæ°´æµä»èµ·ç‚¹åŒ€é€Ÿåœ°æµåŠ¨åˆ°ä¸‹ä¸€ä¸ªå¼€å…³ã€‚ç®—æ³•æŠŠè¿ç»­çš„è¿‡ç¨‹é€šè¿‡ edge relaxation ç¦»æ•£çš„è¡¨ç¤ºã€‚</p><ol><li><p>Edge relaxation: priority queue -&gt; extract_min/insert/delete</p></li><li><p>ç®—æ³•çš„è¿è¡Œæ—¶é•¿ä¸ pq çš„å…·ä½“å®ç°æœ‰å…³ã€‚å¯ä»¥ä»ä¸‰ç§è§’åº¦çœ‹ï¼š</p><p>å­˜ä¸€å¯¹ (key, value)ï¼Œ éœ€è¦å®ç°ä¸‰ä¸ªæ“ä½œã€‚</p><ul><li>å½“å›¾çš„ç‚¹å¯†é›†æ—¶ï¼š|E| = â„¦(|V|^2) ; direct_access_array; T = O(|V|^2+ |E|)</li><li>å½“å›¾çš„ç‚¹ç¨€ç–æ—¶ï¼š|E| = O(|V|) ; heap; T = O((|V |+ |E|) log |V |)</li><li>ä»‹äºä¸¤è€…ä¹‹é—´ï¼šbinary heap; T = O(|V |log |V |+ |E|)</li></ul></li></ol><h3><span id="all-pairs-shortest-paths">All pairs shortest paths</span><a href="#all-pairs-shortest-paths" class="header-anchor">Â¶</a></h3><p>Runtime: at least O(V^2), because we need find all pairsâ€™ path</p><p>naive approach: use n * SSSP algorithms:</p><ul><li>Using Dijkstra for each vertices so as to solve APSP is easy to think but has details to rethink.</li></ul><p><strong>Better:</strong></p><p>tricky part: how to deal with negative weights?</p><ol><li><p>adjusting edge weights</p><p>problem 1: Are shortest paths still shortest paths?</p><ul><li>itâ€™s easy to think of adjusting edge weights by adding a large number to each edge weight. But it will base paths with fewer edges.</li><li>Idea: pick a node u, add 10 to its incoming edges, and subtract 10 from its outgoing edges.</li></ul><p>Problem 2: itâ€™s hard to think a general reweighting functions.</p></li><li><p>making all wights nonnegative</p><p>Clever choice of reweighting function: Add a new node X with weight-0 directed edges (X, v) for each v âˆˆV , and choose h(v) = d(X, v).</p></li><li><p>Johnsonâ€™s algorithm is basically two parts: reweighting function then n * dijkstra.</p><ul><li><p>the essense is the way to construct a new graph Gâ€™ with nonnegative weights:</p><p>Add new vertex X and weight-0 edges (X, v) for all v âˆˆV as above, and run Bellman-Ford from X to compute h(v) = d(X, v)</p></li><li><p>make sure changing back to G.</p><p>The correct d values in G are d(u, v) = dâ€²(u, v) + h(v) âˆ’h(u), and the shortest path trees in Gâ€²are also shortest path trees in G</p></li></ul></li></ol><h2><span id="olc">olc</span><a href="#olc" class="header-anchor">Â¶</a></h2><ol><li><p>I think the basic idea is data transformation and build intuition about the problems.</p></li><li><p>why should we know about edge classificationâ€¦?  because it would help to understand the problem better.</p></li><li><p>Lec 14 notes (19fall) about APSP is worthy reading.</p></li><li><p>Relaxation: it checks for (u,v) in constructing graph</p></li><li><p>python lambda expression</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">lambda</span> x: x**<span class="number">2</span></span><br></pre></td></tr></table></figure></li><li><p>Why doesnâ€™t  Dijkstraâ€™s algorithm work with non-negative edge weights?</p><p>I think the tight bound is Dijkstra not allowing negative loops that will destroy its minimal property.</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
          <category> 6.006 algorithms </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hw </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>lab RISC-V</title>
      <link href="/sg/2021/12/30/lab_riscv/"/>
      <url>/sg/2021/12/30/lab_riscv/</url>
      
        <content type="html"><![CDATA[<h2><span id="l1">L1</span><a href="#l1" class="header-anchor">Â¶</a></h2><p><u>Problem</u>: (N-bit)twoâ€™s complement convert to decimal</p><p>In twoâ€™s complement notation the highest-order bit represents -2^(n-1) instead of +2^(n-1)</p><p>Notice 1: high-order bit of the N-bit repre has negative weight.</p><p>Notice 1.1: all numbers with MSB of 1 are negative</p><p>Notice 1.2: most negative/positive number, range</p><ul><li>Unsigned: 2 ** N - 1;</li><li>2â€™s complement: 2 ** (N-1) - 1</li></ul><img src="/sg/2021/12/30/lab_riscv/sc.png" class title="hex"><p><u>Problem</u>: addition</p><p>reason the correctness of the result by performing the addition(mod N) and compare the sign bit of the result to the sign bit of one of the addends when the sign bits of the addends are the same.</p><p>Notice 2: overflow when it is needed to drop extra digits.</p><blockquote><p>remark: Note that if you are only given a sequence of bits, you donâ€™t actually know what number they<br>represent.  You also need be told how to interpret those bits: as an unsigned number or as a<br>signed number stored in twoâ€™s complement representation.</p></blockquote><p>try to prove:</p><p>Example: Given an unsigned n-bit binary integer = ğ’ƒğ’*ğŸâ€¦ ğ’ƒğŸğ’ƒğŸ , prove that ğ’— is a multiple of 4 if and<br>only if ğ’ƒğŸ= ğŸ and ğ’ƒğŸ= ğŸ.</p><h2><span id="l2">L2</span><a href="#l2" class="header-anchor">Â¶</a></h2><blockquote><p>Fact: <strong>Logical shift</strong> correspond to (left-shift) multiplication by 2, (right-shift) integer division by 2.</p><p><strong>Arithmetic shift</strong> is something related to 2â€™s-complement representation of signed numbers. In this representation, the sign is the leftmost bit, then arithmetic shift preserves the sign (this is called sign extension).</p></blockquote><ol><li><p>Load/store word instructions are related to address</p><p>sw x4, 4(x3): if register x3 contains 0x2000 and register x4 contains 0x3, the instruction â€œ<u>sw x4, 4(x3)</u>â€ will store the value 0x3 into the memory location 0x2004.</p><p>lw x2, 8(x1): If register x1 contains 0x1000, then â€œ<u>lw x2, 8(x1)</u> will find the memory address 0x1008 and copy its contents into register x2.</p></li><li><p>computation instructions are related to what is stored in the address/reg</p></li><li><p>Simple computation structure</p><p>1)Load a,b,c with LW</p><p>2)Perform operation</p><p>3)Store result with SW</p></li><li><p>Register -&gt; binary encoding: 5 bit, 32 registers(x0-x31)</p></li><li><p>example of fib logic: mv</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// x1 = n </span><br><span class="line">// x2 = final result </span><br><span class="line">bne x1, x0, start // branch if n!=0 </span><br><span class="line">li x2, 0 </span><br><span class="line">j end             // pseudo instruction for jal x0, end </span><br><span class="line">start: </span><br><span class="line">addi x1, x1, -1   // n = n - 1 </span><br><span class="line">li x3, 0          // x = 0 </span><br><span class="line">li x2, 1                      // y = 1 (you&#x27;re returning y at the end, so use x2 to hold y) </span><br><span class="line">loop: </span><br><span class="line">bge x0, x1, end   // stop loop if 0 &gt;= n </span><br><span class="line">addi x5, x3, x2   // tmp = x + y </span><br><span class="line">mv x3, x2         // x = y (pseudo instruction for addi x3, x2, 0) </span><br><span class="line">mv x2, x5         // y = tmp (pseudo instruction for addi x2, x5, 0) </span><br><span class="line">addi x1, x1, -1   // n = n - 1 </span><br><span class="line">j loop            // pseudo instruction for jal x0, loop </span><br><span class="line">end:</span><br></pre></td></tr></table></figure></li></ol><h2><span id="riscv-lab">Riscv lab</span><a href="#riscv-lab" class="header-anchor">Â¶</a></h2><blockquote><p>An architecture, or more sp ecically an instruction set architecture, is the interface b etween software and hardware. The instruction set architecture precisely sp ecies the resources of the machine and the way programs can access and use them.</p></blockquote><ol><li><p>Convert loop into branches and jumps</p><ul><li><p>Condition at bottom</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">maximum:</span><br><span class="line">li a2, 0 // load immediate 0 into a2 (largest_so_far)</span><br><span class="line">loop:</span><br><span class="line">lw a3, 0(a0) // load word at [[address stored in a0] + 0] into a3 (w)</span><br><span class="line">ble a3, a2, continue // skip next instruction if a3 (w) â‰¤ a2 (largest_so_far)</span><br><span class="line">...</span><br><span class="line">continue:</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">bnez a1, loop // go to top of lo op if a1 (n) 6= 0</span><br><span class="line">done:</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>Condition at top</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">maximum:</span><br><span class="line">li a2, 0 // load immediate 0 into a2 (largest_so_far)</span><br><span class="line">loop:</span><br><span class="line">beqz a1, done // go to &lt;done&gt; if a1 (n) = 0</span><br><span class="line">lw a3, 0(a0) // load word at [[address stored in a0] + 0] into a3 (w)</span><br><span class="line">ble a3, a2, continue // skip next instruction if a3 (w) â‰¤ a2 (largest_so_far)</span><br><span class="line">...</span><br><span class="line">continue:</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">j loop // go to top of lo op</span><br><span class="line">done:</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li></ul></li><li><p>interacting with main memory: lw, sw</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lw rd, imm(rs) # we can load the word at address (n+imm) in memory into register rd.</span><br><span class="line">sw rs2, imm(rs1) # we can save the content of rs2 into memory at address (content of rs1 + imm)</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> computer architecture </category>
          
          <category> 6.004 computation structures </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>2 digital abstraction</title>
      <link href="/sg/2021/12/29/6-004-digit/"/>
      <url>/sg/2021/12/29/6-004-digit/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#4-digital-abstraction">4 digital abstraction</a></li><li><a href="#5-cmos">5 CMOs</a></li><li><a href="#6-combinational-logic">6 combinational logic</a><ul><li><a href="#introduction">introduction</a></li></ul></li><li><a href="#7-sequential-circuits">7 Sequential Circuits</a></li><li><a href="#8-circuits-logic-in-minispec">8 Circuits logic in Minispec</a></li></ul><!-- tocstop --></div><p>Goal: constraints exist in design and what makes our systems most efficient.</p><h2><span id="4-digital-abstraction">4 digital abstraction</span><a href="#4-digital-abstraction" class="header-anchor">Â¶</a></h2><p>goal: we want  to build a system for storing and processing information.</p><p>Background: analog systems and digital systems serve different direction.</p><p>design goal: the system should tolerate noise</p><p><u>problem</u>: how to represent 0 and 1 using voltage?</p><ul><li><p>naive approach: set one threshold V_T</p></li><li><p>Improvement 1: set two threshold V_L, V_H</p><ul><li>still have the issue dealing with the noise around threshold.</li></ul></li><li><p>improvement 2: divide signals range into input and output area. V_OL &lt; V_IL &lt; V_IH &lt; V_OH.</p><ul><li>an output of a 0 or 1 from some device wonâ€™t turn into an undefined or opposite bit when it is read into another input device.</li></ul></li></ul><p>Analysis: analog systems accumulate noise, while digital systems can manage to solve the problem mostly, so that the noise will be canceled at each stage in digital systems.</p><ol><li>Problem: buffer: copy one bit(input-&gt;output)<ul><li>Voltage transfer characteristics: Active components(gain &gt; 1)<img src="/sg/2021/12/29/6-004-digit/test.png" class title="test"></li></ul></li><li>digital circuits: two kinds, combinational circuits and sequential circuits.</li></ol><h2><span id="5-cmos">5 CMOs</span><a href="#5-cmos" class="header-anchor">Â¶</a></h2><p>Problem: how the gates are built?</p><ol><li><p>CMOs technology(Complementary metal-oxide semiconductor): packaged chip, silicon die, transistors as voltage-controlled switches</p></li><li><p>field effect transistor(FET) has three terminals: gate, source, drain.</p><ul><li><p>Two types: nFETs, pFETs</p><img src="/sg/2021/12/29/6-004-digit/test1.png" class title="t2"></li><li><p>Two examples to explain the behavior</p><ul><li>NOT gate: threshold V_TH, range(if V_IN &lt; V_TH, on; if V_IN &gt; V_DD - V_TH, off)</li><li>NAND gate</li></ul></li></ul></li><li><p><strong>functional behavior of transistors for building logic gates</strong></p><ul><li>complementary behavior: the pullup and pulldown networks are related in a complementary way, so that the pullup is on when the pulldown is off, and vice versa.</li><li>Two problem case<ul><li>Power supply and ground are both connected to the output -&gt; burn the circuit(driven X)</li><li>Output is disconnected</li></ul></li><li>Convention: In CMOS, we always use pFETs to implement the pullup network and nFETs to implement the pulldown network.</li><li>Fact:  individual CMOS gates cannot implement arbitrary Boolean functions.<ul><li>reason: CMOS gates are inverting</li></ul></li></ul><img src="/sg/2021/12/29/6-004-digit/test2.png" class title="t3"></li><li><p>physical design:p-n juctions, capacitor, gate delayâ€¦</p></li><li><p>power dissipation for our CMOS gates</p><ul><li>Dissipation comes in two parts: dynamic power, static power</li><li>they are extremely good at having low power consumption.</li></ul></li></ol><h2><span id="6-combinational-logic">6 combinational logic</span><a href="#6-combinational-logic" class="header-anchor">Â¶</a></h2><h3><span id="introduction">introduction</span><a href="#introduction" class="header-anchor">Â¶</a></h3><ol><li><p>combinational logic has two part: function spec and timing spec</p><ul><li>Function has two part: truth table and boolean expression.<ul><li>Fact: all combinational functions can be specified with boolean expressions.</li></ul></li><li>Timing: propagation delay</li></ul></li><li><p>static discipline: what is a combinational device</p></li><li><p>problem: how fast are circuits?</p><ul><li>measurement: clock periods, clock frequencies</li></ul><p>processor will change the inputs into our system and read the outputs. So we need to read the inputs correctly before it is changed later.</p><p>Problem 1: we need an upper bound to ensure that we can get the input in the worst-case.</p><p>idea: combinational contract</p><ul><li>Measurement: contamination delay(lower bound)</li></ul></li><li><p>Boolean algebra</p><ul><li><p>Any Boolean algebra can be derived from AND, OR, NOT</p></li><li><p>duality principle holds for all expressions</p></li><li><p>Properties: commutativity, associativity, distributivityâ€¦</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a + (b * c) = (a + b) * (a + c) # distributivity</span><br></pre></td></tr></table></figure></li></ul></li><li><p>Truth table =&gt; boolean expressions</p><ul><li><p>construct a normal form: sum of products</p></li><li><p>Simplify: minimal sum-of-products -&gt; use algebraic manipulation(reduction, complementsâ€¦)</p><ul><li><p>to reduce the number of gates</p></li><li><p>Tradeoff: more gates or increase levels leading to increase propagation delay</p><p>(in this class, minispec takes care for us.)</p></li><li><p>remark: synthesizing optimized circuits is a very hard problem</p></li></ul></li></ul></li><li><p>boolean expressions =&gt; circuits: logic synthesis</p><ul><li>Term: logic gate, logic diagram</li></ul></li><li><p>cell library:  xor, nand, nor,xnor</p></li></ol><h2><span id="7-sequential-circuits">7 Sequential Circuits</span><a href="#7-sequential-circuits" class="header-anchor">Â¶</a></h2><h2><span id="8-circuits-logic-in-minispec">8 Circuits logic in Minispec</span><a href="#8-circuits-logic-in-minispec" class="header-anchor">Â¶</a></h2>]]></content>
      
      
      <categories>
          
          <category> computer architecture </category>
          
          <category> 6.004 computation structures </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å»ºåšå®¢å½•</title>
      <link href="/sg/2021/12/29/blog/"/>
      <url>/sg/2021/12/29/blog/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#cao-zuo">æ“ä½œ</a><ul><li><a href="#chan-sheng-xin-ye">äº§ç”Ÿæ–°é¡µ</a></li><li><a href="#fa-bu">å‘å¸ƒ</a></li></ul></li><li><a href="#wen-jian-jie-gou">æ–‡ä»¶ç»“æ„</a><ul><li><a href="#themes">themes</a></li><li><a href="#images">images</a></li></ul></li></ul><!-- tocstop --></div><p>å‰è¨€ï¼šè™½ç„¶ä¹‹å‰ä¹Ÿè‰è‰å¼„è¿‡å‡ æ¬¡åšå®¢é¡µé¢ï¼Œä½†éƒ½ä¸æ€ä¹ˆæ»¡æ„å½“æ—¶é€‰ç”¨çš„é£æ ¼ï¼Œä¹Ÿæ²¡å¿…è¦è‡ªå·±ä»å¤´å†™ä¸€ä¸ªï¼Œäºæ˜¯ä»Šå¤©èŠ±æ—¶é—´å¯»æ‰¾äº†è‡ªå·±å–œæ¬¢çš„é£æ ¼ã€‚(10.30)</p><p>æˆ‘éœ€è¦çš„åŠŸèƒ½æ˜¯æœ‰äºŒçº§ç´¢å¼•ï¼Œæç®€é£ï¼Œå¯è¯»æ€§é«˜ï¼Œæ”¯æŒmarkdownä»¥åŠéƒ¨ç½²ç®€å•ã€‚æœ€åé€‰æ‹©çš„æ˜¯<a href="https://github.com/probberechts/hexo-theme-cactus">cactus</a>é£æ ¼ï¼Œç”¨hexo+github pageséƒ¨ç½²ã€‚</p><h2><span id="cao-zuo">æ“ä½œ</span><a href="#cao-zuo" class="header-anchor">Â¶</a></h2><p>åŒæ—¶å‚è€ƒäº†<a href="https://zhuanlan.zhihu.com/p/35668237">è¿™ç¯‡æ–‡ç« </a>ã€‚é‡åˆ°çš„å‘æ˜¯åˆšå¼€å§‹åªçœ‹é€‰ç”¨ä¸»é¢˜çš„å®‰è£…è¯´æ˜ä¸æ¸…æ¥šhexoéœ€è¦å…ˆinitç„¶åå†å°†é£æ ¼æ–‡ä»¶å¤åˆ¶åˆ°initåçš„å½“å‰æ–‡ä»¶çš„themeæ–‡ä»¶å¤¹ä¸‹ã€‚</p><h3><span id="chan-sheng-xin-ye">äº§ç”Ÿæ–°é¡µ</span><a href="#chan-sheng-xin-ye" class="header-anchor">Â¶</a></h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page about //äº§ç”Ÿä¸€ä¸ªæ–°çš„åˆ†é¡µabout</span><br><span class="line">hexo new post &quot;hello world&quot; //äº§ç”Ÿä¸€ç¯‡æ–°çš„åšå®¢&quot;hello world&quot;åˆ°source/_postsä¸­</span><br></pre></td></tr></table></figure><h3><span id="fa-bu">å‘å¸ƒ</span><a href="#fa-bu" class="header-anchor">Â¶</a></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">hexo server</span><br><span class="line">hexo deploy</span><br></pre></td></tr></table></figure><h2><span id="wen-jian-jie-gou">æ–‡ä»¶ç»“æ„</span><a href="#wen-jian-jie-gou" class="header-anchor">Â¶</a></h2><p>æ¯ç¯‡æ–‡ç« éƒ½åŒ…å«è¿™ä¸ªæ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯ã€‚</p><p>12.30: æƒ³äº†ä¸‹è¿˜æ˜¯ä½¿ç”¨äº†è¿™æ ·çš„åˆ†ç±»æ ¼å¼</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">title: name</span><br><span class="line">date: è‡ªåŠ¨ç”Ÿæˆ</span><br><span class="line">tags:</span><br><span class="line">- å­ç±»ï¼ˆè¯¾ç¨‹åï¼‰</span><br><span class="line">- å­ç±»ï¼ˆå±æ€§ï¼‰</span><br><span class="line">categories: </span><br><span class="line">- ä¸»ç±»</span><br><span class="line">- å­ç±»</span><br></pre></td></tr></table></figure><h3><span id="themes">themes</span><a href="#themes" class="header-anchor">Â¶</a></h3><ul><li>color: classic,dart,light,white</li><li><s>tagå’Œcatagoriesæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„åˆ†é¡µ</s> categories å’Œ search æ˜¯ç‹¬ç«‹çš„åˆ†é¡µ</li><li>Markdown é‡‡ç”¨ä¸¤çº§ç´¢å¼•ï¼ˆäºŒï¼Œä¸‰ï¼‰ï¼Œæœ€å¤šä¸‰çº§ã€‚åœ¨ç¬¬ä¸‰çº§å‰åŠ &quot;&gt;&quot;ã€‚å¦åˆ™æ’ç‰ˆä¸èƒ½è¡¨ç¤ºå‡ºåˆ†çº§å·®å¼‚ã€‚</li><li>è¿˜æœ‰å¾ˆå¤šåˆ«çš„åŠŸèƒ½ï¼Œä½†æˆ‘ä¸éœ€è¦è¿™äº›å°±æ²¡æœ‰å†å¼„äº†ã€‚</li></ul><h3><span id="images">images</span><a href="#images" class="header-anchor">Â¶</a></h3><p><s>å›¾ä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨è¿™ä¸ªä¸»é¢˜ä¸‹ä¸èƒ½ç”¨mark downè¯­æ³•çš„ç›¸å¯¹è·¯å¾„ä¸Šä¼ ã€‚ä½¿ç”¨é¢å¤–çš„å›¾åºŠæœ‰äº›æŠŠé—®é¢˜å¼„å¾—å¤æ‚äº†ï¼Œæ‰€ä»¥åšæ–‡æˆ‘ä¼šåªä½¿ç”¨æ–‡å­—ï¼Œæœ¬åœ°ç¬”è®°æ–‡ä»¶æ‰ä¼šé™„åŠ å›¾ä½œä¸ºæç¤ºã€‚ï¼ˆä¸è¿‡ä¼ å›¾å¥½éº»çƒ¦ï¼Œæˆ‘é€‰æ‹©æ”¾å¼ƒã€‚æœ¬åœ°ç¬”è®°æ–‡ä»¶ä¸Šæœ‰å›¾å°±è¡Œäº†(12.7)ã€‚</s></p><p>éœ€æ±‚ï¼šmarkdownç›¸å¯¹è·¯å¾„å¼•ç”¨</p><p>é™å®šï¼šæ–‡ç« /æ–‡ä»¶çš„åç§°ä¸èƒ½å«ç©ºæ ¼/ä¸­æ–‡ï¼Œå¦åˆ™æ— æ³•è§£æã€‚ï¼ˆè€Œæˆ‘ç»å¸¸ç”¨ç©ºæ ¼åœ¨æ–‡ç« åé‡ŒğŸ™‚ï¸</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="string">&#x27;s/ /_/g&#x27;</span> *  <span class="comment"># å°†æ‰€æœ‰æ–‡ä»¶åçš„ç©ºæ ¼æ›¿æ¢ä¸ºä¸‹åˆ’çº¿</span></span><br></pre></td></tr></table></figure><ol><li><p>é€‰æ‹©å›¾ç‰‡å¼•ç”¨æ’ä»¶ï¼š<s>ç»è¿‡æµ‹è¯•åé€‰æ‹©ï¼š<a href="https://github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked</a>, è€Œä¸æ˜¯hexo-asset-â€¦ï¼ˆé•¿æ—¶é—´æ²¡æœ‰æ›´æ–°ï¼Œå¹¶ä¸”åªæ”¯æŒç»å¯¹è·¯å¾„å¼•ç”¨ï¼Œä¸ç¬¦åˆæˆ‘éœ€è¦çš„æ¡ä»¶ï¼‰</s> ä½¿ç”¨ hexo-renderer-markdown-it, æ”¯æŒæ›´å¤šçš„åŠŸèƒ½æ¯”å¦‚ï¼šfootnote<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>, ä¸Šæ ‡ï¼Œä¸‹æ ‡ã€‚Fixes:</p></li><li><p>æ›´æ”¹typoraè®¾ç½®</p><img src="/sg/2021/12/29/blog/test0.png" class title="Screenshot2021-12-29 PM 11.01.52"></li><li><p>å¦‚æœæ˜¯macç”¨æˆ·ï¼Œå°†æˆªå±æ ¼å¼ä¿®æ”¹æˆå…¨è‹±æ–‡</p><ul><li><p>è¿™ä¸ªæ’ä»¶æ ¹æ®æµ‹è¯•ä¸æ”¯æŒä¸­æ–‡åå›¾ç‰‡</p></li><li><p>åç¼€ä¸æ”¯æŒæ—¶é—´æ—¥æœŸæ ¼å¼</p><ul><li><a href="https://www.idownloadblog.com/2015/04/15/how-to-remove-date-time-screenshots-mac/">æ›´æ”¹æˆªå±æ ¼å¼</a>ï¼šåç§°ï¼Œåç¼€</li></ul></li></ul></li></ol><p>é—®é¢˜åˆ†æï¼štest-first-programming</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>footnote grammar: <code>[^1]</code> , <code>[^1]:</code> , without blank. <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> toolbox </category>
          
          <category> tool </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>1 assembly</title>
      <link href="/sg/2021/12/28/6.004_assembly/"/>
      <url>/sg/2021/12/28/6.004_assembly/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#0-introduction">0 introduction</a></li><li><a href="#1-binary-representation">1 binary representation</a></li><li><a href="#2-assembly">2 assembly</a></li><li><a href="#3-procedures">3 procedures</a></li></ul><!-- tocstop --></div><p>with great amounts of help from Andrew Linâ€™s 20fall 6.004 class notes, Iâ€™ve recently reviewed the course.</p><h2><span id="0-introduction">0 introduction</span><a href="#0-introduction" class="header-anchor">Â¶</a></h2><p>Goal: how to physically implement computation?</p><h2><span id="1-binary-representation">1 binary representation</span><a href="#1-binary-representation" class="header-anchor">Â¶</a></h2><ol><li>binary representations</li><li>modular arithmetic idea: wheel modulo 2**N</li><li>binary encoding</li><li>twoâ€™s complement</li></ol><h2><span id="2-assembly">2 assembly</span><a href="#2-assembly" class="header-anchor">Â¶</a></h2><ol><li>microprocessor: comprised of: register file, ALU(computation), main memory</li><li>Assembly: comprised of: computation(arithmetic, comparison, logical, shift), load/store, control transfer</li><li>Three-address instructions: reg-imm instructions, reg-reg instructions,â€¦</li><li>see the pattern behind these instructions</li></ol><h2><span id="3-procedures">3 procedures</span><a href="#3-procedures" class="header-anchor">Â¶</a></h2><p>Problem: hotw to translate high-level program to RISC-V?</p><ol><li><p>Pseudoinstructions: mv, lui, liâ€¦</p></li><li><p>Schema</p><ul><li><p>compiling simple expressions into RISC-V code</p><ul><li>Assign variables to regs</li><li>tranlate operators into computational instructions</li><li>use reg-imm instructions</li></ul></li><li><p>conditional statements</p><ul><li><p>if</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># if (expression), then execute (if-body)</span><br><span class="line">compile (expression) into a register xN</span><br><span class="line">beqz xN, endif</span><br><span class="line">compile (if-body) here</span><br><span class="line">endif:</span><br></pre></td></tr></table></figure></li><li><p>if-else</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># if (expression), then execute (if-body), otherwise execute (else-body)</span><br><span class="line">compile (expression) into a register xN</span><br><span class="line">beqz xN, else</span><br><span class="line">compile (if-body) here</span><br><span class="line">j endif (that is, jump straight to endif)</span><br><span class="line">else:</span><br><span class="line">compile (else-body) here</span><br><span class="line">endif</span><br></pre></td></tr></table></figure></li><li><p>while</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># do (while-body) while (expression) </span><br><span class="line">compile (expression) into a register xN</span><br><span class="line">beqz xN, endwhile</span><br><span class="line">compile (while-body) here</span><br><span class="line">j while</span><br><span class="line">endwhile</span><br><span class="line"></span><br><span class="line"># reduce branched by putting the comparison at the end instead</span><br><span class="line">j compare (ensuring that we still check the (expression) condition first)</span><br><span class="line">loop:</span><br><span class="line">compile (while-body) here</span><br><span class="line">compare:</span><br><span class="line">compile (expression) into a register xN</span><br><span class="line">bnez xN, loop.</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p>calling convention</p><p><u>Problem 1</u>: how to call procedures multiple times without corrupting code?</p><p>Example: set function argument registers: x10-x17</p><p><u>Problem 2</u>: how to go back to place wherever we were at in our main code even calling same function multiple times?</p><p>Example: remember the return address-&gt; RA register</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jal ra, label # ra = 4 + procedure call address</span><br></pre></td></tr></table></figure><p><u>Problem 3</u>: save registers for nested procedures</p><p>Sol: callee, caller, local storage component(activation record, stack)</p><p><u>Fact</u>: This distinction between caller-saved and callee-saved registers is important to keep in mind â€“ the former is not preserved across function calls, but the latter is, so certain arguments must be saved on the stack to preserve values</p></li><li><p>program counter(reg)</p></li><li><p>Problem: how the instructions look like?</p><p>activation records, stack structure(last-in-first-out)</p><p><strong>the memory is always available to us, but we need to return it the way that we found it.</strong></p><p>-&gt; Caller-saved register, not preserved across calls</p><p>-&gt; callee-saved register, preserved</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># push</span><br><span class="line">addi sp, sp, -4</span><br><span class="line">sw a1, 0(sp)</span><br><span class="line"></span><br><span class="line"># pop</span><br><span class="line">lw a1, 0(sp)</span><br><span class="line">addi sp, sp, 4</span><br></pre></td></tr></table></figure></li><li><p>nested procedures: use calling conventions</p><p>Related reg: call func, ret</p></li><li><p>Fact: data structures are implemented with blocks of memory with words that refer to various addresses.</p><p>fact 1: most languages use several distinct memory regions for data: stack, static, heap, text(there is no need to memory it.)</p><p>fact 2: In RISC-V, we put the text, static, and heap regions in memory consecutively, starting from the smallest address 0x0; in contrast, the stack starts from the highest address 0xFFâ€¦F and grows towards lower addresses</p><p>Specific pointers: stack pointer, global pointer(static), program counter(current line of code executing)</p><p>Problem: how this related to inputs and outputs?</p></li><li><p>memory mapped IO(MMIO): special dedicated address</p><p>some issues remained? waiting for labs</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> computer architecture </category>
          
          <category> 6.004 computation structures </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PSY sleep</title>
      <link href="/sg/2021/12/28/psy_sleep/"/>
      <url>/sg/2021/12/28/psy_sleep/</url>
      
        <content type="html"><![CDATA[<p><u>é—®é¢˜</u>ï¼šå¤±çœ ã€‚</p><p>ç„¦è™‘å’Œå‹åŠ›å¯¼è‡´æˆ‘çš„ä½œæ¯ç´Šä¹±åˆ°äº†æç‚¹ï¼Œå°¤å…¶æ˜¯è¿™å‘¨å‡ ä¹åˆ°ä¸­åˆæ‰åˆ°å›¾ä¹¦é¦†ã€‚é€šè¿‡åˆ†æè¿‘ä¸€ä¸ªæœˆçš„ç¡çœ è®°å½•ï¼Œæˆ‘æ²¡æœ‰èƒ½åœ¨1ç‚¹ä»¥å‰å…¥ç¡çš„æƒ…å†µï¼Œé€šå¸¸åœ¨1:30-2:00å…¥ç¡ï¼Œä½†2:00ä»¥ååˆ°3:00, 4:00, 5:00çš„æƒ…å†µä¹Ÿæœ‰ä¸å°‘ï¼Œè€Œæˆ‘å…¶å®åŸºæœ¬ä¸Šä¸ç†¬å¤œå­¦ä¹ ï¼Œ1ç‚¹å·®ä¸å¤šå°±å‡†å¤‡ç¡äº†ã€‚</p><p>ä»Šå¤©ä»2:00ç¡åˆ°11:00å·¦å³åçš„æ„Ÿè§‰éå¸¸ç³Ÿç³•å’Œè‡ªè´£ï¼Œè§‰å¾—è‡ªå·±ç¡å¤šäº†ï¼Œæƒ…ç»ªä¹Ÿå—åˆ°äº†å½±å“ã€‚å¸¦ç€è¿™æ ·çš„é—®é¢˜æˆ‘å»çœ‹äº†ç§¯æå¿ƒç†å­¦å…³äºç¡çœ çš„éƒ¨åˆ†ã€‚</p><ol><li><p>permission to be human</p><p>å—åˆ°å¤±çœ çš„å›°æ‰°æ˜¯éå¸¸æ­£å¸¸çš„ã€‚Talä»¥è‡ªå·±å¤±çœ ä¸ºä¾‹ï¼Œä¸å…¶å‘Šè¯‰è‡ªå·±â€œæˆ‘è¦ç¡è§‰ï¼Œæˆ‘è¦ç¡è§‰â€¦â€œï¼Œä¸å¦‚æ¥å—è¿™æ ·çš„æƒ…å†µï¼Œâ€ğŸ¤”è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åæ€ä»Šå¤©æ‰€åšçš„äº‹çš„æœºä¼šâ€œï¼Œé€šå¸¸ä»–è§‰å¾—å¤ªæ— èŠç„¶åå°±ç¡ç€äº†ã€‚</p></li><li><p>average sleep time of adults; care about your sleep rhythm</p><p>ä¸€å¤©ç¡å¤Ÿ8å°æ—¶ã€‚ä¸€ä¸ªæ­£å¸¸äººå¹³å‡éœ€è¦çš„ç¡çœ æ—¶é—´åœ¨8å°æ—¶å·¦å³ï¼Œç„¶åçœ‹çœ‹è‡ªå·±åœ¨å“ªæ®µæ—¶é—´æ›´å®¹æ˜“å…¥ç¡ã€‚å½“å¶å°”ç¡åˆ°9å°æ—¶ï¼Œ10å°æ—¶ï¼Œé‚£å¤§æ¦‚æ˜¯ç”±äºä½ æ­£éœ€è¦è¿™æ ·é•¿çš„ç¡çœ æ—¶é—´ï¼Œå¯èƒ½æ˜¯ä½ æ­£ç»å†è‰°éš¾çš„æ—¶æœŸæˆ–è€…é‡åˆ°äº†å…¶ä»–çš„å›°éš¾æˆ–è€…ä»€ä¹ˆäº‹ä¹Ÿæ²¡æœ‰å‘ç”Ÿã€‚ï¼ˆæ²¡æœ‰å¿…è¦è§‰å¾—è‡ªè´£ã€‚</p></li><li><p>enough sleep is a good investment</p><p>è¶³å¤Ÿçš„ç¡çœ æ˜¯å¾ˆå¥½çš„æŠ•èµ„ï¼Œä¸ç®¡æ˜¯æ™ºåŠ›ä¸Šçš„ï¼Œè¿˜æ˜¯å¥åº·ä¸Šã€‚å®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³å†…å¿ƒçš„å†²çªï¼Œå­¦ä¹ ä¸­å¡ä½çš„éš¾é¢˜ï¼Œå®ƒå¯ä»¥é¼“åŠ±åˆ›é€ æ€§ã€‚</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> HASS </category>
          
          <category> positive psychology </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æŒ‡ç¯ç‹â€”â€”è´£ä»»/è‡ªç”±</title>
      <link href="/sg/2021/12/25/ring/"/>
      <url>/sg/2021/12/25/ring/</url>
      
        <content type="html"><![CDATA[<p>å‰è¨€ï¼šä¸Šä¸€æ¬¡çœ‹æŒ‡ç¯ç‹ä¸‰éƒ¨æ›²è¿˜æ˜¯åˆä¸­åˆšæ¯•ä¸šçš„æš‘å‡ï¼Œé‚£æ—¶çš„æˆ‘å°šä¸”ä¸çŸ¥é“ä¸–ç•Œçš„åŸºæœ¬æ¦‚å¿µï¼Œè¿è‡ªå·±ä¹Ÿä¸ç”šäº†è§£ã€‚åœ¨é‚£æ—¶çœ‹æ¥ï¼ŒæŒ‡ç¯ç‹ä¸è¿‡æ˜¯ä¸€éƒ¨ç»å…¸çš„å¥½è±åå¼ç”µå½±ï¼Œæœ‰ç€åä¸½çš„åœºæ™¯å’Œè‹±å‹‡çš„ä¸»äººå…¬ä»¬ã€‚</p><p>ç¬¬ä¸€å°è±¡å¤ªå®¹æ˜“è¯¯å¯¼äººäº†ã€‚åˆä¸­æ—¶çœ‹æˆ‘ä»¥ä¸ºå¼—ç½—å¤šæ˜¯å¾ˆæƒ¨çš„ä¸»è§’ï¼Œè¢«è¿«æ¥å—äº†ä¸€ä¸ªæ ¹æœ¬ä¸åœ¨è‡ªå·±è´£ä»»èŒƒå›´å†…çš„ä»»åŠ¡ï¼›é˜¿æ‹‰è´¡æ˜¯ä¸ªé—²æ•£çš„æ±Ÿæ¹–äººå£«ï¼Œå› ä¸ºè¡€ç¼˜ç»§æ‰¿ç‹ä½è¿˜å¨¶äº†ç²¾çµä½œä¸ºå¦»å­ï¼›å¼—ç½—å¤šçš„ä¼™ä¼´åˆ™æ˜¯ä¸åŠ¡æ­£ä¸šçš„å°æ··æ··ï¼Œåªä¼šå¬‰ç¬‘æ‰“é—¹ï¼›è±æ ¼æ‹‰æ–¯åƒæ˜¯ä¸ªå¤–å‡ºæ¸¸å†çš„è´µå…¬å­ï¼›ç”˜é“å¤«åˆšå¼€å§‹å¾ˆå¼±ï¼Œåæ¥å˜æˆç™½è¢å·«å¸ˆåå¾ˆå¼ºï¼›å’•å™œæ˜¯ä¸ªæ€»å–œæ¬¢è¯´&quot;my precious&quot;çš„æ€ªç‰©â€¦å…¶ä»–çš„è§’è‰²å°±æ²¡æœ‰å¤ªæ·±çš„å°è±¡äº†ã€‚</p><p>äº‹å®ä¸Šï¼ŒæŒ‡ç¯ç‹é‡Œçš„äººç‰©æ¯ä¸ªéƒ½æœ‰è‡ªå·±çš„å†…åœ¨ç²¾ç¥ï¼Œä»–ä»¬é‡åˆ°é—®é¢˜çš„æŒ£æ‰å’Œè¡ŒåŠ¨æ˜ å°„å‡ºäº†ç°å®çš„å¤æ‚ã€‚å°æ—¶å€™åªçŸ¥é“å¥½äººå’Œåäººï¼Œé»‘ä¸ç™½ï¼Œä½†ç°å®è¿œæ¯”æ­¤å¤æ‚ã€‚æœ‰æ—¶å€™æ­£æ˜¯ä¸€äº›åœ¨æ¨¡ç³Šä¸æ¸…çš„ä¸œè¥¿ä¸Šçš„é€‰æ‹©å¡‘é€ äº†ä¸€ä¸ªäººçš„æ ·å­ã€‚</p><h2><span id="xiao-ren-wu-de-ze-ren">å°äººç‰©çš„è´£ä»»</span><a href="#xiao-ren-wu-de-ze-ren" class="header-anchor">Â¶</a></h2><p>å¼—ç½—å¤šæ˜¯æˆ‘è¯¯è§£æœ€æ·±çš„äººç‰©ï¼Œä»–çš„å­˜åœ¨è¡¨ç¤ºå³ä½¿æ˜¯å°äººç‰©ä¹Ÿå¯ä»¥æ‰¿æ‹…è´£ä»»ï¼Œä¹Ÿèƒ½å¤Ÿæ”¹å˜ç°å®ã€‚ä»–å¹¶ä¸æ˜¯ä»ä¸€å¼€å§‹å°±å†³æ„è¦æ‰¿æ‹…é­”æˆ’çš„è´£ä»»ï¼Œåªæ˜¯å› ä¸ºç­”åº”äº†ç”˜é“å¤«è¦å°†æˆ’æŒ‡å¸¦åˆ°è·ƒé©¬é…’åº—ç»™ä»–è€Œåšå®šåœ°æ‰§è¡Œäº†è¿™ä¸ªä»»åŠ¡ï¼Œå³ä½¿é‡åˆ°äº†æˆ’çµç©·è¿½ä¸èˆçš„åˆºæ€ã€‚è€Œä»–åœ¨æˆ’çµçš„å‰‘ä¸‹ä¾¥å¹¸å¾—å­˜åï¼Œåœ¨ç²¾çµï¼ŒçŸ®äººï¼Œäººç±»ï¼Œå·«å¸ˆç­‰ç§æ—äº‰è®ºé­”æˆ’çš„å½’å±æ—¶æŒºèº«è€Œå‡ºï¼Œä¸»åŠ¨æ‰¿æ‹…äº†å°†é­”æˆ’é€å¾€å‘æºåœ°é­”å¤šæ‘§æ¯çš„ä»»åŠ¡ï¼Œå³ä½¿ä»–ç”šè‡³ä¸çŸ¥é“é­”å¤šåœ¨å“ªå„¿ã€‚</p><p>è€Œæ²¡æœ‰è¨å§†å°±æ²¡æœ‰å¼—ç½—å¤šã€‚å‰å¾€é­”å¤šçš„æ—…ç¨‹æ˜¯å¦‚æ­¤å›°éš¾å’Œå­¤ç‹¬ï¼Œå°½ç®¡å¼—ç½—å¤šåœ¨æ—…ç¨‹çš„æœ€åå†³å®šè‡ªå·±ä¸€ä¸ªäººç»§ç»­å‰è¡Œï¼Œè¨å§†ä»ç„¶ä¸ç¦»ä¸å¼ƒã€‚åœ¨é­”æˆ’çš„æš—æš—å½±å“å’Œå’•å™œçš„æŒ‘æ‹¨ç¦»é—´ä¸­ï¼Œå¼—ç½—å¤šèƒ½å¤Ÿæ´»ç€ä¸èƒ½ç¼ºå°‘è¨å§†åšå®šçš„æ”¯æŒï¼Œå³ä½¿åœ¨å¼—ç½—å¤šå› è¯¯è§£è€Œå‹’ä»¤è¨å§†ç¦»å¼€åã€‚</p><p>æ¢…é‡Œå’Œçš®å¹³è¿™å¯¹æ´»å®ä¹Ÿåœ¨ä¹±ä¸–ä¸­æ‰¿æ‹…èµ·äº†è‡ªå·±çš„è´£ä»»ã€‚ä»–ä»¬åœ¨è®¨è®ºä¸­æ„è¯†åˆ°å¦‚æœä¸èƒ½å¤Ÿæ‰“è´¥é­”å¤šå’Œè¨é²æ›¼ï¼Œé‚£ä¹ˆä»–ä»¬çš„å®¶ä¹¡â€”â€”å¤å°”â€”â€”ä¹Ÿå°†ä¸å¤å­˜åœ¨ã€‚æ‰€è°“çš„å›åˆ°å¤å°”åªæ˜¯ä¸€ä¸ªé¥è¿œçš„æ¢¦ï¼Œè€Œå…½äººçš„é“éª‘æ­£åœ¨è‚†è™è¿™ç‰‡åœŸåœ°ã€‚å› æ­¤ä»–ä»¬æ‰èƒ½è®©æœ¬æ¥ä¸æƒ³å¼€æˆ˜çš„æ ‘äººæ„è¯†åˆ°è¿™åœºæˆ˜äº‰çš„ä¸å¯é¿å…ã€‚æ¯ä¸ªäººåœ¨è¿™æ ·æ··ä¹±çš„å±€é¢ä¸­éƒ½è¢«è£¹æŒŸç€ï¼Œä»–ä»¬ä¹Ÿåªèƒ½é¢å¯¹ç°å®ï¼Œæ— è®ºè¿™ç°å®å¤šä¹ˆæ®‹é…·ç—›è‹¦ã€‚</p><p>å’•å™œåˆ™æ˜¾å¾—æ‚²æƒ…äº†å¾ˆå¤šã€‚å’•å™œå°±å¦‚åŒæˆ‘ä»¬è‡ªå·±ï¼Œä»–æœ¬æ¥åªæ˜¯ä¸ªæ™®é€šäººï¼Œæ²¡èƒ½æŠµæŠ—ä½é­”æˆ’çš„è¯±æƒ‘æ€äº†äººåè¿‡ç€ç¦»ç¾¤ç´¢å±…çš„ç”Ÿæ´»ï¼Œè¢«é­”æˆ’æŠ˜ç£¨æˆäº†ä¸€ä¸ªæ²¡æœ‰æ­£å¸¸ç”Ÿæ´»çš„æ€ªç‰©ã€‚æˆ‘å¤§æ¦‚èƒ½å¤Ÿç†è§£é­”æˆ’å¯¹å’•å™œçš„è¯±æƒ‘ï¼Œé‚£äº›é¥è¿œçš„ç¾å¥½çš„æ¢¦ä»¿ä½›åªè¦ä¸åœåœ°å»æƒ³è¿™ä¸ªæ¢¦å°±ä¼šå˜æˆç°å®ï¼Œæˆ–è®¸é­”æˆ’å¯¹å’•å™œçš„è¯±æƒ‘å°±æ˜¯è¡¨ç¤ºç€ä»–å¤±å»çš„ç”Ÿæ´»çš„è¡¥å¿ã€‚ä½†æ˜¯åŸæœ¬å°±ä¸æ˜¯æˆ‘ä»¬æ‰€æƒ³è¦çš„ï¼Œå³ä½¿å®ƒå†å¥½åˆå’Œæˆ‘ä»¬æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ</p><h2><span id="xin-nian-he-xing-dong">ä¿¡å¿µå’Œè¡ŒåŠ¨</span><a href="#xin-nian-he-xing-dong" class="header-anchor">Â¶</a></h2><blockquote><p>You shall not pass!</p></blockquote><p>ç”˜é“å¤«å’Œç‚é­”çš„æˆ˜æ–—çš„ç²¾å½©ä¸åœ¨äºæ‰“æ–—çš„ç»šä¸½ï¼Œè€Œæ˜¯ç”˜é“å¤«å…¶å®è®ºå®åŠ›åº”è¯¥æ˜¯ä¸åŠç‚é­”çš„ï¼Œä½†ä»ç„¶åœ¨é˜»æŒ¡ç‚é­”æ—¶ç«™åœ¨äº†æœ€å‰é¢ã€‚åœ¨æŒ‡ç¯ç‹ä¸­è¿™æ ·çš„åœºæ™¯å¹¶ä¸å°‘è§ï¼Œå› ä¸ºæœ‰åšå®šçš„ä¿¡å¿µï¼Œå°½ç®¡è‡ªå·±ç®—ä¸ä¸Šå¼ºï¼Œä½†ä»ç„¶è¦å‹‰åŠ›ä¸€è¯•ã€‚é˜¿æ‹‰è´¡åœ¨æœ€åå¸¦é¢†äººç±»å†›é˜Ÿä¸»åŠ¨å‡ºå‡»åƒé­”å¤šå®£æˆ˜ä¸æ˜¯å› ä¸ºæ‰“èµ¢äº†åˆšé“çš„æˆ˜å½¹è€Œè¶èƒœè¿½å‡»ï¼Œè€Œæ˜¯åœ¨å…µåŠ›ä¸è¶³è¿œå°äºé­”å¤šé©»æ‰çš„åŠå…½äººå†›é˜Ÿæ—¶ä¸ºäº†ç»™å¼—ç½—å¤šäº‰å–æ—¶é—´ã€‚åšå®šçš„ä¿¡å¿µè®©ä»–ä»¬åœ¨é‡åˆ°è‰°éš¾çš„æŠ‰æ‹©æ—¶ä¸ä¸€å®šåšå‡ºäº†æ­£ç¡®çš„è¡ŒåŠ¨ï¼Œä½†æ˜¯è®©ä»–ä»¬åšå‡ºäº†å¬ä»äº†å†…å¿ƒé€‰æ‹©çš„è¡ŒåŠ¨ã€‚</p><p>æˆ‘è®¤ä¸ºèƒ½å¬åˆ°å†…å¿ƒçš„å£°éŸ³æ˜¯å¾ˆéš¾å¾—çš„äº‹æƒ…ã€‚æˆ‘æ›¾ç»ç‹¬å¤„äº†ä¸‰å¹´ï¼Œä»æ¥æ²¡æœ‰å¬åˆ°è¿‡å†…å¿ƒçš„å£°éŸ³ï¼Œä¸çŸ¥é“è‡ªå·±æƒ³è¦ä»€ä¹ˆï¼Œä¸€äº›æ‰€è°“çš„è€ƒä¸ŠæŸæ‰€å¤§å­¦ä¸è¿‡æ˜¯ç©ºè™šçš„å£å·ï¼Œæ ¹æœ¬ä¸èƒ½å¤Ÿæ”¯æ’‘èµ·å½“ä¸‹ã€‚åˆ°ç°åœ¨æˆ‘ä¹Ÿåªå¬åˆ°è¿‡ä¸¤æ¬¡å†…å¿ƒçš„å£°éŸ³ã€‚ç¬¬ä¸€æ¬¡æ˜¯ç¬¬ä¸€æ¬¡é«˜è€ƒç»“æŸæˆ‘å‘Šè¯‰è‡ªå·±&quot;Iâ€™m better than this&quot;ï¼Œç„¶åè·‘å»äº†å¤è¯»ã€‚è¿˜æœ‰ä¸€æ¬¡å°±æ˜¯ç°åœ¨å¾˜å¾Šç€çš„å£°éŸ³â€œä½ åœ¨å¹²ä»€ä¹ˆâ€ã€‚æˆ‘ç›¸ä¿¡å¦‚æœä¸æŠŠè¯¾ç¨‹è®¡åˆ’æ‰å®åœ°å­¦å®Œï¼Œè¿™ä¸ªå£°éŸ³å°†ä¸ä¼šåœæ­¢ã€‚</p><h2><span id="wan-wu-sheng-ling">ä¸‡ç‰©ç”Ÿçµ</span><a href="#wan-wu-sheng-ling" class="header-anchor">Â¶</a></h2><p>ä¸­åœŸä¸–ç•Œæ»‹å…»é‡Œå„ç§å„æ ·çš„ç”Ÿçµï¼Œå’Œç”˜é“å¤«äº¤å¥½çš„ğŸ¦…é¹°æ—ï¼Œè¿·é›¾æ£®æ—é‡Œçš„å¤§èœ˜è››ï¼Œè¢«è¨é²æ›¼ç å€’çš„å·¨æ ‘ï¼Œé€šäººæ€§çš„é©¬ğŸï¼Œé­”ç‹çš„çˆªç‰™ä¹Œé¸¦ï¼Œç²¾çµé¢†åœ°ä¸Šçš„æºªæµâ€¦æˆ‘æœ€å–œæ¬¢è¿˜æ˜¯æ ‘äººï¼Œæ©ç‰¹äººå¹³æ—¶æ·±å±…ç®€å‡ºï¼Œéšè—åœ¨æ£®æ—æ·±å¤„ï¼›åœ¨å…³é”®æ—¶åˆ»æ‰ä¼šèšé›†èµ·æ¥ï¼Œå¼€ä¸€å¤©çš„ä¼šè¯´æ—©ä¸Šå¥½ï¼Œç„¶åç»§ç»­å¼€ä¼šã€‚æ„Ÿè§‰ç”µå½±é‡Œçš„Treebeardå¾ˆå¯çˆ±ï¼Œå·å·è§‚å¯Ÿæ¢…é‡Œå’Œçš®å¹³æŠ½çƒŸï¼Œæ‰“æ‹›å‘¼çš„æ ·å­ä¹Ÿå¾ˆç‰¹åˆ«ã€‚</p><h2><span id="hou-ji">åè®°</span><a href="#hou-ji" class="header-anchor">Â¶</a></h2><p>æœ‰æ—¶é—´è¿˜æ˜¯å¾—è¯»ä¸€éåŸè‘—çš„ã€‚çœŸå¸Œæœ›ç†¬è¿‡è¿™æ®µæœ€è‰°éš¾çš„æ—¶é—´ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> read </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>é»‘å®¢å¸å›½â€”â€”è‡ªç”±çš„è¾¹å¢ƒ</title>
      <link href="/sg/2021/12/24/matrix/"/>
      <url>/sg/2021/12/24/matrix/</url>
      
        <content type="html"><![CDATA[<p>æƒ³åˆ°é»‘å®¢å¸å›½ä¼šæƒ³åˆ°ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æ¯”å¦‚ä¸€ä¸ªå¾ªç¯ï¼Œæœºå™¨å¥´å½¹äººç±»-&gt;äººç±»å¼€å§‹åæŠ—ï¼Œå½¢æˆæ ¹æ®åœ°Zion-&gt;æ‰¾åˆ°æ•‘ä¸–ä¸»-&gt;å’Œå·¥ç¨‹å¸ˆè°ˆåˆ¤ï¼Œæ•‘ä¸–ä¸»ç‰ºç‰²ï¼ŒZionç•™å­˜éƒ¨åˆ†-&gt;ç³»ç»Ÿæ›´æ–°ï¼Œæœºå™¨ç»§ç»­å¥´å½¹äººç±»ã€‚æ¯”å¦‚åœ¨ç°å®å’Œè™šæ‹Ÿé—´çš„éš¾ä»¥æŠ‰æ‹©ï¼Œæ˜¯çœŸå®çš„å­˜åœ¨åœ¨ä¸€ä¸ªéå¸¸ç³Ÿç³•çš„ä¸–ç•Œè¿˜æ˜¯æ²‰æµ¸åœ¨ç¾å¥½çš„è™šæ‹Ÿç°å®ä¸­äº«å—å¹¸ç¦äººç”Ÿï¼Ÿæ¯”å¦‚åœ¨å…ˆçŸ¥é—¨å‰çš„ä¸€å¥è¯ï¼ŒKnow yourselfä»¥åŠå»¶ä¼¸å‡ºçš„Nothing in excessã€‚</p><p>æˆ‘ä»¥å‰ä¸æ˜ç™½å²å¯†æ–¯å­˜åœ¨çš„æ„ä¹‰ï¼Œä½œä¸ºé»‘å®¢å¸å›½çš„æœ€å¤§åæ´¾è§’è‰²ï¼Œä»–å­˜åœ¨åªæ˜¯å› ä¸ºæ˜¯the oneçš„å¯¹ç«‹å—ï¼Ÿæˆ‘ä¹Ÿæ²¡çœ‹æ‡‚ç«è½¦æ—çš„é‚£å¯¹å·¥ç¨‹å¸ˆçˆ¶å¥³å’Œæœ€åNeoå’ŒTrinityå‰å¾€æœºå™¨å¤§å¸æ—¶çš„ä¸é¡¾ä¸€åˆ‡ã€‚è¿™äº›å½±åƒæ˜¾å¾—éå¸¸æ¨¡ç³Šï¼Œæ¯•ç«Ÿè·ç¦»ä¸Šä¸€æ¬¡çœ‹é»‘å®¢å¸å›½å·²ç»æœ‰ä¸‰å››å¹´äº†ï¼Œä½†åˆæœ‰ä¸€äº›ç”»é¢é‡Œçš„ä¸œè¥¿éš¾ä»¥å¿˜æ€€ã€‚</p><p>æ²¡æœ‰æ„ä¹‰çš„ç¨‹åºåº”è¯¥å­˜åœ¨å—ï¼Ÿ</p><blockquote><p>å‡ åäº¿äººæ²¡æœ‰è‡ªå·±çœŸæ­£çš„ç”Ÿæ´»ï¼Œä»–ä»¬å´æ„Ÿè§‰ä¸åˆ°ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> read </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>dm graph</title>
      <link href="/sg/2021/12/18/dm_graph/"/>
      <url>/sg/2021/12/18/dm_graph/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#in-class-problems">In-class problems</a><ul><li><a href="#walks-and-paths">walks and paths</a></li><li><a href="#walk-relation">Walk relation</a></li><li><a href="#dag-scheduling">DAG &amp; scheduling</a></li><li><a href="#partial-orders">partial orders</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="in-class-problems">In-class problems</span><a href="#in-class-problems" class="header-anchor">Â¶</a></h2><h3><span id="walks-and-paths">walks and paths</span><a href="#walks-and-paths" class="header-anchor">Â¶</a></h3><p>problem: If you were trying to walk somewhere quickly, youâ€™d know you were in trouble if you came to the same place twice.</p><p>Theorem 10.2.3. A shortest walk from one vertex to another is a path.</p><p>Question 1: tournament digraph.</p><ol><li><p>Prove: if a tournament diagraph is a DAG, then it has most one ranking.</p><p>A ranking is a path that includes all the playersï¼ˆä¹Ÿå°±æ˜¯æ’åé¡ºåºï¼‰</p><p>proof 0: prove by contradictionâ€¦</p><p><u>Idea 1</u>: we should figure out which part could lead to contradiction</p><p>Hypothesis 1: the first two common vertices in two ranking(my idea)</p><p><s>æ–¹å‘åäº†ï¼Œç”±äºç»“æ„æ˜¯DAGï¼Œä¸¤æ¡åŒèµ·ç‚¹ç»ˆç‚¹ä¸åŒåºçš„è·¯ä¸èƒ½è¯æ˜circleçš„å­˜åœ¨ã€‚</s></p><p><u>Hypothesis 2</u>: (u, v) (v, u) exist in two different rankings. -&gt; a closed walk from u to u that go through v.</p><p>æœ‰è¯æ˜çš„å¯èƒ½ã€‚å°†u,vé—´çš„ä¸¤æ¡è·¯åˆå¹¶èµ·æ¥ï¼Œè¯´æ˜æœ‰circleçš„å­˜åœ¨ã€‚</p><p>Loophole: ä¸èƒ½è¯æ˜ä¸€å®šä¼šç»è¿‡v</p><ol><li><u>approach 1</u>: well ordering principle</li></ol><p>Lemma: The shortest positive length closed walk through a vertex is a cycle.</p><p>Proof 1: suppose <strong>w</strong> is a minimum positive length walk from u to u. we claim <strong>w</strong> is a cycle.</p><p>prove by contradiction: <strong>w</strong> is a cycle.</p><ul><li>case 1: u occurs more than two times in <strong>w</strong></li><li>Case 2: some vertex x != u occurs twice in <strong>w</strong></li></ul><p>2)approach 2: strengthen the hypothesis</p><p>æŠŠu-&gt;vå’Œv-&gt;uåˆå¹¶ä¼šå½¢æˆcircle</p></li><li><p>Give an example of a tournament with a <u>countably infinite</u> number of players that has no ranking.</p><p>ä¸ºä»€ä¹ˆè¿™ä¼šå½±å“rankingå‘¢ï¼Ÿæˆ‘è®¤ä¸ºæ˜¯å› ä¸ºæ€»æœ‰æ›´å°çš„æ•°å­˜åœ¨ï¼Œè¿™ä¼šå’Œå½“å‰çš„å‡è®¾è¿èƒŒã€‚</p></li></ol><h3><span id="walk-relation">Walk relation</span><a href="#walk-relation" class="header-anchor">Â¶</a></h3><p>problem: whether there is a way to get from one particular vertex to another.</p><p>binary relation,</p><p>æˆ‘è®¤ä¸ºè¿™åªæ˜¯ç¬¦å·è¯æ˜ï¼ˆï¼Ÿï¼‰</p><h3><span id="dag-amp-scheduling">DAG &amp; scheduling</span><a href="#dag-amp-scheduling" class="header-anchor">Â¶</a></h3><p>problem: topological sort</p><h3><span id="partial-orders">partial orders</span><a href="#partial-orders" class="header-anchor">Â¶</a></h3><blockquote><p>Any digraph is formally the same as a binary relation whose domain and codomain are its vertices.</p><p>Definition 10.6.7. A relation that is transitive and irreflexive is called a strict partial order.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> math </category>
          
          <category> 6.042 discrete math </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hw </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hw1 data structures</title>
      <link href="/sg/2021/12/18/hw1_structure/"/>
      <url>/sg/2021/12/18/hw1_structure/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#ps2">ps2</a></li><li><a href="#ps3">ps3</a></li><li><a href="#ps4">ps4</a><ul><li><a href="#binary-tree">binary tree</a></li><li><a href="#heap">heap</a></li><li><a href="#problem-set">problem set</a></li></ul></li><li><a href="#recitation">recitation</a><ul><li><a href="#avl-tree">AVL tree</a></li><li><a href="#principle-of-algorithm">Principle of algorithm</a></li></ul></li><li><a href="#reminder">Reminder</a><ul><li><a href="#olc">olc</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="ps2">ps2</span><a href="#ps2" class="header-anchor">Â¶</a></h2><ol><li><p>çœ‹é¢˜ï¼šwhen all but one is special means only one is not special.</p></li><li><p>set view and sequence view of data structures</p><ul><li><p>Sequences maintain a collection of items in an extrinsic order, where each item stored has a rank. In the sequence, including a first item and a last item. That the first item is â€œfirstâ€ is because some external party put it there.</p></li><li><p>By contrast, sets maintains a collection of items based on an intrinsic property involving what the items are, usually based on a unique key, x.key, associated with each item x.</p></li></ul><p>Set: hash table, binary search tree</p><p>Sequence: array, linked list, direct access array</p><p>Thatâ€™s why sequence has insert/delete_at_somewhere operations while set has a loosen insert/delete items operation and supports order operations to find the items.</p></li><li><p>Merge_sort</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge_sort</span>(<span class="params">Arr</span>):</span><br><span class="line">size = <span class="built_in">len</span>(Arr)</span><br><span class="line"><span class="keyword">if</span> size == <span class="number">1</span>:</span><br><span class="line"><span class="keyword">return</span> Arr</span><br><span class="line">mid = size//<span class="number">2</span></span><br><span class="line">Left = merge_sort(Arr[:mid])</span><br><span class="line">Right = merge_sort(Arr[mid:])</span><br><span class="line">i,j = <span class="number">0</span>,<span class="number">0</span></span><br><span class="line">start = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> start &lt; size:</span><br><span class="line"><span class="keyword">if</span> j &gt;= <span class="built_in">len</span>(Right) <span class="keyword">or</span> (i &lt; <span class="built_in">len</span>(Left) <span class="keyword">and</span> Left[i] &lt; Right[j]): <span class="comment"># offbyone error</span></span><br><span class="line">Arr[start] = Left[i]</span><br><span class="line">i += <span class="number">1</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">Arr[start] = Right[j]</span><br><span class="line">j += <span class="number">1</span></span><br><span class="line">start += <span class="number">1</span></span><br><span class="line"><span class="keyword">return</span> Arr <span class="comment"># missing return value</span></span><br></pre></td></tr></table></figure></li></ol><h2><span id="ps3">ps3</span><a href="#ps3" class="header-anchor">Â¶</a></h2><ol><li><p>How to use hash tables(its set operations) to implementing sequence operations?</p><p>Read the problem. We are not storing things in order but storing in hash tables.</p><p>idea 1: assign key to each item as index</p><ul><li><p>Seq[key] = value</p></li><li><p>Seq-build(A): set-build(&lt;key, A[i].value&gt; for i = 0,1,2,â€¦ )</p></li><li><p>insert/delete_at: iterate all items, insert/delete one, rebuild</p></li><li><p>Insert_last: easy, however insert_first would take linear time</p></li></ul><p>Idea 2: have an extra varibles to track the original index</p><ul><li><p>How many index should we track at least?</p><p>one: First</p><ul><li><ul><li>Store variable <u>first</u> = key of first item(index 0)</li><li>Hashing(map negative index to positive)</li><li><img src="/sg/2021/12/18/hw1_structure/sc.png" class title="sc"></li></ul></li><li><p>Insert_first: decrement first, insert(&lt;key first, value x&gt;)</p></li><li><p>and make tiny fix to previous operations(ex: find(i+first))</p></li></ul></li></ul></li><li><p>best sorting algs: sort n objects by keys</p><p>nagative items: Increase a large enough number then sort. Decrease after sorting.</p><p>String: convert str to a unique number and use radix sort</p><p>Number of fignts fought: counting sort is enough. Or merge sort.</p><p>ratio w_i / f_i (w_i &lt; f_i): itâ€™s a floating number. We need to consider the precision</p><p>Idea: mapping rational number/letters/negative integer to integer</p><p>runtime of radix sort is O(n + nlog_n_(u)), such that it can handle any polynomial u.</p><p>çªç„¶æƒ³åˆ°äº†data-oriented pattern</p></li><li><p>college construction</p><ol><li>naive approach: check for h - s_i for S_i, this would take O(n**2) time</li></ol><ul><li><p>problem: how to speed up to O(n)?</p><ul><li>use data structures: store the input S in hash table Sâ€™: we can search (h - s_i) in Sâ€™ for si in S, each find take O(1) time.</li></ul></li></ul><ol start="2"><li>h = 600*n**6, add two things up.</li></ol><p>Idea 1: radix sort</p><ul><li>naive approach: store S in sorted_array_set where sort method is implemented using radix sort. For any S_i, binary search for (h - S_i) in S(know as find_prev).<ul><li>It takes O(n*logn) time</li></ul></li></ul><p>Idea 2: two-finger algorithm</p><ul><li>Improvement 1: linear scan: any S_i greater than h is impossible. Rebuild Sâ€™ in the sorted_array_set where Sâ€™_i &lt; h.</li><li>Improvement 2:</li></ul></li><li><p>copy detection problem</p></li></ol><h2><span id="ps4">ps4</span><a href="#ps4" class="header-anchor">Â¶</a></h2><h3><span id="binary-tree">binary tree</span><a href="#binary-tree" class="header-anchor">Â¶</a></h3><p>Problem 1: why we need a binary tree to store items?</p><p>ans: Compared with linked list which takes O(n) time to traverse all the items, we use binary serach instead. The traverse now takes O(hight of the tree) = O(logn) time.</p><p>Design:</p><ol><li><p>We define the traverse order to meet our needs.</p><ul><li>we can use binary tree to implement sequence(order) or setâ€¦</li><li>property: represent binary relation in different way: left-aligned complete binary tree</li></ul></li><li><p>Navigation: first/last, walk down/up the tree</p></li><li><p>Dynamic operation: add or remove items in a binary tree</p><p>problem 2: maintain the tree balance while insertion/deletion</p><p>The logic is that if the skew of node is not in the balance range(-1,0,1) but in the range of (2,-2), we should rebalance the tree. First, we need to detect such conditions. Then we should modify that by rebalance(namely, by rotations). After each rebalance operation, we need to update the subtree height to calculate the updated skew of node. Then we walk up the tree and maintain balance in each recursive step until there is none.</p><ul><li><p>Rotation</p><p>Problem 3: what will happen after rotations?</p><p>just draw the picture.</p><ul><li>Rotate right(D): D becomes its left childâ€™s right child, and subtree_update</li><li>Rotate left(B): B becomes its right childâ€™s left child, and subtree_update</li></ul></li></ul><p>è§‰å¾—è®²ä¹‰ä¸Šçš„ insert B before A æœ‰ç‚¹æ€ª</p><p>Problem 3: BST and AVL tree have nuances in insertion/deletion.</p><p>è¿™ä¸€ç‚¹æˆ‘çœ‹é”™äº†ï¼Œæˆ‘æŠŠæ’å…¥èŠ‚ç‚¹çš„å¤§å°æé”™äº†ï¼Œè¿™ä¸¤ä¸ªæ ‘ç»“æ„çš„å·®å¼‚æ˜¯ç”±äºAVLä¼šç»´æŒæ ‘ç»“æ„çš„å¹³è¡¡ã€‚</p><p>BST: deletion: swap down predecessor/successor</p></li></ol><p>The difference between BST and AVL is: AVL maintains balance: AVL will check the skew of every node in the traverse order to decide rotation operations; BST maintains binary search.(AVL can use binary search as well)</p><h3><span id="heap">heap</span><a href="#heap" class="header-anchor">Â¶</a></h3><p>Build heap in linear time:</p><ul><li><p>idea: walk up the heap.</p><p>-&gt; loop backward over array.</p><p>problem: the order of swapping</p></li></ul><img src="/sg/2021/12/18/hw1_structure/sc2.png" class title="sc2"><p>heap doesnâ€™t support ordering.</p><h3><span id="problem-set">problem set</span><a href="#problem-set" class="header-anchor">Â¶</a></h3><ol><li><p>n items, k largest one list. O(logn) space to write, O(nlog(logn)) runnning time.</p><p>Problem 1: how is logn related to k?</p><p>è¿™ä¸¤ä¸ªé¢˜ç›®ä¸ä¸€æ ·ğŸ˜…ï¼Œè¿™é“é¢˜æ ¹æœ¬æ²¡æåˆ°kã€‚è§£æ³•å’Œæˆ‘ä¹‹å‰æƒ³çš„ä¸€æ ·</p></li><li><p>SCLR: è®¾è®¡ä¸€ä¸ªæ•°æ®ç»“æ„æ»¡è¶³ï¼š</p><p>new_bid(d,b), O(logn);</p><p>update_bid(d,b), O(logn);</p><p>get_revenue(), O(1).</p><p>we should ask ourselves these questions before writing down the answer:</p><ul><li>what is stored in data structures? -&gt;</li><li>what is maintaining by operations? -&gt;</li><li>what is querying? -&gt;</li></ul><p>Idea 1: we should maintain a dictionary of (bidder ID, bid) for the update operations. Dictionary can be implemented by AVL tree set or hash table while the latterâ€™s running time is amortized</p><p>Idea 2: we need data structures to preserve the priority we need</p><ul><li>naive approach: use binary heap/AVL tree</li><li>Store n items in one max-heap -&gt; <u>store k largest items in min-heap, n-k items in max-heap</u>, in which case it doesnâ€™t need to use delete_max to find the minimal item in max-heap.</li></ul><p>Idea 3: we need to link two data structures to support fast find.</p><p>Approach: we want to find the bidderâ€™s current bid quickly. -&gt; cross linking</p><ul><li><p>Thatâ€™s why we donâ€™t save bid directly in the dictionary, in which case we save the time in updating the dictionary every time we change the bidderâ€™s bid.</p></li><li><img src="/sg/2021/12/18/hw1_structure/sc3.png" class title="sc3"></li></ul></li><li><p>It seems right but where goes wrong?</p><p>è¿™éƒ¨åˆ†çœ‹äº†åˆçœ‹,ä»æ—§æ²¡å‘ç°é”™è¯¯åœ¨å“ªé‡Œã€‚åæ¥æŠŠé—®é¢˜å®šä½åˆ°äº†ä¸€ä¸ªæµ‹è¯•è¿›è€Œæ‰¾åˆ°äº†é—®é¢˜ã€‚å¿½ç•¥äº†max_tempæ˜¯æ‰€åœ¨classçš„instanceï¼Œæ‰€ä»¥åœ¨bugç‰ˆç¬¬ä¸€ä¸ªåˆ¤æ–­è¯­å¥æ°¸è¿œéƒ½ä¼šè¿”å›None.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># bug</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">subtree_max_in_range</span>(<span class="params">A, d1, d2</span>):</span><br><span class="line">    max_temp = <span class="literal">None</span> // <span class="comment"># fixed by changing all max_temp to another name like temp</span></span><br><span class="line">    <span class="comment"># ------------------------------------ #</span></span><br><span class="line">    <span class="keyword">if</span> A.max_date &lt;= d2 <span class="keyword">and</span> A.min_date &gt;= d1:</span><br><span class="line">        <span class="keyword">return</span> A.max_temp</span><br><span class="line">    <span class="keyword">if</span> A.max_date &lt; d1 <span class="keyword">or</span> A.min_date &gt; d2:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line">    <span class="keyword">if</span> d1 &lt;= A.item.key &lt;= d2:</span><br><span class="line">        max_temp = A.item.temp</span><br><span class="line">    <span class="keyword">if</span> A.left:</span><br><span class="line">        l_temp = A.left.subtree_max_in_range(d1, d2)</span><br><span class="line">        <span class="keyword">if</span> l_temp:</span><br><span class="line">            <span class="keyword">if</span> max_temp:</span><br><span class="line">                max_temp = <span class="built_in">max</span>(l_temp, max_temp)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                max_temp = l_temp</span><br><span class="line">    <span class="keyword">if</span> A.right:</span><br><span class="line">        r_temp = A.right.subtree_max_in_range(d1, d2)</span><br><span class="line">        <span class="keyword">if</span> r_temp:</span><br><span class="line">            <span class="keyword">if</span> max_temp:</span><br><span class="line">                max_temp = <span class="built_in">max</span>(r_temp, max_temp)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                mex_temp = r_temp</span><br><span class="line">    <span class="comment"># ------------------------------------ #</span></span><br><span class="line">    <span class="keyword">return</span> max_temp</span><br></pre></td></tr></table></figure></li></ol><h2><span id="recitation">recitation</span><a href="#recitation" class="header-anchor">Â¶</a></h2><ul><li><img src="/sg/2021/12/18/hw1_structure/Screenshot-0952489.png" class title="Screenshot-0952489"></li><li><img src="/sg/2021/12/18/hw1_structure/Screenshot-0952518.png" class title="Screenshot-0952518"></li><li><img src="/sg/2021/12/18/hw1_structure/Screenshot-0959596.png" class title="Screenshot-0959596"></li><li>visualization tools: <a href="https://codepen.io/mit6006/full/NOWddZ">BST by 6.006</a>, <a href="https://codepen.io/mit6006/full/KxOpep">binary heap</a>, <a href="https://www.cs.usfca.edu/~galles/visualization/Algorithms.html">Data structure visualization</a></li></ul><h3><span id="avl-tree">AVL tree</span><a href="#avl-tree" class="header-anchor">Â¶</a></h3><p>full binary tree guarantees the height of O(logn)</p><p>Build an AVL tree with fewer nodes as possible -&gt; prove h = O(logn)</p><p>why rotations -&gt; balance -&gt; tree search</p><p>Rotation:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">rotateRight(A):</span><br><span class="line"><span class="comment"># A&#x27;s original parent e; A could be e&#x27;s left/right child =&gt; B</span></span><br><span class="line">B.p = e</span><br><span class="line"><span class="keyword">if</span> e.r == A <span class="comment"># pointer comparison</span></span><br><span class="line">e.r = B</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">e.l = B</span><br><span class="line"><span class="comment"># A&#x27;s original left child B =&gt; A is B&#x27;s right child</span></span><br><span class="line">B.r = A</span><br><span class="line">(A.p = B)</span><br><span class="line"><span class="comment"># B&#x27;s original right child c =&gt; A&#x27;s left child</span></span><br><span class="line">A.l = c</span><br><span class="line">(c.p = A)</span><br></pre></td></tr></table></figure><h3><span id="principle-of-algorithm">Principle of algorithm</span><a href="#principle-of-algorithm" class="header-anchor">Â¶</a></h3><p><u>thinking process matters</u>: take 30-60 minutes to think about a problem</p><p><u>problem 0</u>: shifted array, find e in N sorted items shifted length of k,</p><ul><li>if k is defined</li><li>if k is undefined, find k =&gt; find min</li></ul><p>How to solve it?</p><ol><li>simplest solution: linear scan, O(N)</li><li>in another way? shift k + binary search, O(k + logN)</li><li>â€¦</li></ol><p><u>Problem 1</u>: find kth smallest in N items in a min-heap, want O(K*logK)time</p><p>How to think about it?</p><ol><li><p>use min-heap: O(klogN), k times find_min in min-heap</p></li><li><p>Find an O(NlogK) algorithms:</p><p>Idea 1: cut out irrelevant layers. We have k levels of heap =&gt; O(k**2) time, given the height is O(k)</p><p>Problem 1.1: how to cut a heap into k elements?</p><p>Problem 1.2: how to split it up into k, (N - k) groups?</p><p>Idea 2: maintain a max-heap of k. Iterate all items and we can get what we want</p></li><li><p>think more about the process of finding the kth smallest items.</p><p>Idea: horizon.</p><p>Idea: augmentation: index of array</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># initialize</span></span><br><span class="line">H, original <span class="built_in">min</span>-heap(array back-based)</span><br><span class="line">Z, horizon</span><br><span class="line">Z.insert(H[<span class="number">1</span>])</span><br><span class="line"><span class="keyword">for</span> ith <span class="keyword">in</span> <span class="built_in">range</span>(K):</span><br><span class="line">  ith, j = Z.extract-<span class="built_in">min</span></span><br><span class="line">  Z.insert H[<span class="number">2j</span>], <span class="number">2j</span></span><br><span class="line">  Z,insert H[<span class="number">2j</span>+<span class="number">1</span>], <span class="number">2j</span>+<span class="number">1</span></span><br><span class="line"><span class="keyword">return</span> ith</span><br></pre></td></tr></table></figure></li></ol><p><u>Problem 2</u>: find min(e[i,â€¦,j]), e is a list of N items, N = 2**k</p><p>Process: pre-process, then query</p><p>How to think about it?</p><ol><li><p>simple idea: hash into [i,â€¦,j], we can get H[[i,â€¦,j],â€¦], N**2 pair; then take min in O(N) time in each pair</p><p>=&gt; O(N**3) time</p><p>Improve to O(N**2) time by comparing current pair result with previous result which takes O(1) time</p></li><li><p>how to spend time?</p><ul><li>in pre-process: O(N**2) | O(1)</li><li>in query: O(1) | O(N)</li></ul></li><li><p>binary search in two halves recursively</p><img src="/sg/2021/12/18/hw1_structure/sc4.png" class title="sc4"></li></ol><h2><span id="reminder">Reminder</span><a href="#reminder" class="header-anchor">Â¶</a></h2><ol><li><p>Balance conception: a <strong>skew</strong> of a node is defined as the height of its right subtree minus the height of its left subtree.</p></li><li><p>two-finger algorithm</p></li><li><p>cross linking: by store pointers to another data structures.</p></li><li><p>Proximate sorting</p><blockquote><p>An array of distinct integers is k-proximate if every integer of the array is at most k places away from its place in the array after being sorted, i.e., if the ith integer of the unsorted input array is the jth largest integer contained in the array, then |i âˆ’j| â‰¤ k. In this problem, we will show how to sort a k-proximate array faster than Î˜(n log n)</p></blockquote><p>è¿™é‡Œå…³äº insertion sort k-proximate array takes O(nk) time, heap sort takes O(nlogk)time çš„è®¨è®ºè¿˜æŒºæœ‰æ„æ€çš„ã€‚</p></li><li><p>a general/naive approach and subsequent analysis</p></li><li><p>approriate description</p><ul><li><p>key with</p><p>example 1: in priority queue: Key each Revenger ri with opinion si on the pair (|si|, i) to make keys unique.</p></li></ul></li><li><p>Worst-case, expected, amortized(dynamic operations)</p></li></ol><h3><span id="olc">olc</span><a href="#olc" class="header-anchor">Â¶</a></h3><p>First we should decide which view:</p><ul><li>ordered or not -&gt; sequence/set view</li><li>does it have priority? -&gt; priority queue -&gt; binary heap/ binary tree</li></ul>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
          <category> 6.006 algorithms </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hw </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PSY belief</title>
      <link href="/sg/2021/12/12/psy_belief/"/>
      <url>/sg/2021/12/12/psy_belief/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#beliefs">Beliefs</a><ul><li><a href="#the-power-of-the-situation">The power of the situation</a></li><li><a href="#beliefs-become-self-fulfilling-prophecies">Beliefs become self-fulfilling prophecies</a></li><li><a href="#optimism-vs-pessimism">Optimism Vs. pessimism</a></li><li><a href="#realistic-vs-unrealistic-belief">realistic VS. unrealistic belief</a></li><li><a href="#action">action</a></li><li><a href="#reminder">Reminder</a></li></ul></li><li><a href="#focus">Focus</a><ul><li><a href="#adaption">Adaption</a></li><li><a href="#appreciation">Appreciation</a></li></ul></li><li><a href="#goal-setting">Goal setting</a><ul><li><a href="#stress">Stress</a></li><li><a href="#focus">Focus!</a></li><li><a href="#simplify">Simplify!</a></li><li><a href="#reminder-1">Reminder</a></li></ul></li></ul><!-- tocstop --></div><p>Beliefs  -&gt; focus-&gt; change -&gt; goal setting</p><h2><span id="beliefs">Beliefs</span><a href="#beliefs" class="header-anchor">Â¶</a></h2><p>ä¾‹å­ï¼šRoger Bannisterï¼Œé¦–ä½å†å²ä¸Š4åˆ†é’Ÿè·‘1è‹±é‡Œçš„äººã€‚å½“æ—¶ä»åŒ»å­¦/ç”Ÿç‰©å­¦ä¸Šè¯æ˜æ˜¯ä¸å¯èƒ½çš„ã€‚</p><p>ä¿¡å¿µä¸ºä»€ä¹ˆä¸æ˜¯ä¸€ç§ç¥ç§˜ä¸»ä¹‰ï¼Ÿbelief Vs. illusion</p><p>olc: ä¸­å­¦çš„å¤±è´¥åˆ»éª¨é“­å¿ƒã€‚</p><p>å¿½ç•¥äº‹å®çš„éƒ¨åˆ†å¾ˆå®¹æ˜“ï¼Œå³ä½¿å®ƒå°±åœ¨æˆ‘ä»¬é¢å‰ã€‚</p><h3><span id="the-power-of-the-situation">The power of the situation</span><a href="#the-power-of-the-situation" class="header-anchor">Â¶</a></h3><p>ä¾‹å­ï¼šæ–¯å¦ç¦ç›‘ç‹±å®éªŒ: obdient to the authority</p><p><u>Question</u>: how to create a positive situation whether consciously or unconsciously to bring out the best of ourselves?</p><p>Ans: priming with positive words.</p><p>problem: is the message right? å¸¸å¸¸è¨€è¿‡å…¶å®ï¼Œæ”¶æ•ˆç”šå¾®ï¼Œå°½ç®¡çœ‹èµ·æ¥æŒ¯å¥‹äººå¿ƒï¼ˆæ¯”å¦‚ï¼šâ€œWhether you think you can or canâ€™tâ€”you are rightâ€  Henry Fordï¼‰</p><ul><li>Coexist with hard work, persistence and failures.</li><li>Self efficacy: malleable</li><li>Self-esteem: belief in ourselves</li></ul><p>mind is powerful. ä¸æ˜¯è¯´å¤–åœ¨å› ç´ æ²¡æœ‰å½±å“ï¼Œè€Œæ˜¯æ€æƒ³çš„åŠ›é‡åŒæ ·å¾ˆå¼ºå¤§ã€‚</p><h3><span id="beliefs-become-self-fulfilling-prophecies">Beliefs become self-fulfilling prophecies</span><a href="#beliefs-become-self-fulfilling-prophecies" class="header-anchor">Â¶</a></h3><p>How beliefs impact our performance?</p><ul><li>Motivation inconsistency</li><li>ç†æƒ³å’Œç°å®å­˜åœ¨å·®è·ã€‚</li><li>when there is discrepancy or inconsistency between reality and ideal?<ul><li>Update schema</li><li>Ignore/discard the information</li><li>actively seek confirmation</li><li>Create a new reality</li></ul></li><li>interpretation of performance</li></ul><p>olc: å®ä¹ é€‰æ‹©å­˜åœ¨å¤ªå¤šåå·®ã€‚</p><p>Learn to fail, or fail to learn. No short cuts.</p><img src="/sg/2021/12/12/psy_belief/sc.png" class title="sc"><h3><span id="optimism-vs-pessimism">Optimism Vs. pessimism</span><a href="#optimism-vs-pessimism" class="header-anchor">Â¶</a></h3><p>æ‚²è§‚è€…è®¾å®šç°å®çš„çŸ­æœŸç›®æ ‡å’Œé•¿æœŸç›®æ ‡ï¼Œä¹è§‚è€…è®¾å®šæœŸå¾…è¿‡é«˜çš„çŸ­æœŸç›®æ ‡å’Œç°å®çš„é•¿æœŸç›®æ ‡ã€‚æ‚²è§‚è€…åœ¨è¡¨ç°ä¸å¥½æ—¶è¯´æˆ‘çš„æœŸå¾…å€¼æœ¬æ¥å°±ä¸é«˜ï¼Œè¿™æ ·å°±è¶³å¤Ÿäº†ï¼›åœ¨è¡¨ç°å¥½æ—¶è¯´è¿™åªæ˜¯ç¢°è¿æ°”ã€‚è€Œä¹è§‚è€…è™½ç„¶ç”±äºè®¾å®šè¿‡é«˜çš„ä¸åˆ‡å®é™…çš„çŸ­æœŸç›®æ ‡å¯¼è‡´è¡¨ç°ä¸€ç›´ä¸å¥½ï¼Œä½†ä»–ä¼šä¸æ–­åæ€è‡ªå·±ä»è¿‡å»çš„ç»å†å­¦åˆ°äº†ä»€ä¹ˆé‡æ–°è®¾å®šä¸‹ä¸€æ¬¡ç›®æ ‡ï¼Œå¢å¼ºè‡ªå·±çš„ä¿¡å¿µã€‚è€Œä¸ç®¡éœ€è¦ç»è¿‡å¤šä¹…ï¼Œæœ‰è¶³å¤Ÿçš„å°è¯•ï¼ŒåŠªåŠ›å·¥ä½œï¼Œå¤±è´¥ï¼ŒåšæŒï¼Œä¹è§‚è€…ç»ˆç©¶ä¼šå®ç°è‡ªå·±çš„ä¿¡å¿µã€‚</p><p>ä¹è§‚/æ‚²è§‚åªæ˜¯ä¸åŒçš„è§£é‡Šç”Ÿæ´»çš„æ€åº¦ã€‚ä¹è§‚ä¸æ˜¯ç›²ç›®çš„å¯¹ä¸€åˆ‡äº‹æƒ…è¡¨ç¤ºä¹è§‚ï¼Œè€Œæ˜¯å¯¹ç”Ÿæ´»ä¸­æŒ«æŠ˜çš„è§£é‡Šã€‚</p><ul><li><p>æš‚æ—¶çš„/æ°¸ä¹…çš„å¤±è´¥ã€‚ä¾‹å­ï¼šæ¯”å¦‚ä¸€ä»½è¢«ä¸€ä»½æƒ³è¦çš„å·¥ä½œæ‹’äº†ï¼Œçœ‹æˆæ°¸ä¹…çš„å¤±è´¥â€”â€”æˆ‘ä¹‹åæ°¸è¿œä¹Ÿæ‰¾ä¸åˆ°å·¥ä½œäº†ï¼›æš‚æ—¶çš„å¤±è´¥â€”â€”è¿™åªæ˜¯æš‚æ—¶çš„æŒ«æŠ˜ï¼Œæˆ‘èƒ½ä»ä¸­å­¦åˆ°ä»€ä¹ˆï¼Ÿæ¯”å¦‚é‡æ–°é”å®šæ±‚èŒèŒƒå›´ï¼Œæ‰¾åˆ°å±äºè‡ªå·±çš„ç†æƒ³ä½ç½®ã€‚</p></li><li><p>æ™®é/ç‰¹æ®ŠåŒ–çš„ä¾‹å­ã€‚</p></li></ul><p>learn to interpret things as optimist</p><p>olc: æˆ‘ç«Ÿç„¶å±äºä¹è§‚è€…â€¦ä¸è¿‡ä¸­å­¦çš„æˆ‘éå¸¸æ‚²è§‚ã€‚</p><h3><span id="realistic-vs-unrealistic-belief">realistic VS. unrealistic belief</span><a href="#realistic-vs-unrealistic-belief" class="header-anchor">Â¶</a></h3><p><u>question:</u> how to distinguish between realitic belief and unrealistic belief?</p><p>ans: Right evaluation of reality</p><p><u>question:</u> Do high expectations lead to disappointment?</p><ul><li>å…³å¿ƒæˆ‘ä»¬çš„äººå¸¸å¸¸å¸Œæœ›é™ä½æˆ‘ä»¬çš„æœŸæœ›ï¼Œå› ä¸ºæœŸå¾…è¿‡é«˜å¸¸æ„å‘³ç€è‡ªå°Šå—åˆ°æ‰“å‡»çš„æœºä¼šæ›´å¤§ã€‚</li><li>factï¼šåŸºç¡€å¹¸ç¦æ„Ÿçš„æ°´å¹³çº¿æ˜¯ä¸€å®šçš„ï¼Œç”Ÿæ´»çš„èµ·ä¼å¸¦æ¥çš„å¹¸ç¦æ„Ÿæ°´å¹³æ€»ä¼šå›åˆ°è¿™ä¸€æ°´å¹³</li></ul><h3><span id="action">action</span><a href="#action" class="header-anchor">Â¶</a></h3><p><u>Problem: how to raise the base level of happiness?</u></p><p>Coping Vs. avoidance</p><p>è§£å†³é—®é¢˜è€Œä¸æ˜¯é€ƒä¸é—®é¢˜ï¼Œå…è®¸è‡ªå·±å»å†’é™©ï¼Œèµ°å‡ºèˆ’é€‚åŒºï¼Œæ‰¿æ‹…å¤±è´¥çš„é£é™©ï¼Œå»å°è¯•åšæ²¡åšè¿‡çš„äº‹æƒ…ï¼Œå»ä¸€ä¸ªæƒ³å»ä½†åœ¨å°çš„æ—¶å€™ä¸æ•¢å»çš„åœ°æ–¹ã€‚åªæœ‰å¤„ç†é—®é¢˜ï¼Œè§£å†³é—®é¢˜èƒ½å¤Ÿæ”¹å˜ç°çŠ¶ã€‚</p><p>æˆ‘ä»¬è¯„ä»·è‡ªå·±æ‰€ç”¨çš„æ–¹å¼å’Œè¯„ä»·ä»–äººä¸€æ ·ï¼Œå°±æ˜¯çœ‹ä»–çš„è¡Œä¸ºã€‚</p><p>äº‹å®ï¼šå¤±è´¥å¸¦æ¥çš„ç—›è‹¦å…¶å®è¿œæ¯”æƒ³è±¡ä¸­å¤±è´¥çš„ç—›è‹¦è¦å°çš„å¤šï¼Œå¹¸ç¦æ„Ÿæ°´å¹³æ€»ä¼šå›åˆ°åŸºå‡†çº¿é™„è¿‘ã€‚</p><p><u>problem:</u> how to become a optimist?</p><ol><li><p>Just do it! (action)</p><p>å•çº¯çš„çŒè¾“ç§¯æä¿¡æ¯ï¼Œæ— è®ºæ˜¯ä»å†…è¿˜æ˜¯ä»å¤–éƒ½æ— åŠ©äºæ”¹å–„ç°çŠ¶é™¤éé‡‡å–è¡ŒåŠ¨ã€‚</p><p>å¤±è´¥æ˜¯ä¸å¯é¿å…çš„ï¼Œæˆ‘ä»¬éœ€è¦ç»™è‡ªå·±å¤±è´¥çš„æœºä¼šã€‚ä½†è¿™ä¸æ˜¯è¯´ä¸»åŠ¨æç ¸ä¸€ä»¶äº‹ï¼Œè€Œæ˜¯åœ¨ä¸€ä»¶äº‹å¤±è´¥åä¸è¦æœ‰å¤ªå¤šçš„è´Ÿæ‹…ã€‚</p></li><li><p>Imagine thatâ€¦ (visualization)</p><p>Focus on journey and destination.</p><p>Mistake: focus not just on the destination.</p><p>ä¾‹å­ï¼šé©¬ä¸è·¯å¾·é‡‘ï¼šæˆ‘æœ‰ä¸€ä¸ªæ¢¦æƒ³ã€‚</p><p>olc: è½¬ä¸“ä¸šé¢è¯•ä¹‹å‰æˆ‘æ€»æƒ³è±¡ç€è‡ªå·±ä¼šæµç•…åœ°åº¦è¿‡æ•´ä¸ªæµç¨‹ï¼Œä½†ç»“æœå°±æ˜¯æ”¯æ”¯å¾å¾åœ°ç†¬è¿‡äº†äº”åˆ†é’Ÿï¼ˆè¿™ä»…æœ‰çš„é¢è¯•æ—¶é—´ï¼‰ã€‚å¤±è´¥çš„åŸå› æ˜¯æ²¡æœ‰ä¸“é—¨å‡†å¤‡é¢è¯•ï¼Œäººä¹Ÿä¸å¤Ÿè‡ªä¿¡ï¼Œè¡¨è¾¾èƒ½åŠ›ä¹Ÿæ¬ ç¼ºç­‰ç­‰ï¼Œä½†å½“æ—¶å¼€å§‹åœæ»çš„æœ€é‡è¦çš„åŸå› æ˜¯è¡ŒåŠ¨ä»æ—§ä¸å¤Ÿã€‚6.009åœ¨å¤§ä¸€ä¸‹é‚£æ—¶å› ä¸ºæ‹–å»¶ç—‡å¡äº†ä¸€æ¬¡ï¼Œå¤§äºŒä¸Šå› ä¸ºåŸºç¡€ä¸å¤Ÿåˆå¡äº†ä¸€æ¬¡ï¼Œç°åœ¨å¤§ä¸‰ä¸Šçš„æˆ‘ä¸€å®šè¦è§£å†³è¿™é—¨è¯¾ç¨‹ã€‚</p></li><li><p>Cognitive therapy (rational thinking)</p><p>Event -&gt; thoughts(evaluation) -&gt; emotion</p></li></ol><p>è¯¯åŒº1: magnify: è¿‡åº¦æ”¾å¤§å¤±è´¥è€Œä¸æ˜¯æŠŠå®ƒå½“æˆè¿›æ­¥çš„é˜¶æ¢¯ï¼šone or nothing: perfectionism</p><p>è¯¯åŒº2: minimize: tunnel vision-&gt;å¿½ç•¥éç†æ€§å› ç´ è®©è‡ªå·±èƒ½æ›´ç†æ™ºåœ°çœ‹å¾…äº‹æƒ…çš„å…¨å±€å˜åŒ–</p><p>fact: emotion is personal evaluation of reality, which doesnâ€™t reflect the reality.</p><p>Get real through the question we asked. Look out.</p><h3><span id="reminder">Reminder</span><a href="#reminder" class="header-anchor">Â¶</a></h3><ul><li>Optimism(believe in myself), passion(love what you do), hard work</li><li>learn to fail, or fail to learn</li></ul><p>æœ‰çš„æ—¶å€™æ²®ä¸§è®©äººç”šè‡³å¤±å»äº†è¡ŒåŠ¨èƒ½åŠ›ï¼Œè¿™å°±æ˜¯æˆ‘å¸Œæœ›å¢å¼ºè‡ªå·±å¿ƒç†å¥åº·å…ç–«ç³»ç»Ÿçš„åŸå› ã€‚</p><p>æ‰€æœ‰çš„ä¸€åˆ‡éƒ½æ˜¯ä¸ºäº†transformationã€‚å¦‚æœåªæ”¹å˜å½“å‰çš„æ€åº¦ï¼Œè€Œæ”¹å˜åçš„æ€åº¦å´ä¸èƒ½å½±å“ä»»ä½•è¡ŒåŠ¨ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ä¹è§‚è§£é‡Šä¸è¿‡æ˜¯å¯¹è¿‡å»ç”Ÿæ´»çš„ç®€å•è®°å½•ï¼Œæ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚</p><h2><span id="focus">Focus</span><a href="#focus" class="header-anchor">Â¶</a></h2><p>How focus creates reality?</p><p>P8 32:00å¼€å§‹</p><h3><span id="adaption">Adaption</span><a href="#adaption" class="header-anchor">Â¶</a></h3><p>æˆ‘ä»¬æ€»æ˜¯çœ‹åˆ°äº‹ç‰©çš„åé¢çš„åŸå› æ˜¯æˆ‘ä»¬é€‚åº”äºç°æœ‰çš„ç”Ÿæ´»ï¼Œå¯¹å¥½çš„äº‹ä¹ ä»¥ä¸ºå¸¸ï¼Œè€Œå¯¹å‘ç”Ÿçš„ä¸å¥½çš„äº‹éå¸¸æ•æ„Ÿã€‚</p><p><u>Problem:</u> èƒ½å¦é€‚åº”ç³Ÿç³•çš„ç¯å¢ƒåŒæ—¶ä¸å¯¹ç§¯æçš„äº‹ç‰©ä¹ ä»¥ä¸ºå¸¸ï¼Ÿ</p><p><u>Problem:</u> æ˜¯ä¸æ˜¯åªæœ‰å¤±å»çš„æ—¶å€™æ‰æ‡‚å¾—çæƒœï¼Ÿ</p><p>Ans: learn to appreciate.</p><h3><span id="appreciation">Appreciation</span><a href="#appreciation" class="header-anchor">Â¶</a></h3><p>There is always something to appreciate in real. If we donâ€™t appreciate the good things, they depreciates.</p><p><u>problem</u>: what I am grateful for?</p><ul><li>Be grateful for everythings. What we focus on appreciates.<ul><li>Chipping away negativity</li></ul></li><li>express gratitude to ourselves and others.</li></ul><p><u>Question</u> : how to express gratitude?</p><ul><li><p>Take time to reflect</p></li><li><p>Letter, phone, or in-person</p></li><li><p>Regularly (weekly, bi-weekly or monthly)</p></li><li><p>Writing helps even if letter not sent</p></li></ul><h2><span id="goal-setting">Goal setting</span><a href="#goal-setting" class="header-anchor">Â¶</a></h2><p>æ‹–å»¶ç—‡çš„è§£å†³æ–¹å¼ã€‚ä»Šå¹´9æœˆåˆå¼€å§‹è°ƒæ•´çŠ¶æ€ï¼Œåˆ°ç°åœ¨ï¼ˆ12æœˆï¼‰å·²ç»æ²¡æœ‰äº†è¶…è¿‡ä¸¤å¤©çš„æ‹–å»¶ã€‚ä¸è¿‡ä»ç„¶å­˜åœ¨å› ä¸ºåˆ«çš„äº‹è€Œè€½æå­¦ä¹ çš„æƒ…å†µã€‚</p><p>Setting goal resolves internal conflicts.</p><p>olc: å½“ä½ çŸ¥é“ä½ å°†å»å“ªå„¿ï¼Œé‚£ä¹ˆå°±ä¼šè·å¾—å†…å¿ƒçš„å¹³é™ã€‚</p><p>Job -&gt; career -&gt; calling</p><p>Problem: what is your calling?</p><p>Ans: Listen to the inner calls which guide your direction. When we pursue our passion, when we pursue a self-concordant goal and a self-concordant journey, thatâ€™s when we become alive.</p><p>è¿™ä¸ªç­”æ¡ˆä¼šéšç€æ—¶é—´å˜åŒ–ï¼Œå¯èƒ½è¿‡äº†ä¸¤å¹´åˆæ˜¯ä¸åŒçš„æ ·å­ã€‚ä½†æ˜¯æˆ‘ä»¬æ‰“å¼€äº†å¯èƒ½æ€§ï¼Œçœ‹åˆ°çš„äº‹ç‰©çš„çœŸå®æ€§å’Œè‡ªå·±çš„èŒè´£å’Œä½¿å‘½ã€‚</p><p>Tips for setting goal:</p><ol><li><p>writing down</p></li><li><p>set lifelines(not DDL): the date by which we want to achieve those certain goals</p></li><li><p>make it specific</p></li><li><p><u>Future goals as means; present experiences as ends.</u></p><p>è®¾å®šç›®æ ‡çš„ç›®çš„ä¸æ˜¯ä¸ºäº†å®Œæˆå®ƒï¼Œå®Œæˆç›®æ ‡ä¸å¦ä¸åº”è¯¥å½±å“æˆ‘ä»¬æƒ…ç»ªçš„å¥½åï¼Œæ›´é‡è¦çš„æ˜¯ç›®æ ‡æ˜¯ä¸ºäº†æ¿€åŠ±æˆ‘ä»¬å»è¿›è¡Œè¿™é¡¹æ—…ç¨‹ã€‚å¦‚æœæˆ‘ä»¬åªå…³æ³¨ç»“æœè€Œä¸å…³æ³¨è¿‡ç¨‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸å¤ªå¯èƒ½å–å¾—æˆåŠŸã€‚</p><p>å¸¸å¸¸å‡ºç°è¿™æ ·çš„æƒ…å½¢ï¼šè®¾å®šäº†ä¸€ä¸ªç›®æ ‡æ²¡æœ‰å®Œæˆå®ƒï¼Œæˆ–è€…å®Œæˆäº†ä¸€ä¸ªç›®æ ‡åå°±æ²¡æœ‰æ–°çš„ç›®æ ‡è®¾å®šã€‚</p></li></ol><h3><span id="stress">Stress</span><a href="#stress" class="header-anchor">Â¶</a></h3><p>P13 58:24</p><p>Too much to do -&gt; stress(feeling overwhelmed ) -&gt; depression</p><p><u>question</u>: how to deal with distress?</p><p>Ans: take a time-out</p><p><u>problem</u>: Why are so many people stressed? -&gt;<u>What do those who are successful and able to lead a healthy and happy life do?</u></p><p>Ans: Stress is fine as long as we take recovery.</p><p>Solution: <strong>take a break</strong>.</p><ol><li>From marathon to sprint intervals.(sprint-&gt;recovery-&gt;sprint-&gt;recoveryâ€¦)</li><li>Creating a ritual of both work and recovery: 60-120 minutes of work, 15+ minutes of recovery.</li><li>Maintaining flexibility. åˆç†å®‰æ’æ‚äº‹ã€‚</li><li>Take multi-level recovery.</li></ol><h3><span id="focus">Focus!</span><a href="#focus" class="header-anchor">Â¶</a></h3><p>The key is focus.</p><p>ä¾‹å­ï¼šå½“ä½ æ”¾è¶…è¿‡ä¸€é¦–æ­Œæ—¶ï¼Œå°±äº§ç”Ÿäº†å™ªéŸ³ã€‚</p><p>å½“å¤šä»¶äº‹é‡å åœ¨ä¸€èµ·ï¼Œé‚£ä¹ˆå†å¥½çš„äº‹æƒ…éƒ½ä¼šå˜ç³Ÿç³•ã€‚</p><ul><li><p>Recovery: Quantity affects quality</p></li><li><p>Work: Reducing multi-tasking</p><ul><li>elimination is not possible.</li></ul></li></ul><p>è¿™é‡Œçš„multi-taskæŒ‡çš„æ˜¯åœ¨åŒä¸€æ—¶é—´åšè¶…è¿‡ä¸€ä»¶äº‹ï¼Œæ¯”å¦‚åœ¨å†™ä½œçš„æ—¶å€™å…³æ³¨ç€é‚®ä»¶æˆ–æ¶ˆæ¯æç¤ºã€‚</p><p>olc:åœ¨ç›¸åŒæ—¶é—´é‡Œæˆ‘åº”è¯¥åªå¼€ä¸€é¡¹å·¥ä½œçš„ç½‘é¡µç„¶åå…³æ‰å†å¼€å¦ä¸€é¡¹å·¥ä½œçš„ï¼Œä¹‹å‰æ€»æ˜¯å¼€å¤ªå¤šç½‘é¡µç»“æœæ ¹æœ¬ä¸å¯èƒ½åœ¨åŒä¸€æ—¶é—´å…¼é¡¾ã€‚</p><h3><span id="simplify">Simplify!</span><a href="#simplify" class="header-anchor">Â¶</a></h3><p>Do less things, the important one.</p><p><strong>Time affluence</strong></p><p><u>problem:</u> how to lead a life with fun and functionality?</p><p><u>Problem:</u> what do we really really really want to do?</p><h3><span id="reminder">Reminder</span><a href="#reminder" class="header-anchor">Â¶</a></h3><p>æœ‰è¶£çš„æ¦‚å¿µ</p><ol><li><p>Self-concordant goal</p></li><li><p>åŠ å¼ºæ€§æ ¼ä¼˜åŠ¿å¯¹åº”çš„èƒ½åŠ›</p></li><li><p>Multi-level recovery:</p><ul><li>Micro (minutes, hours)</li><li>Mezzo (nights, days)</li><li>Macro (weeks, months)</li></ul></li><li><p>Optimum simplicity:æ‰¾åˆ°ä¸€å¤©æœ€ä¼˜çš„å·¥ä½œæ—¶é—´</p></li><li><p>å¯æŒç»­å‘å±•</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> HASS </category>
          
          <category> positive psychology </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PSY perfection</title>
      <link href="/sg/2021/12/12/psy_perfection/"/>
      <url>/sg/2021/12/12/psy_perfection/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#what-is-perfectionism">What is Perfectionism?</a></li><li><a href="#characteristics">Characteristics</a></li><li><a href="#consequences">Consequences</a></li><li><a href="#sources-of-perfectionism">Sources of Perfectionism</a></li><li><a href="#overcoming-perfectionism">Overcoming Perfectionism</a></li><li><a href="#reminder">Reminder</a></li><li><a href="#olc">olc</a></li></ul><!-- tocstop --></div><p>å¯¹æˆ‘æ¥è¯´æœ€é‡è¦çš„ä¸€èŠ‚è¯¾ã€‚</p><h3><span id="what-is-perfectionism">What is Perfectionism?</span><a href="#what-is-perfectionism" class="header-anchor">Â¶</a></h3><p>ä¾‹å­1ï¼šï¼ˆos:æ„Ÿè§‰æ•™æˆåœ¨æ•´äººï¼‰Talå…ˆè®©å­¦ç”Ÿç”»ä¸€ä¸ªæ­£åœ†ï¼Œä¸åœåœ°å¼ºè°ƒç”»å‡ºä»–çš„æœ€å¥½æ°´å¹³ã€‚ç„¶åç”»ä¸€ä¸ªå‡å¦‚ä»–ä¸‰å²èƒ½ç”»å‡ºçš„åœ†ã€‚å†ç”»ä¸€ä¸ªå‡å¦‚ä»–ä¸€å²èƒ½ç”»å‡ºçš„åœ†ã€‚æœ€åæ•™æˆå¼€å§‹æ‰“åˆ†ï¼Œç»™æ­£åœ†æ‰“äº†å‹¾ï¼Œå…¶ä»–çš„æ­ªæ­ªæ‰­æ‰­çš„æ›²çº¿æ‰“äº†å‰ã€‚</p><p>Take away: åœ¨ç”»å‡ºä¸€ä¸ªå®Œç¾çš„åœ†ä¹‹å‰éœ€è¦ç”»å¾ˆå¤šä¸ªä¸å®Œç¾çš„åœ†æ‰èƒ½åšåˆ°ã€‚</p><p>ä¾‹å­2ï¼šå°å©´å„¿åœ¨åˆšå¼€å§‹å­¦èµ°è·¯æ€»ä¼šæ‘”è·¤å¾ˆå¤šæ¬¡ï¼Œåœ¨å­¦ä¼šåƒé¥­å‰æ€»ä¼šå¼„å¾—æ»¡å˜´éƒ½æ˜¯é£Ÿç‰©ã€‚</p><p>Take away: **Learn to fail or fail to learn.**There is no other way to learn, to grow.</p><p>ä¾‹å­3ï¼šè¿›è¡Œäº†ä¸€é¡¹å¯¹åŒ»é™¢åŒ»æŠ¤äººå‘˜çŠ¯é”™çš„è°ƒæŸ¥é—®å·ã€‚ç»“æœåè€Œå’Œç°å®è¡¨ç°ä¸åŒï¼šåœ¨é—®å·ä¸ŠçŠ¯é”™è¾ƒå°‘çš„äººåœ¨å®é™…å·¥ä½œä¸­çš„é”™è¯¯åè€Œæ›´å¤šã€‚å®é™…ä¸Šè¿™æ˜¯ç”±äºé‚£äº›é—®å·ä¸ŠçŠ¯é”™è¾ƒå°‘çš„äººéšç’äº†çŠ¯çš„å°é”™è¯¯ï¼Œåªæœ‰å½“é”™è¯¯å¤ªå¤§ä¸å¯éšç’æ—¶æ‰è®¤ä¸ºè¿™æ˜¯é”™è¯¯ï¼›è€Œé—®å·ä¸ŠçŠ¯é”™è¾ƒå¤šçš„äººå¦‚å®è®°å½•ä¸‹å¤§çš„æˆ–å°çš„é”™è¯¯ï¼Œä»–ä»¬åœ¨å·¥ä½œä¸­çš„è¡¨ç°ä¹Ÿç›¸å¯¹æ¯”å¦ä¸€ç±»äººæ›´å¥½ã€‚</p><p>Take away: å¹³æ—¶ç»å†äº†æ›´å¤šå¤±è´¥çš„å›¢é˜ŸæˆåŠŸçš„æ¦‚ç‡æ›´é«˜ã€‚ç±»ä¼¼è½¯ä»¶å·¥ç¨‹çš„fast fail</p><p><u>perfection Vs. excellence</u></p><blockquote><p>def: Perfectionism is an <strong>incapacitating</strong> fear of failure that permeates our lives, especially those areas that we <strong>care about most</strong>.</p><p>It is an approach, a cognitive and emotional schema, that we hold toward <strong>the journey</strong> of our lives, toward the process of getting from point A to point B.</p></blockquote><p>å®Œç¾ä¸»ä¹‰æ˜¯ä¸€ç§å¯¹å¤±è´¥çš„å¤±èƒ½æ€§ææƒ§ï¼Œå°¤å…¶æ˜¯å¯¹äºæˆ‘ä»¬æœ€å…³å¿ƒçš„äº‹ã€‚</p><img src="/sg/2021/12/12/psy_perfection/sc.png" class title="sc"><p>olc: éœ‡æƒŠğŸ¤¯è¿™å½»åº•æ”¹å˜äº†æˆ‘å¯¹å¤±è´¥çš„çœ‹æ³•ã€‚æˆ‘æ€»æ˜¯ä»¥ä¸ºäº‹æƒ…åº”è¯¥åƒperfectioné‚£æ ·å®Œæˆï¼Œä½†å´å¿½ç•¥äº†äº‹ç‰©è®¤çŸ¥ç†è§£å®ç°çš„æ›²çº¿åº”è¯¥æ˜¯æ›²æŠ˜çš„ã€‚è¿™ä¸æ˜¯è¯´æˆ‘ä»¬åº”è¯¥å¯ä»¥å»å¼¯å¼¯ç»•ç»•åœ°é¿å¼€æˆ‘ä»¬çœŸå®çš„ç›®æ ‡ï¼Œè€Œæ˜¯è¯´å³ä½¿åœ¨å®ç°ç›®æ ‡çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†å¤±è´¥ä¹Ÿæ˜¯éå¸¸æ­£å¸¸çš„ï¼Œè¿™æ­£æ˜¯ç†è§£å’Œå­¦ä¹ çš„å”¯ä¸€é€”å¾„ã€‚</p><p>åœ¨é‡åˆ°å¤±è´¥æ—¶ï¼Œæˆ‘æ²¡æœ‰é—®æ­£ç¡®çš„é—®é¢˜ã€‚å®Œç¾ä¸»ä¹‰æ˜¯æˆ‘ç»å¸¸é‡åˆ°çš„é—®é¢˜ä½†æˆ‘å¹¶ä¸çŸ¥é“è‡ªå·±æœ‰è¿™ç§å€¾å‘ï¼Œå¯¹å¤±è´¥çš„ææƒ§å¯¼è‡´æˆ‘æ— æ³•çœŸæ­£è¡ŒåŠ¨ï¼Œé˜»ç¢äº†æˆ‘çš„å­¦ä¹ å’Œæˆé•¿ã€‚å­¦ç¼–ç¨‹æœ€åˆæˆ‘ä»¥ä¸ºé¡¹ç›®ç›´æ¥ä»å¤´åˆ°å°¾å†™å°±å†™å®Œäº†ï¼Œä½†äº‹å®ä¸Šæ˜¯å†™ä¸€ç‚¹å„¿ï¼Œè¿›è¡Œç®€å•çš„æµ‹è¯•ï¼Œå†å†™ä¸€ç‚¹å„¿ï¼Œç„¶åç»§ç»­æµ‹è¯•ã€‚å­¦ç¦»æ•£æ•°å­¦ä¹Ÿä»¥ä¸ºä¸€é“é¢˜å°±è¿™ä¹ˆå¹²æƒ³å°±æƒ³å‡ºæ¥ï¼Œè€Œå¿½ç•¥äº†çœŸæ­£çš„å­¦ä¹ è¿‡ç¨‹éœ€è¦ä»ä¾‹é¢˜ä¸­å¯»æ‰¾è§£æ³•ï¼Œå¿½è§†äº†recitationçš„å­¦ä¹ ã€‚çœ‹åˆ°äº†ä¼˜ç§€çš„äººçš„æˆåŠŸï¼Œå´æ²¡æœ‰çœ‹åˆ°ä»–ä»¬é‡åˆ°çš„å¤±è´¥å’Œæ€ä¹ˆå»è§£å†³è¿™æ ·çš„å¤±è´¥ã€‚</p><h3><span id="characteristics">Characteristics</span><a href="#characteristics" class="header-anchor">Â¶</a></h3><p>è¿½æ±‚perfectionçš„äººé˜²å¾¡æ€§å¾ˆå¼ºï¼Œå›ºæ‰§å·±è§ï¼›è€Œè¿½æ±‚excellenceçš„äººå¯¹å»ºè®®/æ‰¹è¯„ä¿æŒå¼€æ”¾çš„æ€åº¦ã€‚</p><p>è¿½æ±‚perfectionçš„äººåªå…³æ³¨è‡ªå·±æ²¡æœ‰å®Œæˆçš„ä¸€åŠï¼›è€Œè¿½æ±‚excellenceçš„äººæ›´å…³æ³¨å·²ç»å®Œæˆçš„éƒ¨åˆ†ã€‚</p><p>è¿½æ±‚perfectionçš„äººè¿‡åˆ†æ¦‚æ‹¬å½“å‰çš„æƒ…å†µï¼ŒæŠŠä¸€æ¬¡çš„å¤±è´¥çœ‹æˆæ‰€æœ‰äº‹æƒ…çš„å¤±è´¥ï¼›è€Œè¿½æ±‚excellenceçš„äººè®¤æ¸…ç°å®ï¼ŒçŸ¥é“åªæ˜¯ä¸€æ¬¡çš„å¤±è´¥ã€‚</p><p>è¿½æ±‚perfectionçš„äººæ°¸è¿œä¸èƒ½çœŸæ­£æ¥å—è‡ªå·±ï¼›è€Œè¿½æ±‚excellenceçš„äººå¯¹è‡ªå·±æ— æ¡ä»¶æ¥çº³ï¼Œè¿™åŒ…æ‹¬å¤±è´¥ä¸æˆåŠŸã€‚</p><p>è¿½æ±‚perfectionçš„äººå®³æ€•å¤±è´¥ï¼Œåªä¸“æ³¨ç»“æœ/ç»ˆç‚¹ï¼Œè®¤ä¸ºäº‹æƒ…æ˜¯é™æ€çš„ï¼Œä¸ä¼šå†å‘ç”Ÿå˜åŒ–ï¼Œæ¯”å¦‚â€œä»–è¿™ä¹ˆå¼ºï¼Œæ— è®ºæˆ‘å†æ€ä¹ˆåŠªåŠ›æˆ‘ä¹Ÿæ— æ³•èµ¶ä¸Šä»–â€ï¼›è€Œè¿½æ±‚excellenceçš„äººçŸ¥é“æŠŠå¤±è´¥çœ‹æˆå¯¹è‡ªå·±çš„åé¦ˆï¼ŒæŠŠå…³æ³¨æ”¾åœ¨ç»“æœ/ç»ˆç‚¹å’Œæ—…ç¨‹ä¸Šï¼ŒçŸ¥é“äº‹æƒ…æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼ŒæŠŠé‡å¿ƒæ”¾åœ¨å¯ä»¥æ”¹å˜çš„éƒ¨åˆ†ã€‚</p><h3><span id="consequences">Consequences</span><a href="#consequences" class="header-anchor">Â¶</a></h3><p>ä¾‹å­ï¼šMr X. Xå…ˆç”Ÿä»å°å­¦èµ·å°±è¿½æ±‚å®Œç¾ä¸»ä¹‰ï¼Œä»–è¦ä¸Šæœ€å¥½çš„ä¸­å­¦æ‰€ä»¥åœ¨å°å­¦æ—¶å°±éå¸¸åŠªåŠ›ã€‚å½“ä»–å»äº†æœ€å¥½çš„ä¸­å­¦ï¼Œä»–é«˜å…´äº†ä¸¤å‘¨ï¼Œç„¶ååˆå˜å¾—å¿§è™‘ï¼Œè¿™æ ·è¿˜ä¸å¤Ÿï¼Œä»–è¦ä¸Šæœ€å¥½çš„å¤§å­¦ï¼Œäºæ˜¯åœ¨ä¸­å­¦æ—¶ä»–å‚åŠ å„ç§è¯¾å¤–æ´»åŠ¨ï¼ŒåŒæ—¶åœ¨å­¦ä¸šæˆç»©ä¸Šçš„è¡¨ç°ä¹Ÿéå¸¸å¥½ã€‚å½“ä»–å»äº†æœ€å¥½çš„å¤§å­¦ï¼Œä»–é«˜å…´äº†ä¸¤ä¸ªæœˆï¼Œå¯ä»¥æ­‡æ­‡äº†ä¹ˆï¼Ÿä¸è¡Œï¼Œä»–éœ€è¦æœ‰ä¸€ä»½æœ€å¥½çš„å·¥ä½œï¼Œäºæ˜¯ä»–ç§¯æå‚ä¸è¯¾å¤–äº’åŠ¨ï¼Œå‚åŠ é¢†å¯¼äº†ä¸‰ä¸ªç¤¾å›¢ï¼ŒåŒæ—¶è¿˜å‚åŠ äº†ä¸€ä¸ªå¤§å…¬å¸çš„å®ä¹ ï¼Œè¿™æ ·æ€»è¯¥ä¼‘æ¯äº†å§ï¼ŸXå…ˆç”Ÿå§‹ç»ˆæœ‰ä¸€ä¸ªæ›´å®Œç¾çš„ç›®æ ‡éœ€è¦å®Œæˆï¼Œå³ä½¿ä»–èƒ½å¤ŸçŸ­æš‚åœ°ä¼‘æ¯ä¸¤ä¸ªæœˆï¼Œä¸¤å‘¨ï¼Œä»–æ€»ä¼šå›åˆ°é‚£ç§ç„¦è™‘å¤±æœ›çš„çŠ¶æ€ã€‚åœ¨ä»–è€çš„æ—¶å€™ï¼Œåˆ«äººé—®äº†ä»–ä¸€ä¸ªé—®é¢˜ï¼šä½ æƒ³è¦çš„ç”Ÿæ´»æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ</p><p>å®Œç¾ä¸»ä¹‰å¯¼è‡´çš„ç»“æœæ˜¯ï¼šä»–æ€»æ˜¯åªæœ‰æš‚æ—¶çš„è½»æ¾è§£è„±ï¼›åªèƒ½çœ‹åˆ°ä¸å¯é¿å…çš„å¤±è´¥ï¼›æŠŠå‘ç”Ÿçš„ä¸€äº›çŠ¶å†µå¤–çš„æ‚äº‹çœ‹æˆæµªè´¹æ—¶é—´ï¼›æœ‰å‡ºç°æ··ä¹±/ç—…ç—‡çš„å€¾å‘ã€‚ç”±äºåªçœ‹åˆ°äº†å¤±è´¥ï¼Œä»–çš„è‡ªå°Šå—åˆ°æ‰“å‡»ï¼Œä¸å†ç›¸ä¿¡è‡ªå·±ã€‚è€Œè¿™ä¼šè¿›ä¸€æ­¥å½±å“ä»–çš„äººé™…å…³ç³»ï¼Œå¼•èµ·ä»–çš„ç„¦è™‘å’Œå‹åŠ›å’Œç—›è‹¦ã€‚</p><p>è¿½æ±‚excellenceçš„ç»“æœæ˜¯ï¼šä»–æ€»æ˜¯æœ‰èƒ½å¤ŸæŒç»­çš„æ»¡è¶³æ„Ÿï¼›å¯¹æ¯”ä¸å¯é¿å…çš„å¤±è´¥ï¼Œä»–çœ‹åˆ°çš„æ˜¯æˆåŠŸçš„å¯èƒ½æ€§ï¼›å¯¹æ¯”çœ‹æˆæµªè´¹æ—¶é—´çš„æ‚äº‹ï¼Œä»–çœ‹åˆ°çš„æ˜¯æ°å½“çš„æ—¶é—´åˆ†é…ï¼›ä»–å¯¹ç„¦è™‘å’Œå¤±è½æœ‰å¥åº·çš„æ–¹æ³•å»è§£å†³ã€‚ä»–çœ‹çš„æ˜¯æŒç»­çš„æ”¹å–„å’Œå˜åŒ–ï¼Œè€Œè¿™æ—¶ä»–èƒ½å¤Ÿæˆé•¿ã€‚è™½ç„¶ä»–ä¹Ÿä¼šé‡åˆ°ç„¦è™‘ç´§å¼ ï¼Œä½†è¿™å˜å¾—å¯ä»¥æ§åˆ¶ã€‚æ›´å°‘çš„ç—›è‹¦åŒæ—¶æ›´å¤šçš„æ”¶ç›Šã€‚</p><h3><span id="sources-of-perfectionism">Sources of Perfectionism</span><a href="#sources-of-perfectionism" class="header-anchor">Â¶</a></h3><blockquote><p>Destination = Reward = Acceptance</p><p>Journey = Unrewarded = Means Only</p></blockquote><p>å®Œç¾ä¸»ä¹‰çš„èµ·æºæ—¶æ°¸è¿œåªèƒ½çœ‹åˆ°ç›®æ ‡ï¼Œå¥–åŠ±ç»“æœã€‚ç¤¾ä¼šç¯å¢ƒå°±æ˜¯å¦‚æ­¤ï¼Œåªå¥–åŠ±æˆåŠŸçš„äººã€‚</p><p>ä½†æˆ‘ä»¬åº”è¯¥çœ‹åˆ°è¿‡ç¨‹å’Œç»“æœï¼Œå¥–åŠ±è¿‡ç¨‹ï¼Œå°½ç®¡æœ‰æ—¶å¤±è´¥äº†ã€‚é¡ºåº”è‡ªå·±çš„å¤©æ€§ï¼Œå…è®¸è‡ªå·±çŠ¯é”™ï¼Œæ¥çº³è‡ªå·±çš„å¤±è´¥ã€‚</p><h3><span id="overcoming-perfectionism">Overcoming Perfectionism</span><a href="#overcoming-perfectionism" class="header-anchor">Â¶</a></h3><p><u>problem:</u> how to overcome this: living in the future, being afraid of the present because what if I fail?</p><ol><li><p>being aware of what I want to change? and what I want to maintain?</p></li><li><p>rewarding effort</p></li><li><p>Active acceptance</p><p>è¯¯åŒºï¼šç”¨å®Œç¾ä¸»ä¹‰çš„æ–¹å¼è§£å†³å®Œç¾ä¸»ä¹‰çš„é—®é¢˜ã€‚</p><p>itâ€™s ok to prone to perfection.</p><p>Accept it, then go ahead and change it</p></li><li><p>Behavior:open to criticism</p><p>putting myself on the line</p></li><li><p>Visualization: æƒ³è±¡è‡ªå·±åƒè¿½æ±‚å“è¶Šçš„äººä¸€æ ·è¡ŒåŠ¨</p></li><li><p>rough draft: Setting a liberating goal or vision</p><p>ä¾‹å­ï¼šç›´åˆ°æˆ‘å†™å‡ºç»ä¸–ä½³ä½œï¼Œå…¶ä»–çš„æ˜¯è‰ç¨¿ã€‚</p><p>ä¾‹å­ï¼š20å¹´åæˆ‘ä¼šåˆ°æœ€é¡¶å°–çš„å­¦åºœæ•™æˆç§¯æå¿ƒç†å­¦ï¼Œåœ¨é‚£ä¹‹å‰éƒ½æ˜¯å‡†å¤‡ã€‚</p><p>è§£æ”¾è‡ªå·±ï¼Œäº«å—å½“ä¸‹ã€‚é‡ç‚¹æ˜¯èˆå¼ƒå½“ä¸‹è¿™ç§å¹æ¯›æ±‚ç–µï¼Œå®Œç¾æ— ç¼ºçš„ç”Ÿæ´»ã€‚</p></li><li><p>The Platinum Rule: have compassion for ourselves</p><p>accepting failures in the same way thatwe accept in others, in people we love.</p></li><li><p>how to help others?</p><p>æ”¹å˜ä¸æ˜¯ä»ä¸€å¤œå°±èƒ½å®Œæˆçš„ã€‚</p><ul><li>By example: people do what you do, not what you say.</li><li>Tell stories about it.</li><li>Rewarding the journey/process/effort</li></ul></li></ol><p><u>Technique:</u></p><p>å½“é¢ä¸´ç”Ÿæ´»çš„è‰°éš¾æ—¶åˆ»æ—¶ï¼Œå—åˆ°ç„¦è™‘æŒ«æŠ˜æ‰“å‡»æ—¶ï¼Œ</p><ol><li><p>Permission</p><ul><li><p>Acceptance</p></li><li><p>Respect for reality</p></li></ul></li><li><p>Positive: reframing question: what is the growth opportunity here?</p><ul><li><p>Benefit finding</p></li><li><p>Failure as opportunity:See the opportunity in failures.</p></li><li><p>Distracting</p><p>åˆ†æ•£æ³¨æ„åŠ›æ˜¯è¯´å½“ä¸€ç§æƒ³æ³•æˆ–æ„Ÿè§‰åå¤å‡ºç°ï¼Œè€Œæˆ‘ä»¬ä¹Ÿä¸ä¹‹åšç€è¥¿è¥¿å¼—æ–¯å¼çš„å¯¹æŠ—æ—¶ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹æ²‰æ€åè€Œä¼šåœ¨åŒä¸€ç§æ€è·¯é‡Œè¶Šé™·è¶Šæ·±ï¼Œå¾—ä¸åˆ°ä»€ä¹ˆç»“æœï¼ŒåŒæ—¶åˆè®©äººå´©æºƒã€‚æœ€å¥½çš„æ–¹æ³•æ˜¯åˆ†æ•£è‡ªå·±çš„æ³¨æ„åŠ›ã€‚å½“è¢«ç„¦è™‘å‹å®çš„æ—¶å€™ï¼Œç”¨å…¶ä»–çš„äº‹æƒ…åˆ†æ•£æ³¨æ„åŠ›ï¼Œè·‘æ­¥ï¼Œå¬éŸ³ä¹ï¼Œæˆ–è€…åšåˆ«çš„ã€‚è¿™å’Œé€ƒé¿é—®é¢˜ä¸åŒï¼Œé€ƒé¿æ˜¯æŒ‡ä¹‹åä¸ä¼šå†å¤„ç†ç”Ÿæ´»ä¸­çš„ä»»ä½•é—®é¢˜ã€‚</p></li></ul></li><li><p>Perspective</p><ul><li><p>Donâ€™t sweat the small stuffâ€¦ åˆ«ä¸ºå°äº‹æŠ“ç‹‚ã€‚</p><p>olc: æ¯”å¦‚æˆ‘å·®ç‚¹å› ä¸ºç¿˜è¯¾è¢«è¾…å¯¼å‘˜çº¦è°ˆã€‚</p></li><li><p>Psychological maturity: willingly to shift perspective</p><blockquote><p>Itâ€™s the ability, when we want, to be immersed in the here and now in the present. Itâ€™s the ability, when we want, to take a step back, zoom out those in time and in space and ask the question in the big picture â€œis this gonna matter in one year?â€</p></blockquote></li></ul></li></ol><p>ä¾‹å­ï¼šæ•™æˆè®²äº†ä¸€ä¸ªä»–æœ€è¿‘é‡åˆ°å´©æºƒæ—¶ï¼Œæ€ä¹ˆè¿ç”¨ä»¥ä¸Šçš„æŠ€å·§æ”¹å˜è§’åº¦ï¼Œå¹¶æ”¹å–„äº†ç”Ÿæ´»ã€‚</p><p>è¿™äº›æŠ€å·§ä¸æ˜¯ç–«è‹—ï¼Œè€Œåƒè¯ç‰‡ã€‚</p><h3><span id="reminder">Reminder</span><a href="#reminder" class="header-anchor">Â¶</a></h3><p>æœ‰è¶£çš„æ¦‚å¿µï¼š</p><ul><li><p>Courage: courage is not about having no fears. Instead, itâ€™s about having fear and go ahead anyway.</p></li><li><p>å¿ƒç†å®‰å…¨</p></li><li><p>flow experiences</p></li><li><p>80/20 Rule:ä¸€å¤©20%çš„æ—¶é—´é‡Œå¹²å®Œäº†80%çš„äº‹æƒ…ã€‚</p></li></ul><h3><span id="olc">olc</span><a href="#olc" class="header-anchor">Â¶</a></h3><p>å¬ä»å†…å¿ƒçš„å£°éŸ³ï¼Œé‚£ä¸ªå£°éŸ³æ˜¯å®ŒæˆMIT 6-3 course planã€‚</p>]]></content>
      
      
      <categories>
          
          <category> HASS </category>
          
          <category> positive psychology </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>PSY introduction</title>
      <link href="/sg/2021/12/09/psy_intro/"/>
      <url>/sg/2021/12/09/psy_intro/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#introduction">Introduction</a><ul><li><a href="#transformation-vs-information">transformation vs information</a></li><li><a href="#subtraction">subtraction</a></li><li><a href="#why-study-happiness-not-depression">why study happiness not depression?</a></li><li><a href="#resilience">Resilience</a></li><li><a href="#ask-the-right-question">Ask the right question!!!</a></li><li><a href="#responsibility">responsibility</a></li><li><a href="#reminder">reminder</a></li><li><a href="#olc">olc</a></li></ul></li><li><a href="#premise">Premise</a><ul><li><a href="#1-bridge-building-vs-division-and-separation">1. Bridge building Vs. Division and separation</a></li><li><a href="#2-change-is-possible-vs-change-is-illusive">2. Change is possible Vs. Change is illusive</a></li><li><a href="#3-internal-factors-vs-external-factors">3. internal factors Vs. external factors</a></li><li><a href="#4-human-nature-must-be-obeyed-vs-perfected">4. Human nature must be: obeyed Vs. perfected</a></li><li><a href="#5-happiness-is-and-ought-to-be-the-ultimate-end-vs-happiness-should-be-a-secondary-pursuit">5. Happiness is and ought to be the ultimate end Vs. Happiness should be a secondary pursuit</a></li><li><a href="#reminder-1">reminder</a></li></ul></li></ul><!-- tocstop --></div><p>è¿™é—¨è¯¾å¸å¼•æˆ‘çš„ç‚¹åœ¨äºå®ƒæ˜¯ç”±ç†è®ºå’Œåº”ç”¨ç»„åˆèµ·æ¥çš„ã€‚è™½ç„¶ä¹‹å‰å°±äº†è§£åˆ°æœ‰è¿™ä¹ˆä¸€é—¨è¯¾ï¼Œä½†æ˜¯æ ‡é¢˜è®©æˆ‘å…ˆå…¥ä¸ºä¸»åœ°è®¤ä¸ºè¿™åªä¸è¿‡æ˜¯å¦ä¸€é—¨é¸¡æ±¤å­¦ã€‚ç›´åˆ°ç”±äºæœ€è¿‘å› ä¸ºå®ä¹ å‡†å¤‡ç›¸å…³çš„äº‹å¾ˆæ²®ä¸§ä»Šå¤©ç»™è‡ªå·±æ”¾äº†ä¸€å¤©å‡ï¼Œçªç„¶æƒ³åˆ°äº†è¿™é—¨è¯¾å°±æ‰“ç®—éšä¾¿çœ‹çœ‹ã€‚ç¬¬ä¸€èŠ‚introducationæ•™æˆTalå°±æåˆ°äº†å­¦ç•Œè™½ç„¶å¯¹ç§¯æå¿ƒç†å­¦å­˜åœ¨å¾ˆå¤šæœ‰æ„æ€çš„ç ”ç©¶ï¼Œä½†æ—¥å¸¸ç”Ÿæ´»ä¸­ä¸ä¼šæœ‰å¤šå°‘äººå»é˜…è¯»ä¸“ä¸šçš„æœŸåˆŠï¼Œç”šè‡³å¯èƒ½å¬éƒ½æ²¡å¬è¿‡ã€‚è€Œè¿™é—¨è¯¾çš„ç›®çš„ä¹‹ä¸€å°±æ˜¯å°†ç§¯æå¿ƒç†å­¦ç”¨å¤§ä¼—èƒ½å¤Ÿç†è§£çš„ç¨‹åº¦è®²æˆå‡ºæ¥ï¼Œè¿™é—¨è¯¾çš„æ•ˆç”¨å–å†³äºå­¦ç”Ÿèƒ½å¤Ÿå¤šå¤§ç¨‹åº¦åœ°å°†è¯¾å ‚ä¸­çš„ç†è®ºåº”ç”¨åˆ°æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œè€Œæˆ‘ä¹Ÿæ‰“ç®—å¦‚æ­¤åšæ¥æ”¹å˜ç°åœ¨çš„å¢ƒå†µã€‚</p><p>æˆ‘çš„ç¬”è®°ä¼šåŒ…å«é—®é¢˜ï¼Œè¯¾å ‚è§‰å¾—æœ‰è¶£çš„å®ç”¨çš„æ¦‚å¿µ/ä¾‹å­/è§‚ç‚¹ï¼Œå¯¹ä¸€äº›å¿½ç•¥çš„äº‹çš„æé†’(Reminder of what weâ€™ve already known)ï¼Œæˆ‘åœ¨å®é™…ç”Ÿæ´»ä¸­é‡‡å–äº†çš„è¡ŒåŠ¨å’Œæ•ˆæœç­‰ã€‚è¿™å°†æˆä¸ºæˆ‘ä¸ªäººå®éªŒä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p><h2><span id="introduction">Introduction</span><a href="#introduction" class="header-anchor">Â¶</a></h2><h3><span id="transformation-vs-information">transformation vs information</span><a href="#transformation-vs-information" class="header-anchor">Â¶</a></h3><p>Transformationï¼š</p><ul><li>difference from information is about how to apply that knowledge in real life. Projects is one way of transformation in computer science study</li><li>interpretation and focus of life</li><li>information is not enough to change the worldï¼šOver-promising, under-delivering</li></ul><p>å­¦ä¹ ä¸æ˜¯å®¹çº³ä¿¡æ¯ï¼Œè€Œæ˜¯å°†ä¿¡æ¯æ ¹æ®å®é™…æƒ…å†µåº”ç”¨ã€‚ä½†è¿™é‡Œä¸ä»…æŒ‡å¦‚æ­¤ï¼Œè¿˜åœ¨äºå¦‚ä½•å»è§£é‡Šæ¥æ”¶åˆ°çš„å®¢è§‚ä¿¡æ¯ã€‚å½“æˆ‘ä»¬é‡åˆ°é—®é¢˜ï¼Œä¸åŒçš„æ€åº¦ä¼šäº§ç”Ÿä¸åŒçš„æƒ³æ³•ã€‚</p><p>Either Learn from experience thinking it as opportunity or disaster that you cannot recover from.</p><h3><span id="subtraction">subtraction</span><a href="#subtraction" class="header-anchor">Â¶</a></h3><p>åšå‡æ³•æ˜¯æŒ‡å‘ç°è‡ªèº«çš„å¤©æ€§ï¼Œä¸è¦è¢«å¤–åœ¨å¤šä½™çš„ä¸œè¥¿æ‰€æŸç¼šã€‚</p><p>Chipping away the accessing stone as David:</p><ul><li>Perfectisim</li><li>Limitations,barrier</li></ul><p><u>problem</u>: how to apply it in practice: Introduce behavior,actual change in real life</p><h3><span id="why-study-happiness-not-depression">why study happiness not depression?</span><a href="#why-study-happiness-not-depression" class="header-anchor">Â¶</a></h3><p>Depression mentioned in course is something I can relate to. Iâ€™m familiar with that feeling of dwelling on past failures and not seeing the future. The course reminds me of I should see the positive side of problems and take actions after a right amount of time to feel bad about everything. The difference between active agent and passive victim is that active agent is always to make active move like to take active participation in course when you only write contents you understand or feel interested. Whereas the passive victims would feel sorry for themselves and start to complain about everything in life.</p><p>active participation: ä¸åªæ˜¯è¿™èŠ‚è¯¾ï¼Œæ‰€æœ‰è¯¾ç¨‹éƒ½è¯¥å¦‚æ­¤ã€‚å­¦ä¹ ä¸æ˜¯æ•™æ¡ä¸»ä¹‰ï¼Œä¸æ˜¯å®¹çº³è€Œæ˜¯ç†è§£ï¼Œé€‰æ‹©ä¸æ¥å—ã€‚</p><p><u>problem</u>: If I donâ€™t have much time, what I want to do?</p><ul><li>olc: the answer is finishing the course plan, design and implement useful things in my internship if thereâ€™s any.</li></ul><h4><span id="1-focus-on-what-works">1. focus on what works</span><a href="#1-focus-on-what-works" class="header-anchor">Â¶</a></h4><p>Nature inclination: what Iâ€™m good at? What I can be better at?</p><h4><span id="2-happiness-is-not-the-negation-of-unhappiness">2. Happiness is not the negation of unhappiness</span><a href="#2-happiness-is-not-the-negation-of-unhappiness" class="header-anchor">Â¶</a></h4><p>å›é¿å†…å¿ƒçš„å†²çª vs pationate/engage in what we are doingï¼š</p><p>æ‘†è„±ç—›è‹¦å¹¶ä¸ä»£è¡¨ç«‹å³è·å¾—å¹¸ç¦ï¼Œè€Œæ˜¯ä¸€ç§éº»æœ¨å‘†æ»çš„çŠ¶æ€ã€‚äººé™…å…³ç³»ä¸€ç›´æ˜¯æˆ‘å›é¿çš„é—®é¢˜ï¼Œå› ä¸ºåœ¨ä¸­å­¦æ—¶æ·±å—å…¶å®³ï¼Œæˆ‘é¿å…äº†å‡ ä¹æ‰€æœ‰ä¸å¿…è¦çš„ç¤¾äº¤æ´»åŠ¨çš„å»ºç«‹ï¼Œåªå’ŒçœŸæ­£æ„Ÿå…´è¶£çš„äººç›¸äº¤ã€‚ä½†æˆ‘è§‰å¾—è¿™ä»ç„¶ä¸å¤Ÿï¼Œæˆ‘åªæ˜¯å›é¿äº†å†…å¿ƒçš„å†²çªï¼Œå¿½è§†äº†çœŸæ­£å­˜åœ¨çš„é—®é¢˜ã€‚</p><h4><span id="3-prevention-through-cultivating-capacity">3. Prevention through cultivating capacity</span><a href="#3-prevention-through-cultivating-capacity" class="header-anchor">Â¶</a></h4><p>Cultivate health/positive side/personal growthï¼š</p><p>å½“ä¸€ä¸ªäººå‡ºç°ç¥ç»ç—‡æ—¶ï¼Œè¯´æ˜ä»–è‡ªèº«çš„æˆé•¿å’Œäººé™…å…³ç³»(relationship, personal growth)å·²ç»åœæ»ä¸å‰ï¼Œä»–æ²¡æœ‰å…³å¿ƒè‡ªå·±çš„å¥åº·ã€‚</p><ul><li>We diminish ourselves, thatâ€™s where we become ill.</li><li>Focus your health, strengthen your health</li><li>systematically build competency</li></ul><h3><span id="resilience">Resilience</span><a href="#resilience" class="header-anchor">Â¶</a></h3><p>ä»€ä¹ˆæ˜¯å…‹æœé—®é¢˜çš„å¯ä¹ å¾—çš„å“è´¨ï¼š</p><ul><li><p>identify the strength, set goal and future-oriented, role-model</p></li><li><p>Admit the weakness</p></li><li><p>Helping people is helping ourselves</p><ul><li>Appreciate the good(be grateful, to grow).</li></ul></li><li><p>?? Tough enough to seek for help</p></li><li><p>find the right community</p></li><li><p>social support-&gt;find the right people: If you ask help for them, they would help.</p></li><li><p>Experience: what I can do to make it meaningful?</p></li></ul><h3><span id="ask-the-right-question">Ask the right question!!!</span><a href="#ask-the-right-question" class="header-anchor">Â¶</a></h3><p>ä¾‹å­ï¼š30så†…æ•°ä¸€ä¸ªå›¾é‡Œæœ‰å¤šå°‘å‡ ä½•å›¾å½¢ï¼Œç„¶åå†é—®å›¾ç”»çš„ä¸€äº›ç»†èŠ‚çš„ç®€å•é—®é¢˜ã€‚åŸºæœ¬éƒ½æ²¡æ³•å›ç­”é‚£äº›ç®€å•é—®é¢˜ï¼Œå› ä¸ºåœ¨çœ‹å›¾æ—¶çš„é‡ç‚¹æ”¾åœ¨äº†è§£å†³é‚£ä¸ªå”¯ä¸€é—®é¢˜ä¸Šï¼Œè€Œæ ¹æœ¬æ²¡æ³¨æ„ç»†èŠ‚ã€‚</p><p>å·¥ä½œä¸­éœ€è¦æˆ‘ä»¬å»é—®æ­£ç¡®çš„é—®é¢˜ï¼Œè¿™å¾€å¾€å°±æ˜¯äº‹ç‰©çš„å…³é”®æ‰€åœ¨ã€‚ä½†æˆ‘ä»¬å¹¶ä¸æ€»æ˜¯çŸ¥é“è‡ªå·±çš„é—®é¢˜æ˜¯å¦æ­£ç¡®ï¼Œä¸€ä¸ªé—®é¢˜å¼•å‘å‡ºå»æ¢ç´¢ç›¸åº”çš„é¢†åŸŸï¼Œå¾—åˆ°ç›¸åº”çš„è§£ç­”ã€‚å¯è¿™åªæ˜¯ä¸€éƒ¨åˆ†çš„çœŸå®ï¼Œè€Œè¢«æˆ‘ä»¬å¿½ç•¥çš„äº‹æƒ…çš„å…¶ä»–éƒ¨åˆ†å¯èƒ½ä¹ŸåŒç­‰é‡è¦ã€‚</p><p>åœ¨é—®æ­£ç¡®çš„é—®é¢˜ä¹‹å‰æˆ‘ä»¬é¦–å…ˆéœ€è¦ç†è§£é—®é¢˜æ˜¯ä»€ä¹ˆã€‚</p><h3><span id="responsibility">responsibility</span><a href="#responsibility" class="header-anchor">Â¶</a></h3><p>æ‰¿æ‹…è´£ä»»é¦–å…ˆéœ€è¦è®¤è¯†åˆ°æ²¡æœ‰äººä¼šä¸ºä½ è§£å†³é—®é¢˜ã€‚</p><p><u>Responsibility</u> = no one is coming</p><h3><span id="reminder">reminder</span><a href="#reminder" class="header-anchor">Â¶</a></h3><p>ä¾‹å­ï¼š</p><ol><li>è®²äº†ä¸€ä¸ªä¾‹å­ä¸ºä»€ä¹ˆåœ¨å“ˆä½›æ¯•ä¸šçš„ä¸€å±Šå­¦ç”Ÿé‡Œä¸€å°ç¾¤äººè¿œæ¯”åˆ«äººæ›´åŠ æˆåŠŸï¼Œç”±äºä»–ä»¬å…·å¤‡ä¸¤ç§å› ç´ ï¼šè‡ªä¿¡ï¼Œç›¸ä¿¡è‡ªå·±ä¸€å®šèƒ½åšåˆ°ï¼›æ€»æ˜¯é—®é—®é¢˜ï¼Œåœ¨è‡ªå·±çš„ç¤¾ä¼šè§’è‰²å˜è¿çš„åŒæ—¶ï¼Œå‘åŒäº‹é—®é—®é¢˜ï¼Œå‘å¯¼å¸ˆé—®é—®é¢˜ï¼Œå‘è€æ¿é—®é—®é¢˜â€¦</li></ol><p>æœ‰è¶£çš„æ¦‚å¿µï¼š</p><ol><li>Eduction: Question, find the right the question and quest</li><li>become happierï¼Œè¿™é—¨è¯¾çš„ä¸»è¦ç›®æ ‡ä¸æ˜¯å˜å¾—å¿«ä¹ï¼Œè€Œæ˜¯å˜å¾—æ¯”ä¹‹å‰å¿«ä¹ã€‚</li><li>study ourselves</li><li>simple, simplicity extracts from otherside of complexity, not just simplicity</li><li>Stillnessï¼šå®‰é™çš„é‡è¦æ€§ã€‚</li><li>best way to learn is to teach: Learn -&gt; do projects on your own -&gt; teach, this way is more reasonable to me.</li><li>Leadership: Be respectful and do the job</li><li>ç§¯æå¿ƒç†å­¦ï¼šsalutogenesis</li></ol><h3><span id="olc">olc</span><a href="#olc" class="header-anchor">Â¶</a></h3><p>æˆ‘æœ€è¿‘çš„é—®é¢˜æ˜¯ï¼šé€šè¿‡å®ä¹ é¢è¯•ã€‚äº†è§£å·¥ä¸šç•Œçº§åˆ«çš„æ•°æ®åº“åœ¨åšä»€ä¹ˆäº‹æƒ…ï¼Œè§£å†³æ€æ ·çš„é—®é¢˜ï¼Œæˆ‘çš„ä½ç½®åœ¨å“ªé‡Œã€‚</p><p>ç°çŠ¶ï¼š9-10æœˆçœ‹äº†6.031çš„å¤§éƒ¨åˆ†å†…å®¹ä»¥åŠ6.004çš„ç³»ç»Ÿéƒ¨åˆ†çš„é˜…è¯»ï¼Œè¿‡äº†ä¸€éæ•°æ®ç»“æ„ï¼›11æœˆçœ‹6.033è¯»ç³»ç»Ÿæ–¹å‘çš„è®ºæ–‡åˆçœ‹äº†ä¸‰å‘¨å·¦å³åŸºæœ¬çœ‹åˆ°äº†åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆé™¤äº†Raftè¿˜æ²¡çœ‹ï¼‰ã€‚</p><h2><span id="premise">Premise</span><a href="#premise" class="header-anchor">Â¶</a></h2><p>äº”ä¸ªå‰æå’Œintroè¯¾ä½œä¸ºè¿™é—¨è¯¾çš„åŸºç¡€ã€‚ä¹‹åçš„å†…å®¹éƒ½æ˜¯åœ¨è¿™ä¸ªåŸºç¡€ä¸Šçš„å»¶ä¼¸ã€‚</p><h3><span id="1-bridge-building-vs-division-and-separation">1. Bridge building Vs. Division and separation</span><a href="#1-bridge-building-vs-division-and-separation" class="header-anchor">Â¶</a></h3><p>*Practical idealistï¼š*People just see the stereotypes without seeing their desire of making a difference</p><ul><li><p>Bridge ivory tower to Main Street</p></li><li><p>sense of mission, desire to make a difference: How can I make this world a better place?</p></li><li><p>false stereotypes: accolades, prestige, money</p></li></ul><p><u>scenario</u>: fall short of what we are cable of doing with good intentions.</p><p>Problem 1: ä¸ºä»€ä¹ˆä»æ—§æœ‰äººèº«å¤„é€†å¢ƒä»ç„¶æˆåŠŸï¼Ÿ</p><p>Problem 2: ä¸ºä»€ä¹ˆæœ‰è‰¯å¥½çš„åŠ¨æœºä»ç„¶ä¸èƒ½å¤Ÿå‘æŒ¥è‡ªèº«çš„æœ€å¤§æ•ˆèƒ½ï¼Œç”šè‡³ä¸ºæ­¤æ‰€å®³ï¼Ÿ</p><p>ä¾‹å­ï¼šç ”ç©¶è¡¨æ˜conflict resolution: è®©çŸ›ç›¾åŒæ–¹èšåœ¨ä¸€èµ·å…±åŒè®¨è®ºåœæ­¢äº‰ç«¯ï¼›ä½†è¿™åœ¨ä¸­ä¸œåœ°åŒºçŸ›ç›¾æ–¹æ¥è§¦ååè€Œå¼•èµ·æ›´å¤§çš„å†²çªã€‚å› ä¸ºåæ¥å‘ç°è¿™è¿˜éœ€è¦çŸ›ç›¾åŒæ–¹æœ‰ä¸€ä¸ªsuperordinate goalï¼Œæ‰èƒ½åœ¨è®¨è®ºä¸­é€æ¸æ¶ˆé™¤å·®å¼‚ã€‚</p><p>ä¾‹å­ï¼šæ— åˆ†è¾¨çš„ç§°èµåˆ«äººå¸¸å¸¸ä¼šé€‚å¾—å…¶åã€‚</p><p>ans: ç†æƒ³å’Œå¥½çš„åŠ¨æœºå¹¶ä¸å¤Ÿï¼Œç ”ç©¶å’Œå®è·µéœ€è¦ç»“åˆèµ·æ¥ã€‚ä½ å¿…é¡»è‡ªå·±å»å‘ç°å’Œå®è·µï¼Œæ‰¿æ‹…è´£ä»»å’Œå¤±è´¥çš„åæœã€‚å› ä¸ºæ²¡æœ‰äººä¼šæ¥ä¸ºä½ è§£å†³é—®é¢˜ï¼Œä½ æƒ³è¦çš„é—®é¢˜çš„ç­”æ¡ˆéœ€è¦ä½ è‡ªå·±å»æ‰¾å¯»ã€‚</p><h3><span id="2-change-is-possible-vs-change-is-illusive">2. Change is possible Vs. Change is illusive</span><a href="#2-change-is-possible-vs-change-is-illusive" class="header-anchor">Â¶</a></h3><ol><li>è¿™ä¸»è¦è®²äº†ç§¯æå¿ƒç†å­¦ç ”ç©¶ä¸ºä»€ä¹ˆåˆç†ã€‚è¿™é—¨è¯¾çš„ç ”ç©¶æ–¹å‘ï¼šStudy what works -&gt; study what works the best -&gt; make a difference in practice</li></ol><ul><li><p>study also the extraordinary/exceptions as studying the average</p></li><li><p>Learn from the best: not only othersâ€™ best, but also personal best</p></li><li><p>How difficult to make a change? How is possible to make a change?</p></li></ul><ol start="2"><li><p>ä¾‹å­ï¼šä¸€ä¸ªå¹²æ¶‰å®éªŒï¼Œå¯¹250ä¸ªå¤„äºè¾¹ç¼˜çš„å°å­©è¿›è¡Œå¹²æ¶‰ï¼Œ250ä¸ªä¸ä½œå¹²æ¶‰ï¼Œï¼ˆå¹²æ¶‰æŒ‡æä¾›å­¦ä¸šä¸Šçš„æŒ‡å¯¼ï¼Œè§£å†³å®¶åº­é—®é¢˜ï¼‰ç»è¿‡40å¹´çš„è¿½è¸ªï¼Œå¯¹ç…§ç»„å’Œå®éªŒç»„åœ¨å„ä¸ªå› ç´ çš„è¡¨ç°éƒ½ç›¸å·®æ— å‡ ï¼Œè€Œå¯¹ç…§ç»„åœ¨æœ‰äº›æ–¹é¢ç”šè‡³è¡¨ç°å¾—æ›´å¥½ï¼ˆæ¯”å¦‚åœ¨å·¥ä½œä¸Šçš„æå‡ï¼‰ã€‚</p><p>è¿™ä¸ªä¾‹å­è¯´æ˜äº†å¥½çš„åŠ¨æœºå¹¶ä¸èƒ½å¤Ÿè§£å†³é—®é¢˜ï¼Œæ”¹å˜çš„å‘ç”Ÿå¾ˆéš¾è¿›è¡Œã€‚</p></li><li><p>Exponential nature of social network/change/the power of one</p><p>é—®é¢˜æ˜¯é€‰æ‹©å˜åŒ–çš„æ–¹å‘ã€‚</p></li></ol><h3><span id="3-internal-factors-vs-external-factors">3. internal factors Vs. external factors</span><a href="#3-internal-factors-vs-external-factors" class="header-anchor">Â¶</a></h3><p>Internal factors primarily determine happiness Vs. Happiness is primarily a function of external circumstances</p><p>fact 1: Extrem external circumstances would make a difference in happiness. But in general, it would not affect the degree of our happiness.</p><p>fact 2:Right versus wrong expectations would affect our well-beings, not high versus low expectations.</p><p><u>problem</u>: What is the right expectation? Beliefs + transformation</p><ul><li>believe in change from within</li><li>Transformation: interpretation, preception,focus of the world</li></ul><h3><span id="4-human-nature-must-be-obeyed-vs-perfected">4. Human nature must be: obeyed Vs. perfected</span><a href="#4-human-nature-must-be-obeyed-vs-perfected" class="header-anchor">Â¶</a></h3><blockquote><p>Nature to be commanded must be obeyed.</p></blockquote><p>åœ¨å¿ƒç†å­¦å±‚é¢ä¸Šï¼Œäººä»¬å¤©æ€§åº”è¯¥å¾—åˆ°å°Šé‡ï¼Œè€Œä¸æ˜¯å°è¯•å»å®Œå–„å®ƒå³ä½¿å­˜åœ¨é‚£ä¹ˆå¤šçš„ç¼ºç‚¹ã€‚</p><p>ä¾‹å­ï¼šå†…å‘å¯¼è‡´çš„åœ¨å¾ˆå¤šäººé¢å‰è®²è¯è€Œç´§å¼ ã€‚Tal ä»¥è‡ªå·±ä¸ºä¾‹è§£é‡Šè¯´è‡ªå·±éå¸¸å†…å‘ï¼Œåœ¨äº”äººä»¥ä¸Šçš„åœºåˆè®²è¯ä¼šéå¸¸ç´§å¼ ï¼Œä½†ä¸å…¶å‘Šè¯‰è‡ªå·±â€œä¸è¦ç´§å¼ ï¼Œä¸è¦ç´§å¼ â€ä¸å¦‚æ¥å—è¿™æ ·çš„ç´§å¼ çš„æ„Ÿè§‰ã€‚å› ä¸ºä¸è¦ç´§å¼ åè€Œä¼šä½¿äººæ”¾å¤§è¿™ç§æƒ…ç»ªä½¿äººæ›´åŠ ç´§å¼ ã€‚</p><p><u>the permission to be a human</u>: itâ€™s ok to experience these painful feelings.</p><ol><li><p>Active acceptance is not resignation(passive acceptance)</p><ul><li><p>Certain things can not change while certain things I can and ought to change</p></li><li><p>the wisdom to tell the difference between changeable  and unchangeable things.</p></li></ul></li><li><p>Distinction between ABC(affect-emotion, behavior-action, cognition-thoughts)</p><p>æƒ…ç»ªï¼Œè¡Œä¸ºï¼Œæƒ³æ³•å¯ä»¥åˆ†å¼€æ¥çœ‹ã€‚</p><ul><li>How to behave and act even with some emotion like jealousy/â€¦</li></ul></li><li><p>å»ºç«‹å¿ƒç†å…ç–«ç³»ç»Ÿï¼š</p><ul><li>how quickly to recover from the depression?</li><li>Strengthens when we give ourselves the permission to be a human</li></ul></li></ol><h3><span id="5-happiness-is-and-ought-to-be-the-ultimate-end-vs-happiness-should-be-a-secondary-pursuit">5. Happiness is and ought to be the ultimate end Vs. Happiness should be a secondary pursuit</span><a href="#5-happiness-is-and-ought-to-be-the-ultimate-end-vs-happiness-should-be-a-secondary-pursuit" class="header-anchor">Â¶</a></h3><p>ç†ç”±ï¼š1. å¯¹è‡ªå·±å¥½ï¼›2.å¯¹å‘¨å›´çš„äººå¥½</p><p>æƒ…ç»ªå˜åŒ–</p><p>Downward spiral: narrow and constrict -&gt; sad emotions</p><p>Upward spiral: build and broaden -&gt; positive emotions</p><ul><li>olc:è¿™ä¸ªæƒ…ç»ªå˜åŒ–çš„å¾ªç¯æˆ‘åº”è¯¥åœ¨ä¸­å­¦æ—¶å°±è§è¿‡ï¼Œåªæ˜¯å½“æ—¶ä»æ—§åœç•™åœ¨ç†è®ºä¸Šï¼Œä¸æ‡‚æ€ä¹ˆäº§ç”Ÿç§¯ææƒ…ç»ªäºæ˜¯é™·åœ¨é•¿æœŸçš„è´Ÿé¢æƒ…ç»ªé‡Œä¸å¯è‡ªæ‹”ã€‚åªçŸ¥é“è¿™ä¸ªå¾ªç¯ä»æ—§ä¸å¤Ÿï¼Œé‡ç‚¹æ˜¯å¦‚ä½•æ”¹å˜ã€‚</li></ul><h3><span id="reminder">reminder</span><a href="#reminder" class="header-anchor">Â¶</a></h3><p>ä¾‹å­ï¼šTalç»™å‡ºäº†å‡ ä¸ªåšåŠ¨ä½œçš„æŒ‡ä»¤å¹¶è‡ªå·±ç»™å‡ºäº†ç¤ºèŒƒï¼Œå­¦ç”Ÿå¤§å¤šæ ¹æ®Talçš„åŠ¨ä½œæ¥åšè€Œä¸æ˜¯ä»–è¯´çš„æŒ‡ä»¤ã€‚</p><ul><li>leading by example: people do what you do, not what you say</li></ul><p>æœ‰è¶£çš„æ¦‚å¿µï¼š</p><ol><li>Constrained view vs unconstrained view of human nature</li><li>pink elephant</li><li>è¿‡åº¦æ€è€ƒè´Ÿé¢æƒ…ç»ª Vs. é™å¿ƒæ²‰æ€</li><li>Be the change you want to see in the world.</li></ol>]]></content>
      
      
      <categories>
          
          <category> HASS </category>
          
          <category> positive psychology </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æˆ‘ä»¬å†…å¿ƒçš„å†²çª</title>
      <link href="/sg/2021/12/09/innerconflicts/"/>
      <url>/sg/2021/12/09/innerconflicts/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#shen-jing-zheng-chong-tu-he-chu-li-de-chang-shi">ç¥ç»ç—‡å†²çªå’Œå¤„ç†çš„å°è¯•</a><ul><li><a href="#shen-jing-zheng-chong-tu-de-tong-ku-he-ji-ben-chong-tu">ç¥ç»ç—‡å†²çªçš„ç—›è‹¦å’ŒåŸºæœ¬å†²çª</a></li><li><a href="#si-chong-chang-shi">å››ç§å°è¯•</a></li><li><a href="#hui-bi-ren">å›é¿äºº</a></li></ul></li><li><a href="#wei-jie-jue-chong-tu-de-hou-guo">æœªè§£å†³å†²çªçš„åæœ</a><ul><li><a href="#kong-ju">ææƒ§</a></li><li><a href="#ren-ge-wei-suo">äººæ ¼èç¼©</a></li><li><a href="#jue-wang">ç»æœ›</a></li></ul></li></ul><!-- tocstop --></div><p>å‰è¨€ï¼šæˆ‘ç°åœ¨æœ€å–œæ¬¢çš„å›¾å½¢æ˜¯ä¸€ä¸ªèºæ—‹ä¸Šå‡çš„åœ†ï¼Œäººåœ¨ç”Ÿæ´»ä¸­æ€»æ˜¯å‡ºç°ä¼¼æ›¾ç›¸è¯†çš„èƒŒæ™¯ï¼Œä¸ä¸€æ ·çš„æ•…äº‹å†…æ ¸éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯æˆ‘ä»¬åœ¨ä¸åŒçš„é˜¶æ®µåšå‡ºäº†æ€æ ·çš„é€‰æ‹©ï¼Œé‡‡å–äº†æ€æ ·çš„è¡ŒåŠ¨ï¼Œå¯¼è‡´äº†æ€æ ·çš„ç»“æœã€‚è¿™æœ¬ä¹¦æˆ‘åœ¨20å¹´æš‘å‡çœ‹å®Œå¹¶åšäº†ç¬”è®°ï¼Œå½“æ—¶çš„å¾ˆå¤šæƒ³æ³•è™½ç„¶æ„å›¾è‰¯å–„ï¼Œä½†æ˜¯ä»æœ‰äº›å¹¼ç¨šå’Œè¿‡äºæƒ…æ„ŸåŒ–ï¼Œä¸è¿‡ç¬”è®°ä¸­çš„å†…å®¹ä»ç„¶ç•™æœ‰å¾ˆå¤§çš„æ€è€ƒå’Œè¡ŒåŠ¨ç©ºé—´ã€‚ä¸€ä¸ªäººè¦ä¹ˆæ²‰æµ¸åœ¨å¤±è´¥é‡Œï¼Œè¦ä¹ˆä»å¤±è´¥ä¸­èµ°å‡ºæ¥ã€‚å¸Œæœ›æˆ‘é‡‡å–çš„è¡ŒåŠ¨èƒ½å¤Ÿè®©æˆ‘èµ°å‡ºç°åœ¨çš„è°œå›¢ã€‚</p><hr><p>æˆ‘é€‰å–äº†ç›¸å…³åº¦è¾ƒé«˜çš„ç« èŠ‚é˜…è¯»ï¼ŒåŒ…æ‹¬å¯¹ç¥ç»ç—‡å†²çªå’Œå¤„ç†çš„å°è¯•çš„äº†è§£ä»¥åŠæœªè§£å†³å†²çªåæœä¸­çš„ææƒ§ï¼Œäººæ ¼èç¼©å’Œç»æœ›éƒ¨åˆ†ã€‚</p><p>è¿™æ— ç–‘æ˜¯è¿‘å¹´æˆ‘æ‰€è¯»åˆ°çš„å¯¹æˆ‘å½±å“æœ€å¤§çš„ä¸€æœ¬ä¹¦ã€‚æˆ‘ä¸èƒ½æ–­è¨€è‡ªå·±æ˜¯å¦æ˜¯ç¥ç»ç—‡çš„ä¸€å‘˜ï¼Œä½†ä½œè€…å¯¹å†…å¿ƒå†²çªçš„ç»†è‡´åˆ†æï¼ˆè™½ç„¶å¥¹è¯´åªä½œä¸ºåˆ†æè§’åº¦å‡ºå‘ä¸ä¸€å®šèƒ½è§£å†³å®é™…é—®é¢˜ï¼Œä½†å¥¹æ˜æ˜¾ä¸ºè§£å†³å†…å¿ƒå†²çªæä¾›äº†å¯èƒ½ï¼‰è®©æˆ‘æ˜ç™½å¯¹å¾…å†…å¿ƒå†²çªæ‰€åº”é‡‡å–çš„æ€åº¦å’Œè¡ŒåŠ¨ã€‚</p><blockquote><p>è€Œæˆ‘çš„è§‚ç‚¹æ˜¯ï¼Œä¸€ä¸ªäººæ„¿æ„å¹¶ä¸”ä¹Ÿæœ‰èƒ½åŠ›å»å‘å±•ä»–çš„æ½œèƒ½ï¼ŒåŠªåŠ›æˆä¸ºä¸€ä¸ªæ›´ä¼˜ç§€çš„äººã€‚ä½†æ˜¯ï¼Œå¦‚æœä»–ä¸åˆ«äººã€ä¸è‡ªå·±çš„å…³ç³»ä¸æ–­å—åˆ°å¹²æ‰°ï¼Œä»–çš„è¿™ç§æ½œèƒ½å¯èƒ½å°±ä¼šä¸§å¤±æ®†å°½ã€‚æˆ‘ç›¸ä¿¡äººæ˜¯ä¼šæ”¹å˜çš„ï¼Œäººåªè¦æ´»ç€ï¼Œå°±ä¼šä¸æ–­åœ°æ”¹å˜ã€‚è€Œä¸”ï¼Œéšç€ç†è§£çš„ä¸æ–­æ·±å…¥ï¼Œæˆ‘å¯¹è¿™ä¸€ä¿¡å¿µè¶Šå‘åšå®šã€‚</p></blockquote><h2><span id="shen-jing-zheng-chong-tu-he-chu-li-de-chang-shi">ç¥ç»ç—‡å†²çªå’Œå¤„ç†çš„å°è¯•</span><a href="#shen-jing-zheng-chong-tu-he-chu-li-de-chang-shi" class="header-anchor">Â¶</a></h2><h3><span id="shen-jing-zheng-chong-tu-de-tong-ku-he-ji-ben-chong-tu">ç¥ç»ç—‡å†²çªçš„ç—›è‹¦å’ŒåŸºæœ¬å†²çª</span><a href="#shen-jing-zheng-chong-tu-de-tong-ku-he-ji-ben-chong-tu" class="header-anchor">Â¶</a></h3><p>äººäººéƒ½æœ‰çŸ›ç›¾ã€‚æ ¹æ®çŸ›ç›¾åšå‡ºå†³ç­–çš„å‰ææ˜¯å¯¹è‡ªå·±è§‚å¿µçš„æ¸…æ¥šè®¤çŸ¥å’Œæ„è¯†åˆ°å†²çªæ—¶åšå‡ºé€‰æ‹©å’Œä¸ºé€‰æ‹©æ‰¿æ‹…è´£ä»»çš„æ„æ„¿å’Œèƒ½åŠ›ã€‚</p><p>ç¥ç»ç—‡æ‚£è€…ï¼šæŒ‡è¾¾åˆ°ç—…æ€ç¨‹åº¦çš„äººï¼Œå¯¹è‡ªå·±æƒ…æ„Ÿå’Œæ„¿æœ›çš„æ„è¯†éå¸¸å¼±ï¼Œå”¯ä¸€èƒ½æ¸…æ™°ä½“éªŒåˆ°çš„æƒ…æ„Ÿå°±æ˜¯ææƒ§å’Œæ„¤æ€’ã€‚åœ¨å¼ºè¿«æ€§å€¾å‘çš„æ§åˆ¶ä¸‹ï¼Œæ‚£è€…å¤±å»äº†å†³å®šæ–¹å‘ï¼Œæ”¾å¼ƒå†³å®šå’Œæ‰¿æ‹…è´£ä»»çš„èƒ½åŠ›ã€‚</p><p>ç¥ç»ç—‡å†²çªä½¿äººç—›è‹¦çš„åŸå› ï¼šå®ƒä»¬éš¾ä»¥è¯†åˆ«ï¼Œå…·æœ‰è¶³å¤Ÿçš„ç ´åæ€§ã€‚</p><p>ä¸ºåº”å¯¹ç¯å¢ƒæ‰€é‡‡å–çš„åŸºæœ¬è¡ŒåŠ¨ï¼šäº²è¿‘äººï¼Œå¯¹æŠ—äººï¼Œå›é¿äººã€‚åˆ†åˆ«åæ˜ äº†ç„¦è™‘çš„æŸä¸€ä¸ªå…ƒç´ ï¼šæ— åŠ©ï¼Œæ•Œæ„ï¼Œå­¤ç«‹ã€‚ä¸‰ç§å€¾å‘å¿…å®šéƒ½ä¼šå‡ºç°ã€‚æˆ‘ä»¬çœ‹åˆ°çš„åªæ˜¯å…¶ä¸­å ä¸»å¯¼åœ°ä½çš„å€¾å‘ã€‚æ­£å¸¸äººå’Œç¥ç»ç—‡æ‚£è€…çš„åŒºåˆ«åœ¨äºè¿™ä¸‰ç§æ€åº¦æ˜¯å¦äº’ç›¸æ’æ–¥ã€‚</p><blockquote><p>å®ƒçš„åŠ¨åŠ›æ ¸å¿ƒå°±æ˜¯ä¸‰ç§æ€åº¦ä¹‹é—´çš„åŸºæœ¬å†²çªï¼Œå³â€œäº²è¿‘äººâ€â€œå¯¹æŠ—äººâ€å’Œâ€œå›é¿äººâ€ã€‚æ‚£è€…ä¸€æ–¹é¢å®³æ€•è‡ªå·±å‡ºç°åˆ†è£‚ï¼Œå¦ä¸€æ–¹é¢åˆå¿…é¡»ä½œä¸ºä¸€ä¸ªæ•´ä½“å‘æŒ¥åŠŸèƒ½ï¼Œæ‰€ä»¥ä»–ä¾¿ä¸é¡¾ä¸€åˆ‡åœ°å°è¯•å¤„ç†å†²çªã€‚å°½ç®¡ä»–å¯ä»¥åˆ¶é€ å‡ºä¸€ç§äººä¸ºçš„å¹³è¡¡ï¼Œä½†æ–°çš„å†²çªä¸æ–­äº§ç”Ÿï¼Œå¹¶ä¸æ–­è¦æ±‚é‡‡å–è¿›ä¸€æ­¥çš„è¡¥æ•‘æªæ–½ã€‚åœ¨è¿™åœºè¿½æ±‚æ•´ä½“æ€§çš„æ–—äº‰ä¸­ï¼Œæ¯ä¸€æ­¥éƒ½ä½¿ç¥ç»ç—‡æ‚£è€…å˜å¾—æ›´åŠ æ•Œå¯¹ï¼Œæ›´åŠ ç»æœ›ï¼Œæ›´åŠ ææƒ§ï¼Œæ›´åŠ ç–è¿œè‡ªå·±å’Œä»–äººã€‚å…¶ç»“æœä¾¿æ˜¯ï¼Œè¿™äº›å†²çªé€ æˆçš„å›°éš¾è¶Šæ¥è¶Šå¤šï¼ŒçœŸæ­£çš„è§£å†³åŠæ³•å´è¶Šæ¥è¶Šå°‘ã€‚æ‚£è€…æœ€ç»ˆå˜å¾—ç»æœ›ï¼Œå°±è¯•å›¾åœ¨æ–½è™è¡Œä¸ºä¸­å¯»æ±‚è¡¥å¿ï¼Œè€Œè¿™åè¿‡æ¥åˆå¢åŠ äº†ä»–çš„ç»æœ›ï¼Œäº§ç”Ÿäº†æ–°çš„å†²çªã€‚</p></blockquote><p>è¿™äº›æ€åº¦ä»äººé™…å…³ç³»æ¸—é€åˆ°æ•´ä¸ªäººæ ¼ä¸­ï¼Œæœ€ç»ˆä¸ä»…æ”¯é…ç€æ‚£è€…ä¸åˆ«äººçš„å…³ç³»ï¼Œè€Œä¸”æ§åˆ¶ç€ä»–ä¸è‡ªå·±å’Œæ•´ä¸ªç”Ÿæ´»çš„å…³ç³»ã€‚</p><blockquote><p>å†²çªå¼€å§‹äºæˆ‘ä»¬ä¸åˆ«äººçš„å…³ç³»ï¼Œæœ€ç»ˆä¼šå½±å“æˆ‘ä»¬çš„æ•´ä¸ªäººæ ¼ï¼Œè¿™å¹¶ä¸æ˜¯å¶ç„¶çš„ã€‚äººé™…å…³ç³»é‡è¦åˆ°èƒ½å¤Ÿå¡‘é€ æˆ‘ä»¬å‘å±•çš„å“è´¨ï¼Œå½±å“æˆ‘ä»¬è®¾å®šçš„ç›®æ ‡ï¼Œå¼•å¯¼æˆ‘ä»¬ä¿¡ä»°çš„ä»·å€¼è§‚ã€‚è€Œæ‰€æœ‰è¿™ä¸€åˆ‡ï¼Œåè¿‡æ¥åˆä¼šä½œç”¨äºæˆ‘ä»¬ä¸åˆ«äººçš„å…³ç³»ï¼Œå®ƒä»¬æ˜¯ä¸å¯åˆ†å‰²åœ°äº¤ç»‡åœ¨ä¸€èµ·çš„ã€‚</p></blockquote><p>ç¥ç»ç—‡çš„æ ¸å¿ƒï¼šç”±ä¸ç›¸å®¹çš„æ€åº¦äº§ç”Ÿçš„å†²çªã€‚ç¥ç»ç—‡æ˜¯äººé™…å…³ç³»ç´Šä¹±çš„ä¸€ç§è¡¨ç°ã€‚</p><h3><span id="si-chong-chang-shi">å››ç§å°è¯•</span><a href="#si-chong-chang-shi" class="header-anchor">Â¶</a></h3><blockquote><p>ç¬¬ä¸€ç§å°è¯•æ˜¯æ©ç›–æŸä¸€éƒ¨åˆ†å†²çªï¼Œå¹¶ä½¿å…¶å¯¹ç«‹é¢å æ®ä¸»å¯¼åœ°ä½ã€‚ç¬¬äºŒç§å°è¯•æ˜¯â€œå›é¿äººâ€ã€‚æˆ‘ä»¬ç°åœ¨å¯¹ç¥ç»ç—‡å­¤åƒ»çš„åŠŸèƒ½æœ‰äº†æ–°çš„è®¤è¯†ã€‚å­¤åƒ»æ˜¯åŸºæœ¬å†²çªçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯ä¸€ç§å¯¹å¾…åˆ«äººçš„åŸå§‹çš„çŸ›ç›¾æ€åº¦ï¼›å®ƒåŒæ—¶ä¹Ÿè¡¨ç°å‡ºå¤„ç†å†²çªçš„æ„å›¾ï¼Œåœ¨è‡ªæˆ‘å’Œä»–äººä¹‹é—´ä¿æŒæƒ…æ„Ÿè·ç¦»ï¼Œä½¿å†²çªåœæ­¢è¿ä½œã€‚ç¬¬ä¸‰ç§å°è¯•åœ¨æ€§è´¨ä¸Šæœ‰å¾ˆå¤§ä¸åŒã€‚ç¥ç»ç—‡æ‚£è€…æ²¡æœ‰â€œå›é¿äººâ€ï¼Œè€Œæ˜¯å›é¿ä»–è‡ªå·±ã€‚ä»–çš„æ•´ä¸ªç°å®è‡ªæˆ‘åœ¨æŸç§ç¨‹åº¦ä¸Šå¯¹ä»–æ¥è¯´æ˜¯ä¸çœŸå®çš„ï¼Œä»–åˆ›é€ äº†ä¸€ä¸ªç†æƒ³åŒ–çš„è‡ªæˆ‘å½¢è±¡æ¥å–ä»£çœŸå®è‡ªæˆ‘ã€‚åœ¨è¿™ä¸ªç†æƒ³åŒ–çš„å½¢è±¡ä¸­ï¼Œç›¸äº’å†²çªçš„éƒ¨åˆ†å¾—åˆ°äº†ç¾åŒ–ï¼Œå†²çªä¸å†è¡¨ç°ä¸ºå†²çªï¼Œè€Œåƒæ˜¯ä¸€ä¸ªä¸°å¯Œäººæ ¼ä¸­çš„å„ä¸ªæ–¹é¢ã€‚è¿™ä¸€æ¦‚å¿µå¸®åŠ©æˆ‘ä»¬æ¾„æ¸…äº†è®¸å¤šè¿„ä»Šä¸ºæ­¢æ— æ³•ç†è§£å¹¶å› æ­¤æ—  æ³•æ²»ç–—çš„ç¥ç»ç—‡é—®é¢˜ã€‚å®ƒä¹Ÿä½¿å¾—èµ·åˆéš¾ä»¥èåˆçš„ä¸¤ç§ç¥ç»ç—‡å€¾å‘å„å½’å…¶ä½ã€‚ç°åœ¨çœ‹æ¥ï¼Œå¯¹å®Œç¾çš„éœ€æ±‚ä¼¼ä¹å°±æ˜¯æ‚£è€…ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç†æƒ³åŒ–å½¢è±¡è€Œåšå‡ºçš„åŠªåŠ›ï¼›è€Œå¯¹è¢«èµç¾çš„æ¸´æ±‚å¯ä»¥çœ‹ä½œæ‚£è€…éœ€è¦å¤–ç•Œè‚¯å®šä»–å’Œä»–çš„ç†æƒ³åŒ–å½¢è±¡æ˜¯ä¸€è‡´çš„ã€‚ä»é€»è¾‘ä¸Šè®²ï¼Œè¿™ç§å½¢è±¡ä¸ç°å®çš„å·®è·è¶Šå¤§ï¼Œæ‚£è€…çš„éœ€æ±‚å°±è¶Šéš¾ä»¥æ»¡è¶³ã€‚åœ¨æ‰€æœ‰å¤„ç†å†²çªçš„å°è¯•ä¸­ï¼Œè¿™ç§ç†æƒ³åŒ–çš„å½¢è±¡å¯èƒ½æ˜¯æœ€é‡è¦çš„ï¼Œå› ä¸ºå®ƒå¯¹æ•´ä¸ªäººæ ¼æœ‰ç€æ·±è¿œçš„å½±å“ã€‚ä½†åè¿‡æ¥ï¼Œå®ƒåˆäº§ç”Ÿäº†æ–°çš„å†…å¿ƒè£‚ç—•ï¼Œå› æ­¤éœ€è¦è¿›ä¸€æ­¥çš„ä¿®è¡¥ã€‚ç¬¬å››ç§å°è¯•ä¸»è¦æ˜¯ä¸ºäº†æ¶ˆé™¤è¿™ä¸€è£‚ç—•ï¼Œå®ƒä¹Ÿé¡ºå¸¦æ¶ˆé™¤äº†å…¶ä»–çš„å†²çªã€‚é€šè¿‡æˆ‘æ‰€ç§°ä½œçš„â€œå¤–åŒ–ä½œç”¨â€ï¼Œæ‚£è€…åœ¨è‡ªæˆ‘ä¹‹å¤–æ‰€å‘ç”Ÿçš„äº‹ä»¶ä¸­ä½“éªŒä»–çš„å†…å¿ƒæ´»åŠ¨ã€‚å¦‚æœè¯´ç†æƒ³åŒ–å½¢è±¡æ„å‘³ç€ä¸çœŸå®è‡ªæˆ‘åªæœ‰ä¸€æ­¥ä¹‹é¥ï¼Œé‚£ä¹ˆå¤–åŒ–ä½œç”¨åˆ™ä»£è¡¨äº†ä¸çœŸå®è‡ªæˆ‘çš„å½»åº•å›ç¦»ã€‚å®ƒå†æ¬¡åˆ¶é€ äº†æ–°çš„å†²çªï¼Œæˆ–è€…æ›´ç¡®åˆ‡åœ°è¯´ï¼Œå¤§å¤§å¢å¼ºäº†åŸæœ‰çš„å†²çªï¼Œå³è‡ªæˆ‘å’Œå¤–ç•Œä¹‹é—´çš„å†²çªã€‚</p></blockquote><h3><span id="hui-bi-ren">å›é¿äºº</span><a href="#hui-bi-ren" class="header-anchor">Â¶</a></h3><p>é¦–å…ˆè¦æ„è¯†åˆ°ç¥ç»ç—‡æ€§è´¨çš„å­¤åƒ»å’Œå„’å®¶æ€æƒ³ä¸­çš„çš„ç‹¬å¤„çš„åŒºåˆ«ã€‚åªæœ‰åœ¨äººé™…äº¤å¾€ä¸­å‡ºç°äº†æ— æ³•å¿å—çš„ç´§å¼ ï¼Œç‹¬å¤„å˜æˆä¸»è¦çš„é€ƒé¿æ‰‹æ®µæ—¶ï¼Œç‹¬å¤„æ‰æ˜¯ç¥ç»ç—‡å­¤åƒ»çš„è¡¨ç°ã€‚</p><p>ä¸¥é‡å­¤åƒ»çš„äººçš„è¡¨ç°ï¼šå¯¹åˆ«äººçš„æ™®éç–è¿œï¼›ä¸è‡ªæˆ‘çš„ç–è¿œï¼Œå¯¹æƒ…æ„Ÿä½“éªŒçš„éº»æœ¨ï¼Œå¯¹è‡ªå·±æ˜¯è°ï¼Œå¯¹è‡ªå·±çš„çˆ±ï¼Œæ¨ï¼Œæ¬²æœ›ï¼Œå¸Œæœ›ï¼Œææƒ§ï¼Œæ€¨æ¨ï¼Œä¿¡ä»°çš„ä¸ç¡®å®šï¼›ä»–ä»¬å†…å¿ƒéœ€è¦ä¸è‡ªå·±ï¼Œä¸åˆ«äººä¿æŒæƒ…æ„Ÿè·ç¦»ã€‚</p><blockquote><p>ä»–ä»¬å¯¹è‡ªå·±éƒ½æŒâ€œæ—è§‚è€…â€æ€åº¦ï¼Œä¸€å¦‚ä»–ä»¬å¯¹å¾…ç”Ÿæ´»çš„æ€åº¦ã€‚ä»–ä»¬å¾€å¾€æ˜¯è‡ªå·±å†…å¿ƒæ´»åŠ¨çš„å‡ºè‰²è§‚å¯Ÿå‘˜ã€‚ä¸€ä¸ªçªå‡ºçš„ä¾‹å­å°±æ˜¯ï¼Œä»–ä»¬ç»å¸¸å¯¹æ¢¦ä¸­çš„è±¡å¾è¡¨ç°å‡ºæƒŠäººçš„ç†è§£åŠ›ã€‚</p></blockquote><p>å­¤åƒ»å‹æ‚£è€…çš„éœ€è¦ï¼š</p><ul><li><p>ä¸»è¦éœ€æ±‚ï¼šä¸å‚ä¸ã€‚è¡¨ç°çš„ç‰¹å¾ä¸ºå¯¹ç‹¬ç«‹çš„éœ€è¦ã€‚èƒ½åšçš„äº‹æƒ…ä¸èƒ½åšçš„äº‹æƒ…éƒ½å€¾å‘äºè‡ªå·±ç‹¬ç«‹å®Œæˆï¼Œæ°¸è¿œä¸å¯¹ä»»ä½•äººå’Œäº‹äº§ç”Ÿå¼ºçƒˆçš„ä¾æ‹ä»¥è‡³å…¶ä¸å¯æˆ–ç¼ºã€‚</p></li><li><p>å…¶å®ƒéœ€è¦ï¼šä¿æŠ¤è‡ªå·±éšç§ï¼›</p></li></ul><p>ä¼˜è¶Šæ„Ÿï¼Œå­¤åƒ»å’Œä¼˜è¶Šçš„è”ç³»åœ¨äº-&gt;å¦‚æœä¸æ˜¯çœŸçš„ç‰¹åˆ«å¼ºå¤§å’Œè¶³æ™ºå¤šè°‹ï¼Œæˆ–è€…æ„Ÿè§‰è‡ªå·±å‡ºç±»æ‹”èƒï¼Œææ€•æ²¡æœ‰äººèƒ½å¤Ÿå¿å—å­¤ç«‹ã€‚</p><p>å­¤åƒ»è€…å¯¹ä¼˜è¶Šæ„Ÿéœ€æ±‚çš„ç‹¬ç‰¹æ€§åœ¨äºä»–è®¨åŒç«äº‰ï¼Œä¸æ„¿æ„ä»˜å‡ºåŠªåŠ›å»è¶…è¶Šåˆ«äººï¼›å¦ä¸€ç§è¡¨ç°ä¸ºä»–è®¤ä¸ºè‡ªå·±æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œæ‹’ä¸æ¥å—ä»»ä½•å¤–æ¥å› ç´ ã€‚</p><p>æˆ‘è®¤ä¸ºè¿™ä¸¤ç‚¹æ˜¯æˆ‘15å²å¼€å§‹åœæ»ä¸å‰çš„ä¸»è¦åŸå› ï¼Œtoo young too naiveï¼Œå°‘æ—¶è‡ªæˆ‘æ²¡æœ‰å¤ªå¤šå†…å®¹ï¼Œæ›´å¤šçš„åªæ˜¯ä¸€äº›æµ…æ˜¾çš„æ¦‚å¿µã€‚è€Œç”±äºå¯¹å¤–åœ¨é™Œç”Ÿç¯å¢ƒçš„æƒ§æ€•å’Œæ— æ‰€é€‚ä»ï¼Œä»¥åŠå¯¹è¿™ç§ä¸é€‚åº”çš„æ©é¥°é€æ­¥å½±å“åˆ°äººé™…å…³ç³»ã€‚</p><blockquote><p>å½“å­¤åƒ»å‹æ‚£è€…çš„ä¼˜è¶Šæ„Ÿè¢«æš‚æ—¶ç²‰ç¢æ—¶ï¼Œæ— è®ºæ˜¯å› ä¸ºå…·ä½“çš„å¤±è´¥è¿˜æ˜¯å†…å¿ƒå†²çªçš„åŠ å‰§ï¼Œä»–éƒ½æ— æ³•å†å»å¿å—å­¤ç‹¬ï¼Œè€Œä¼šç–¯ç‹‚åœ°å¯»æ±‚å…³çˆ±å’Œä¿æŠ¤ã€‚è¿™ç§åŠ¨è¡åœ¨ä»–çš„äººç”Ÿå†ç¨‹ä¸­ä¼šç»å¸¸å‡ºç°ã€‚åœ¨ä»–åå‡ å²æˆ–äºŒåå‡ºå¤´çš„æ—¶å€™ï¼Œä»–å¯èƒ½æœ‰è¿‡ä¸€äº›ä¸å†·ä¸çƒ­çš„å‹è°Šï¼Œä½†æ€»ä½“ä¸Šè¿‡ç€ç›¸å¯¹å­¤ç«‹çš„ç”Ÿæ´»ï¼Œæ„Ÿè§‰è‡ªç”±è‡ªåœ¨ã€‚ä»–ç»å¸¸å¹»æƒ³æœªæ¥ï¼Œè‡ªå·±ä¼šæˆå°±éå‡¡çš„äº‹ä¸šã€‚ä½†åæ¥ï¼Œè¿™äº›æ¢¦æƒ³åœ¨ç°å®çš„å²©çŸ³ä¸Šæ‘”å¾—ç²‰ç¢ã€‚å°½ç®¡åœ¨é«˜ä¸­æ—¶ï¼Œä»–æ— å¯äº‰è¾©çš„æ˜¯ç¬¬ä¸€åï¼Œä½†åœ¨å¤§å­¦ï¼Œä»–é‡åˆ°äº†æ¿€çƒˆçš„ç«äº‰å¹¶è¢«å‡»è´¥ã€‚ä»–çš„ç¬¬ä¸€æ¬¡æ‹çˆ±ä¹Ÿå¤±è´¥äº†ã€‚æˆ–è€…ï¼Œéšç€å¹´é¾„çš„å¢é•¿ï¼Œä»–æ„è¯†åˆ°è‡ªå·±çš„æ¢¦æƒ³æ˜¯éš¾ä»¥å®ç°çš„ã€‚ç„¶åï¼Œå­¤ç‹¬ç¦»ç¾¤å˜å¾—ä»¤ä»–éš¾ä»¥å¿å—ï¼›åœ¨æŸç§å¼ºè¿«æ€§åŠ›é‡çš„é©±åŠ¨ä¸‹ï¼Œä»–å¼€å§‹æ¸´æ±‚äº²å¯†å…³ç³»ã€æ€§å…³ç³»ä»¥åŠå©šå§»ã€‚åªè¦æœ‰äººçˆ±ä»–ï¼Œä»–å®æ„¿å‘èº¬å±ˆè†ã€‚</p></blockquote><p>æˆ‘è®¤ä¸ºè‡ªå·±ç¡®å®å­˜åœ¨ä¸åˆ«äººä¿æŒæƒ…æ„Ÿè·ç¦»ï¼Œä»¥é¿å…å†²çªæˆ–æ›´åŠ äº²å¯†ï¼›ä¹Ÿç¡®å®å¸Œæœ›å°½å¯èƒ½å•å‡­ç†æ€§è§£å†³é—®é¢˜ã€‚å¯æˆ‘ä¸è®¤ä¸ºè¿™ç§çŠ¶æ€æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œæœ€å¤šåªæ˜¯åœ¨ç°åœ¨è¿™ä¸€äººç”Ÿé˜¶æ®µæŒç»­ç€ï¼Œä¹Ÿæœ‰å¯èƒ½å› ä¸ºæŸäººæˆ–æŸäº‹æ”¹å˜ã€‚ä¸è¿‡è¿™åº”è¯¥ä¹Ÿå±äºä½œè€…å¯¹å­¤åƒ»ç—‡æ‚£è€…æœ‰å›ºæœ‰çš„æƒ…æ„Ÿå€¾å‘çš„èŒƒç•´ã€‚ä½œè€…è¯´çš„å­¤åƒ»è€…å¯¹ç‹¬ç«‹æœ‰æ­‡æ–¯åº•é‡Œçš„æ€åº¦ï¼Œä¸ºæ­¤å¯åšå‡ºä»»ä½•ç‰ºç‰²ï¼Œå¯ä»¥æŠ›å¼ƒå…¨éƒ¨å¤–åœ¨åˆ©ç›Šå’Œå†…åœ¨ä»·å€¼ã€‚æˆ‘å¯¹ç‹¬ç«‹æ²¡æœ‰åˆ°è¿™ä¸€æç«¯çš„ç¨‹åº¦ï¼Œç‹¬ç«‹å’Œä¾èµ–åœ¨æˆ‘çœ‹æ¥ä¹Ÿä¸æ˜¯éæ­¤å³å½¼çš„å…³ç³»ã€‚è¿™éœ€è¦å› äººï¼ˆæ‰€å¯¹å¾…çš„äººï¼‰è€Œå®œã€‚</p><p>Update: è¿™æ®µè¯å³ä½¿æ˜¯ç°åœ¨çœ‹ä¹Ÿä»ç„¶å¾ˆä»¤äººè­¦é†’ã€‚è™½ç„¶æˆ‘åº”è¯¥ä¸æ˜¯å­¤åƒ»è€…ï¼Œä¹Ÿæ²¡æœ‰ä¼˜è¶Šæ„ŸğŸ™‚ï¸ã€‚</p><blockquote><p>å­¤åƒ»å‹æ‚£è€…çš„æƒ…æ„Ÿç”Ÿæ´»å¹¶ä¸åƒå…¶ä»–ç±»å‹é‚£æ ·éµå¾ªä¸¥æ ¼çš„æ¨¡å¼ã€‚è¿™ä¸€ç±»å‹çš„ä¸ªä½“å·®å¼‚è¾ƒå¤§ï¼Œä¸»è¦æ˜¯å› ä¸ºä¸åŒäºå…¶ä»–ä¸¤ç§ç±»å‹æœ‰ç€ç§¯æçš„ç›®æ ‡â€”â€”é¡ºä»å‹è¿½æ±‚å–œæ¬¢ã€äº²å¯†å’Œçˆ±ï¼Œæ”»å‡»å‹è¿½æ±‚ç”Ÿå­˜ã€æ§åˆ¶å’ŒæˆåŠŸâ€”â€”è€Œå­¤åƒ»å‹çš„ç›®æ ‡æ˜¯æ¶ˆæçš„ï¼šä»–ä¸æƒ³å‚ä¸å…¶ä¸­ï¼Œä¸éœ€è¦ä»»ä½•äººï¼Œä¸å…è®¸åˆ«äººå¹²æ¶‰æˆ–å½±å“ä»–ã€‚ä»–ä»¬çš„æƒ…æ„ŸçŠ¶æ€ä¾èµ–äºåœ¨æ¶ˆææ¡†æ¶ä¸‹å½¢æˆå’Œå‘å±•çš„ç‰¹æ®Šæ¬²æœ›ï¼Œè€Œä¸”åªä¼šå½¢æˆå°‘é‡å›ºæœ‰çš„å€¾å‘ã€‚</p></blockquote><p>æ¯ç§æ€åº¦éƒ½æœ‰ç§¯æä»·å€¼ã€‚ä½†åœ¨ç¥ç»ç—‡çš„ç»“æ„ä¸­å‡ºç°å¹¶è¿ä½œæ—¶ï¼Œä»–ä»¬ä¼šå˜å¾—ç›¸äº’æ’æ–¥ã€‚</p><blockquote><p>ä½œä¸ºä¼—å¤šåˆ›é€ è™šå‡å’Œè°çš„ç¥ç»ç—‡æ–¹å¼ä¹‹ä¸€ï¼Œè¿™æ˜¯ä¸€ç§é€šè¿‡é€ƒé¿æ¥å¤„ç†å†²çªçš„å°è¯•ã€‚ä½†è¿™ä¸æ˜¯çœŸæ­£çš„è§£å†³ä¹‹é“ï¼Œå› ä¸ºæ‚£è€…äº²è¿‘ã€æ§åˆ¶ã€åˆ©ç”¨å’Œè¶…è¶Šåˆ«äººçš„å¼ºè¿«æ€§éœ€æ±‚ä»ç„¶å­˜åœ¨ï¼Œåœ¨æ€ç»´ç˜«ç—ªä¹‹å‰ï¼Œä»–å°†æŒç»­å—å…¶éªšæ‰°ã€‚æœ€åï¼Œåªè¦ç›¸äº’çŸ›ç›¾çš„ä»·å€¼è§‚ç»§ç»­å­˜åœ¨ï¼Œä»–å°±æ°¸è¿œä¸èƒ½å®ç°çœŸæ­£çš„å†…å¿ƒå¹³é™å’Œè‡ªç”±ã€‚</p></blockquote><p>å¤–åŒ–ä½œç”¨ï¼šé€šè¿‡æŠŠé—®é¢˜å¤–åŒ–è€Œå¿½ç•¥å†…å¿ƒå†²çªçš„å­˜åœ¨ï¼Œæ— æ³•æŠŠè‡ªå·±æƒ³è±¡æˆä¸ªäººç”Ÿæ´»ä¸­çš„ç§¯ææ¨åŠ¨è€…ã€‚æ‚£è€…ä¸è‡ªæˆ‘çš„ç–è¿œåŠ å‰§äº†ä¸ªäººå’Œå¤–éƒ¨ä¸–ç•Œä¹‹é—´çš„å†²çªã€‚</p><p>è™šå‡å’Œè°ï¼šæ‹†ä¸œå¢™è¡¥è¥¿å¢™ã€‚é™¤éæœ€åˆå¯¼è‡´å›°éš¾çš„æ¡ä»¶è¢«å½»åº•æ”¹å˜å¦åˆ™å°±æ˜¯æ— æ•ˆçš„ã€‚</p><p>å›´ç»•åŸºæœ¬å†²çªè¿™ä¸€æ ¸å¿ƒå»ºç«‹èµ·æ¥çš„é˜²å¾¡æœºåˆ¶ï¼šç§°ä¸ºé˜²æŠ¤æ€§ç»“æ„ã€‚æ¯ç§ç¥ç»ç—‡éƒ½å½¢æˆäº†ä¸€å¥—é˜²å¾¡ç³»ç»Ÿï¼ŒåŒ…å«ä¸Šè¿°å½¢å¼ï¼Œæ´»è·ƒç¨‹åº¦ä¸åŒã€‚</p><h2><span id="wei-jie-jue-chong-tu-de-hou-guo">æœªè§£å†³å†²çªçš„åæœ</span><a href="#wei-jie-jue-chong-tu-de-hou-guo" class="header-anchor">Â¶</a></h2><h3><span id="kong-ju">ææƒ§</span><a href="#kong-ju" class="header-anchor">Â¶</a></h3><blockquote><p>é€šè¿‡å‹æŠ‘ã€ç†æƒ³åŒ–å’Œå¤–åŒ–çš„è¿‡ç¨‹ï¼Œæ‚£è€…å·²ç»å¤±å»äº†å¤§éƒ¨åˆ†çš„è‡ªæˆ‘ï¼›å³ä½¿è¿˜æ²¡æœ‰çœŸçš„å˜æˆå½±å­ï¼Œä½†ä»–æ„Ÿè§‰è‡ªå·±å°±åƒä¸€ä¸ªæ— è¶³è½»é‡ã€æ¯«æ— å†…æ¶µçš„å½±å­ã€‚ ä¸æ­¤åŒæ—¶ï¼Œä»–å¯¹åˆ«äººçš„éœ€è¦å’Œææƒ§ï¼Œä¸ä»…ä½¿ä»–ä»¬æ›´åŠ ä»¤äººç”Ÿç•ï¼Œè€Œä¸”æ›´åŠ ä¸å¯æˆ–ç¼ºã€‚</p></blockquote><p>å½“æ—¶æµ‘æµ‘å™©å™©åœ°ç™½å¤©ç¡è§‰ï¼Œæ™šä¸Šåˆ·å‰§çš„åŸå› å°±æ˜¯ä¸çŸ¥é“å¦‚ä½•é¢å¯¹å‘¨å›´ç¯å¢ƒçš„è¯„ä»·ï¼Œç´¢æ€§é‡‡å–äº†æ¼ è§†çš„æ€åº¦ã€‚å°è±¡æ¯”è¾ƒæ·±çš„åœºæ™¯æ—¶ä¸Šè¯¾ç¡è§‰ï¼Œå½“æ—¶åº”è¯¥åœ¨è®²å·å­æˆ‘æ²¡å†™ï¼Œç„¶åè¢«è€å¸ˆæŠ“åˆ°äº†ä½œä¸ºåé¢å…¸å‹ï¼Œé¡ºä¾¿å†è¯„è®ºäº†ä¸€ä¸‹æˆ‘ä¹‹åçš„äººç”Ÿå°±åªèƒ½è¿™æ ·äº†ã€‚</p><blockquote><p>è¿™æ ·åšçš„åæœæ˜¯ï¼Œæ‚£è€…è¿‡åº¦çœ‹é‡åˆ«äººå¯¹ä»–çš„è¯„ä»·ï¼Œè€Œè‡ªæˆ‘è¯„ä»·åˆ™å˜å¾—æ— å…³ç´§è¦ã€‚è¿™ä½¿å¾—åˆ«äººçš„æ„è§å¯¹ä»–å…·æœ‰ä¸€ç§å‹å€’æ€§çš„åŠ›é‡ã€‚</p></blockquote><p>è™½ç„¶å°šæœªåˆ°è¿™ç§ç¨‹åº¦ï¼Œä½†æ˜¯è¿™æ ·çš„åæœä¹Ÿè¶³å¤ŸæƒŠéª‡äº†ã€‚</p><blockquote><p>ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ç§ææƒ§çš„åæœå°±æ˜¯ä½¿ç¥ç»ç—‡æ‚£è€…è¿œç¦»åˆ«äººï¼Œå¹¶å¯¹åˆ«äººäº§ç”Ÿæ•Œæ„ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ç§ææƒ§ä½¿å—å…¶æŠ˜ç£¨çš„äººæ— æ³•æ–½å±•è‡ªå·±çš„æ‰èƒ½ã€‚ä»–ä»¬ä¸æ•¢å¯¹åˆ«äººæŠ±æœ‰æœŸæœ›ï¼Œä¹Ÿä¸æ•¢ä¸ºè‡ªå·±è®¾å®šè¿œå¤§ç†æƒ³ã€‚ä»–ä»¬ä¸æ•¢æ¥è¿‘é‚£äº›çœ‹èµ·æ¥æ¯”è‡ªå·±ä¼˜ç§€çš„äººï¼›ä»–ä»¬ä¸æ•¢å‘è¡¨æ„è§ï¼Œå³ä½¿è‡ªå·±å¯èƒ½å¾ˆæœ‰è§è§£ï¼›ä»–ä»¬ä¸æ•¢è¿ç”¨è‡ªå·±çš„åˆ›é€ åŠ›ï¼Œå³ä½¿è‡ªå·±æ‹¥æœ‰è¿™ç§èƒ½åŠ›ï¼›ä»–ä»¬ä¸æ•¢è®©è‡ªå·±å…·æœ‰å¸å¼•åŠ›ï¼Œä¸æ•¢è¯•å›¾ç»™äººç•™ä¸‹æ·±åˆ»å°è±¡ï¼Œä¹Ÿä¸æ•¢å¯»æ±‚æ›´å¥½çš„èŒä½ï¼Œç­‰ç­‰ã€‚å³ä½¿æœ‰æ—¶ä»–ä»¬åœ¨è¿™äº›æ–¹é¢è·ƒè·ƒæ¬²è¯•ï¼Œä½†æƒ³åˆ°è¢«äººå˜²ç¬‘çš„åœºæ™¯ä¾¿æœ›è€Œå´æ­¥ï¼Œé€€å›åˆ°è‡ªå·±çš„çŸœæŒå’Œè‡ªå°Šä¸­å¯»æ±‚æ…°è—‰ã€‚</p></blockquote><p>æˆ‘æƒ³è¦ï¼š</p><blockquote><p>å¦‚æœæˆ‘ä»¬æƒ³è¦æœ€ç»ˆè·å¾—äººæ ¼çš„æ•´åˆï¼Œå°±å¿…é¡»æŠŠè‡ªå·±æš´éœ²åœ¨ææƒ§é¢å‰ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿæ˜¯æˆ‘ä»¬ç›´é¢è‡ªå·±æ‰€é‡åˆ°çš„éšœç¢ã€‚å®ƒä»¬å¦‚åŒç‚¼ç‹±ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨é‚£é‡Œå¾˜å¾Šï¼Œæœ€åæ‰èƒ½å¾—åˆ°æ•‘èµã€‚</p></blockquote><h3><span id="ren-ge-wei-suo">äººæ ¼èç¼©</span><a href="#ren-ge-wei-suo" class="header-anchor">Â¶</a></h3><p><strong>å‹æŠ‘çš„éƒ¨åˆ†åŸºæœ¬å†²çª</strong>é€ æˆäº†ä¸ªäººç²¾åŠ›çš„éƒ¨åˆ†æ¶ˆè€—ã€‚</p><p>é€ æˆçš„ä¸»è¦å›°æ‰°æœ‰ï¼šçŠ¹è±«ä¸å†³ï¼›æ™®éçš„æ•ˆç‡ä½ä¸‹ï¼ˆå¼€è½¦çš„åŒæ—¶è¸©åˆ¹è½¦ï¼‰ï¼›æ™®éçš„æƒ°æ€§ã€‚</p><p>æœªè§£å†³çš„ç¥ç»ç—‡å†²çªæ‰€æµªè´¹çš„ç²¾åŠ›æ˜¯æ— æ³•ä¼°é‡çš„ã€‚</p><blockquote><p>ç¥ç»ç—‡æ‚£è€…å¯èƒ½è®¤ä¸ºï¼Œå¿…é¡»ä¸æ‡ˆåœ°åŠªåŠ›è¿™ä¸€äº‹å®è®©ä»–æ„Ÿåˆ°ç¾è¾±ï¼Œè¿™æ— å¼‚äºè¡¨ç¤ºä»–ä¸æ˜¯ä»–çš„ç†æƒ³åŒ–å½¢è±¡ï¼›ä¸€æƒ³åˆ°è¦ä»˜å‡ºä¸–ä¿—çš„åŠªåŠ›ï¼Œä»–å®æ„¿ä»€ä¹ˆä¹Ÿä¸åšï¼Œæ•´å¤©åœ¨å¹»æƒ³ä¸­å¤§å±•æ‹³è„šã€‚è‡ªå‘çš„æŠ˜ç£¨ä¼´éšç€ç†æƒ³åŒ–å½¢è±¡ï¼Œå‰¥å¤ºäº†ä»–çš„è‡ªä¿¡ï¼Œè®©ä»–è§‰å¾—è‡ªå·±åšä¸äº†ä»»ä½•æœ‰ä»·å€¼çš„äº‹ï¼Œä»è€ŒæŠŠæ‰€æœ‰çš„åŠ¨åŠ›å’Œä¹è¶£éƒ½åŸ‹åœ¨æµæ²™é‡Œã€‚</p></blockquote><p>ç†æƒ³</p><blockquote><p>æˆ‘æ–­è¨€ä»–å¹¶æ²¡æœ‰è®¤çœŸå¯¹å¾…è‡ªå·±çš„ç†æƒ³ï¼Œæ„æ€æ˜¯è¯´è¿™äº›ç†æƒ³å¯¹ä»–çš„ç”Ÿæ´»å¹¶æ²¡æœ‰çº¦æŸåŠ›ã€‚å½“ç†æƒ³å¾ˆå®¹æ˜“å®ç°æˆ–å¾ˆæœ‰ç”¨çš„æ—¶å€™ï¼Œä»–å°±ä¼šä»˜è¯¸è¡ŒåŠ¨ï¼Œä¸€æ—¦æ—¶è¿‡å¢ƒè¿ï¼Œä»–ä¾¿æŸä¹‹é«˜é˜ã€‚è€Œå¯¹è®¤çœŸå¯¹å¾…ç†æƒ³çš„äººæ¥è¯´ï¼Œè¿™ç§æƒ…å†µæ˜¯å¾ˆéš¾æƒ³è±¡çš„ã€‚<strong>å¦‚æœè¿™äº›ç†æƒ³æ˜¯çœŸå®çš„ï¼Œä»–ä»¬ä¸å¯èƒ½è½»æ˜“å°†å…¶æŠ›åˆ°ä¸€è¾¹ã€‚</strong></p></blockquote><p>è´£ä»»</p><blockquote><p>æˆ‘ä»¬è¯´çš„æ‰¿æ‹…è´£ä»»ï¼Œæ˜¯æŒ‡èƒ½å¤Ÿä¸ºæˆ‘ä»¬è®¤ä¸ºæ­£ç¡®çš„äº‹æƒ…æŒºèº«è€Œå‡ºï¼Œè€Œä¸”å½“æˆ‘ä»¬çš„è¡ŒåŠ¨æˆ–å†³å®šè¢«è¯æ˜æ˜¯é”™è¯¯æ—¶ï¼Œèƒ½å¤Ÿæ‰¿æ‹…åæœã€‚</p></blockquote><h3><span id="jue-wang">ç»æœ›</span><a href="#jue-wang" class="header-anchor">Â¶</a></h3><p>æ³¨è§£è¯´ç»æœ›æ¥è‡ªäºæ— æ³•æˆä¸ºè‡ªå·±ã€‚æˆ‘çš„ç¨‹åº¦åº”è¯¥æ²¡æœ‰è¿™ä¹ˆæ·±ï¼Œä¸§æ˜¯è‚¯å®šçš„ï¼Œä½†åªæœ‰æŸäº›æ—¶åˆ»æ‰ä¼šæœ‰è¿™æ ·çš„æ„Ÿè§‰ã€‚15-16æ—¶å­˜åœ¨æŸç§ç†æƒ³åŒ–å½¢è±¡ï¼Œä¸è¿‡å°±ç®—æ˜¯é‚£ä¸ªæ—¶å€™ä¹Ÿæ˜¯æå…¶æµ…æ˜¾çš„è®¤çŸ¥ï¼Œè¡ç”Ÿäº†å¾ˆå¤šæ— è°“çš„å¹»æƒ³ã€‚ä¸è¿‡æˆ‘è®¤ä¸ºè¿™ç§æƒ…å†µå¾ˆéš¾é¿å…ï¼Œç”±äºå¯¹ç¯å¢ƒçš„ä¸å¤Ÿå®Œå…¨çš„è®¤çŸ¥ï¼Œä¸ªäººåˆä¸¢å¤±äº†åŸºæœ¬çš„è¡ŒåŠ¨åŠ›ï¼Œåœåœèµ°èµ°ï¼Œç›´åˆ°è¿™ä¸ªçŠ¶æ€å½»åº•ä¸èƒ½ç»´æŒä¸‹å»ã€‚</p><blockquote><p>ä¸ä»…å¦‚æ­¤ï¼Œæ—¥å¸¸ç”Ÿæ´»ä¸­çš„å°æ„å¤–åœ¨ä»–å¤´è„‘ä¸­éƒ½çŠ¹å¦‚å¤§éš¾ä¸´å¤´ã€‚ä»»ä½•å¾®å°çš„å¤±è´¥éƒ½å¯èƒ½ä½¿ä»–é™·å…¥æŠ‘éƒï¼Œå› ä¸ºè¿™è¯æ˜äº†ä»–æ¯«æ— ä»·å€¼â€”â€”å³ä½¿å¤±è´¥æ˜¯ç”±ä¸å¯æ§çš„å› ç´ é€ æˆçš„ã€‚ä»»ä½•æ— ä¼¤å¤§é›…çš„æ‰¹è¯„éƒ½å¯èƒ½ä½¿ä»–å¿§å¿ƒå¿¡å¿¡æˆ–å‰æ€åæƒ³ï¼Œå¦‚æ­¤ç­‰ç­‰ã€‚ç»“æœï¼Œä»–æ¯”ä¸€èˆ¬äººæ›´ä¸å¿«ä¹ã€ æ›´ä¸æ»¡æ„ï¼Œè¿™å½“ç„¶æ˜¯åº¸äººè‡ªæ‰°ã€‚</p></blockquote><p>ç»æœ›è€…çš„æ€åº¦</p><blockquote><p>ç”Ÿå‘½æ˜¯ä¸€ç§æ°¸æ’çš„è´Ÿæ‹…ï¼Œä»–ä»¬è§æ€ªä¸æ€ªï¼Œä¹Ÿæ²¡æœ‰ä»€ä¹ˆæŠ±æ€¨ã€‚ä½†æ˜¯ï¼Œä»–ä»¬çš„æƒ…ç»ªæ°¸è¿œéƒ½å¤„äºä½è°·çš„çŠ¶æ€ã€‚</p></blockquote><blockquote><p>ä»–ä¸€ç›´å¤„äºè‡ªå·±æä¸æ»¡æ„çš„æƒ…å¢ƒä¸­ï¼Œæˆ–è®¸åªè¦ä»˜å‡ºä¸€ç‚¹åŠªåŠ›ï¼Œæ‹¿å‡ºä¸€ç‚¹ç§¯ææ€§ï¼Œè¿™ç§çŠ¶å†µå°±å¯ä»¥å¾—åˆ°æ”¹å–„ã€‚ä½†æ˜¯ï¼Œä»–å¯èƒ½å› ä¸ºç»æœ›è€Œå®Œå…¨ç˜«ç—ªï¼Œå¯¹ä»–è€Œè¨€ï¼Œæ­£å¸¸çš„å›°éš¾ä¼¼ä¹éƒ½æ˜¯ä¸å¯é€¾è¶Šçš„éšœç¢ã€‚</p></blockquote><p>ä»å¯¹å¾…ç»æœ›æ€åº¦åˆ°å¯¹å¾…ç¥ç»ç—‡æ€åº¦ï¼š<br>ç»æœ›ç”±å†…å¿ƒå†²çªå¼•èµ·ã€‚è¿™ç§å¢ƒå†µååˆ†å›°éš¾ï¼Œä½†çœŸæ­£ä½¿äº‹æƒ…å˜å¾—ç»æœ›çš„æ˜¯æ‚£è€…æ€åº¦ã€‚</p><blockquote><p>å‡å¦‚æä¾›å»ºè®®çš„æ˜¯ä¸€ ä½ä¼˜ç§€çš„åˆ†æå¸ˆï¼Œä»–ä¼šè¯´ï¼šâ€œå½“ç„¶ï¼Œè¿™ç§å¢ƒå†µååˆ†å›°éš¾ã€‚ä½†çœŸæ­£ä½¿äº‹æƒ…å˜å¾—ç»æœ›çš„æ˜¯ä½ ä»¬è‡ªå·±çš„æ€åº¦ã€‚å¦‚æœä½ ä»¬è€ƒè™‘æ”¹å˜è‡ªå·±å¯¹ç”Ÿæ´»çš„è¦æ±‚ï¼Œå°±ä¸ä¼šå†æ„Ÿåˆ°ç»æœ›äº†ã€‚</p></blockquote><blockquote><p>æˆ‘è®¤ä¸ºç¥ç»ç—‡çš„å¼ºè¿«æ€§å€¾å‘å¹¶éå‡ºè‡ªæœ¬èƒ½ï¼Œè€Œæ˜¯æ¥è‡ªäººé™…å…³ç³»çš„ç´Šä¹±ï¼›å½“æ‚£è€…çš„äººé™…å…³ç³»å¾—åˆ°æ”¹å–„æ—¶ï¼Œè¿™äº›å€¾å‘æ˜¯å¯ä»¥æ”¹å˜çš„ï¼Œå‘æºäºæ­¤çš„å†²çªä¹Ÿå¯ä»¥çœŸæ­£å¾—åˆ°è§£å†³ã€‚</p></blockquote><blockquote><p>å°½ç®¡æ¯æ¬¡é‡åˆ°é—®é¢˜éƒ½å¿…é¡»ä»å¤´å¤„ç†ï¼Œä½†åªè¦æ‚£è€…è®¤è¯†åˆ°ä»–çœŸçš„å¯ä»¥æ”¹å˜ï¼Œç»æœ›å¯¹ä»–çš„æ§åˆ¶å°±ä¼šæœ‰æ‰€æ¾åŠ¨ï¼Œä»–çš„åŠ¨åŠ›ä¹Ÿä¼šéšä¹‹å¢å¼ºã€‚<strong>åœ¨åˆ†æå¼€å§‹æ—¶ï¼Œè¿™ç§åŠ¨åŠ›å¯èƒ½ä»…é™äºä»–å¸Œæœ›æ‘†è„±æœ€ä»¤äººä¸å®‰çš„ç—‡çŠ¶ï¼›ä½†æ˜¯ï¼Œå½“æ‚£è€…è¶Šæ¥è¶Šæ„è¯†åˆ°ä»–çš„æ·é”ï¼Œå°åˆ°äº†è‡ªç”±çš„æ»‹å‘³æ—¶ï¼Œä»–çš„åŠ¨åŠ›å°±ä¼šè¶Šæ¥è¶Šå¼º</strong>ã€‚</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> read </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>win10 ä¸‹è£…å­ç³»ç»Ÿ ubuntu20.04</title>
      <link href="/sg/2021/12/02/env_linux_child/"/>
      <url>/sg/2021/12/02/env_linux_child/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#an-zhuang-zi-xi-tong">å®‰è£…å­ç³»ç»Ÿ</a></li><li><a href="#she-zhi-wang-luo-dai-li">è®¾ç½®ç½‘ç»œä»£ç†</a></li><li><a href="#ruan-jian-an-zhuang">è½¯ä»¶å®‰è£…</a><ul><li><a href="#xu-ni-ji">è™šæ‹Ÿæœº</a></li><li><a href="#ide">IDE</a></li></ul></li><li><a href="#github-lian-jie">GitHub è¿æ¥</a></li><li><a href="#jian-pan-ying-she">é”®ç›˜æ˜ å°„</a></li></ul><!-- tocstop --></div><p>install linux on pc -&gt; set up proxy -&gt; install virtual machine -&gt; install vagrant -&gt; change keyboard mapping -&gt; change bash file setting -&gt; connect to GitHub via ssh</p><h2><span id="an-zhuang-zi-xi-tong">å®‰è£…å­ç³»ç»Ÿ</span><a href="#an-zhuang-zi-xi-tong" class="header-anchor">Â¶</a></h2><p>å®‰è£…çš„æ˜¯ubuntu20.04 amdç‰ˆæœ¬ã€‚</p><p>å®‰è£…æ­¥éª¤å‚è€ƒ<a href="https://zhuanlan.zhihu.com/p/363640824">è¿™ç¯‡æ–‡ç« </a></p><p>é‡åˆ°çš„é—®é¢˜</p><ol><li><p>æ— æ³•æ‰“å¼€è™šæ‹Ÿç£ç›˜</p><p>æœä¸€ä¸‹æ”¹è™šæ‹Ÿç£ç›˜çš„å¯åŠ¨é¡¹ï¼Œè®°å¾—è¦é‡å¯æ‰èƒ½ç”Ÿæ•ˆ</p></li><li><p>å¼€æœºå‡ºç°grub</p><p>çœ‹åˆ°grubæ‡µäº†ï¼Œexitåä¹Ÿä¸èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚åæ¥å‚çœ‹äº†<a href="https://blog.csdn.net/luo617/article/details/81321721?spm=1001.2101.3001.6650.9&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7Eessearch%7Evector-9.essearch_pc_relevant&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7Eessearch%7Evector-9.essearch_pc_relevant">è¿™ç¯‡æ–‡ç« </a></p></li><li><p>åˆ†åŒºï¼Œc drive 15000MB, D drive 300000MB</p><p>å…ˆåˆ†é€»è¾‘åŒºï¼Œååˆ†ä¸»åŒºã€‚</p></li><li><p>å®‰è£…çš„æ—¶å€™å…ˆä¸è¦è”ç½‘ï¼ŒåŸºæœ¬å®‰è£…å®Œåå†è”ç½‘æ›´æ–°</p></li></ol><h2><span id="she-zhi-wang-luo-dai-li">è®¾ç½®ç½‘ç»œä»£ç†</span><a href="#she-zhi-wang-luo-dai-li" class="header-anchor">Â¶</a></h2><p>å‚è€ƒ<a href="https://zhuanlan.zhihu.com/p/359755946">linuxé…ç½®v2ray</a></p><p>é‡åˆ°çš„é—®é¢˜</p><ol><li><p>è®¾ç½®ä»£ç†åæ— æ³•æ‰“å¼€ç½‘é¡µï¼Œå¯¼è‡´httpè§£æå…¨éƒ¨å¤±è´¥ã€‚ç„¶è€Œæˆ‘è¿˜æ²¡æœ‰æ„è¯†åˆ°åªæœ‰æ‰“å¼€ä»£ç†æ‰èƒ½è¿æ¥ç½‘ç»œã€‚</p><p>å‚è€ƒäº†<a href="https://blog.csdn.net/weixin_30413739/article/details/96381847">ä»£ç†ç½‘é¡µè§£å†³</a></p></li><li><p>è¿™ä¹Ÿæ˜¯åœ¨å®‰è£…è™šæ‹Ÿæœºæ—¶å‡ºç°çš„é—®é¢˜ã€‚æœ€åé€šè¿‡1è§£å†³ã€‚</p><p>å¯¹åº”äº†6.031ä¸­è¯´çš„æ’æŸ¥é—®é¢˜èŒƒå›´çš„é¡ºåºã€‚</p></li></ol><h2><span id="ruan-jian-an-zhuang">è½¯ä»¶å®‰è£…</span><a href="#ruan-jian-an-zhuang" class="header-anchor">Â¶</a></h2><h3><span id="xu-ni-ji">è™šæ‹Ÿæœº</span><a href="#xu-ni-ji" class="header-anchor">Â¶</a></h3><h4><span id="virtual-box">Virtual box</span><a href="#virtual-box" class="header-anchor">Â¶</a></h4><p>åˆšå¼€å§‹ç…§ç€å®˜ç½‘æ•™ç¨‹å®‰è£…ï¼ˆçæï¼‰ï¼Œå‡ºç°äº†å„ç§é—®é¢˜ï¼ŒæŒ‰æ­¥éª¤è°ƒäº†ä¸‹ï¼Œåˆå‡ºç°ä¸€ä¸ªhttpè§£æé”™è¯¯ï¼Œè¯•å›¾æ”¹vagrantfile(çæ)ï¼Œæœ€åå‘ç°æ˜¯ç½‘ç»œé—®é¢˜ã€‚å¹¶ä¸”virtual boxçš„å®‰è£…åº”è¯¥åªéœ€è¦(è™½ç„¶æˆ‘å®‰è£…äº†å®˜ç½‘ä¸Šçš„å„ç§keyè®¤è¯ï¼Œä½†æˆ‘å¹¶ä¸ç¡®å®šè¿™æ˜¯å¦æ˜¯å¿…éœ€çš„æ­¥éª¤ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install virtualbox</span><br></pre></td></tr></table></figure><p>çæå‡ºç°çš„é—®é¢˜</p><ol><li><p>æ›´æ”¹sources.listå¹¶apt-get updateåå‡ºç°ï¼šä¸æ”¯æŒi386æ¶æ„</p><p>é€šè¿‡<a href="https://qastack.cn/ubuntu/741410/skipping-acquire-of-configured-file-main-binary-i386-packages-as-repository-x">è¿™ç¯‡æ–‡ç« </a>è§£å†³ï¼ˆï¼Ÿï¼‰ã€‚è§£é‡Šè¯´å› ä¸ºæœ‰å¤šç§æ¶æ„å‘ç”Ÿäº†æ··ä¹±äºæ˜¯åˆ é™¤äº†32ä½æ¶æ„ã€‚</p></li><li><p>çæçš„æ­¥éª¤</p><p>ä¸­é—´wgetä¸€ç›´æŠ¥é”™ï¼šhttpè§£æé”™è¯¯ã€‚å°±æ˜¯å› ä¸ºç½‘ç»œé—®é¢˜ã€‚</p></li><li><p>æ—¢ç„¶æ˜¯çæè‚¯å®šä¼šå‡ºç°å®‰è£…é”™è¯¯/ä¸å®Œæ•´çš„æƒ…å†µï¼Œäºæ˜¯å°±éœ€è¦<a href="https://askubuntu.com/questions/703746/how-to-completely-remove-virtualbox">å®Œå…¨åˆ é™¤</a>æ‰å·²å®‰è£…çš„å†…å®¹</p></li><li><p>Security boot: å‡ºç°UEFIå®‰å…¨é”™è¯¯ï¼Œé‡å¯åæŒ‰F2è¿›å…¥BIOSç•Œé¢<a href="https://askubuntu.com/questions/1105710/installing-virtualbox-your-system-has-uefi-secure-boot-enabled-message">å…³æ‰äº†è¿™ä¸ªæ£€æŸ¥</a></p></li></ol><h4><span id="vagrant">Vagrant</span><a href="#vagrant" class="header-anchor">Â¶</a></h4><p>æŒ‰<a href="https://www.vagrantup.com/downloads">å®˜ç½‘</a>å³å¯ã€‚</p><h3><span id="ide">IDE</span><a href="#ide" class="header-anchor">Â¶</a></h3><p>clion:ä¸‹è½½ä¸€ä¸ªåŒ…åè§£å‹ç¼©ï¼Œç”¨å‘½ä»¤è¡Œæ‰“å¼€ã€‚å¯å‚è€ƒ<a href="https://blog.csdn.net/feimeng116/article/details/105898892">å®‰è£…clion</a></p><p>Code: ç›´æ¥ä¸‹è½½debæ–‡ä»¶å®‰è£…</p><h2><span id="github-lian-jie">GitHub è¿æ¥</span><a href="#github-lian-jie" class="header-anchor">Â¶</a></h2><p><a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account">ssh connection</a></p><p>ç…§ç€æç¤ºè¿›è¡Œå°±è¡Œäº†ã€‚å‡ºç°çš„é—®é¢˜åŸºæœ¬éƒ½æ˜¯ç½‘ç»œé—®é¢˜ï¼Œè€Œä¸æ˜¯æ­¥éª¤å“ªé”™äº†ã€‚</p><h2><span id="jian-pan-ying-she">é”®ç›˜æ˜ å°„</span><a href="#jian-pan-ying-she" class="header-anchor">Â¶</a></h2><p>æŸ¥äº†å‡ ç¯‡æ–‡ç« è¯•äº†è¯•ï¼Œxmodmapä¸èƒ½å¾ˆå¥½çš„è§£å†³é—®é¢˜ï¼ˆå¯èƒ½æ˜¯å› ä¸ºæ²¡æœ‰é‡å¯ï¼Ÿï¼Ÿï¼‰ã€‚</p><p>äºæ˜¯ç”¨äº†<a href="https://askubuntu.com/questions/363346/how-to-permanently-switch-caps-lock-and-esc">deconf-tools</a>ï¼Œç”±äºåœ¨ubuntu20.04ä¸­ä¸æ”¯æŒï¼ˆï¼Ÿï¼‰ç„¶åæ‰¾äº†<a href="https://askubuntu.com/questions/1248426/what-has-replaced-dconf-tools-for-ubuntu-20-04?noredirect=1&amp;lq=1">æ›¿ä»£æ–¹æ¡ˆ</a>ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> toolbox </category>
          
          <category> environment </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è®¾ç½® AWS EC2 ä½œä¸ºæœåŠ¡å™¨</title>
      <link href="/sg/2021/12/01/open_ec2/"/>
      <url>/sg/2021/12/01/open_ec2/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#jian-yao-bu-zou">ç®€è¦æ­¥éª¤</a><ul><li><a href="#1-chuang-jian-ec2-xu-ni-ji">1 åˆ›å»ºEC2è™šæ‹Ÿæœº</a></li><li><a href="#2-she-zhi-ip-di-zhi">2 è®¾ç½®IPåœ°å€</a></li></ul></li><li><a href="#ding-jie">å®šä»·</a></li><li><a href="#she-zhi-gong-zuo-qu">è®¾ç½®å·¥ä½œåŒº</a></li><li><a href="#guan-bi-fu-wu">å…³é—­æœåŠ¡</a></li></ul><!-- tocstop --></div><h2><span id="jian-yao-bu-zou">ç®€è¦æ­¥éª¤</span><a href="#jian-yao-bu-zou" class="header-anchor">Â¶</a></h2><h3><span id="1-chuang-jian-ec2-xu-ni-ji">1 åˆ›å»ºEC2è™šæ‹Ÿæœº</span><a href="#1-chuang-jian-ec2-xu-ni-ji" class="header-anchor">Â¶</a></h3><p>ç”±äºæˆ‘ä¹Ÿçœ‹ä¸æ‡‚å®‰å…¨ç»„ï¼Œå·ï¼Œå®ä¾‹è¿™äº›ï¼Œå°±æŒ‰ç…§é»˜è®¤è®¾ç½®äº†ã€‚</p><p>æˆ‘è®¾ç½®çš„å­˜å‚¨ç©ºé—´æ˜¯16Gï¼ˆå…è´¹ä¸Šé™æ˜¯30Gï¼‰</p><h3><span id="2-she-zhi-ip-di-zhi">2 è®¾ç½®IPåœ°å€</span><a href="#2-she-zhi-ip-di-zhi" class="header-anchor">Â¶</a></h3><p>å…·ä½“å‚è€ƒ<a href="https://zhuanlan.zhihu.com/p/59125060">äºšé©¬é€ŠAWS EC2å…è´¹æœåŠ¡å™¨+åŸŸåé…ç½®æ•™ç¨‹</a>ä¸­çš„äºŒåˆ°å››æ­¥</p><h2><span id="ding-jie">å®šä»·</span><a href="#ding-jie" class="header-anchor">Â¶</a></h2><p>äºšé©¬é€Šäº‘æœåŠ¡å¦‚æœè¶…å‡ºå…è´¹å¥—é¤æ”¶è´¹å¾ˆè´µï¼Œæ”¶è´¹è§„åˆ™ä¹Ÿç›¸å¯¹å¤æ‚ã€‚</p><p>å½’çº³ä¸€ä¸‹ï¼šå¼€æœº/å…³æœºä¸è¶³ä¸€å°æ—¶ï¼ˆ1sä¹Ÿç®—ä¸è¶³ï¼‰æŒ‰1å°æ—¶è®¡è´¹ã€‚å…³æœºåï¼Œå­˜å‚¨æœåŠ¡ï¼ˆEBSï¼‰ä»è¦æ”¶è´¹ã€‚åªæœ‰æ¸…é™¤åæ‰ä¸ä¼šå†æ”¶å–è´¹ç”¨ã€‚</p><p>æ³¨æ„äº‹é¡¹ï¼š</p><blockquote><p>å¦‚æœåœ¨â€œInstancesâ€é¡µé¢çœ‹åˆ°å¤šäºä¸€ä¸ªinstanceï¼Œä½ ä¸€å®šè¦stopç”šè‡³terminateå¤šäºä¸€ä¸ªçš„ï¼Œä¸ç„¶ä½ å°†é¢ä¸´è®¡è´¹é£é™©ã€‚awsæä¾›çš„å…è´¹æœåŠ¡åŒ…ä¸­æœ‰å…¶å®ƒçš„æœåŠ¡ä¼šè‡ªåŠ¨å¼€å¯Instanceçš„ï¼Œæˆ‘å…³é—­ç›¸å…³æœåŠ¡æ‰å…³é—­äº†æˆ‘ä¸éœ€è¦çš„Instanceã€‚ä¸€ä¸ªt1.microï¼Œä¸€ä¸ªæœˆæ˜¯140å¤šç¾å…ƒã€‚</p><p>å‚è€ƒ<a href="https://zhuanlan.zhihu.com/p/124102508">AWSæ”¶è´¹</a></p></blockquote><ol><li>EC2<u>åªå¼€1ä¸ªinstance</u>ã€‚æœåŠ¡å™¨çš„å…è´¹æ”¿ç­–æ˜¯720 <u>1ä¸ªInstance</u>å°æ—¶/æœˆï¼Œå¼€å¤šä¸ªinstanceåˆ™éœ€æ”¶è´¹ã€‚</li><li>start/stop server: <a href="https://aws.amazon.com/cn/premiumsupport/knowledge-center/ec2-instance-hour-billing/">instanceè®°æ—¶</a>æ˜¯ä»¥1å°æ—¶åšå•ä½çš„ï¼Œå¦‚æœä¸€ä¸ªå°æ—¶ä¹‹å†…start/stop 5æ¬¡æœåŠ¡å™¨çš„è¯ï¼Œä¼šè¢«è®°5ä¸ªå°æ—¶</li><li>æµé‡ï¼ŒI/Oæ¬¡æ•°ç­‰ç­‰å¾ˆå¤šä¿¡æ¯éƒ½æœ‰å…è´¹çš„ä¸Šé™</li><li>ä»˜æ¬¾ä»¥ç¾å…ƒè®°</li><li>å…è´¹æœŸæ˜¯12ä¸ªæœˆï¼Œ12æœˆä¹‹å†…ä¸€å®šè¦ç»ˆæ­¢(terminate)ä½ ä½¿ç”¨çš„awsæœåŠ¡ï¼Œå¦åˆ™ä¼šè¢«è®¡è´¹ã€‚</li><li><a href="https://docs.amazonaws.cn/AWSEC2/latest/UserGuide/elastic-ip-addresses-eip.html#eip-pricing">å¼¹æ€§IPåœ°å€</a>æ”¶è´¹ï¼šä¸ºç¡®ä¿å¼¹æ€§IP åœ°å€çš„æœ‰æ•ˆä½¿ç”¨ï¼Œå¦‚æœå¼¹æ€§IP åœ°å€æœªä¸æ­£åœ¨è¿è¡Œçš„å®ä¾‹å…³è”ï¼Œæˆ–è€…å®ƒå·²ä¸åœæ­¢çš„å®ä¾‹æˆ–æœªé™„åŠ çš„ç½‘ç»œæ¥å£å…³è”ï¼Œæˆ‘ä»¬å°†å¼ºåˆ¶æ”¶å–å°é¢çš„å°æ—¶è´¹ç”¨ã€‚ å½“æ‚¨çš„å®ä¾‹æ­£åœ¨è¿è¡Œæ—¶ï¼Œæ‚¨æ— éœ€ä¸ºä¸è¯¥å®ä¾‹å…³è”çš„æŸä¸ªå¼¹æ€§IP åœ°å€ä»˜è´¹ï¼Œä½†éœ€ä¸ºä¸è¯¥å®ä¾‹å…³è”çš„æ‰€æœ‰å…¶ä»–å¼¹æ€§IP åœ°å€ä»˜è´¹ã€‚</li></ol><h2><span id="she-zhi-gong-zuo-qu">è®¾ç½®å·¥ä½œåŒº</span><a href="#she-zhi-gong-zuo-qu" class="header-anchor">Â¶</a></h2><p>EC2ä¸­ä½¿ç”¨yumè€Œä¸æ˜¯apt-get</p><ul><li>install <a href="https://serverfault.com/questions/836198/how-to-install-docker-on-aws-ec2-instance-with-ami-ce-ee-update">docker</a></li><li><a href="https://stackoverflow.com/questions/61165009/how-to-install-devtoolset-8-gcc-8-on-amazon-linux-2">how to install devtoolset-8 / GCC 8 on Amazon Linux 2</a></li><li>install <a href="https://www.softwarecollections.org/en/scls/rhscl/llvm-toolset-7/">llvm 7</a>: è¿™é‡Œå®‰è£…å¤±è´¥äº†</li></ul><h2><span id="guan-bi-fu-wu">å…³é—­æœåŠ¡</span><a href="#guan-bi-fu-wu" class="header-anchor">Â¶</a></h2><p>æœ‰ä¸ªå‘æ˜¯ aws ä¼šåˆ†åœ°åŒºæ˜¾ç¤ºå…³è”çš„å¼¹æ€§ IP åœ°å€ï¼Œå› ä¸ºæ²¡æ³¨æ„è¿™ä¸€ç‚¹å¯¼è‡´å¤šæ”¶äº†2ç¾å…ƒå·¦å³ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> toolbox </category>
          
          <category> environment </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>recitation network</title>
      <link href="/sg/2021/11/29/recitation_network/"/>
      <url>/sg/2021/11/29/recitation_network/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#paper-ethernet">Paper: Ethernet</a><ul><li><a href="#background">Background</a></li><li><a href="#design-choice">Design choice</a></li><li><a href="#implementation">Implementation</a></li><li><a href="#performance-measure">performance measure</a></li><li><a href="#protocols">protocols</a></li></ul></li><li><a href="#paper-ron">Paper: RON</a><ul><li><a href="#general-goal">General goal</a></li><li><a href="#design-goal">Design goal</a></li><li><a href="#design">Design</a></li><li><a href="#conclusion">conclusion</a></li></ul></li><li><a href="#paper-dctcp">Paper: DCTCP</a></li><li><a href="#paper-e2e-argument-1981">Paper: E2E argument 1981</a><ul><li><a href="#what">what</a></li><li><a href="#performance-view">performance view</a></li><li><a href="#how-identifying-the-ends">How: identifying the ends</a></li><li><a href="#some-thinking">Some thinking</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="paper-ethernet">Paper: Ethernet</span><a href="#paper-ethernet" class="header-anchor">Â¶</a></h2><p>Ethernet: Distributed Packet Switching for Local Computer Networks</p><h3><span id="background">Background</span><a href="#background" class="header-anchor">Â¶</a></h3><ol><li><p>demands of computer-computer interconnection grow</p><ul><li><img src="/sg/2021/11/29/recitation_network/trans.png" class title="trans"></li></ul></li><li><p>Reliability:</p><p>packets are delivered only with high probability.</p><ul><li>Fact: control is completely distributed among stations with packet transmissions coordinated through statistical arbitration.</li></ul></li></ol><h3><span id="design-choice">Design choice</span><a href="#design-choice" class="header-anchor">Â¶</a></h3><p>Problem 1: distribute control of the communications facility among the communicating computers</p><h4><span id="choice"><strong>Choice</strong></span><a href="#choice" class="header-anchor">Â¶</a></h4><ol><li><p>Topology: an unrooted tree is better than a star network in distributed interconnections.</p></li><li><p>Control</p><p>Problem 2: collision: more than one packets are transmitted at the same time</p><ul><li>Retransmission: controller would adjust the mean retransmission interval in proportion to the frequency of collisions.</li><li>equity: cooperation among the stations is required. This equality rule is maintained by low-level software in each station</li></ul></li><li><p>Addressing : packet(source, destination)</p></li><li><p>Reliability : remove the responsibility for reliable communication from the <u>packet transport mechanism</u></p><p>ä»è€ŒæŠŠè´£ä»»è½¬ç§»ç»™åº”ç”¨å±‚ï¼Œæ›´å¥½åœ°å†³å®šå¯é æ€§å’Œæ¢å¤ã€‚</p><ul><li>error-free communication(reliable delivery of any single packet) is hard. Instead, we choose to support reliable transport where it can get both economy of transmission and high reliability averaged over many packets</li></ul></li><li><p>packet transport mechanism</p><p>Problem 3: reduce the probability and cost of losing a packet.</p><p>Fact: a station connects to the Ether with a tap and  transceiver.</p><p>There are five mechanisms: (1) carrier detection, (2) interference detection, (3) packet error detection, (4) truncated packet filtering, and (5) collision consensus enforcement.</p></li></ol><p><strong>Alternatives of design choice</strong></p><h3><span id="implementation">Implementation</span><a href="#implementation" class="header-anchor">Â¶</a></h3><ul><li><img src="/sg/2021/11/29/recitation_network/ethernet.png" class title="ethernet"></li><li><img src="/sg/2021/11/29/recitation_network/cca.png" class title="cca"></li></ul><h3><span id="performance-measure">performance measure</span><a href="#performance-measure" class="header-anchor">Â¶</a></h3><p>Acquisition probability, waiting time, efficiency</p><h3><span id="protocols">protocols</span><a href="#protocols" class="header-anchor">Â¶</a></h3><p>What does the term â€œlayeringâ€ mean in the context of networking?</p><p>Why do we use a layered model?</p><p>How do you imagine that layered model is reflected in actual packets?</p><h2><span id="paper-ron">Paper: RON</span><a href="#paper-ron" class="header-anchor">Â¶</a></h2><blockquote><p>Resilient overlay networks: an application-layer overlay on top of the existing internet routing substrate.</p></blockquote><p>Problem 1: failure and latency</p><p>BGP å¯æ‰©å±•æ€§åŒæ—¶é€ æˆçš„é—®é¢˜ï¼šç«¯åˆ°ç«¯é€šä¿¡çš„å®¹é”™æ€§å‡å°‘ï¼Œå¯¼è‡´ç½‘ç»œå»¶è¿Ÿå‘ç”Ÿå’Œå»¶è¿Ÿæ—¶é—´åŠ é•¿ï¼ˆå‡ ååˆ†é’Ÿçš„ç¨‹åº¦ï¼‰ã€‚è¿™ä¹Ÿè®©ç°æœ‰çš„ç½‘ç»œéå¸¸è„†å¼±ï¼Œä¼šç”±äºå„ç§é—®é¢˜è€Œå´©æºƒã€‚</p><p>å› ä¸ºBGPå‡ºäºå¯æ‰©å±•æ€§å’Œæ”¿ç­–æ‰§è¡Œçš„è€ƒè™‘ï¼Œéšè—äº†è®¸å¤šæ‹“æ‰‘ç»†èŠ‚ï¼Œå‡ ä¹æ²¡æœ‰å…³äºäº¤é€šçŠ¶å†µçš„ä¿¡æ¯ï¼Œå¹¶ä¸”åœ¨å‡ºç°æ½œåœ¨é—®é¢˜æ—¶æŠ‘åˆ¶è·¯ç”±æ›´æ–°ä»¥é˜²æ­¢å¤§è§„æ¨¡æŒ¯è¡ã€‚</p><p>è§£å†³æ–¹æ³•æ˜¯åœ¨åº”ç”¨å±‚ä¸Šåˆ†å¸ƒä¸€å±‚é‡å çš„èŠ‚ç‚¹æ¥å®Œæˆè¿æ¥ã€‚åº•å±‚ç½‘ç»œèŠ‚ç‚¹çš„å˜åŒ–ä¸ä¼šæ‰°åŠ¨åˆ°ä¸Šå±‚ï¼Œç”±æ­¤æ¥è§£å†³å¯æ‰©å±•æ€§å¸¦æ¥çš„é—®é¢˜ã€‚</p><h3><span id="general-goal">General goal</span><a href="#general-goal" class="header-anchor">Â¶</a></h3><ol><li><p>Main goal: enable a group of nodes to communicate in the face of problem1</p><p>what RON can do:</p><ul><li>æ£€æµ‹é—®é¢˜å¿«ï¼šwhether the underlying internet path is the best one</li><li>äº¤æ¢äº¤é€šä¿¡æ¯</li><li>é™åˆ¶RON pathçš„å¤§å°ä»¥é¿å…è¿‡åº¦å ç”¨ç½‘ç»œå¸¦å®½ï¼Œå‡å°‘ç½‘ç»œå»¶è¿Ÿ</li></ul></li><li><p>integrate <u>routing and path selection</u> with distributed applications more tightly</p><p>æ›´é’ˆå¯¹æ€§çš„å»ºè®¾ç½‘ç»œé€šè·¯</p><ul><li>consult <u>application-specific</u> metrics in selecting paths</li><li>incorporate application-specific notions of what network conditions constitute a â€œfault.â€</li></ul></li><li><p>provide a <u>framework</u> for the implementation <u>of expressive routing policies</u>, which govern the choice of paths in the network</p></li></ol><h3><span id="design-goal">Design goal</span><a href="#design-goal" class="header-anchor">Â¶</a></h3><p>æ›´å‡†ç¡®çš„æè¿°è®¾è®¡ç›®æ ‡ï¼š</p><h4><span id="1-fast-failure-detection-and-recovery">1 Fast failure detection and recovery</span><a href="#1-fast-failure-detection-and-recovery" class="header-anchor">Â¶</a></h4><p>è¯„ä¼°failureé€ æˆçš„å½±å“ã€‚ç°æœ‰çš„BGP-4æ‰¾åˆ°åˆé€‚çš„çº¿è·¯é€šä¿¡ç»å¸¸ä¼šé‡åˆ°failuresã€‚failureå¯ä»¥åˆ†ä¸ºlink failureså’Œpath failuresã€‚å®ƒä»¬åœ¨åº”ç”¨ä¸­å¸¸è¡¨ç°ä¸ºä¸¤ç§å½¢å¼ï¼šoutages or performance failuresã€‚outageå¯¹ç½‘ç»œé€ æˆçš„å½±å“èƒ½è¾¾åˆ°å‡ ä¸ªæ•°é‡çº§ï¼ˆæ¯”å¦‚TCP degrades, average packet loss rate over a sustained period of several minutesï¼‰ï¼›è€Œperformance failuresçš„å½±å“åˆ™æ²¡æœ‰é‚£ä¹ˆæç«¯ï¼Œä»åœ¨åŒç­‰æ•°é‡çº§ä¸‹ã€‚</p><p>å› æ­¤æˆ‘ä»¬å¸Œæœ›RONèƒ½å¤Ÿåšåˆ°æ£€æµ‹å¿«å’Œæ¢å¤å¿«ã€‚</p><h4><span id="2-tighter-integration-with-applications">2 Tighter integration with applications</span><a href="#2-tighter-integration-with-applications" class="header-anchor">Â¶</a></h4><p>fact: Failures and faults are application-specific notions.</p><p>æ ¹æ®åº”ç”¨åœºæ™¯çš„ä¸åŒè€Œåˆ¶å®šçš„æ ‡å‡†ï¼ˆmetricsï¼‰æ¥é€‰æ‹©åˆé€‚çš„ç½‘ç»œçº¿è·¯ã€‚ç†æƒ³çš„æƒ…å†µä¸‹ï¼Œæœ€åˆé€‚çš„çº¿è·¯åº”è¯¥æ»¡è¶³å¤šç§æ ‡å‡†ã€‚</p><p>è¿™é‡Œä¸åŒæ ‡å‡†åœ¨å®é™…åº”ç”¨ä¹‹é—´çš„è¡¡é‡ï¼ˆtrade-offsï¼‰æ˜¯è®¾è®¡è€ƒè™‘çš„é‡ç‚¹ã€‚</p><h4><span id="3-expressive-policy-routing">3 expressive policy routing</span><a href="#3-expressive-policy-routing" class="header-anchor">Â¶</a></h4><p>RONâ€™s powerful end-points allow fine-grained policy routing.</p><p>æ‰“ä¸ªæ¯”æ–¹å°±å°±æ˜¯åœ°å›¾ç²¾åº¦æ›´é«˜äº†ï¼Œè·¯å¾„è§„åˆ’ä¹Ÿå°±è¶Šå‡†ç¡®ã€‚</p><h3><span id="design">Design</span><a href="#design" class="header-anchor">Â¶</a></h3><img src="/sg/2021/11/29/recitation_network/ron.png" class title="ron"><h4><span id="1-software-architecture">1 Software architecture</span><a href="#1-software-architecture" class="header-anchor">Â¶</a></h4><ul><li><p>RON client: forwarder, conduits</p></li><li><p>RON: router, membership manager</p></li><li><p>forwarding service:</p><ul><li>IP paths</li><li>RON</li></ul></li><li><p><strong>forwarder</strong>: onduits access RON</p><ul><li>send(pkt, dst, via_ron): forward a packet to a destination RON</li><li>recv(pkt, via_ron): callback function that is called when a packet arrives for the client program</li></ul></li></ul><h4><span id="2-routing-and-path-selection">2 routing and path selection</span><a href="#2-routing-and-path-selection" class="header-anchor">Â¶</a></h4><ul><li><p>Routing = building up the forwarding tables -&gt; choose paths for packets</p></li><li><p>default metrics for selecting the path:</p><p>latency; packet loss rate; throughput</p><ul><li>RON clients: can override defaults</li><li>RON library: construct the table</li><li>Router: build up forwarding tables following the demands</li></ul></li></ul><ol><li>link-state dissemination</li></ol><ul><li>small size of RON allows fast propagation</li></ul><ol start="2"><li>path evaluation and selection</li></ol><ul><li><p>path evaluation is composed of combination of two links into a path and formula used to evaluate it.</p></li><li><p>Outage detection: whether the connection is still working?</p></li><li><p>Throughput path selection: avoid paths of low throughput when alternatives are available instead of an optimal one</p><p>ä¸ºäº†é¿å…performance failureï¼Œé€‰æ‹©ä¸€æ¡ç›¸å¯¹åˆé€‚çš„è·¯å¾„è€Œä¸æ˜¯ç›´æ¥ä¸­æ–­ã€‚</p><p>Problem:  how throughput-intensive applications handle traffic?</p><p>Solution:TCP or TCP-like congestion control</p></li></ul><ol start="3"><li><p>performance database</p><p>Demand:RON needs to know performance info</p><p>Consideration:</p><ol><li>Performance repository must be reliable and flexible</li><li>Measurement data : noisy, and many clients would want to use the data</li></ol><p>we conclude that the system needs a flexible summarization mechanism.</p><p>-&gt; each RON node or local group of nodes uses a separate performance database to store samples.</p><ul><li><img src="/sg/2021/11/29/recitation_network/pt.png" class title="pt"></li></ul></li></ol><h4><span id="3-policy-routing">3 policy routing</span><a href="#3-policy-routing" class="header-anchor">Â¶</a></h4><ol><li>Classificationï¼šæŸ¥æ‰¾ä¿¡æ¯</li><li>routing table formationï¼šè®¡ç®—æœ€çŸ­è·¯å¾„</li></ol><p>two policy mechanism :</p><ol><li><p>Exclusive cliques</p><p>æ¯”å¦‚æ ¡å›­ç½‘</p></li><li><p>general policies</p><p>æ›´çµæ´»åœ°åˆ¶å®šè§„åˆ™</p></li></ol><h4><span id="4-data-forwarding">4 data forwarding</span><a href="#4-data-forwarding" class="header-anchor">Â¶</a></h4><ul><li><img src="/sg/2021/11/29/recitation_network/df1.png" class title="df1"></li><li><img src="/sg/2021/11/29/recitation_network/df2.png" class title="df2"></li></ul><h4><span id="5-bootstrap-and-membership-management">5 Bootstrap and membership management</span><a href="#5-bootstrap-and-membership-management" class="header-anchor">Â¶</a></h4><h3><span id="conclusion">conclusion</span><a href="#conclusion" class="header-anchor">Â¶</a></h3><h2><span id="paper-dctcp">Paper: DCTCP</span><a href="#paper-dctcp" class="header-anchor">Â¶</a></h2><p>Applications in datacencer network are expected to have these requirements:</p><ol><li>low latency for short flows</li><li>high burst tolerance</li><li>high utilization for long flows</li></ol><h2><span id="paper-e2e-argument-1981">Paper: E2E argument 1981</span><a href="#paper-e2e-argument-1981" class="header-anchor">Â¶</a></h2><blockquote><p>The function in question can completely and correctly be implemented only with the knowledge and help of the application standing at the end points of the communication system. Therefore, providing that questioned function as a feature of the communication system itself is not possible. (Sometimes an incomplete version of the function provided by the communication system may be useful as a performance enhancement.)</p></blockquote><h3><span id="what">what</span><a href="#what" class="header-anchor">Â¶</a></h3><p>E2E argument is a reasoning against low-level function implementation. It is applied in many contexts but this paper chose data communication networks to provide more concrete details about it. For designers, itâ€™s a guideline that helps in application and protocol design analysis rather than a rule.</p><p>ex: reliable data transmission in file transfer - â€œthe function in questionâ€</p><p>The same example as in the book with extra details on the file transfer machanism which is to retry/commit after dectect checksum failures.</p><p>Conclusion:</p><blockquote><p>The end-to-end check of the file transfer application must still be implemented no matter how reliable the communication system becomes.</p></blockquote><ol><li>Apps that perform file transfer must supply a file-transfer-specific, end-to-end reliability guarantee.</li><li>Reliable transport does not guarantee the reliablity of apps.</li></ol><h3><span id="performance-view">performance view</span><a href="#performance-view" class="header-anchor">Â¶</a></h3><ol><li>The lower levels need not provide â€œperfectâ€ reliability. The effort to provide reliability at the lower level may cost more than the effort and still guarantee nothing.</li><li><u>Engineering tradeoff</u>: The effort to supply reliablity measures on the data communication networks is a tradeoff of <strong>performance</strong>.</li><li>Function placement at the lower level may not be efficient for two reasons:<ul><li>Function at the low level affects many applications. Other applications may not need this function.</li><li>The low-level subsystem has less information that high levels.</li></ul></li><li>ex: where to put reliable technique? File transfer application or communication system.<ul><li>More efficient in communication system. Adding the reliable checks on every application is redundant.</li></ul></li></ol><h3><span id="how-identifying-the-ends">How: identifying the ends</span><a href="#how-identifying-the-ends" class="header-anchor">Â¶</a></h3><blockquote><p>one must use some care to identify the end points to which the argument should be applied.</p></blockquote><p>example 1: network carrying some packet voice connections between two telephones</p><p>example 2: speech message system, user listens to the voice message stored in the file system</p><p>A srong E2E argument will ask in-order delivery to provide reliability. In example 1, if it needs to preserve a bit-perfect communication, enforcements on the delivery order (low-level reliability measures) causing delay are disruptive. Itâ€™s better to receive damaged data and add replacement measures as duplication, noise for better performance. However, some applications like real-time communication require the strong E2E argument.</p><p>In example 2, a storage system is at the receiving end of the voice communciation. Short delays are not disruptive. So designers can consider the low-level reliability measure like packet ordering for correctness and performance.</p><h3><span id="some-thinking">Some thinking</span><a href="#some-thinking" class="header-anchor">Â¶</a></h3><ol><li>My opinions of E2E argument?</li><li>How might one use the end-to-end argument when designing a system?</li><li>What role does trust play in the end-to-end argument?</li><li>Packet acknowledgement is ignored in this paper but becomes an esstial part of reliable tranport. Though, the E2E argument still influenced the design of TCP as being a layer above IP (From recitation notice).</li></ol>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.033 system design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> paper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SC functional programming</title>
      <link href="/sg/2021/11/27/SC_functional_programming/"/>
      <url>/sg/2021/11/27/SC_functional_programming/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#r26-map-filter-reduce">R26: map, filter, reduce</a></li></ul><!-- tocstop --></div><h2><span id="r26-map-filter-reduce">R26: map, filter, reduce</span><a href="#r26-map-filter-reduce" class="header-anchor">Â¶</a></h2><p>problems: write a method that finds all the words in the Java files in your project.</p><p>Approach 0:</p><p>Use recursion.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Find all the files in the filesystem subtree rooted at folder.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> folder root of subtree, requires folder.isDirectory() == true</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> list of all ordinary files (not folders) that have folder as</span></span><br><span class="line"><span class="comment"> *         their ancestor</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;File&gt; <span class="title function_">allFilesIn</span><span class="params">(File folder)</span> &#123;</span><br><span class="line">    List&lt;File&gt; files = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (File f : folder.listFiles()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (f.isDirectory()) &#123;</span><br><span class="line">            files.addAll(allFilesIn(f));</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (f.isFile()) &#123;</span><br><span class="line">            files.add(f);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> files;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Goal: design functions that operate over sequences of elements.</p><p>Approach 1: abstracting out control flow</p><p>Ex 1: Iterator abstraction</p><p>Without worrying about the data representations.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">ii</span> <span class="operator">=</span> <span class="number">0</span>; ii &lt; files.size(); ii++) &#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">f</span> <span class="operator">=</span> files.get(ii);</span><br><span class="line">    <span class="comment">// ...</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Iterator&lt;File&gt; iter = files.iterator();</span><br><span class="line"><span class="keyword">while</span> (iter.hasNext()) &#123;</span><br><span class="line">    <span class="type">File</span> <span class="variable">f</span> <span class="operator">=</span> iter.next();</span><br><span class="line">    <span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p><strong>Ex 2: map/filter/reduce abstraction</strong></p><p>use streams to represent the entire sequence of elements.(java,cppéƒ½æœ‰streamçš„datatype)</p><ul><li>map : Stream&lt;â€E&gt; Ã— (E â†’ F) â†’ Stream&lt;â€F&gt;</li></ul><p>Approach 1.1 higher order functions: pass function in functions.</p><p>Java related: call chaining, method reference.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List.of(<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>).stream()</span><br><span class="line">    .map(x -&gt; Math.sqrt(x))</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List.of(<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>).stream()</span><br><span class="line">    .map(Math::sqrt)</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Function&lt;Double,Double&gt; mySquareRoot = Math::sqrt;</span><br><span class="line">mySquareRoot.apply(<span class="number">16.0</span>); <span class="comment">// returns 4.0</span></span><br></pre></td></tr></table></figure><ul><li><p>filter : Stream&lt;â€E&gt; Ã— (E â†’ boolean) â†’ Stream&lt;â€E&gt;</p></li><li><p>reduce : Stream&lt;â€E&gt; Ã— E Ã— (E Ã— E â†’ E) â†’ E</p><p>Three design choices in the reduce operation.</p><ol><li><p>whether to require an initial value</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>).stream()</span><br><span class="line">    .reduce(<span class="number">0</span>, (x,y) -&gt; x+y)</span><br><span class="line"><span class="comment">// computes (((0+1)+2)+3) to produce the integer 6</span></span><br><span class="line">  </span><br><span class="line">List.of(<span class="number">5</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">1</span>).stream()</span><br><span class="line">    .reduce(Math::max)</span><br><span class="line"><span class="comment">// computes max(max(max(5,8),3),1) and returns an Optional&lt;Integer&gt; value containing 8</span></span><br></pre></td></tr></table></figure></li><li><p>the order in which the elements are accumulated.</p></li></ol><ul><li>Depends on the associativity. If non-associative, the order of combination changes.</li></ul><ol start="3"><li><p>reduction to another type</p><p>in java: reduce : Stream&lt;â€E&gt; Ã— F Ã— (F Ã— E â†’ F) Ã— (F Ã— F â†’ F) â†’ F</p><ul><li>an accumulator âŠ™ : F Ã— E â†’ F that adds an element from the sequence (of type E) into the growing result (of type F)</li><li>a combiner âŠ— : F Ã— F â†’ F that combines two partial results, each accumulated from part of the sequence, into a growing result</li></ul></li></ol></li></ul>]]></content>
      
      
      <categories>
          
          <category> software engineering </category>
          
          <category> 6.031 software construction </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SD security</title>
      <link href="/sg/2021/11/27/SD_security/"/>
      <url>/sg/2021/11/27/SD_security/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#l20-authentication">L20:authentication</a></li><li><a href="#l21">L21</a></li></ul><!-- tocstop --></div><p>We will look security problem from one single machine, network, server, multi-server.</p><blockquote><p>steps towards building a more secure system</p><ol><li>be clear about goals (policy)</li><li>be clear about assumptions (threat model)</li></ol></blockquote><h2><span id="l20-authentication">L20:authentication</span><a href="#l20-authentication" class="header-anchor">Â¶</a></h2><p><em>Concept</em></p><p>hash function: ä¸€å¯¹ä¸€ï¼Œä»è¾“å‡ºåæ¨è¾“å…¥å¾ˆéš¾</p><hr><p>policy: provide authentication for users</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">check_password(username, inputted_password): </span><br><span class="line">    stored_password = accounts_table[username] </span><br><span class="line">    <span class="keyword">return</span> stored_password == inputted_password</span><br></pre></td></tr></table></figure><p>threat model: adversary has access to the entire stored table</p><p>Problem 1: the adversary (with access to the stored table) can just read the passwords directly.</p><p>Attempt 0: store plaintext passwords on server</p><p>Attempt 1: use hash function -&gt; store hashes of passwords on the server.</p><p>Problem 1.1 adversary can still have access to password by using the same hash function providing stored table</p><p>Attempt 2: add a random string -&gt; salt the hashes</p><h2><span id="l21">L21</span><a href="#l21" class="header-anchor">Â¶</a></h2>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.033 system design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SD communication skill</title>
      <link href="/sg/2021/11/21/SD_communication_skill/"/>
      <url>/sg/2021/11/21/SD_communication_skill/</url>
      
        <content type="html"><![CDATA[<p>genre, What-how-why</p><ul><li><p>good supplement</p></li><li><p>Consensus &amp; dissent: expert, agreement, diversity</p></li><li><p>stasis</p><ol><li>fact: who,what,when,where,how much</li><li>definition<ul><li>What kind of thing is this?</li><li>How should we use this term?</li></ul></li><li>causation<ul><li>How did this happen?</li><li>Why did this occur?</li><li>What will the effects be?</li></ul></li><li>value<ul><li>Why should we care?</li><li>How much does this matter?</li><li>How good or bad is it?</li></ul></li><li>outcome<ul><li>What should we do?</li><li>Which option or process should we choose?</li></ul></li></ol></li><li><p>Group work</p><ul><li>Organizations tend to work at three levels</li><li>shared values<ul><li>common purpose</li><li>establish and protect credibility</li></ul></li><li>Shared tasks:<ul><li>explain the day to day group actions</li><li>shaped by value and habits</li><li>Plan</li></ul></li><li>shared habits<ul><li>shared method of completing tasks</li><li>learned from experience</li><li>group rules</li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.033 system design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SD distributed system</title>
      <link href="/sg/2021/11/20/SD_ds/"/>
      <url>/sg/2021/11/20/SD_ds/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#l14-raid-reliability-via-replication">L14:RAID:reliability via replication</a></li><li><a href="#l15-transactions-atomicity-isolation">L15:Transactions: atomicity &amp; isolation</a><ul><li><a href="#atomicity">Atomicity</a></li><li><a href="#isolation">isolation</a></li></ul></li><li><a href="#l16-logging-atomicity">L16:Logging(atomicity)</a></li><li><a href="#l17-two-phase-locking-isolation">L17:two-phase locking(isolation)</a><ul><li><a href="#serializability">Serializability</a></li><li><a href="#two-phase-locking">Two-phase locking</a></li></ul></li><li><a href="#l18-distributed-transactions-two-phase-commit-multi-site-atomicity">L18:distributed transactions: two-phase commit(multi-site atomicity)</a></li><li><a href="#l19-replication-replicated-state-machines">L19:Replication:replicated state machines</a></li></ul><!-- tocstop --></div><blockquote><p>our goal is to build reliable systems from unreliable components. we want to build systems that serve many clients, store a lot of data, perform well, all while keeping availability high.</p></blockquote><h2><span id="l14-raid-reliability-via-replication">L14:RAID:reliability via replication</span><a href="#l14-raid-reliability-via-replication" class="header-anchor">Â¶</a></h2><p>Question: how to build fault-tolerant/reliable systems?</p><p>The high-level process of dealing with failures is to identify the faults, detect/contain the faults, and handle the faults. in lecture, we will build a set of abstractions to make that process more manageable.</p><p>How to measure success?</p><ul><li>availability is one way to measure reliability. Reliability metrics differ from different systems.</li><li>Mean time to failure, mean time to repair, mean time between failures, availability</li></ul><p>Problem: single disk failures</p><blockquote><p>RAID is a data storage virtualization technology that combines multiple physical disk drive components into one or more logical units for the purposes of data redundancy, performance improvement, or both.</p></blockquote><p>Three effective approaches are as following:</p><ol><li>RAID 1: mirroring. Make a replica to store the same data inside.</li><li>RAID 4: make a dedicated parity disk. A xor B = C. We can induce the failed one no matter which one failed.</li><li>RAID 5:  intersperse the parity sectors amongst all N+1 disks to load balance writes.</li></ol><img src="/sg/2021/11/20/SD_ds/m.png" class title="æˆªå±2021-11-21 ä¸Šåˆ9.29.05"><p>Review: RAID ä¸èƒ½è§£å†³ç°æœ‰çš„é—®é¢˜ï¼Œå› ä¸ºç°å®ä¸­ä¸ä¼šæ°¸è¿œåªæ˜¯å•ä¸ªç£ç›˜å´©æºƒï¼Œéœ€è¦æ›´ç³»ç»Ÿåœ°å¤„ç†æ–¹æ³•ã€‚</p><h2><span id="l15-transactions-atomicity-amp-isolation">L15:Transactions: atomicity &amp; isolation</span><a href="#l15-transactions-atomicity-amp-isolation" class="header-anchor">Â¶</a></h2><p>problem: Possible crash in some point at thousand lines of code.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">transfer (bank_file, account_a, account_b, amount): </span><br><span class="line">    bank = read_accounts(bank_file) </span><br><span class="line">    bank[account_a] = bank[account_a] - amount </span><br><span class="line">    bank[account_b] = bank[account_b] + amount </span><br><span class="line">    write_accounts(tmp_file) </span><br><span class="line">    rename(tmp_file, bank_file)</span><br></pre></td></tr></table></figure><h3><span id="atomicity">Atomicity</span><a href="#atomicity" class="header-anchor">Â¶</a></h3><blockquote><p><strong>What is atomicity?</strong></p><ul><li><p>an action is atomic if it happens completely or not at all. if we can guarantee atomicity, it will be much easier to reason about failures.</p></li><li><p>Understanding that this code should be atomic comes from understanding what the application is <em>doing</em>. What actions need to be atomic depends on the application.</p></li></ul></blockquote><p>åˆ†æï¼šä¸ºäº†å®ç°æ–‡ä»¶è¯»å†™çš„åŸå­æ€§ï¼Œæˆ‘ä»¬éœ€è¦ä¿è¯æ–‡ä»¶çš„æ•°æ®ä¸èƒ½å› ä¸ºæŸè¡Œç¨‹åºå´©æºƒè€Œä¸¢å¤±ã€‚</p><p>Golden rule: never modify the only copy.</p><p>Attempt 1: åªç”¨ä¸€ä¸ªæ–‡ä»¶å­˜å‚¨è´¦æˆ·ï¼Œè´¦æˆ·çš„ä»»ä½•æ“ä½œï¼ˆè¯»å†™ï¼ŒåŠ è½½ï¼Œæ›´æ–°ï¼‰éƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ç›´æ¥ä¿®æ”¹ï¼Œå½“ä¿®æ”¹å®Œæˆï¼Œå†ä»å†…å­˜å†™å›åˆ°ç£ç›˜ä¸­ã€‚</p><p>Attempt 2: <strong>shadow copy</strong>ï¼šåˆ›å»ºä¸€ä¸ªå¤åˆ¶çš„æ–‡ä»¶åå†å¯¹åŸæ–‡ä»¶è¿›è¡Œæ“ä½œï¼ˆæ¯”å¦‚rename). è¿™é‡Œéœ€è¦ä¸€æ­¥é‡å‘½åæ–‡ä»¶ï¼Œä»¥ä½¿èƒ½å¯¹failuresæ›´å‡†ç¡®åœ°æ¨æ–­ã€‚ï¼ˆåœ¨Exampleä¸­è¯¦è¿°ï¼‰</p><p>summary of shadow copy: it meets our goal. However, it perform badly. Problems include requiring copying the entire file for even small changesâ€¦</p><p><strong>Example: file crash</strong></p><p>Problem1: a crash during rename() potentially leaves bank_file in an intermediate state.</p><p>Solution 1: make rename() atomic</p><ul><li>Single-sector writes are atomic</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rename(tmp_file, orig_file): </span><br><span class="line">    tmp_inode = lookup(tmp_file)   // = <span class="number">2</span> </span><br><span class="line">    orig_inode = lookup(orig_file) // = <span class="number">1</span> </span><br><span class="line">    orig_file dirent = tmp_inode &lt;- crash!</span><br><span class="line">    remove tmp_file dirent </span><br><span class="line">    decref(orig_inode)</span><br></pre></td></tr></table></figure><p>Problem2: rename happened, but refcounts wrong</p><p>Solution2: recover the disk after a crash.</p><p>å¦‚æœåœ¨recoveræ—¶crashï¼Œé‚£ä¹ˆç»§ç»­recover</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">recover(disk): </span><br><span class="line">    <span class="keyword">for</span> inode <span class="keyword">in</span> disk.inodes: </span><br><span class="line">        inode.refcount = find_all_refs(disk.root_dir, inode) </span><br><span class="line">    <span class="keyword">if</span> exists(tmp_file): </span><br><span class="line">        unlink(tmp_file)</span><br></pre></td></tr></table></figure><h3><span id="isolation">isolation</span><a href="#isolation" class="header-anchor">Â¶</a></h3><blockquote><p>isolation refers to how and when the effects of one action (A1) are visible to another (A2) where A1 and A2 appear to have executed serially, even if they are actually executed in parallel.</p></blockquote><p>Problem: how to use lock?</p><p>Problem: transactions are powerful abstraction that provides atomicity and isolation. How to implement transaction?</p><p>Example:</p><p>â€‹  T1                         T2<br>â€‹      begin                   begin<br>â€‹      transfer(A, B, 20)       transfer(B, C, 5)<br>â€‹      withdraw(B, 10)         deposit(A, 5)<br>â€‹      end                      end</p><h2><span id="l16-logging-atomicity">L16:Logging(atomicity)</span><a href="#l16-logging-atomicity" class="header-anchor">Â¶</a></h2><p>Problem 0: how do systems guarantee atomicity and isolation?</p><p>Basic idea: Keep a log of all changes and whether a transaction commits.</p><p>changes include:</p><ol><li>begin(allocate new transaction ID),</li><li>write(append entry to log),</li><li>read(scan log to find last committed value),</li><li>commit(write commit record),</li><li>recover(doing nothing).</li></ol><p>Problem 1: which operation in(read, write, recovery) is slowest?</p><p>Answer: Read is slowest because it must scan entire log.</p><p>Improvement 1: use cell storage(non-volatile memory) to store data. Updates go to log and cell storage, then we can read from cell storage without scanning the entire log.</p><p>Changes with improvement 1:</p><ol><li><p>how to write?</p><p>Log before install. And the record helps to recover from a crash in between the two writes. (Write-ahead logging)</p></li><li><p>how to recover?</p><p>basically, scan the log entry requiring recovering</p></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">read(var): </span><br><span class="line">  <span class="keyword">return</span> cell_read(var)</span><br><span class="line">write(var, value): </span><br><span class="line">  log.append(current_tid, â€œUPDATEâ€, var, </span><br><span class="line">             read(var), value) </span><br><span class="line">  cell_write(var, value)</span><br><span class="line">recover(log):   </span><br><span class="line">  commits = [] </span><br><span class="line">  <span class="keyword">for</span> record r <span class="keyword">in</span> log[<span class="built_in">len</span>(log)-<span class="number">1</span>] .. log[<span class="number">0</span>]: </span><br><span class="line">    <span class="keyword">if</span> r.<span class="built_in">type</span> == COMMIT: </span><br><span class="line">      commits.add(r.tid) </span><br><span class="line">    <span class="keyword">if</span> r.<span class="built_in">type</span> == UPDATE <span class="keyword">and</span> r.tid <span class="keyword">not</span> <span class="keyword">in</span> commits: </span><br><span class="line">      cell_write(r.var, r.old_val) // undo</span><br></pre></td></tr></table></figure><p>problem 2: the changes made in problem 1 cause bad performance in recovery for it needs to scan the entire log.</p><p>Improvement 2: use a cache(volatile memory).</p><p>Problem 2.1: After crash, there may be updates that didnâ€™t make it to cell storage (were in cache but not flushed)</p><p>Improvement 2.1: We need a redo phase in addition to an undo phase in our recovery (see slide for code)</p><p>Problem 2.2: recovery takes longer and longer as the log grows</p><p>Improvement 2.2: write the <code>checkpoint</code> record and truncate the log</p><p><code>checkpoint</code> is a certain point in the process of transactions where all previous transactions are known to store in the NVM storage. Flush all cached entries, write a <code>checkpoint</code> record, then truncate the log prior to the <code>checkpoint</code> record.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">read(var): </span><br><span class="line">  <span class="keyword">if</span> var <span class="keyword">in</span> cache: </span><br><span class="line">    <span class="keyword">return</span> cache[var] </span><br><span class="line">  <span class="keyword">else</span>: </span><br><span class="line">    // may evict others <span class="keyword">from</span> cache to cell storage </span><br><span class="line">    cache[var] = cell_read(var) </span><br><span class="line">    <span class="keyword">return</span> cache[var]</span><br><span class="line">  </span><br><span class="line">write(var, value): </span><br><span class="line">  log.append(current_tid, update, var, </span><br><span class="line">             read(var), value) </span><br><span class="line">  cache[var] = value</span><br><span class="line">  </span><br><span class="line">flush(): // called â€œoccasionallyâ€ </span><br><span class="line">  cell_write(var, cache[var]) <span class="keyword">for</span> each var</span><br><span class="line">  </span><br><span class="line">recover(log):   </span><br><span class="line">  commits = &#123;&#125; </span><br><span class="line">  <span class="keyword">for</span> record r <span class="keyword">in</span> log[<span class="built_in">len</span>(log)-<span class="number">1</span>] .. log[<span class="number">0</span>]: </span><br><span class="line">    <span class="keyword">if</span> r.<span class="built_in">type</span> == commit: </span><br><span class="line">      commits.add(r.tid) </span><br><span class="line">    <span class="keyword">if</span> r.<span class="built_in">type</span> == update <span class="keyword">and</span> r.tid <span class="keyword">not</span> <span class="keyword">in</span> commits: </span><br><span class="line">      cell_write(r.var, r.old_val) // undo  </span><br><span class="line">  <span class="keyword">for</span> record r <span class="keyword">in</span> log[<span class="number">0</span>] .. log[<span class="built_in">len</span>(log)-<span class="number">1</span>]: </span><br><span class="line">    <span class="keyword">if</span> r.<span class="built_in">type</span> == UPDATE <span class="keyword">and</span> r.tid <span class="keyword">in</span> commits: </span><br><span class="line">      cell_write(r.var, r.new_value) // redo, improvement <span class="number">2.1</span></span><br></pre></td></tr></table></figure><p>real problem: one single failure in high-scalability system can cause problems as well. like bank system, hospital systemâ€¦</p><h2><span id="l17-two-phase-locking-isolation">L17:two-phase locking(isolation)</span><a href="#l17-two-phase-locking-isolation" class="header-anchor">Â¶</a></h2><p>Problem: We have multiple transactions â€“ T1, T2, â€¦, TN â€“ all of which must be atomic, and all of which can have multiple steps.  We want to schedule the steps of these transactions so that it appears as if they ran sequentially.</p><p>Solution: we need a fine-grained locking. our goal (in lecture) is to run transactions concurrently, but to produce a schedule that is conflict serializable</p><h3><span id="serializability">Serializability</span><a href="#serializability" class="header-anchor">Â¶</a></h3><p>what type of serializability you want depends on what your application needs/what state do we need/want?</p><p>different type of serializability: <strong>conflict serializability</strong></p><ul><li><p>Conflicts: two operations conflict if they operate on the same object and at least one of them is a write.</p></li><li><p>a schedule is <strong>conflict serializable</strong> if the order of all of its conflicts is the same as the order of the conflicts in some sequential schedule.</p></li></ul><p>Problem: how do we generate conflict-serializable schedules?</p><h3><span id="two-phase-locking">Two-phase locking</span><a href="#two-phase-locking" class="header-anchor">Â¶</a></h3><ol><li>each shared variable has a lock</li><li>before <strong>any</strong> operation on a variable, the transaction must acquire the corresponding lock</li><li><em>multiple transactions can hold reader locks for the same variable at once; a transaction can only hold a writer lock for a variable if there are no other locks held for that variable.</em>(improvement 1)</li><li><em>after a transaction releases a lock, it may <strong>not</strong> acquire any other locks</em>(improvement 0)</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">T1 </span><br><span class="line">begin acquire(x.lock) </span><br><span class="line">T1<span class="number">.1</span> read(x) </span><br><span class="line">acquire(y.lock) </span><br><span class="line">T1<span class="number">.2</span> tmp = read(y) </span><br><span class="line">T1<span class="number">.3</span> write(y, tmp+<span class="number">10</span>) </span><br><span class="line">commit release(x.lock) </span><br><span class="line">release(y.lock)</span><br><span class="line"></span><br><span class="line">T2 </span><br><span class="line">begin acquire(x.lock) </span><br><span class="line">T2<span class="number">.1</span> write(x, <span class="number">20</span>) </span><br><span class="line">acquire(y.lock) </span><br><span class="line">T2<span class="number">.2</span> write(y, <span class="number">30</span>) </span><br><span class="line">commit release(x.lock) </span><br><span class="line">release(y.lock)</span><br></pre></td></tr></table></figure><p>Lemma:2PL (without improvement version) produces a conflict-serializable schedule.</p><p>Proof: prove by contradiction. If 2PL is not conflict serializable, then a cycle exists in the conflict graph. There are T1, T2, â€¦ Tk transactions in the graph. To cause conflicts, each pair of confict graph must share a lock as T1 and T2 shares lock x1, (T2, T3, x2), (Tk, T1, xk). To process in the graph, x1 must be released by T1 before T2 can acquire it which contradicts #4 in 2PL.</p><p>problem 1: dead lock</p><p>Better solution than global ordering on locks is to take advantage of atomicity and abort one of the transactions.</p><p>performance improvement(improvement 1): reader-writer locks</p><ul><li>Rules: many readers, one writer.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">T1 </span><br><span class="line">begin acquire(x.reader_lock) </span><br><span class="line">T1<span class="number">.1</span> read(x) </span><br><span class="line">acquire(y.reader_lock) </span><br><span class="line">T1<span class="number">.2</span> tmp = read(y) </span><br><span class="line">acquire(y.writer_lock) </span><br><span class="line">T1<span class="number">.3</span> write(y, tmp+<span class="number">10</span>) </span><br><span class="line">commit release(x.reader_lock) </span><br><span class="line">release(y.reader_lock) </span><br><span class="line">release(y.writer_lock)</span><br><span class="line"></span><br><span class="line">T2 </span><br><span class="line">begin acquire(x.writer_lock) </span><br><span class="line">T2<span class="number">.1</span> write(x, <span class="number">20</span>) </span><br><span class="line">acquire(y.writer_lock) </span><br><span class="line">T2<span class="number">.2</span> write(y, <span class="number">30</span>) </span><br><span class="line">commit release(x.writer_lock) </span><br><span class="line">release(y.writer_lock)</span><br></pre></td></tr></table></figure><p>improvement 2: give up conflict serializable in view serializable cases</p><p>why not view serializable?</p><ul><li><p>view serializablity is the intermediate reads and final state (writes) are the same as in some sequential schedule.</p></li><li><p>test reason: hard to detect view serializable cases. While checking whether a graph is acyclic is fast.</p></li><li><p>aside: how to check a graph is acyclic? dfs, O(|V| + |E|)</p></li></ul><h2><span id="l18-distributed-transactions-two-phase-commit-multi-site-atomicity">L18:distributed transactions: two-phase commit(multi-site atomicity)</span><a href="#l18-distributed-transactions-two-phase-commit-multi-site-atomicity" class="header-anchor">Â¶</a></h2><p>Scenario: Client + coordinator + two servers: one with accounts A-M, the other with accounts N-Z.</p><ul><li><img src="/sg/2021/11/20/SD_ds/6.png" class title="æˆªå±2021-12-07 ä¸‹åˆ5.26.21"></li></ul><p>Goal: develop a protocol that can provide multi-site atomicity in the face of all sorts of failures(every part of the system can fail)</p><p>Problem: one server committed, the other did not</p><p>Approach: two-phase commit, nodes agree that theyâ€™re ready to commit before committing</p><p>more specifically,</p><blockquote><ol><li>Coordinator sends tasks to servers (workers)</li><li>Once all tasks are done, coordinator sends prepare messages to workers.</li><li>Once all workers are confirmed to be prepared, coordinator will tell them to commit, and tell client that the transaction has committed.</li></ol></blockquote><ul><li><img src="/sg/2021/11/20/SD_ds/7.png" class title="æˆªå±2021-12-07 ä¸‹åˆ5.33.40"></li></ul><p>Understanding the process is possible to infer the stage where the failure occurred and solve it.</p><p>basic idea: itâ€™s ok to abort the process before the <code>commit point</code>. Otherwise, it cannot abort, and it needs recovery approach.</p><p><u>question</u>: how things work?</p><ul><li><p>Worker: worker prepared, worker acknowledged</p></li><li><p>Coordinator</p><ul><li>if heared all workers prepared, it writes COMMIT to its own log,(<code>commit point</code>)</li><li>if heard all workers committed, it writes DONE to its own log.(transaction is totally done at that point)</li></ul></li></ul><p>approach applies in different types of <u>failures</u>:</p><ol><li>Worker/Network Failures Prior to the Commit Point<ul><li>Lost prepared message</li><li>lost ACK for prepare</li><li>Worker failure before prepare</li></ul></li><li>Worker Failures After the Commit Point<ul><li>Before receiving commit</li><li>After commit received</li></ul></li><li>Coordinator Failures<ul><li>Before prepare</li><li>After commit point, before DONE</li><li>After writing DONE</li></ul></li></ol><p><u>performance issues</u>:</p><p><u>Problem -1</u>: when sys fails, some data becomes unavailable.</p><p>Solution: replication.</p><p>approach: single-copy consistency</p><p>Problem -1.1: we need to keep multiple copies of the same pieces of data consistent, and we need to decide what type of consistency we want in different scenarios.</p><h2><span id="l19-replication-replicated-state-machines">L19:Replication:replicated state machines</span><a href="#l19-replication-replicated-state-machines" class="header-anchor">Â¶</a></h2><p>goal:solve problem -1.1 of L18</p><p>Attempt 1: replicate data on two servers</p><img src="/sg/2021/11/20/SD_ds/8.png" class title="æˆªå±2021-12-07 ä¸‹åˆ6.20.50"><p>Problem 1: messages can arrive at replicas in different orders resulting in inconsistent state.</p><img src="/sg/2021/11/20/SD_ds/9.png" class title="æˆªå±2021-12-07 ä¸‹åˆ6.24.06"><p>Attempt 2: make one replica the primary replica, and have a coordinator in place to help manage failures</p><img src="/sg/2021/11/20/SD_ds/0.png" class title="æˆªå±2021-12-07 ä¸‹åˆ6.28.17"><p>Problem 2: network partition splits the communication in half</p><img src="/sg/2021/11/20/SD_ds/1.png" class title="æˆªå±2021-12-07 ä¸‹åˆ6.28.31"><p>Attempt 3: use a view server to determine which replica is primary, in hopes that we can deal with network partitions</p><img src="/sg/2021/11/20/SD_ds/2.png" class title="æˆªå±2021-12-07 ä¸‹åˆ6.30.02"><p>problem 3.1: network partition prevents S1 from communicating with VS</p><img src="/sg/2021/11/20/SD_ds/3.png" class title="æˆªå±2021-12-07 ä¸‹åˆ6.31.01"><p>problem 4: VS fails. It can be a bottleneck of the system.</p><p>Solution: Distribute the view server and achive agreement from them. View sever 1 through n, each manages a partition of replica sets.</p><ul><li>machanisms for distributed consensus<ul><li>Raft</li><li>Paxos</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.033 system design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SD network</title>
      <link href="/sg/2021/11/17/SD_network/"/>
      <url>/sg/2021/11/17/SD_network/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#introduction">introduction</a><ul><li><a href="#history-view">history view</a></li></ul></li><li><a href="#routing-hard-to-scale-version">Routing(hard to scale version)</a></li><li><a href="#routing-at-scale-bgp">Routing at scale:BGP</a></li><li><a href="#tcp">TCP</a></li><li><a href="#in-network-resource-management">In-network resource management</a><ul><li><a href="#a1-queue-management">A1:Queue management</a></li><li><a href="#a2-delay-based-scheduling">A2:Delay-based scheduling</a></li><li><a href="#a3-bandwidth-based-scheduling">A3:Bandwidth-based scheduling</a></li><li><a href="#discussion">Discussion</a></li></ul></li></ul><!-- tocstop --></div><p>ç›®æ ‡ï¼šå¯¹è®¡ç®—æœºç½‘ç»œçš„ç½‘ç»œå±‚åˆ°åº”ç”¨å±‚æœ‰æœ€åŸºæœ¬çš„äº†è§£ã€‚åŒ…æ‹¬TCPå’ŒUDPã€IPå’Œåº”ç”¨å±‚åˆ†åˆ«æä¾›äº†ä»€ä¹ˆä¿è¯ï¼Œæ²¡æœ‰æä¾›ä»€ä¹ˆä¿è¯ï¼›æˆ‘ä»¬èƒ½é€šè¿‡ä»–ä»¬è¾¾åˆ°ä»€ä¹ˆç›®çš„ï¼›æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ä»–ä»¬ã€‚</p><blockquote><p>general goal: on the Internet, we have to solve all of the â€œnormalâ€ networking problems (addressing, routing, transport) at massive scale, while supporting a diverse group of applications and competing economic interests.</p></blockquote><h2><span id="introduction">introduction</span><a href="#introduction" class="header-anchor">Â¶</a></h2><p>link -&gt; network -&gt; transport -&gt; application</p><ul><li><p>a simple network example</p><ul><li>topology<ul><li><img src="/sg/2021/11/17/SD_network/Screenshot-1141820.png" class title="Screenshot-1141820"></li></ul></li></ul></li><li><p><a href="https://www.caida.org/projects/as-core/2020/">CAIDAâ€™s IPv4 and IPv6 AS Core</a>: Visualizing IPv4 and IPv6 Internet Topology at a Macroscopic Scale in 2020</p></li></ul><h3><span id="history-view">history view</span><a href="#history-view" class="header-anchor">Â¶</a></h3><img src="/sg/2021/11/17/SD_network/sc.png" class title="æˆªå±2021-11-17 ä¸‹åˆ3.37.43"><ol><li><p>make the internet flexible: layered model in 1978</p><blockquote><p>with a layered model, we can swap out protocols at one layer without much (or perhaps any) change to protocols at other layers.</p></blockquote></li><li><p>reliable transport: TCP 1983</p></li><li><p>scalibility: EGP (1978), DNS (1982)</p></li></ol><p>Problems (history view):</p><ol><li><p>Congestion collapse -&gt; congestion control mechanism</p></li><li><p>Commercial use -&gt; policy routing(BGP) (early 90s)</p></li><li><p>Assign addresses in chunks of different sizes -&gt; CIDR</p></li></ol><p>Problems (today):</p><ol><li>Denial of service attack</li><li>security</li><li>mobility</li><li>address space depletion: IPv4 -&gt; IPv6</li><li>congestion control</li></ol><h2><span id="routing-hard-to-scale-version">Routing(hard to scale version)</span><a href="#routing-hard-to-scale-version" class="header-anchor">Â¶</a></h2><p>Problems: For every node X, after the routing protocol is run, Xâ€™s routing table should contain a <em>minimum-cost route</em> to every other reachable node.</p><p>Concept:</p><ul><li><p>Path: full path packets will travel.</p></li><li><p>Route: first hop of that path.</p></li><li><p>Link cost</p></li></ul><p><u>distributed routing protocol</u>: nodes build up their own routing tables, rather than having tables given to them by a centralized authority.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> node <span class="keyword">in</span> Nodes:</span><br><span class="line">Hello(Neighbors);</span><br><span class="line">advertisements();</span><br><span class="line">count(minimum_cost_routes);</span><br></pre></td></tr></table></figure><p>Analysis:</p><p>there are two ways of routing applying distributed routing protocols:</p><ol><li><p>Link-state routing: disseminate full topology information so that nodes can run a shortest-path algorithm (Dijkstra)</p></li><li><p>Distance-vector routing: disseminate information about the current costs to each node, rather than the actual topology. A node applies Bellman-Ford algorithm to compute the next-hop node for every destination.</p><ul><li><img src="/sg/2021/11/17/SD_network/sc1.png" class title="æˆªå±2021-11-17 ä¸‹åˆ4.19.25"></li></ul></li></ol><p>Flooding makes link-state robust to failure but the overhead of flooding is overwhelming, close to 2NL advertisements for N nodes, L links.</p><p>The good thing of distance-vector routing is the overhead of advertisements cost 2L. However, distance-vector routing incurs issues of couting to infinity when a node has no route to destination B. Some nodes can incorrectly think thereâ€™s a route when there isnâ€™t one. A workaround is split horizon, which doesnâ€™t send advertisements about a route back to the node providing the route.</p><p>Summary: they are good for very small networks but not good enough for scaling to the size of the internet.</p><h2><span id="routing-at-scale-bgp">Routing at scale:BGP</span><a href="#routing-at-scale-bgp" class="header-anchor">Â¶</a></h2><p><em>Concept</em></p><p>BGP: border gateway protocol</p><p>policy routing: switches make routing decisions based on some set of policies set by a human.  Routing protocol must disseminate enough information to enable those policies.</p><ul><li><img src="/sg/2021/11/17/SD_network/sc2.png" class title="æˆªå±2021-11-21 ä¸‹åˆ12.18.49"></li></ul><p>Problem: why BGP can scale while link state and distance vector canâ€™t?</p><p>BGP relationships: customer/provider, peers</p><p>Export policies</p><p>Import policies</p><p>Distributed routing</p><p>Problems with BGP</p><ul><li>Scale</li><li>Secure</li></ul><h2><span id="tcp">TCP</span><a href="#tcp" class="header-anchor">Â¶</a></h2><p><em>Concept</em>: reliable transport&amp;congestion control</p><p>arguments: Sequence numbers, acknowledgements,timeouts</p><p><u>Problem 0</u>: create a reliable transport protocol, which delivers each byte of data <strong>exactly once, in-order</strong>, to the receiving application.</p><p>Goal: fairness and efficiency.</p><ul><li>Approach 1: sliding-window protocol<ul><li><img src="/sg/2021/11/17/SD_network/sc3.png" class title="æˆªå±2021-12-05 ä¸‹åˆ6.33.00"></li></ul></li></ul><p><u>problem 1</u>: how to decide W? (Drops,delay, bandwidth bottleneck)</p><p><em>assumption</em>: infinite offered load</p><p><u>Improvement 1</u>: congestion control</p><p>AIMD (additive-increase/multiplicative-decrease): every RTT(round-trip-time, if there is no loss, W = W + 1; else, W = W/2</p><ul><li><p>Issue 1: when remove the assumption, TCP has trouble measuring the fairness.</p></li><li><p>Example: S1,S2 offered load 10 packets/s; S3 5 packets/s.</p><p>Result: get max-min fairness:S3 stops increase once itâ€™s sending 5 packets/s. S1 and S2 continue increasing until they reach 7-8 packets/s.</p></li></ul><p><u>improvement 2</u>: Slow-start: at the start of the connection, double W every RTT.</p><p><u>improvement 3</u>: Fast retransmit/fast recovery: retransmit packet k+1 as soon as four ACKs with sequence number k are received.</p><ul><li>issue 2: TCP doesnâ€™t react to congestion until itâ€™s already happening.  -&gt; next lecture</li></ul><h2><span id="in-network-resource-management">In-network resource management</span><a href="#in-network-resource-management" class="header-anchor">Â¶</a></h2><p>TCP have issues that:</p><p>problem 1: long delays when routers have too much buffering</p><p>problem 2: Doesnâ€™t work well in some scenarios (DCTCP)</p><p>Problem 3: doesnâ€™t react to congestion until queues are full.</p><p>Goal: solve problem 3: transient queues.</p><p>Idea: manipulate switches to get flexibility.</p><p>consideration: we need to think about what the method allows a switch to do? Example protocols? How the protocol works? Pros/cons of each protocol.</p><h3><span id="a1-queue-management">A1:Queue management</span><a href="#a1-queue-management" class="header-anchor">Â¶</a></h3><ol><li><p>drop tail</p></li><li><p>Random early detection</p></li><li><p>explicit congestion notification</p></li></ol><h3><span id="a2-delay-based-scheduling">A2:Delay-based scheduling</span><a href="#a2-delay-based-scheduling" class="header-anchor">Â¶</a></h3><ol><li>priority queueing</li></ol><h3><span id="a3-bandwidth-based-scheduling">A3:Bandwidth-based scheduling</span><a href="#a3-bandwidth-based-scheduling" class="header-anchor">Â¶</a></h3><ol><li>Round-robin</li><li>weighted round-robin</li><li>deficit round-robin</li></ol><h3><span id="discussion">Discussion</span><a href="#discussion" class="header-anchor">Â¶</a></h3><p>letâ€™s think about three ideas in lecture:</p><ol><li><p>Traffic differentiation</p></li><li><p>Queue-management</p></li><li><p>In-network resource-management</p><img src="/sg/2021/11/17/SD_network/sc4.png" class title="æˆªå±2021-12-05 ä¸‹åˆ6.48.52"></li></ol>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.033 system design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>6.046 randomization</title>
      <link href="/sg/2021/11/15/6.046-randomization/"/>
      <url>/sg/2021/11/15/6.046-randomization/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#randomization">Randomization</a><ul><li><a href="#matrix-multiply">Matrix multiply</a></li><li><a href="#quicksort">quicksort</a></li><li><a href="#r4-randomized-median">R4: Randomized median</a></li><li><a href="#skip-lists">skip lists</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="randomization">Randomization</span><a href="#randomization" class="header-anchor">Â¶</a></h2><p>éšæœºç®—æ³•æœ‰å¾ˆå¤šç§ï¼Œæ¯”è¾ƒæœ‰è¶£çš„ä¸‰ç±»æ˜¯ï¼š</p><ol><li>Probably correct(determined fast) : <a href="https://en.wikipedia.org/wiki/Monte_Carlo_algorithm">Monte Carlo algorithm</a></li><li>Probably fast(determined correct): <a href="https://en.wikipedia.org/wiki/Las_Vegas_algorithm">Las Vegas algorithm</a></li><li>not guaranteed to be fast or correct: <a href="https://en.wikipedia.org/wiki/Atlantic_City_algorithm">Atlantic City algorithms</a></li></ol><h3><span id="matrix-multiply">Matrix multiply</span><a href="#matrix-multiply" class="header-anchor">Â¶</a></h3><p>problem: Matrix product checker</p><p>Given  n Ã— n  matrices  A, B, C,  the  goal  is to  check  if A Ã— B  = C  or not.<br>Question:  a such matrix multiplication would take O(n**3) time. We want a checker algorithm to take less time than that, or else the checker doesnâ€™t make sense.</p><p>We  will  see an  O(n**2)  algorithm  that:</p><ul><li>if A Ã— B = C, then  Pr[output=YES] = 1.</li><li>if A Ã— B = C, then  Pr[output=YES] â‰¤ 1/2</li></ul><p><u>Frievaldâ€™s algorithm</u>: Choose a random binary vector r[1â€¦n] such that Pr[ri  = 1] = 1 /2 independently for  r = 1 , â€¦, n.  The algorithm  will output  â€™YESâ€™  if A(Br) =   Cr and  â€™NOâ€™ otherwise.</p><p><u>Analysis of correctness if AB != C</u></p><p>Claim:  If  AB != C, then  Pr[ABr != Cr] â‰¥ 1/2.</p><p><u>want to show</u>: ABr != Cr =&gt; Dr != 0 where D=AB-C. The goal is to show that there are many r such that Dr != 0.(many &gt;= 1/2)</p><p><em>Proof</em>:</p><ol><li><p>Dr != 0 case, we would output â€˜Noâ€™, done</p></li><li><p>Dr = 0 case(specifically, it means that find râ€™ s.t. Drâ€™ != 0)</p><p>Set a binary vector v is 0 in all coordinates except for v_j = 1: (Dv)_i = d_ij !=0 implies Dv != 0</p><p>Take any r where Dr = 0, set râ€™ = r + v.</p><ul><li>Drâ€™ = D(r + v) = 0 + Dv != 0</li><li>r to râ€™ is 1 to 1</li></ul><p>Therefore # râ€™ for which Drâ€™ != 0 &gt;= # r for which Dr=0</p></li></ol><p>we can conclude that Pr[ABr != Cr] â‰¥ 1/2.</p><h3><span id="quicksort">quicksort</span><a href="#quicksort" class="header-anchor">Â¶</a></h3><p>Quick sort is in-place sort, which need not require auxiliary space as merge sort. Divide and conquer algorithm doesnâ€™t work well in the combine step.</p><p>We can use median finding in pivot selection. It takes theta(n*logn) time. However, it is slow in practice and loses to merge sort.</p><p>randomized quicksort comes to solution.</p><p>â€œparanoidâ€ quicksort analysis and expected runtime analysis</p><h3><span id="r4-randomized-median">R4: Randomized median</span><a href="#r4-randomized-median" class="header-anchor">Â¶</a></h3><p>Quick find, quick sort</p><p>expected runtime, amoritized runtime are just fancier way saying average runtime.</p><h3><span id="skip-lists">skip lists</span><a href="#skip-lists" class="header-anchor">Â¶</a></h3><p>With high probability bound</p>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
          <category> 6.046 algorithms design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SD os</title>
      <link href="/sg/2021/11/15/SD_os/"/>
      <url>/sg/2021/11/15/SD_os/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#concurrency">concurrency</a></li><li><a href="#virtual-machines">virtual machines</a></li></ul><!-- tocstop --></div><h2><span id="concurrency">concurrency</span><a href="#concurrency" class="header-anchor">Â¶</a></h2><p>problem: how to handle concurrency problem using yield? And the problems encountered.(from lecture 5)</p><p>yield(): suspends the running thread, chooses a new thread to run, and resumes the new thread</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">yield</span>(): </span><br><span class="line">  acquire(t_lock) </span><br><span class="line">  // Suspend the running thread </span><br><span class="line">  <span class="built_in">id</span> = cpus[CPU].thread </span><br><span class="line">  threads[<span class="built_in">id</span>].state = RUNNABLE </span><br><span class="line">  threads[<span class="built_in">id</span>].sp = SP </span><br><span class="line">  threads[<span class="built_in">id</span>].ptr = PTR </span><br><span class="line">  // Choose a new thread to run </span><br><span class="line">  do: </span><br><span class="line">    <span class="built_in">id</span> = (<span class="built_in">id</span> + <span class="number">1</span>) mod N </span><br><span class="line">  <span class="keyword">while</span> threads[<span class="built_in">id</span>].state != RUNNABLE </span><br><span class="line">  // Resume the new thread </span><br><span class="line">  SP = threads[<span class="built_in">id</span>].sp </span><br><span class="line">  PTR = threads[<span class="built_in">id</span>].ptr </span><br><span class="line">  threads[<span class="built_in">id</span>].state = RUNNING </span><br><span class="line">  cpus[CPU].thread = <span class="built_in">id</span> </span><br><span class="line">    </span><br><span class="line">  release(t_lock)</span><br></pre></td></tr></table></figure><h2><span id="virtual-machines">virtual machines</span><a href="#virtual-machines" class="header-anchor">Â¶</a></h2><p>Scenario: running multiple Ones on a single physical machine.</p><p>problem: how to safely share physical hardware?</p><img src="/sg/2021/11/15/SD_os/sc.png" class title="æˆªå±2021-11-15 ä¸‹åˆ10.12.27">]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.033 system design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>How to read a paper?</title>
      <link href="/sg/2021/11/15/paper/"/>
      <url>/sg/2021/11/15/paper/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#zen-me-du-lun-wen">æ€ä¹ˆè¯»è®ºæ–‡</a><ul><li><a href="#third-pass">third pass</a></li></ul></li><li><a href="#du-shi-me-lun-wen">è¯»ä»€ä¹ˆè®ºæ–‡</a></li><li><a href="#review">review</a></li></ul><!-- tocstop --></div><h2><span id="zen-me-du-lun-wen">æ€ä¹ˆè¯»è®ºæ–‡</span><a href="#zen-me-du-lun-wen" class="header-anchor">Â¶</a></h2><h3><span id="third-pass">third pass</span><a href="#third-pass" class="header-anchor">Â¶</a></h3><p>Goals:</p><ol><li>general idea</li><li>Content, not details(such as proofs)</li><li>Read in depth</li></ol><h4><span id="first-pass">first pass</span><a href="#first-pass" class="header-anchor">Â¶</a></h4><p>5~10 min, å†³å®šæ˜¯å¦ç»§ç»­è¯»</p><ul><li>æ­¥éª¤ï¼š</li></ul><ol><li>è¯»æ ‡é¢˜ï¼Œæ‘˜è¦ï¼Œä»‹ç»</li><li>è¯»éƒ¨åˆ†å’Œå°éƒ¨åˆ†çš„æ ‡é¢˜ï¼Œç•¥å»å…¶ä»–</li><li>è¯»ç»“è®º</li><li>ç¥ä¸€çœ¼å¼•ç”¨ï¼Œå»æ‰è¯»è¿‡çš„</li></ol><ul><li>å›ç­”é—®é¢˜ï¼š5C</li></ul><ol><li><p>Category: What type of paper is this? A measurement paper? An analysis of an existing system? A description of a research prototype?</p></li><li><p>Context: Which other papers is it related to? Which theoretical bases were used to analyze the</p><p>problem?</p></li><li><p>Correctness: Do the assumptions appear to be valid?</p></li><li><p>Contributions: What are the paperâ€™s main contributions?</p></li><li><p>Clarity: Is the paper well written?</p></li></ol><ul><li>é€‚ç”¨ç±»å‹ï¼šå¯èƒ½ç›¸å…³ï¼Œä¸åœ¨ç ”ç©¶æ°›å›´å†…</li></ul><h4><span id="second-pass">Second pass</span><a href="#second-pass" class="header-anchor">Â¶</a></h4><p>1h</p><ul><li>æ­¥éª¤</li></ul><ol><li>Look carefully at the figures, diagrams and other illustrations in the paper. Pay special attention to graphs.<ol><li>Are the axes properly labeled?</li><li>Are results shown with error bars, so that conclusions are statistically significant?</li></ol></li><li>Remember to mark relevant unread references for further reading (this is a good way to learn more about the background of the paper).</li></ol><ul><li>å›ç­”ï¼šsummarize the main thrust of the paper, with supporting evidence, to someone else</li><li>é€‚ç”¨ç±»å‹ï¼šæ„Ÿå…´è¶£çš„ï¼Œä½†ä¸åœ¨ç ”ç©¶èŒƒå›´ä¹‹å†…</li><li>å½“ä»æ—§çœ‹ä¸æ‡‚è¿™ç¯‡è®ºæ–‡åœ¨è®²å•¥ï¼šå»¶åå†è¯»</li></ul><h4><span id="third-pass">third pass</span><a href="#third-pass" class="header-anchor">Â¶</a></h4><p>4-5 hours, virtually re-implement the paper</p><ul><li>making the same assumptions as the authors: identify and challenge every assumption in every statement</li><li>recreate the work: think about how you yourself would present a particular idea.</li><li>By comparing this re-creation with the actual paper, you can easily identify not only a paperâ€™s innovations, but also its hidden failings and assumptions.</li></ul><h2><span id="du-shi-me-lun-wen">è¯»ä»€ä¹ˆè®ºæ–‡</span><a href="#du-shi-me-lun-wen" class="header-anchor">Â¶</a></h2><p>æš‚æ—¶è·Ÿç€è¯¾è¡¨èµ°å°±å¥½äº†ã€‚éƒ½è¦è®°ä¸‹å¯¹ä¹‹åå¯èƒ½æœ‰ç”¨çš„ç‚¹ï¼ˆç§¯ç´¯</p><h2><span id="review">review</span><a href="#review" class="header-anchor">Â¶</a></h2><p>æˆ‘ä¸ªäººçš„ä¸€ä¸ªå°å»ºè®®æ˜¯ï¼Œçœ‹çš„æ—¶å€™ï¼Œè‡ªå·±å¿ƒé‡Œä¹Ÿæƒ³ä¸€æƒ³ï¼Œå¦‚æœæ˜¯æˆ‘æ¥åšï¼Œæˆ‘ä¼šæ€ä¹ˆåšï¼Ÿå¦‚æœæˆ‘æ¥è®²è¿™ç¯‡paperï¼Œæˆ‘è¦æ€ä¹ˆæ ·æ‰èƒ½ç»™åˆ«äººè®²æ‡‚</p><p>å…³äºpaper reviewï¼š</p><ol><li><p>reviewæ˜¯ä»€ä¹ˆï¼Ÿæ‰€æœ‰ä¼šè®®paperï¼Œåœ¨æŠ•ç¨¿ä¹‹åï¼Œæ€ä¹ˆåˆ¤æ–­ä¸­è¿˜æ˜¯ä¸ä¸­å‘¢ï¼Ÿè¿™ä¸ªæµç¨‹å«åŒè¡Œè¯„å®¡ï¼Œæ˜¯æ‰¾å‡ ä¸ªåŒè¡Œä¸“å®¶å¯¹ä½ çš„paperè¿›è¡Œreviewï¼Œäº†è§£ä½ paperçš„å†…å®¹ï¼Œåˆ¤æ–­ä½ paperçš„ä¼˜ç¼ºç‚¹ï¼Œå†³å®šæ˜¯æ¥æ”¶è¿˜æ˜¯å½•å–ã€‚</p></li><li><p>reviewçš„ä¸»è¦å†…å®¹ï¼špaperçš„å†…å®¹ä¸ä¼˜ç¼ºç‚¹ã€‚ä¸€èˆ¬æ˜¯å¤§çº¦åŠé¡µåˆ°ä¸€é¡µA4çº¸çš„ç¯‡å¹…ã€‚</p></li><li><p>reviewçš„ç›®çš„ï¼šè¿™ä¸ªè¿‡ç¨‹ä¼šéœ€è¦ä½ å» ä¸»åŠ¨åœ°æ€è€ƒpaperçš„å†…å®¹ä¸ä»·å€¼ï¼Œæ‰¹åˆ¤æ€§åœ°å­¦ä¹ ä¸å¸æ”¶ï¼Œè¿™æ ·çš„æ•ˆæœå¾ˆå¤šæ—¶å€™æ¯” è¢«åŠ¨åœ°æ¥å— è¦æ›´å¥½ä¸€äº›ã€‚</p></li><li><p>å¦‚ä½•åˆ¤æ–­paperçš„ä»·å€¼ï¼Ÿè¿™ä¹Ÿæ˜¯åœ¨reviewçš„æ—¶å€™ä½ ä»¬è¦é—®è‡ªå·±çš„é—®é¢˜ã€‚æˆ‘è¿™é‡Œç»™ä¸€äº›å‚è€ƒå»ºè®®</p><p>è§£å†³çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿé‡è¦å˜›ï¼Ÿ<br>æ•ˆæœæ€ä¹ˆæ ·ï¼Ÿæ˜¾è‘—å˜›ï¼Ÿ<br>è¡¨è¿°æ€ä¹ˆæ ·ï¼Œæ¸…æ™°å˜›ï¼Ÿ<br>é€»è¾‘åˆç†å˜›ï¼Ÿ<br>æŠ€æœ¯æ˜¯å¦æœ‰é—®é¢˜ï¼Ÿ<br>å½±å“åŠ›æœ‰å¤šå¤§ï¼Ÿ<br>æ˜¯å¦å¤Ÿè¯¦ç»†ï¼Œèƒ½æ ¹æ®å®ƒå¤ç°å‡ºæ¥å˜›ï¼Ÿ<br>æ ¸å¿ƒçš„æ€æƒ³æ˜¯ä»€ä¹ˆï¼Œæœ‰é“ç†å˜›ï¼Ÿ<br>å®éªŒæ˜¯å¦å®Œæ•´ï¼Œæ˜¯å¦åˆç†å…¬å¹³ï¼Ÿ</p></li></ol><p>æ³¨ï¼šæ–¹æ³•éƒ¨åˆ†æ¥è‡ªHow to Read a Paperï¼›reviewéƒ¨åˆ†æ¥è‡ªèƒ¡ Sir(èƒ¡æ´¥é“­)çš„åˆ†äº«å’Œå»ºè®®ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
          <category> skill </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>recitation os</title>
      <link href="/sg/2021/11/15/recitation_os/"/>
      <url>/sg/2021/11/15/recitation_os/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#reading-we-did-nothing-wrong">Reading: We did nothing wrong</a></li><li><a href="#r-dns">R: DNS</a></li><li><a href="#paper-unix">Paper: UNIX</a></li></ul><!-- tocstop --></div><h3><span id="reading-we-did-nothing-wrong">Reading: We did nothing wrong</span><a href="#reading-we-did-nothing-wrong" class="header-anchor">Â¶</a></h3><p>ä¸»è¦è®²äº†ä¸ªè½¯ä»¶å‡ºé”™ç„¶åè¾å°„é‡å¢å¤§å¯¼è‡´ç—…äººæ­»äº¡æˆ–å¾—ç™Œç—‡çš„äº‹ä»¶ã€‚æœ¬æ¥FDAä¸ç®¡è½¯ä»¶çš„äº‹ï¼Œä½†é€ æˆä¼¤äº¡åå¼€å§‹è¿›è¡Œç›‘ç®¡ã€‚è´¨æ£€æœºåˆ¶åªèƒ½å‡å°‘è¿™ç§æƒ…å†µï¼Œå¾ˆéš¾æ¶ˆé™¤ã€‚ç„¶åè®²äº†æªæ–½é¿å…è¿™æ ·çš„é—®é¢˜ï¼Œå…¶ä¸­ä¸€æ¡å°±æ˜¯æé«˜ä»ä¸šäººå‘˜çš„ä¸“ä¸šé—¨æ§›ã€‚æˆ‘ä¸ªäººçš„çœ‹æ³•æ˜¯æé«˜ä¸“ä¸šé—¨æ§›æ˜¯æœ‰å¿…è¦çš„ï¼Œä½†æ˜¯è¿™é—¨æ§›ä¸èƒ½ç®€å•ç”¨æ ‡åŒ–æˆç»©æˆ–è€…å­¦ä½è¯æ¥è¡¡é‡ã€‚</p><p>æ³¨ï¼šä¹‹å‰å¡åœ¨è¿™å„¿çš„åŸå› æ˜¯ï¼Œåé¡µä»¥ä¸Šçš„è‹±æ–‡é˜…è¯»çœŸä¸çŸ¥é“å¦‚ä½•è¯»èµ·ï¼ŸğŸ˜­ç°åœ¨çŸ¥é“å’‹è¯»äº†ã€‚</p><h3><span id="r-dns">R: DNS</span><a href="#r-dns" class="header-anchor">Â¶</a></h3><p>The internet domain name system is designed for the communication between client and server. The primary purpose of DNS is to associate domain names to internet addresses.</p><p>DNSçš„è®¾è®¡ä¸»è¦ä»ä¸‰ä¸ªéƒ¨åˆ†çœ‹ï¼š</p><ul><li><p>name resolution</p><p><strong>Design of structures</strong></p><p>it can be designed in three ways:Telephone book model, the central directory service model and the distributed directory service model.</p><p>Telephone book model gives one big file to every machine. The volume of <u>network traffic</u> required to keep it up to date would grow with the cube of the number of domain names.</p><p>Central view is one powerful machine with one big table.That machine is hit with a ton of requests, which leads to a trade-off between a performance bottleneck and a potential source of massive failure.</p><p>Distributed view provides delegation and respond to increases in scale while maintaining reliability and performance.</p><p><strong>Operations</strong></p><ol><li>Name client makes a request. Its DNS_RESOLVE sends that domain name to a root name server</li><li>recursive part:The root name server matches the name in the request with the subset of domain names it knows about,starting with the most significant component of the requested domain name. If matching, respond with both domain names and internet addresses.</li><li>DNS_RESOLVE receives the response and resends the same name resolution request to what the response is.</li><li>Repeat operations above until DNS_RESOLVE finally reaches the the name server we wants.</li></ol><p><strong>Details</strong></p><ol><li><p>cache in name server and recursive names query</p><p>A server that provides <u>recursive name</u> service thus collects records that can greatly <u>speed up</u> future name resolution requests.</p><p>Fact: cache uses expiration instead of explicit invalidation of changed entries.</p><blockquote><p>A DNS cache manager is expected to discard entries that have passed their expiration period.</p></blockquote><p>ç”±äºname serverå‘å‡ºçš„è¯·æ±‚æ€»æ˜¯ä¼šåœ¨recursive nameçš„èŒƒå›´ä¸­ï¼Œé‚£ä¹ˆè¯·æ±‚æ¬¡æ•°è¾ƒå¤šçš„ç½‘å€åœ¨ç¼“å­˜ä¸­ä¿å­˜çš„æœŸé™å°±ä¼šæ›´é•¿ã€‚ä»è€Œå¢åŠ äº†hit ratioã€‚</p></li></ol></li><li><p>hierarchical name management</p><ul><li>Benefits: decentralization-&gt;distributing responsibility and Independent naming authorities(path name different).</li><li>Drawbacks?</li></ul></li><li><p>name discovery</p><ol><li>How this address gets into the configuration table?</li><li>Domain names</li><li>the extension that is used for unqualified domain names.</li></ol></li><li><p>Other features</p><p>Problem1: å¦‚æœæ€»æœåŠ¡å™¨ç€ç«äº†ï¼Œé‚£ä¹ˆè¿æ¥å°±æ–­äº†ï¼Œé‚£è¯¥æ€ä¹ˆä¸Šç½‘ï¼Ÿ</p><p>Problem2: å¦‚æœæˆ‘æƒ³è¦å»çš„åœ°å€æ”¹å˜äº†åœ°å€ï¼Œé‚£æˆ‘è¿˜æ€ä¹ˆæ‰¾åˆ°å®ƒï¼Ÿ</p><ul><li>å¤‡ä»½: replica of servers and network services to increase fault-tolerance<ul><li>Fact: the importance of separated attachment increases at higher levels of the naming hierarchy.</li></ul></li><li>Robust design of DNS<ul><li>DNS serverâ€™s public interface is idempotent</li><li>DNS serverâ€™s job is simple: accept a request packet, search a table, and send a response packet.</li></ul></li><li>é‡å®šå‘<ul><li>Maintenance: the names of services can be expected to outlive their bindings to particular Internet addresses, and synonyms cater to this difference in lifetimes.</li><li>allow a single computer to appear to be in two widely different naming domains</li></ul></li></ul></li><li><p>trustworthiness of dns response: authentication and accuracy</p></li></ul><h3><span id="paper-unix">Paper: UNIX</span><a href="#paper-unix" class="header-anchor">Â¶</a></h3><p>å†å²ï¼šUNIXæ˜¯ä¸€ä¸ªå¾ˆæ£’çš„æ“ä½œç³»ç»Ÿï¼Œç°ä»£çš„è®¸å¤šoséƒ½æ˜¯ä»unixå‡ºå‘ï¼Œå®ƒçš„å†å²å¯ä»¥è¿½æº¯åˆ°70å¹´ä»£ï¼Œè´å°”å®éªŒå®¤çš„ç ”ç©¶å‘˜ä¸ºäº†æ‘†è„±ç°æœ‰çš„ç³Ÿç³•çš„å¯ç”¨è®¡ç®—æœºè®¾æ–½è€Œç ”åˆ¶å‡ºçš„ï¼Œä¹‹åå†é€æ¸æ·»åŠ äº†æ–°çš„åŠŸèƒ½ã€‚å®ƒå¹¶ä¸æ˜¯ä»ä¸€å¼€å§‹å°±ä»è®¾è®¡ä¸Šå†³å®šçš„ï¼Œä½†ä¸ºäº†é€‚åˆç ”ç©¶å‘˜ç¼–ç¨‹çš„éœ€è¦è€Œé€æ¸æ·»åŠ çš„åŠŸèƒ½ä½¿å®ƒæœ€åæˆä¸ºäº†è™½ç„¶å°ä½†æ˜¯åŠŸèƒ½å¼ºå¤§çš„æ“ä½œç³»ç»Ÿã€‚</p><h4><span id="basic-structures">basic structures</span><a href="#basic-structures" class="header-anchor">Â¶</a></h4><p>UNIX çš„è®¾è®¡å¯ä»¥åˆ†ä¸ºå››éƒ¨åˆ†ï¼š</p><ol><li><p>file system</p><ul><li><p>Naming in file system applies layering and hierarchy like that in DNS.</p></li><li><p>The file can be divided into: ordinary files, directories, special files.</p></li><li><p>operations on files</p><ul><li>create</li><li>open</li><li>write</li><li>read</li><li>delete</li></ul></li><li><p>Implementations:</p><ul><li>When the file is accessed, the i-number is used as an index into a system table(the i-list) stored somewhere.</li><li>The entry thereby found is fileâ€™s i-node.</li></ul></li></ul></li><li><p>process</p><ul><li>Create a new process</li><li>Pipes: communication between processes using the read and write calls</li><li>execute</li><li>Process synchronization: wait()</li><li>Terminate a process</li></ul></li><li><p>shell</p><ul><li>Standard I/O</li><li>filters</li><li>Command separators to perform multitasking</li><li>Command files</li><li>Implementations</li></ul></li><li><p>Traps</p><ul><li>illegal action</li><li>Unwanted command</li><li>Quit</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 6.033 system design </category>
          
      </categories>
      
      
        <tags>
            
            <tag> paper </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>6.046 amortization</title>
      <link href="/sg/2021/11/13/6.046_amortization/"/>
      <url>/sg/2021/11/13/6.046_amortization/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#amortized-analysis-techniques">amortized analysis techniques</a></li><li><a href="#union-find">union-find</a></li></ul><!-- tocstop --></div><p>We have already known amortization in array resizing and hashing with chaining.</p><p><u>Amortized bound</u>: sum(amortized cost) &gt;= sum(actual cost)</p><p>Ex: 2-3 tree, O(1) amortized cost per create, O(lg n*) amortized cost per insert, and 0 amortized cost per delete.</p><ul><li>n* is the maximum size of 2-3 tree.</li><li>0 amortized cost per delete: canâ€™t delete without inserting first.</li></ul><h2><span id="amortized-analysis-techniques">amortized analysis techniques</span><a href="#amortized-analysis-techniques" class="header-anchor">Â¶</a></h2><ol><li><p>aggregate method</p><p>amortized cost per operation = total cost of k operations / k</p></li><li><p>accounting method</p><p>for each operation:</p><p>â€‹Store credit: amortized cost &gt; actual cost</p><p>â€‹pay for it: amortized cost &lt; actual cost</p><p>Example</p><ul><li><p>table doubling</p></li><li><p>2-3 tree</p></li></ul></li><li><p>charging method</p><p>amortized cost of an operation = actual cost of this operation - total cost charged to past operations + total cost charged by future operations</p><p>Example</p><ul><li>table doubling and halving</li><li>Free deletion in 2-3 trees</li></ul></li><li><p>potential method</p><p>Example:</p><ul><li>binary counter</li><li>insert in 2-3 tree</li><li>Insert and delete in 2-5 tree</li></ul></li></ol><h2><span id="union-find">union-find</span><a href="#union-find" class="header-anchor">Â¶</a></h2><p>Problem: how can a simple doubly linked list improve to support fast search and fast union? how this method is different from what is in cs61b disjoint set course?</p>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
          <category> 6.046 algorithms design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>5 synchronization</title>
      <link href="/sg/2021/11/09/6.004_synchronization/"/>
      <url>/sg/2021/11/09/6.004_synchronization/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#20-concurrency-synchronization">20 concurrency &amp; synchronization</a><ul><li><a href="#synchronous-communication-in-producer-consumer-model">Synchronous Communication in producer-consumer model</a></li></ul></li><li><a href="#21-system-level-communication">21 system-level communication</a><ul><li><a href="#communication-channel">communication channel</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="20-concurrency-amp-synchronization">20 concurrency &amp; synchronization</span><a href="#20-concurrency-amp-synchronization" class="header-anchor">Â¶</a></h2><p>å‰è¨€ï¼šç¿»äº†ä¸€ä¸‹ä»¥å‰çœ‹61cçš„ç¬”è®°ä¸ç¦æ‰¶é¢ï¼Œå†™å¾—ä»€ä¹ˆé¬¼ã€‚ä¹‹å‰çš„ç¬”è®°æ„Ÿè§‰å°±æ˜¯ç®€å•æ¦‚å¿µçš„å †ç ŒåŠ æŠ„å†™æ•™æˆè®²æˆçš„ä¸œè¥¿ï¼Œæ²¡æœ‰å¤ªå¤šçš„æ€è€ƒï¼Œæ‰€ä»¥æ‰æ„Ÿè§‰å­¦äº†å’Œæ²¡å­¦ä¸€æ ·ã€‚ä¸ç®¡æ€ä¹ˆè¯´ï¼Œæ—¢ç„¶ç°åœ¨åœ¨å­¦6.004ï¼Œé‚£ä¹ˆå°±æŒ‰ç…§è¯¾ç¨‹è®¾ç½®çš„æ ‡å‡†éƒ½æå®šã€‚</p><blockquote><p>Scenerio 1: video compression algorithms represent each video frame as an array of 8-pixel by 8-pixel macroblocks.</p><p>Scenario 2: Applications like video games are naturally divided into the â€œfront-endâ€ user interface and â€œback-endâ€ simulation and rendering engines.</p></blockquote><p>problem: Whatâ€™s the advantage of using multiple processes instead of just a single process? How should the processes communicate with each other?</p><p>Data-/Event- driven applications have the need to improve the efficiency. We can divide computation among multiple threads of execution. Independent sequential threads compete for shared resource while cooperating sequential threads communicate with each other.</p><p>We can divide communication models into:</p><ol><li>shared memory</li><li>Message passing</li></ol><p>goal: synchronization and thread-safe programming</p><h3><span id="synchronous-communication-in-producer-consumer-model">Synchronous Communication in producer-consumer model</span><a href="#synchronous-communication-in-producer-consumer-model" class="header-anchor">Â¶</a></h3><img src="/sg/2021/11/09/6.004_synchronization/sc1.png" class title="test"><p>Producer sends char to consumer and consumer receives char.</p><ul><li><p>constraints</p><ol><li>The consumer canâ€™t consume data before itâ€™s produced.</li><li>The producer canâ€™t overwrite data before itâ€™s consumed.</li></ol></li><li><p>design a FIFO(first-in first-out) buffers: The producer can run up to N values ahead of the consumer.</p><p>Implementation: ring buffer in shared memory. Consumers control write pointer, producers control read pointer. After space is full, producer starts to write char into receiver.</p></li><li><p>design a data type for synchronization: semaphores</p><blockquote><p>Basic structure:  an integer â‰¥ 0<br>semaphore s = K;  // initialize s to K<br>New operations (defined on semaphores):</p><ul><li><p>wait(semaphore s)<br>wait until s &gt; 0, then s = s â€“ 1</p></li><li><p>signal(semaphore s)<br>s = s + 1 (one waiting thread may now be able to proceed)</p></li><li><p>Semantic guarantee: A semaphore s initialized to K enforces the precedence constraint:</p><p>The ith call to signal(s) must complete before the (i+K)th call to wait(s) completes.</p></li></ul><p>Implementation:</p><ul><li>use a special instruction that performs an atomic read-modify-write</li><li>use system calls.Works in uniprocessors only, where the kernel is uninterruptible</li></ul></blockquote><ol><li>for precedence: Declare semaphore = 0 -&gt; signal(s) at start of arrow-&gt;wait(s) at end of arrow</li><li>for resource allocation: Invariant: Semaphore value = number of resources left in pool.</li></ol></li></ul><p>scenerio1:single producer + single consumer</p><p>solution: enforce precedence and avoid buffer overflow</p><img src="/sg/2021/11/09/6.004_synchronization/sc2.png" class title="testi"><p>Scenerio2: multiple producers and consumers</p><p>Problem: producers interfere with each other.</p><p>disign: set constraint(mutual exclusion) to critical sections. Only one thread can execute critical sections at the time.</p><ul><li><p>Issue: lock granularity-&gt;How many locks do we need?</p><p>It depends. Think about the extreme sides: one lock for all accounts or one lock per account? We can choose the middle case.</p></li></ul><p>scenerio3: in the transfer scenario, account A transfer M money to account B.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">transfer</span><span class="params">(<span class="type">int</span> account1, <span class="type">int</span> account2, <span class="type">int</span> amount)</span> &#123;</span><br><span class="line">  <span class="comment">//int a = min(account1, account2); dead lock solution</span></span><br><span class="line"><span class="comment">//int b = max(account1, account2);</span></span><br><span class="line">wait(lock[account1]);</span><br><span class="line">wait(lock[account2]);</span><br><span class="line">balance[account1] = balance[account1] - amount;</span><br><span class="line">  balance[account2] = balance[account2] + amount;</span><br><span class="line">signal(lock[account2]);</span><br><span class="line">signal(lock[account1]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Downside: dead lock: no thread can make progress because all the process are locked.</p><ul><li><p>Example: dining philosophers</p><p>é—®é¢˜æ¥æºäºä»–ä»¬å‡ ä¸ªäººå‡ ä¸ªç­·å­ï¼Œè€Œåƒé¥­çš„é¡ºåºæ˜¯å…ˆæ‹¿å·¦è¾¹çš„ç­·å­ï¼Œå½“æ¯ä¸ªäººéƒ½æ‹¿äº†è¿™åªç­·å­åç­‰å¾…å³è¾¹æœ‰æ²¡è¢«æ‹¿çš„ç­·å­ï¼Œè€Œè¿™ç§æƒ…å†µæ— æ³•å‘ç”Ÿï¼Œæ‰€æœ‰å°±ä¸€ç›´ç­‰å¾…ï¼Œé™·å…¥åƒµå±€ã€‚</p><p>è§£å†³è¿™ä¸ªé—®é¢˜åªéœ€è¦æ”¹å˜ç”¨é¤çš„é¡ºåºï¼Œåªè¦èƒ½å¤Ÿé¿å…ç­·å­åŒæ—¶è¢«æ‹¿çš„æƒ…å†µå°±è¡Œã€‚</p><p>solution: Assign a unique number to each chopstick, request resources in a consistent order</p></li><li><p>solution: Establishing and using a global order for shared resources</p></li></ul><h2><span id="21-system-level-communication">21 system-level communication</span><a href="#21-system-level-communication" class="header-anchor">Â¶</a></h2><p>computer system technologies: each part has a detailed specification of the functionality and interface. We can still add things together without knowing the details of those implementations for things evolve rapidly.</p><p>Problem: what is  the appropriate interface choices for interconnecting system components?</p><h3><span id="communication-channel">communication channel</span><a href="#communication-channel" class="header-anchor">Â¶</a></h3><p>fact: the synchronous multi-signal channels of earlier systems -&gt; asynchronous point-to-point channels nowadays</p><p>problem 1 : how hard can it be to build a <strong>communication channel</strong>?</p>]]></content>
      
      
      <categories>
          
          <category> computer architecture </category>
          
          <category> 6.004 computation structures </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>6.006 data structures</title>
      <link href="/sg/2021/11/09/6.006-data_structures/"/>
      <url>/sg/2021/11/09/6.006-data_structures/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#binary-search-tree">Binary search tree</a></li><li><a href="#sort">Sort</a></li></ul><!-- tocstop --></div><h3><span id="binary-search-tree">Binary search tree</span><a href="#binary-search-tree" class="header-anchor">Â¶</a></h3><p>Balanced: a tree on n nodes is balanced if its height is O(logn). Bst is not always balanced.</p><ul><li><p>AVL tree: height-balanced tree</p><ul><li>skew of a node is the height difference between right subtree and left subtree.</li><li>skew is -1,0,1</li></ul></li></ul><h3><span id="sort">Sort</span><a href="#sort" class="header-anchor">Â¶</a></h3><p>Selection sort, insertion sort, heap sort, merge sort, quick sort</p><ul><li><p>in-place: å½“æ•°åˆ—ä¸­æœ‰ç›¸åŒçš„æˆå‘˜æ—¶ï¼Œå…ˆåæ¬¡åºçš„ä¸åŒã€‚</p><ul><li>Whether merge sort is stable depends on how an implementation breaks ties when merging<ul><li>Stable: that items with duplicate keys appear in the same order in the output as the input</li></ul></li></ul></li><li><p>Comparison model</p><ul><li>worse case analysis</li></ul><p>The worst-case number of comparisons that must be made by any comparison search algorithm will be the height of the algorithmâ€™s decision tree. Comparisons are limiting because each operation performed can lead to most constant branching factor in the decision tree. Any fixed a will lead to a decision tree with at least omega(logn) height. It can be improved that data structures are not limited to comparisons.</p></li><li><p>comparison sorting</p><ul><li>Analysis to lower bound the worst-case running time of any sorting algorithm that only uses comparisons</li></ul><p>sort n items, n! Permutations of the items,  height of decision tree is omega(log(n!)) = omega(nlogn). so run time at least omega(nlogn).</p></li><li><p>Direct access array: use data as index, might cause collisions and interger overflow, but skip comparisons to gain more efficiency.</p><p>Space: u slots to store items;  n items</p><ul><li><p>solution: make it dynamic: let m = O(n)</p><p>need a function that maps item keys to different slots of the direct access array, and no two keys map to the same direct access array index. Then we can support worst-case constant time search.</p></li><li><p>If m &lt; u: collisions occur.</p><ul><li>Solution: 1. Open address. 2. Chaining</li></ul><p>Chaining, a separate data structure that supports the dynamic set interfaces, operations including <strong>find, insert and delete.</strong> It is common to implant using a linked list or dynamic array, but any implementation supporting those operations would work.</p><p>whatâ€™s a good hash function? Minimize the frequency of collisions (all items stored in one chain) in order to minimize the maximum size of any chain.</p><ul><li>hash function: the performance of data structures would be independent of the keys we choose to store.</li><li>amortized bounds for dynamic operations<ul><li>Resize</li></ul></li></ul></li><li><p>Problems: n positive integers array A, find duplicates.</p></li><li><p>direct access array sort</p><p>n items, u slots array. (n &lt;= u)</p><ul><li>runtime analysis: insert + initialize &amp; scan: theta(n+u), if u = O(n), then the algorithm is linear.</li><li>Drawbacks: canâ€™t handle duplicate keys and large key ranges</li></ul></li></ul></li></ul><p>Impovement:</p><ul><li><p>Allow duplicates on the basis of direct access array sort while preserving linear runtime property-&gt; counting sort</p></li><li><p>sort keys from a larger integer range: break up integer keys into parts, and then sort each part -&gt; tuple sort</p><ul><li>Example: LSD/MSD radix sort, sort in a certain order.</li></ul><blockquote><p>Then tuple sort uses a stable sorting algorithm as a subroutine to repeatedly sort the objects, first according to the least important key, then the second least important key, all the way up to most important key, thus lexicographically sorting the objects.</p></blockquote></li><li><p>Radix sort: counting sort + tuple sort</p><ul><li>Problems<ul><li>n ints from [-n** 2, n** 3]</li><li>n strings having k English characters</li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
          <category> 6.006 algorithms </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>6.046 divide and conquer</title>
      <link href="/sg/2021/11/09/6.046-divide_and_conquer/"/>
      <url>/sg/2021/11/09/6.046-divide_and_conquer/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#interval-scheduling">Interval scheduling</a></li><li><a href="#convex-hull">Convex hull</a></li><li><a href="#median-finding">Median finding</a></li><li><a href="#r1-methods">R1: methods</a><ul><li><a href="#smarter-is">smarter IS</a></li><li><a href="#strassen-s-algorithm">Strassenâ€™s algorithm</a></li><li><a href="#master-theorem">Master theorem</a></li></ul></li><li><a href="#fast-fourier-transform">Fast Fourier Transform</a><ul><li><a href="#polynomial-multiplication">Polynomial multiplication</a></li><li><a href="#fft">FFT</a></li><li><a href="#application">application</a></li></ul></li><li><a href="#van-emade-boas-tree">Van Emade Boas Tree</a><ul><li><a href="#structure">Structure</a></li><li><a href="#analysis">Analysis</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="interval-scheduling">Interval scheduling</span><a href="#interval-scheduling" class="header-anchor">Â¶</a></h2><img src="/sg/2021/11/09/6.046-divide_and_conquer/Screenshot-7925628.png" class title="Screenshot-7925628"><h2><span id="convex-hull">Convex hull</span><a href="#convex-hull" class="header-anchor">Â¶</a></h2><img src="/sg/2021/11/09/6.046-divide_and_conquer/Screenshot-7925587.png" class title="Screenshot-7925587"><h2><span id="median-finding">Median finding</span><a href="#median-finding" class="header-anchor">Â¶</a></h2><p>Runtime: O($n^2$)</p><img src="/sg/2021/11/09/6.046-divide_and_conquer/Screenshot-7925566.png" class title="Screenshot-7925566"><h2><span id="r1-methods">R1: methods</span><a href="#r1-methods" class="header-anchor">Â¶</a></h2><h3><span id="smarter-is">smarter IS</span><a href="#smarter-is" class="header-anchor">Â¶</a></h3><p>recursion tree: reduce the runtime to O(logn)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">M[j] = max(w(j) + M[p(j)], M[j - 1]) for j=1 to n</span><br></pre></td></tr></table></figure><h3><span id="strassen-s-algorithm">Strassenâ€™s algorithm</span><a href="#strassen-s-algorithm" class="header-anchor">Â¶</a></h3><ol><li>multiplication runs much slower than addition</li><li>Strassenâ€™s only uses 7 multiplications instead of 8</li></ol><h3><span id="master-theorem">Master theorem</span><a href="#master-theorem" class="header-anchor">Â¶</a></h3><ol><li>Old stuff of 6.006</li></ol><h2><span id="fast-fourier-transform">Fast Fourier Transform</span><a href="#fast-fourier-transform" class="header-anchor">Â¶</a></h2><ol><li><p>polynomial representations</p><ul><li>Coefficient vector</li><li>Roots and a scale term: A(x) = ( x âˆ’ $r_0$) Â· (x âˆ’ $r_1$) Â· Â· Â· Â· Â· (x âˆ’$ r_{nâˆ’1}$) Â· c</li><li>Samples: (x0, y0),  (x1, y1),  . . . ,  ( xnâˆ’1, ynâˆ’1) with A(xi) =  yi (âˆ€i) , xi is distinct.</li></ul></li><li><p>Operations: evaluation; addition; multiplication</p></li><li><p>Conversion between coefficients and samples in O(nlgn) time</p><img src="/sg/2021/11/09/6.046-divide_and_conquer/Screenshot-7930623.png" class title="Screenshot-7930623"></li></ol><h3><span id="polynomial-multiplication">Polynomial multiplication</span><a href="#polynomial-multiplication" class="header-anchor">Â¶</a></h3><ol><li><p>a divide and conquer algorithm: Divide into even and odd coefficients</p></li><li><p>Construct a collapsing set X</p></li><li><p>nth roots of unity: Eulerâ€™s formula</p><img src="/sg/2021/11/09/6.046-divide_and_conquer/Screenshot-7931842.png" class title="Screenshot-7931842"></li></ol><h3><span id="fft">FFT</span><a href="#fft" class="header-anchor">Â¶</a></h3><ol><li><p>FFT: O(nlgn) divide and conquer algorithm for DFT</p></li><li><p>Discrete Fourier Transform: computing A â†’ A* = V  Â· A for $x_k  = e^{iÏ„k/n}$ where n = $2^l$, where A is the set of coefficients and<br>A* is the resulting samples.</p></li><li><p>Inverse Discrete Fourier Transform: A*  â†’ $V^ {âˆ’1}$ Â· A*  = A</p><p>$V^ {âˆ’1}$  = 1/n * complex conjugate of V</p></li><li><p>Fast Polynomial Multiplication</p><ul><li>A* = FFT(A), B* = FFT(B)</li><li>c_k* = a_k* b_k * for k = 0, 1, â€¦, n-1</li><li>C = IFFT(c*)</li></ul></li></ol><h3><span id="application">application</span><a href="#application" class="header-anchor">Â¶</a></h3><ol><li>audio processing</li></ol><h2><span id="van-emade-boas-tree">Van Emade Boas Tree</span><a href="#van-emade-boas-tree" class="header-anchor">Â¶</a></h2><p>problem: why use b tree instead of bst in practice?</p><p>ç­”æ¡ˆä¸å†…å­˜å±‚çº§æœ‰å…³ã€‚é€šå¸¸çš„ç®—æ³•ä¸­æˆ‘ä»¬å‡å®šä»å†…å­˜ä¸­ç›´æ¥è·å–æ•°æ®ï¼Œè€Œå®é™…ä¸Šè®¡ç®—æœºçš„åŸºæœ¬å†…å­˜ç»“æ„åŒ…æ‹¬ï¼šcpuä¸ç¼“å­˜å™¨é—´çš„é«˜é€Ÿé€šé“ï¼Œç¼“å­˜ä¸ç£ç›˜ä¸­çš„ä½é€Ÿé€šé“ã€‚æ¯æ¬¡è®¿é—®ç£ç›˜è·å–æ•°æ®çš„èŠ±è´¹éƒ½å¾ˆå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å‡å°‘ç£ç›˜çš„è®¿é—®ï¼Œå› è€Œå¼•å…¥äº†ç¼“å­˜å™¨ã€‚ç„¶åæˆ‘ä»¬éœ€è¦å°†éœ€è¦çš„å†…å­˜å—ä»ç£ç›˜å¸¦åˆ°ç¼“å­˜ä¸­ï¼Œå½“å—çš„å¤§å°ä¸cache line sizeç›¸åŒæ—¶ï¼Œèƒ½æ›´å¤§çš„åˆ©ç”¨è®¿é—®çš„èŠ±è´¹ã€‚</p><p>äºŒå‰æ ‘çš„å­˜å‚¨æ–¹å¼æ˜¯é€å±‚å­˜å‚¨çš„ï¼Œä¸€ä¸ªåˆ†æ”¯å¯¹åº”ä¸€ä¸ªæ•°æ®ã€‚è€Œb treeå¯ä»¥å°†æ•´ä¸ªå—å­˜å‚¨åœ¨åŒä¸ªåˆ†æ”¯ï¼Œè¿™æ ·èƒ½æ›´å¿«çš„å¸¦å‡ºéœ€è¦çš„å†…å­˜å—è€Œä¸éœ€è¦é€æ¬¡è®¿é—®ç£ç›˜ã€‚</p><h3><span id="structure">Structure</span><a href="#structure" class="header-anchor">Â¶</a></h3><ol><li><p>B represents branching factor, which is related to cache line length. ex:in 2-3 tree: B = 2</p><ul><li>All leaves are at the same level</li></ul></li><li><p>Operation: how to delete node?</p><ul><li><p>move deletion to the leaves.</p><p>Successor: leftmost in the right subtree or rightmost in the left subtree.</p></li><li><p>Case1: have sibling tree undersell</p></li><li><p>Case2: donâ€™t have sibing tree underfull -&gt; merge: propagate the emptiness up, merge; if sibling tree is underfull, rotate.</p></li></ul></li></ol><h3><span id="analysis">Analysis</span><a href="#analysis" class="header-anchor">Â¶</a></h3><p>We want to maintain n elements in the range {0, 1, 2, . . . , u âˆ’ 1} and perform Insert, Delete and Successor operations in O(log log u) time.</p><p>Intuition: binary search on the levels of tree.</p><p>Improvements: how a very simple data structure become vEB tree?</p><ol><li><p>Bit vector: We maintain a vector V  of size u such that V[x] = 1 if and only if  x  is in the set.</p></li><li><p>Split Universe into Clusters: splitting up the range {0, 1, 2, . . . , u âˆ’ 1} into sqrt(u) clusters of size sqrt(u).</p><p>Then we have a summary vector.</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">low(x) = x mod sqrt(u) = j</span><br><span class="line">high(x) = x //ï¼ˆä¸‹å–æ•´ï¼‰sqrt(u) = i</span><br><span class="line">index(i,j) = i*sqrt(u) + j</span><br></pre></td></tr></table></figure><p>Version 1:</p><blockquote><p>Insert:</p><ul><li>Set V.cluster[ high(x) ] [ low(x) ] = 1</li><li>Mark cluster high(x) as non-empty</li></ul><p>Successor:</p><ul><li>Look within cluster high(x)</li><li>Else, find next non-empty cluster i</li><li>Find minimum entry j in that cluster</li><li>Return index(i, j)</li></ul></blockquote><p>Version 2: use recursion: successor calls inside successor, insert calls inside insert.</p><p>V.cluster[i], V.summary, V.summary[i]</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">INSERT(V, x) </span><br><span class="line"><span class="number">1</span> Insert(V.cluster[high(x)], low[x]) </span><br><span class="line"><span class="number">2</span> Insert(V.summary, high[x])</span><br><span class="line"></span><br><span class="line">SUCCESSOR(V, x) </span><br><span class="line"><span class="number">1</span> i = high(x) </span><br><span class="line"><span class="number">2</span> j = Successor(V.cluster[i], j) </span><br><span class="line"><span class="number">3</span> <span class="keyword">if</span> j = =   âˆ </span><br><span class="line"><span class="number">4</span> i = Successor(V.summary, i) </span><br><span class="line"><span class="number">5</span> j = Successor(V.cluster[i], âˆ’âˆ) </span><br><span class="line"><span class="number">6</span> <span class="keyword">return</span> index(i, j)</span><br></pre></td></tr></table></figure><p>then we have a problem: two recursive call in insert, three recursive call in successor. We want one recursive call to achieve our goal.</p></li><li><p>Maintain Min and Max: We store the minimum and maximum entry in each structure.  This gives an O(1) time overhead for each Insert operation.</p></li><li><p>Donâ€™t store Min recursively:</p><p>The Successor call now needs to check for the min separately.</p><blockquote><p>if x &lt; V.min : return V.min</p></blockquote></li></ol><p>space improvement: We can improve from Î˜(u) to O(n log log u).</p><p>Intuition: for each element in n, perform a O(lglgu) runtime insertion.</p>]]></content>
      
      
      <categories>
          
          <category> Algorithms </category>
          
          <category> 6.046 algorithms design </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šæš—é»‘ã€‹â€”â€” å…³äºæ—¶é—´é—®é¢˜çš„å¦ä¸€ç§é™ˆè¿°</title>
      <link href="/sg/2021/11/07/dark/"/>
      <url>/sg/2021/11/07/dark/</url>
      
        <content type="html"><![CDATA[<blockquote><p>è·Œè·Œæ’æ’ç©¿è¿‡æ—¶ç©ºï¼Œæ–¹å‘æ˜¯æ— æ­¢å¢ƒã€‚é£è›¾æ‰‘ç«ï¼Œå°±åƒä½ å’Œæˆ‘ã€‚éšæ—¶éšåœ°æœªæ¥éšæ—¶å¼€å§‹ã€‚æˆ‘ä¸ä¼šå†ç­‰å¾…ã€‚çˆ±ç”±å‹‡æ°”è€Œç”Ÿï¼Œæ‰€ä»¥ä¸è¦å†çŠ¹è±«ã€‚æˆ‘ä»¬è¸©ç€ç‚½çƒ­çš„ç«è½®ï¼Œç©¿è¿‡é»‘å¤œé©¶å‘æœªæ¥ã€‚</p></blockquote><h3><span id="qian-yan">å‰è¨€</span><a href="#qian-yan" class="header-anchor">Â¶</a></h3><p>ä¹‹å‰å°±å¬è¯´è¿‡æš—é»‘è¢«ç§°ä¸ºå¾·å›½ç‰ˆæ€ªå¥‡ç‰©è¯­ï¼Œè™½ç„¶æˆ‘è§‰å¾—æ€ªå¥‡ç‰©è¯­æ˜¯å¾ˆä¸é”™çš„æ•…äº‹ï¼Œä½†ä¸ç¡®å®šè‡ªå·±èƒ½ä¸èƒ½çœ‹å®Œæ•´æ•´ä¸‰å­£å†—é•¿çš„å™è¿°ï¼Œå°±æ²¡æœ‰ç«‹å³å»çœ‹ã€‚ç„¶åç¬¬ä¸€ä¸ªåœºæ™¯å’Œç‰‡å¤´å°±è®©æˆ‘æ„Ÿè§‰è¿™ä¼šæˆä¸ºæˆ‘æœ€å–œæ¬¢çš„å‰§ï¼Œä¸€ä¸ªåŒç›®è¢«ä¾µèš€çš„äººä»æ—¶é—´è£‚ç¼ä¸­æ‰å‡ºæ¥ï¼Œä¸€ä¸ªçª„å°çš„åœ°ä¸‹å®¤ï¼Œä¸¤ä¸‰ä¸ªäººåœ¨è®¨è®ºå¦‚ä½•å¤„ç†ã€‚ç‰‡å¤´åˆè§åªæ˜¯ç®€å•çš„å¯¹ç§°å›¾å½¢ï¼Œè¶Šçœ‹è¶Šè§‰å¾—è¿™åº”è¯¥æ˜¯åˆ†å½¢çš„ç»“æ„ï¼Œæœ‰ä¸€ç§å‡ ä½•ç¾ã€‚é…ä¹ä¹Ÿéå¸¸ç©ºçµã€‚</p><p>ä¸ºä»€ä¹ˆè¦å†™è¿™ç¯‡æ–‡ç« å‘¢ï¼Ÿæˆ‘æƒ³æ¢³ç†ä¸€ä¸‹å¯¹è¿™éƒ¨å‰§çš„æƒ³æ³•ï¼Œå°è¯•è”ç³»ä¹‹å‰çœ‹è¿‡çš„ç±»ä¼¼é¢˜æï¼Œæ›´é‡è¦çš„æ˜¯é—®è‡ªå·±ä¸€äº›é—®é¢˜ã€‚æœ‰æ—¶å€™è§‰å¾—è‡ªå·±æ˜¯å¾ˆçŸ›ç›¾çš„äººï¼Œæ—¢è¿½æ±‚å®ç”¨ä¸»ä¹‰ï¼Œåˆå‘å¾€æ— ç”¨ä¹‹å­¦ã€‚æ¯”å¦‚å¯¹ç”Ÿç§‘å¼ºçƒˆåœ°æ’æ–¥æ€åº¦å°±ç”±äºç”Ÿç§‘æ‰€ç ”ç©¶çš„ä¸œè¥¿æˆ‘éƒ½ä¸èƒ½ç†è§£å’Œæ—¥å¸¸ç”Ÿæ´»æœ‰ä»€ä¹ˆå¤ªå¤§è”ç³»ï¼Œå®éªŒåŒ…å«å¾ˆå¤šé‡å¤å®éªŒè€Œå¾€å¾€é‡åšçš„æ—¶é—´åˆå¾ˆé•¿ï¼Œè¿™äº›éƒ½æ˜¯æˆ‘åæ¥å‘ç°çš„ä¸€äº›ç†æƒ³å’Œç°å®çš„å·®è·ã€‚å¦ä¸€æ–¹é¢ï¼Œæˆ‘åˆå¾ˆçˆ±çœ‹ä¸€äº›ç§‘å¹»å†å²é¢˜æï¼Œä¹Ÿä¼šçœ‹æ„Ÿå…´è¶£çš„å“²å­¦ç±»è¯é¢˜ã€‚å–œæ¬¢è®¡ç®—æœºä¹Ÿæ˜¯å› ä¸ºå®ƒæ—¢æœ‰ç”¨ä¹Ÿæ— ç”¨ï¼Œç°åœ¨ä¹Ÿåªæ˜¯æƒ³å®Œæˆæœ€å¼€å§‹è®¾å®šçš„6-3çš„ä¸»å¹²è¯¾ç¨‹ï¼Œç¾¤é‡Œçš„å°ä¼™ä¼´å·²ç»å»å®ä¹ å’Œåˆ·é¢˜å‡†å¤‡ç§‹æ‹›äº†ï¼Œè€Œæˆ‘è¿˜å¾…åœ¨å­¦æ ¡ä¸€äº‹æ— æˆã€‚</p><p>å¦‚æœä¸èƒ½æ„Ÿå—ç”Ÿæ´»çš„ä¹è¶£ï¼Œé‚£ä¹ˆè¿™ç”Ÿæ´»â€”â€”æˆ‘ä»¬æ‰€åŠªåŠ›å»åšçš„äº‹æƒ…â€”â€”è¿˜æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿæˆ‘ä¹Ÿæœ‰è‡ªå·±çš„è·¯è¦èµ°ã€‚</p><h3><span id="qiang-lie-de-hui-xiang">å¼ºçƒˆçš„å›å“</span><a href="#qiang-lie-de-hui-xiang" class="header-anchor">Â¶</a></h3><p>ã€Šæš—é»‘ã€‹åœ¨æ•…äº‹å¼€å¤´å°±æœ‰ä¸€ç§å¼ºçƒˆçš„å³è§†æ„Ÿã€‚æ—¶é—´çº¿å› ä¸ºæŸä¸ªå…³é”®èŠ‚ç‚¹çš„æ”¹å˜äº§ç”Ÿæ–°çš„æ—¶é—´çº¿ï¼Œå„ç§äººç‰©å…³ç³»ï¼Œåˆ©ç›Šå›¢ä½“äº¤é”™å¤æ‚ï¼Œä¸»è§’ä¸ºäº†æ”¹å˜è¿™æ‰€è°“çš„å®¿å‘½åœ¨ä¸åŒæ—¶é—´æ¥å›è·³è·ƒï¼Œæœ€åç»ˆäºä½¿æ—¶é—´çº¿æ”¶æ•›ï¼Œè¿™æ˜¯çŸ³å¤´é—¨æ‰€è®²çš„éƒ¨åˆ†ã€‚åˆæˆ–è€…æ˜¯ä¸€ä¸ªé—­ç¯çš„æ•…äº‹ï¼Œä¸€ä¸ªå®Œæ•´çš„åœ†å½¢å¾ªç¯ï¼Œå…¶ä¸­çš„èŠ‚ç‚¹æœ‰ç‰¹å®šçš„äººå»å®Œæˆï¼Œå‘¨è€Œå¤å§‹ï¼Œè¿™æ˜¯é˜¿è¥¿è«å¤«ã€Šæ°¸æ’çš„ç»ˆç»“ã€‹æ‰€è®²è¿°çš„ã€‚æš—é»‘è™½ç„¶è¢«ç§°ä¸ºå¾·å›½ç‰ˆæ€ªå¥‡ç‰©è¯­ï¼Œä½†å’Œæ€ªå¥‡ç‰©è¯­æ˜¯å®Œå…¨ä¸åŒçš„æ•…äº‹ï¼Œæœ€å¤šä¹Ÿå°±æ˜¯è§†è§‰æ•ˆæœä¸Šéƒ½æ¯”è¾ƒæš—æ²‰ã€‚å’Œè°çš„éŸ³ä¹å’Œå‰ªè¾‘ï¼Œä¸€ç¯æ‰£ä¸€ç¯çš„å‰§æƒ…å±•å¼€ï¼Œè®²è¿°äº†ä¸€ä¸ªç»“â™¾ï¸çš„å±•å¼€å’Œæ¶ˆå¤±å½’äºé»‘æš—çš„æ•…äº‹ã€‚</p><h3><span id="jiao-du-bian-hua">è§’åº¦å˜åŒ–</span><a href="#jiao-du-bian-hua" class="header-anchor">Â¶</a></h3><p>æˆ‘å¾ˆå°‘ä¼šåœ¨çœ‹å‰§çš„æ—¶å€™æœ‰è®¤çŸ¥åœ¨ä¸æ–­å˜åŒ–å’ŒåŠ æ·±çš„ç»å†ï¼Œæ„Ÿå—ä¸åˆ°å¤ªå¤šæ˜æ˜¾çš„å±‚æ¬¡ã€‚ç„¶è€Œåœ¨æš—é»‘çš„æ•´ä¸ªè¿‡ç¨‹ä¸­æˆ‘éƒ½å¤„äºæƒŠè®¶çŠ¶æ€ï¼Œå¸¸å¸¸æ˜¯æˆ‘è§‰å¾—æˆ‘æ‡‚äº†ç„¶åä¸‹ä¸€é›†åˆæ¨ç¿»äº†è¿™ä¸ªæƒ³æ³•ã€‚åœ¨åˆšå¼€å§‹æˆ‘ä»¥ä¸ºä¸‰ä¸ªä¸–ç•Œæ˜¯ä»¥å¹´ä»£åˆ’åˆ†çš„ï¼Œ1986ï¼Œ1999ï¼Œ1953æ„æˆäº†ä¸‰ä¸ªä¸–ç•Œä»£è¡¨ç°åœ¨æœªæ¥è¿‡å»ï¼Œé€šè¿‡å”¯ä¸€çš„æ´ç©´å……å½“è™«æ´è¿æ¥èµ·ä¸åŒçš„æ—¶ç©ºã€‚æ•…äº‹æ˜¯ä¸€ä¸ªå¾ªç¯è¿›è¡Œçš„ç¯å½¢å™äº‹ï¼Œæ•…äº‹çš„å¼€å§‹å°±æ˜¯ç»“å°¾ï¼Œç»“å°¾å°±æ˜¯å¼€å§‹ã€‚ç„¶è€Œå³ä½¿æ˜¯æœ€ç®€å•çš„å›¾å½¢é€šè¿‡ä¸€ç‚¹å˜æ¢å°±èƒ½å˜æˆä¸åŒçš„æ ·å­ã€‚æ­£å¦‚ä¸€ä¸ªåœ†é•œåƒå¯¹ç§°äº†å¦ä¸€ä¸ªåœ†ï¼Œæ„æˆäº†æ— é™çš„ç¬¦å·ã€‚ä¸€ä¸ªä¸–ç•Œé•œåƒäº†å¦ä¸€ä¸ªå¹³è¡Œä¸–ç•Œï¼Œè€Œè¿™ä¸¤ä¸ªä¸–ç•Œé€šè¿‡ç”·ä¸»å¥³ä¸»è¿æ¥æˆä¸€ä¸ªä¸ç ´çš„ç»“ï¼Œæ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„äº‹æƒ…æŒ‰éƒ¨å°±ç­åœ°å‘ç”Ÿï¼Œæ¯ä¸ªäººçš„å‘½è¿åœ¨æœ€å¼€å§‹å°±å·²ç»å†™å¥½ï¼Œå³ä½¿ä»–/å¥¹æ€»æœ‰é”™è§‰åœ¨è¿™ä¸€æ¬¡å¾ªç¯é‡Œèƒ½å¤Ÿæ‰“ç ´è¿™ä¸ªç»“ã€‚</p><p>å°è±¡æ·±åˆ»çš„ä¸€ä¸ªæƒ…èŠ‚æ˜¯ï¼Œæ–°æ´¾æ¥çš„è­¦é•¿åœ¨é¢å¯¹å°é•‡ç¾¤ä¼—å¯¹å‰ä»»è­¦æ–¹è´Ÿè´£äººæ— æ³•è§£å†³é’å°‘å¹´å¤±è¸ªæ¡ˆä»å‚ä¸è°ƒæŸ¥æ—¶è¯´ï¼Œä¸€ä¸ªå¤§è±¡åä¸ªäººå»çœ‹ä¼šå¾—åˆ°åç§ä¸åŒçš„æ ·å­ï¼Œä½†å¦‚æœä¸€ä¸ªäººç”¨åç§è§’åº¦å»çœ‹ï¼Œæ ¹æ®ä¸åŒçš„ç»“æœè¿›è¡Œä¿®æ­£å¾€å¾€å°±èƒ½å¾—åˆ°å¯¹å¤§è±¡æ­£ç¡®çš„è®¤çŸ¥ã€‚æš—é»‘ä¸æ–­è¿½é—®çš„é—®é¢˜â€œèµ·æºåœ¨å“ªé‡Œâ€çº ç¼ äº†æ‰€æœ‰äººæ— å°½ä¸ªå¾ªç¯ï¼ŒJonus(Adam)æ¯æ¬¡å¾ªç¯é‡Œéƒ½è®¤ä¸ºè‡ªå·±ä¸ä¼šæˆä¸ºè€å¹´æ—¶æœŸAdaméº»æœ¨æ®‹é…·çš„æ ·å­ï¼Œåªè¦è‡ªå·±åœ¨æŸä»¶äº‹åšäº†ä¸åŒçš„å†³å®šï¼Œå°±èƒ½æ‰“ç ´è¿™æ¬¡å¾ªç¯ï¼Œä½†æœ€ååªæ˜¯ä¸€æ¬¡æ¬¡åœ°èµ°å‘å›ºå®šçš„å‘½è¿ã€‚Martha(eve)ä¸ºäº†å»¶ç»­å› æ—§ä¸–ç•ŒMarthaæ­»å»è€Œåˆ›é€ å‡ºçš„æ–°ä¸–ç•Œï¼Œä¸æ–­å¼•å¯¼å¹´è½»æ—¶çš„è‡ªå·±èµ°å‘å¾ªç¯çš„ä¸åŒæ–¹å‘ï¼Œä»¥å­˜ç»­è¿™ä¸ªç»“å’Œä¸¤ä¸ªä¸–ç•Œã€‚ä»–ä»¬æ²‰æµ¸åœ¨è‡ªå·±çš„è§†è§’é‡Œå¤ªä¹…ï¼Œè§‚è€…ä¹Ÿæ²‰æµ¸åœ¨è‡ªå·±çš„è§†è§’é‡Œèµ°ä¸å‡ºæ¥ã€‚</p><p>ä¸¤ä¸ªä¸–ç•Œåªæ˜¯èµ·æºä¸–ç•Œçš„åˆ†æ”¯ï¼Œå®ƒä»¬åœ¨è¯ç”Ÿæ—¶å°±æ‘§æ¯äº†èµ·æºä¸–ç•Œï¼Œå¹¶æˆä¸ºå›ç¯å¾€å¤çš„è¡”å°¾è›‡ï¼Œæ‰€æœ‰äººè‡ªæ­¤å›°é¡¿åœ¨æ—¶é—´çš„å›šç‰¢é‡Œã€‚è€Œåªæœ‰ä»æœ€å¼€å§‹æ”¹å˜èµ·æºï¼Œé˜»æ­¢æ—¶é—´æœºå™¨çš„äº§ç”Ÿï¼Œæ‰èƒ½é¿å…è¿™ä¸ªç»“ï¼Œè®©ä¸–ç•Œæ­£å¸¸å•çº¿è¿›è¡Œã€‚ä»£ä»·å°±æ˜¯ä¸¤ä¸ªä¸–ç•Œä¸å¤å­˜åœ¨ï¼Œæ›¾ç»å¥‹æ–—çš„ä¸€åˆ‡åŒ–ä¸ºè™šæ— ï¼Œè€Œç»“ä»¥å¤–çš„äººè¿˜èƒ½åœ¨èµ·æºä¸–ç•Œæ´»ä¸‹å»ã€‚Claudiaæä¾›äº†ç¬¬ä¸‰ç§è§’åº¦ï¼Œå¥¹ä¸ºäº†æ‹¯æ•‘å¥³å„¿å¿…æ­»çš„å‘½è¿æ¥å¾€äºä¸¤ä¸ªä¸–ç•Œï¼Œåœ¨ä¸åŒçš„æ—¶ç©ºé€šè¿‡æ”¹å˜ä¸åŒè§’è‰²çš„è¡Œä¸ºè§‚å¯Ÿå¯¼è‡´çš„ç»“æœï¼Œåœ¨æ¯æ¬¡å¾ªç¯é‡Œæä¾›ç»™æ–°å¾ªç¯é‡Œçš„è‡ªå·±æ–°çš„è®¤çŸ¥ï¼Œå½“ç¢ç‰‡è¢«æ”¶é›†å®Œå…¨ï¼Œæ‰å¾—åˆ°äº†è¿½å¯»çš„ç­”æ¡ˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> read </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>4 virtual memory</title>
      <link href="/sg/2021/11/04/6.004-vm/"/>
      <url>/sg/2021/11/04/6.004-vm/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#17-virtual-memory">17 virtual memory</a><ul><li><a href="#virtual-memory">Virtual memory</a></li><li><a href="#virtual-machine">Virtual machine</a></li></ul></li><li><a href="#18-virtualizing-the-processor">18 virtualizing the processor</a><ul><li><a href="#build-a-vm">build a VM</a></li><li><a href="#jin-cheng-ru-he-fu-yong-cpu">è¿›ç¨‹å¦‚ä½•å¤ç”¨cpuï¼Ÿ</a></li><li><a href="#interrupts-to-time-sharing">interrupts to time-sharing</a></li><li><a href="#exception-handling">exception handling</a></li><li><a href="#communicate-with-os">Communicate with os</a></li></ul></li><li><a href="#19-devices-and-interrupts">19 devices and interrupts</a><ul><li><a href="#interrupt-based-asynch-i-o">Interrupt-based asynch I/O</a></li><li><a href="#implementations-of-readkey">Implementations of ReadKey</a></li><li><a href="#time-sharing-can-t-meet-with-ddl">Time-sharing canâ€™t meet with ddl</a></li><li><a href="#the-need-for-real-time">the need for real time</a></li><li><a href="#real-time-scenarios">Real-time scenarios</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="17-virtual-memory">17 virtual memory</span><a href="#17-virtual-memory" class="header-anchor">Â¶</a></h2><p>Fact:DRAM accessing hard disk is much more slower(100,000) than cache accessing main main memory.</p><p>Problem: Enormous miss penalty of secondary storage</p><p>Solution/Goal: the miss rate should be very small compared to the rate of executing instructions.(decrease miss ratio)</p><p>Design policy:</p><ol><li><p>high associativity: avoid collisions between accesses</p></li><li><p>large block size: amortize the cost of miss over many future hits</p></li><li><p>Write-back strategy: separation of hardware and software.only update the contents of disk when data thatâ€™s changed in main memory needs to be replaced by data from other blocks of secondary storage.</p><blockquote><p>upside of long latencies: manage the organization of main memory and the accesses to secondary storage in software.</p><p>-&gt; handle hits in hw, misses in sw</p></blockquote></li></ol><h3><span id="virtual-memory">Virtual memory</span><a href="#virtual-memory" class="header-anchor">Â¶</a></h3><p>Fact: we only need to ensure the current working set of a program is actually resident in main memory. Locations not currently being used could live in secondary storage until needed.</p><p>Goal:</p><ul><li><p>Exploit locality on a large scale</p><ul><li>solution: MMU with single-level page map</li><li>optimizations<ul><li>store in RAM</li><li>TLB</li></ul></li><li>Cache/VM interactions</li></ul></li><li><p>ease memory management, protect multiple contexts from each other.</p></li></ul><h4><span id="gt-mmu-translate-va-to-pa">&gt; MMU:translate VA to PA</span><a href="#gt-mmu-translate-va-to-pa" class="header-anchor">Â¶</a></h4><p>Solution: two part: VAtoPA + PageFault</p><ul><li>use hw(MMU) to implement VtoP, use sw(page fault exception handler of CPU) to handle exceptional cases</li></ul><blockquote><p>fact:  MMU maps virtual pages to physical pages. Cause a page fault if virtual page is not resident in physical memory.</p></blockquote><p>implementation: Paging/demand paging</p><p>Plan:</p><ol><li><p>All virtual pages in secondary storage, MMU empty.</p></li><li><p>map VA to PA</p><p>2.1 RAM-resident page</p><p>2.2 non-resident page: page fault</p><p>â€‹CPU switches execution to page fault handler, the handler allocates a physical page for VA loaded from hard disk, then adjusts the page map entry. If all physical pages are unavailable, it chooses an existing page to replace. Finally return control to program.</p></li><li><p>Working set incrementally loaded via page faults</p><p>problem: thrashing: programs constantly generate page faults, which causes the program run very slowly.</p></li></ol><p>Arithmetic: page map(v, m, p)</p><h4><span id="gt-where-to-store-page-map">&gt; Where to store page map:</span><a href="#gt-where-to-store-page-map" class="header-anchor">Â¶</a></h4><ol><li><p>store in RAM(main memory): RAM-resident page maps</p><blockquote><p>use a register, called the page map pointer, to hold the address of the page map array in main memory</p></blockquote><p>problem: each memory reference takes 2 accesses to physical memory</p></li><li><p>cache the page map entries: translation look-aside buffer: a special-purpose fully-associative cache</p><p>TLB(VA, PA)</p><blockquote><p>If the PPN is found by using the TLB, the access to main memory for the page table entry can be avoided.</p></blockquote><ul><li><p>Variations:</p><ul><li>Multi-level page map</li></ul><blockquote><p>The key idea is that the page map segments are in virtual memory, <em>i.e.</em>, they donâ€™t all have to be resident at any given time. If the running application is only actively using a small portion of its virtual address space, we may only need a handful of pages to hold the page directory and the necessary page map segments.</p></blockquote><ul><li>paging the page map</li></ul></li></ul></li></ol><h4><span id="gt-sum-up-mmu-address-translation">&gt; sum up: MMU address translation</span><a href="#gt-sum-up-mmu-address-translation" class="header-anchor">Â¶</a></h4><img src="/sg/2021/11/04/6.004-vm/sc1.png" class title="æˆªå±2021-11-01 ä¸Šåˆ10.15.13"><h3><span id="virtual-machine">Virtual machine</span><a href="#virtual-machine" class="header-anchor">Â¶</a></h3><p>Fact:</p><blockquote><p>context: a mapping of VA to PA</p></blockquote><ul><li>problem: timesharing among several programs,When new program starts, the context should be updated by flushing TLB which costs a lot.</li></ul><p>example: OS kernel/user</p><ul><li><p>Solution: perform rapid context-switching</p><ul><li>add a register to hold index of current context.</li><li>switch contexts: update context # and pageablePtr registers.</li></ul></li><li><p>Problem: use caches with Virtual memory</p><p>disign choice:</p><ol><li>Virtually-addressed cache</li><li>Physically-addressed cache</li><li>Overlapped operation</li></ol></li></ul><p>several part to consider: MMU time on HIT, flush cache after context switch</p><p>â€¦to be continued this part</p><h2><span id="18-virtualizing-the-processor">18 virtualizing the processor</span><a href="#18-virtualizing-the-processor" class="header-anchor">Â¶</a></h2><p>å›é¡¾ä¸€ä¸‹è™šæ‹Ÿå†…å­˜ï¼Œç®€å•æ¥è¯´å®ƒæä¾›ç»™æ¯ä¸ªè¿è¡Œçš„ç¨‹åºä¸€ä¸ªæ‹¥æœ‰è®¡ç®—æœºæ‰€æœ‰å†…å­˜åœ°å€ç©ºé—´çš„å¹»æƒ³ã€‚å®ƒé€šè¿‡å†…å­˜æ§åˆ¶å•å…ƒå®ç°ä»è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ï¼Œç”¨è™šæ‹Ÿåœ°å€æŸ¥è¯¢é¡µè¡¨ï¼Œè€Œç”¨é¡µè¡¨æ¥è®°å½•ç‰©ç†åœ°å€ï¼Œå®ŒæˆæŸ¥è¯¢ã€‚</p><p>ç”±äºè®¿é—®ç¡¬ç›˜çš„å»¶è¿Ÿæ¯”ä¸»å­˜å‚¨å™¨ï¼ˆmain memoryï¼‰æ…¢çš„å¤šï¼Œé€šè¿‡TLBï¼ˆä¸€ç§ç¼“å­˜å™¨ï¼‰æ¥è®°å½•æ´»è·ƒçš„è™šæ‹Ÿåœ°å€åˆ°ç‰©ç†åœ°å€çš„è½¬æ¢ã€‚</p><h3><span id="build-a-vm">build a VM</span><a href="#build-a-vm" class="header-anchor">Â¶</a></h3><p>æŠŠæ­£åœ¨è¿è¡Œçš„ç¨‹åºæŠ½è±¡æˆè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹åŒ…å«å®ƒè¿è¡Œæ‰€éœ€è¦çš„æ‰€æœ‰èµ„æº(CPU,I/O device, MMU,virtual address space)â€¦</p><p>æœ‰ä¸€ä¸ªç‰¹åˆ«çš„ä¼˜å…ˆçš„è¿›ç¨‹å«kernelã€‚OSä¸ºå„ç§è¿›ç¨‹æä¾›æœåŠ¡ï¼Œæ¯”å¦‚è®¿é—®æ–‡ä»¶ä¸­çš„æ•°æ®ï¼Œå»ºç«‹ç½‘ç»œè¿æ¥ï¼Œç®¡ç†UIã€‚ä»ä¸åŒç”¨æˆ·æ¨¡å¼çš„è¿›ç¨‹åˆ‡æ¢ï¼ŒOSéœ€è¦ä¿å­˜ç°åœ¨è¿è¡Œçš„è¿›ç¨‹çŠ¶æ€ï¼Œä¿å­˜åœ¨ä¸»å­˜å‚¨å™¨ä¸­æˆ–äºŒçº§å­˜å‚¨å™¨ä¸­ã€‚</p><p>Problem: share one physical machine between all the virtual machines.  As if each process was running on its own â€œvirtual machineâ€ that works independently of other virtual machines for other processes.(OSâ€™s job)</p><p>Fact: one VM for each process</p><ul><li>OSæŠŠå¤–æ¥è®¾å¤‡éƒ½æŠ½è±¡æˆæœåŠ¡ï¼Œä¸ºæ¯ä¸ªè¿›ç¨‹æä¾›ç‹¬ç«‹çš„è™šæ‹Ÿæœºï¼Œå‘¨æœŸæ€§åœ°ä»ä¸€ä¸ªè¿›ç¨‹è½¬æ¢åˆ°ä¸‹ä¸€ä¸ªè¿›ç¨‹ã€‚</li><li>å¤–æ¥è®¾å¤‡åŒ…å«ä¸€ä¸ªå®šæ—¶å™¨è§¦å‘å‘¨æœŸæ€§çš„CPUä¸­æ–­ï¼Œæä¾›éæ˜“å¤±æ€§å­˜å‚¨çš„äºŒçº§å­˜å‚¨å™¨ï¼Œè¿æ¥å¤–éƒ¨è®¾å¤‡çš„USBæ¥å£ï¼Œè§†é¢‘ç›‘æ§å™¨ï¼Œé”®ç›˜ï¼Œé¼ æ ‡ç­‰ç”¨æˆ·ç•Œé¢æœåŠ¡ã€‚</li><li>æŠ½è±¡åŒ…æ‹¬çª—å£ï¼Œè®¿é—®ç£ç›˜å†…çš„æ–‡ä»¶ï¼Œç½‘ç»œä¼ è¾“ç­‰ã€‚OSé€šè¿‡supervisor calls(SVCs)é…ç½®å’Œæ§åˆ¶è™šæ‹ŸæœåŠ¡ã€‚</li></ul><blockquote><p>The process state includes</p><ul><li>the hardware state of the CPU, <em>i.e.</em>, the values in the registers and program counter.</li><li>the contents of the processâ€™ virtual address space, including code, data values, the stack, and data objects dynamically allocated from the heap. Under the management of the MMU, this portion of the state can be resident in main memory or can reside in secondary storage.</li><li>the hardware state of the MMU, which, as we saw earlier, depends on the context-number and page-directory registers. Also included are the pages allocated for the hierarchical page map.</li><li>additional information about the processâ€™ input and output activities, such as where it has reached in reading or writing files in the file system, the status and buffers associated with open network connections, pending events from the user interface (<em>e.g.</em>, keyboard characters and mouse clicks), and so on.</li></ul></blockquote><h3><span id="jin-cheng-ru-he-fu-yong-cpu">è¿›ç¨‹å¦‚ä½•å¤ç”¨cpuï¼Ÿ</span><a href="#jin-cheng-ru-he-fu-yong-cpu" class="header-anchor">Â¶</a></h3><p>time-multiplexing of the cpu = timesharing</p><p>OSä»è¿è¡Œè¿›ç¨‹0åˆ°è¿è¡Œè¿›ç¨‹1ï¼š</p><img src="/sg/2021/11/04/6.004-vm/sc2.png" class title="æˆªå±2021-11-02 ä¸Šåˆ1.06.21"><ul><li>è¿è¡Œè¿›ç¨‹0 -&gt; åœæ­¢è¿è¡Œ0ï¼Œå°†æ§åˆ¶è½¬ç§»å›OS kernelï¼Œä¿å­˜å½“å‰åœ°å€ï¼ˆPC+4ï¼‰-&gt; ä¿å­˜è¿›ç¨‹0çš„çŠ¶æ€å¹¶ä¸”åŠ è½½è¿›ç¨‹1çš„çŠ¶æ€ -&gt; å›åˆ°è¿›ç¨‹1 -&gt; è¿è¡Œè¿›ç¨‹1ã€‚</li><li>ç¬¬2æ­¥å’Œç¬¬4æ­¥æ˜¯ä¸åŒçš„trap handlerã€‚</li></ul><h3><span id="interrupts-to-time-sharing">interrupts to time-sharing</span><a href="#interrupts-to-time-sharing" class="header-anchor">Â¶</a></h3><p>ä¸­æ–­å¤„ç†:handler</p><ul><li><p>Hardware</p><p>Timer interrupts:  the periodic interrupt from the external timer device.</p><p>how the interrupt hardware in the Beta works?</p><blockquote><p>it saves the PC+4 of the interrupted user-mode program in the XP register and sets the program counter to some predetermined value that depends on which external interrupt happened.</p></blockquote></li><li><p>software: beta interrupt handling</p><ul><li><p>ä¿å­˜çŠ¶æ€åˆ°å¯„å­˜å™¨ä¸­ï¼ˆåœ¨osæ˜¯å«UserMStateçš„æ•°æ®ç»“æ„ï¼Œåœ¨main memoryä¸­å­˜å‚¨CPUçš„å¯„å­˜å™¨ï¼‰-&gt; Cç¨‹å¼å¤„ç†exception -&gt;é‡è£…å¯„å­˜å™¨å†…ä¿å­˜çš„çŠ¶æ€  -&gt; å›åˆ°åŸæ¥çš„åœ°å€ï¼ˆReg[XP]-4)</p></li><li><p>Where to find handlers</p><ul><li>Beta scheme: wire in a low-memory address for each exception handler entry point</li><li>Table of handler addresses</li></ul></li><li><p>é—®é¢˜ï¼šä¸æ˜¯å¾ˆæ‡‚ä¸­æ–­å¯¹ç”¨æˆ·ç¨‹åºæ˜¯é€æ˜çš„ï¼Ÿæˆ–è®¸æ˜¯æŒ‡ç”¨æˆ·ç¨‹åºèƒ½å¤Ÿè®¿é—®ä¸­æ–­æ”¹å˜çš„å˜é‡/çŠ¶æ€ã€‚</p><blockquote><p>Since the process state is saved and restored during an interrupt, interrupts are transparent to the running user-mode program.</p></blockquote></li></ul></li><li><p>Example: timer interrupt handler</p><ul><li><p>è®¾å®šï¼šos maintains current time of day count in response to clock events.There are program A and clock handler.</p></li><li><p>ç›®æ ‡æ˜¯ç”¨æ—¶é—´ä¸­æ–­å™¨æ¥æ›´æ–°osä¸­è®°å½•ç°åœ¨æ—¶é—´çš„å€¼ã€‚å®šæ—¶å™¨å®šæœŸä¸­æ–­ç”¨æˆ·æ¨¡å¼ç¨‹åºï¼Œä»¥åœ¨æ“ä½œç³»ç»Ÿä¸­è¿è¡Œæ—¶é’Ÿä¸­æ–­å¤„ç†ç¨‹åºä»£ç ï¼Œç„¶åç»§ç»­ç”¨æˆ·æ¨¡å¼ç¨‹åºçš„è¿è¡Œã€‚å¯¹Aæ¥è¯´ï¼Œä¸­æ–­ä»¿ä½›æ²¡æœ‰å‘ç”Ÿã€‚å¦‚æœAéœ€è¦è®¿é—®æ—¶é—´ï¼Œåˆ™éœ€è¦å‘osåšå‡ºæå‡ºç›¸åº”çš„æœåŠ¡è¦æ±‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//Handler(C)</span><br><span class="line">long TimeOfDay;</span><br><span class="line">Struct Mstate &#123;&#125; UserMstate;</span><br><span class="line">Clock_Handler()&#123;&#125;</span><br><span class="line"></span><br><span class="line">//Interrupt stub(assymbly)</span><br><span class="line">Clock_h:</span><br><span class="line">save the values of all registers into the UserMState;</span><br><span class="line">set up the kernel-mode stack;</span><br><span class="line">call clock_handler;</span><br><span class="line">reload registers;</span><br><span class="line">decrement the XP register value;</span><br><span class="line">return to the app;</span><br></pre></td></tr></table></figure><img src="/sg/2021/11/04/6.004-vm/sc3.png" class title="æˆªå±2021-11-02 ä¸Šåˆ10.46.46"></li></ul></li><li><p>Scheduler: simple timesharing scheduler</p><ul><li><p>è®¾å®šï¼šUserMState, process control block of each process(process table), index of current process</p></li><li><p>æ€æ ·è¿è¡Œä¸€ä¸ªæ–°çš„æ—¶é—´å…±äº«çš„è¿›ç¨‹ï¼Ÿ</p><ul><li><p>scheduleré€šè¿‡ä¿å­˜ç°åœ¨è¿›ç¨‹çš„çŠ¶æ€ï¼Œæ”¹å˜ç´¢å¼•å€¼ä¸ºè¿›å…¥ä¸‹ä¸€ä¸ªè¿›ç¨‹å‡†å¤‡</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">scheduler()&#123;</span><br><span class="line">  proctbl[cur].state = UserMState;</span><br><span class="line">  cur = (cur+<span class="number">1</span>)%N;</span><br><span class="line">  UserMState = proctbl[cur].state; <span class="comment">//install state</span></span><br><span class="line">  LoadUserContext(....PageMap); <span class="comment">//install context</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p>Time-sharing story in os</p><ul><li><p>Timer ä¸­æ–­æ­£åœ¨è¿è¡Œçš„ç”¨æˆ·æ¨¡å¼ç¨‹åºå¹¶å¼€å§‹æ‰§è¡Œclock handlerä»£ç ã€‚clock handlerå…ˆä¿å­˜ç°åœ¨çš„è¿›ç¨‹çŠ¶æ€åˆ°ç›¸å…³çš„æ•°æ®ç»“æ„ä¸­ç„¶åè°ƒç”¨schedulerã€‚schedulerå°†æš‚æ—¶ä¿å­˜çš„è¿›ç¨‹çŠ¶æ€è½¬ç§»åˆ°process tableä¸­ï¼Œè€Œä¹‹åè°ƒç”¨çš„schedulerä¼šä¸ºä¸‹ä¸€ä¸ªè¿è¡Œçš„è¿›ç¨‹ä¿å­˜ç›¸å…³çš„çŠ¶æ€åˆ°æš‚æ—¶å­˜æ”¾çš„åœ°å€ï¼Œclock handleré‡æ–°åŠ è½½å¯„å­˜å™¨ä¿å­˜çš„çŠ¶æ€ç»§ç»­è¿è¡Œä¸‹ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿™æ ·å¾ªç¯ä¸‹å»ã€‚</p></li><li><p>è®¾å®š: supervisor mode bitï¼š1æ—¶ä¸å…è®¸ä¸­æ–­ï¼Œ0æ—¶å…è®¸ã€‚kernel mode is set 1; user mode is set 0.</p><ul><li>ä¸­æ–­ä¸èƒ½åŒæ—¶è¿è¡Œï¼Œä¸€æ¬¡åªèƒ½è¿è¡Œä¸€æ¬¡ã€‚è®¾ç½®ç›‘æ§ä½ä¿è¯è¿™ä¸€ç‚¹ã€‚ç”±äºä¸­æ–­å‘ç”Ÿä¼šæ”¹å˜è¿›ç¨‹çŠ¶æ€ï¼Œè¿™æ ·æ˜¯ä¸ºäº†ç¡®ä¿ä¸ä¼šè¦†ç›–è¿›ç¨‹çš„çŠ¶æ€åˆ°å¯„å­˜å™¨ï¼ˆUserMStateï¼‰ä¸­ã€‚</li></ul></li></ul></li></ul><h3><span id="exception-handling">exception handling</span><a href="#exception-handling" class="header-anchor">Â¶</a></h3><p>problem: how to deal with â€œillegalâ€ opcodes?</p><p>â€¦è·³è¿‡äº†ç¡¬ä»¶ï¼Œæ±‡ç¼–çš„éƒ¨åˆ†</p><h3><span id="communicate-with-os">Communicate with os</span><a href="#communicate-with-os" class="header-anchor">Â¶</a></h3><p>Problem: how user-mode programs communicate with OS code?</p><p>å½“osåœ¨è¿è¡Œå…¶ä»–è¿›ç¨‹æ—¶ï¼Œç”¨æˆ·ç¨‹åºè¯¥å¦‚ä½•å°†æ§åˆ¶è½¬ç§»å›osï¼Ÿ</p><p>Solution:</p><ul><li>abstraction: Use supervisor calls with args in registers</li><li>Implementation: use illegal instructions to cause an exception, and OS recognize the instruction as a user-mode SVCs</li></ul><p>â€¦è·³è¿‡äº†æ±‡ç¼–éƒ¨åˆ†</p><h2><span id="19-devices-and-interrupts">19 devices and interrupts</span><a href="#19-devices-and-interrupts" class="header-anchor">Â¶</a></h2><p>Problem 1: how the OS interacts with the devices themselves?</p><p>Problem 2: how supervisor calls access the kernel buffers in response to requests from user-mode processes?</p><h3><span id="interrupt-based-asynch-i-o">Interrupt-based asynch I/O</span><a href="#interrupt-based-asynch-i-o" class="header-anchor">Â¶</a></h3><p>æ“ä½œç³»ç»Ÿä¸­æœ‰å¾ˆå¤šè¾“å…¥/è¾“å‡ºè®¾å¤‡ï¼Œä»¥é”®ç›˜è¾“å…¥ä¸ºä¾‹ï¼Œç”¨æˆ·åœ¨é”®ç›˜ä¸Šæ‰“å­—ï¼Œå¼•èµ·é”®ç›˜å‘cpuå‘èµ·ä¸­æ–­è¯·æ±‚ã€‚ä¸­æ–­åœæ­¢å½“å‰ç¨‹åºçš„è¿è¡Œè€Œæ‰§è¡Œè¿™ä¸ªç‰¹åˆ«çš„è¾“å…¥è¾“å‡ºäº‹ä»¶ã€‚å½“å†…æ ¸ä¸­çš„ç¼“å­˜ç”¨å®Œåä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><p>æ—©å…ˆçš„å¤„ç†æ–¹å¼æ˜¯ä¸¢å¼ƒæ”¶åˆ°çš„é”®ç›˜è¾“å…¥çš„å­—ç¬¦ï¼Œæç¤ºç”¨æˆ·ä¹‹å‰è¾“å…¥çš„å·²ä½œåºŸã€‚</p><p>åæ¥ç”¨æˆ·æ¨¡å¼çš„ç¨‹åºæ‰§è¡ŒReadKey() SVCï¼Œè¦æ±‚OSè¿”å›ä¸‹ä¸€ä¸ªå­—æ¯åˆ°R0å¯„å­˜å™¨ä¸­ï¼Œç„¶åéµå¾ªSVCç»§ç»­æ‰§è¡ŒæŒ‡ä»¤ã€‚</p><blockquote><p>ReadKey() SVC: a blocking I/O request.</p><p>å½“æ²¡æœ‰å­—ç¬¦è¿”å›æ—¶ä¸æ‰§è¡Œç›´åˆ°æœ‰å¯ç”¨çš„ç»“æœè¿”å›ã€‚</p><p>the program assumes that when the SVC returns, the next character is in R0. If there isnâ€™t (yet) a character to be returned, execution should be â€œblockedâ€, <em>i.e.</em>, suspended, until such time that a character is available.</p><p>Non-blocking I/O request: return immediately with both a status flag and a result.</p><p>å½“æ²¡æœ‰å­—ç¬¦è¿”å›æ—¶ä»ç„¶æ‰§è¡ŒæŒ‡ä»¤ï¼Œåœ¨ä¹‹åé‡æ–°å‘èµ·è¯·æ±‚ã€‚</p></blockquote><ul><li><p>Operation: no attention to keyboard during normal operation</p><ul><li><p>Event-driven approach</p><p>ç”¨æˆ·æ¨¡å¼ç¨‹åºå’Œé”®ç›˜å¹¶æ²¡æœ‰ç›´æ¥äº’åŠ¨ï¼Œè€Œæ˜¯é€šè¿‡äº‹ä»¶é©±åŠ¨æ–¹æ³•ï¼Œè®¾å¤‡å½“éœ€è¦å¤„ç†è¾“å…¥æ—¶é€šè¿‡ä¸­æ–­å‘æ“ä½œç³»ç»Ÿå‘å‡ºä¿¡å·ã€‚è¿™æ ·æŠŠè´£ä»»åˆ†ç¦»çš„å¥½å¤„æ˜¯å‡å°‘æ“ä½œç³»ç»Ÿä¸åœåœ°æ£€æŸ¥æ˜¯å¦æœ‰æœªå®Œæˆçš„I/Oæ“ä½œ</p></li></ul></li><li><p>The interrupt-driven OS interactions with I/O devices are completely transparent to user programs.</p></li><li><p>Example: keyboard interrupt handler</p><ul><li>sketch: cpu needs access device status and data</li><li>approach:Memory-mapper I/O: a portion of the kernel address space is devoted to servicing I/O devices.</li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Device</span>&#123;</span></span><br><span class="line">  <span class="type">char</span> Flag, Data;</span><br><span class="line">&#125;keyboard;</span><br><span class="line"></span><br><span class="line">keyHit_h()&#123;</span><br><span class="line">  Buffer[inptr] = keyboard.Data;</span><br><span class="line">  inptr = (...)...;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ç°å®ä¸­æ›´å¤æ‚ï¼š</p><p>é”®ç›˜å¤„ç†è¿˜éœ€è¦è¯†åˆ«é”®çš„çŠ¶æ€æ˜¯æŒ‰ä¸‹è¿˜æ˜¯é‡Šæ”¾ï¼Œç„¶åå°†å­—ç¬¦è½¬æ¢æˆASCIIç ï¼Œå¹¶ä¸”éœ€è¦å¤„ç†ç‰¹æ®Šçš„æŒ‰é”®ç»„åˆã€‚</p></li></ul><h3><span id="implementations-of-readkey">Implementations of ReadKey</span><a href="#implementations-of-readkey" class="header-anchor">Â¶</a></h3><p>Goal: the associated supervisor call that lets user programs read characters.</p><p>Attempt1: ç›´æ¥å†™</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ReadKey_h()&#123;</span><br><span class="line">  <span class="type">int</span> kbdnum = ProcTbl[Cur].DPYNum;</span><br><span class="line">  <span class="keyword">while</span> (BufferEmpty(kbdnum))&#123;</span><br><span class="line">    <span class="comment">/* busy wait loop*/</span></span><br><span class="line">  &#125;</span><br><span class="line">UserMState.Reqs[<span class="number">0</span>] = ReadInputBuffer (kbdnum) ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹kbdnum:keyboard num;proctbl: process table</p><ul><li><p>Problemï¼škernel/supervisor mode canâ€™t be interrupted.</p><blockquote><p>the SVC handler is running with the supervisor bit (PC[31]) set to 1, disabling interrupts.</p></blockquote><ul><li><p>such that the buffer never gets filled.</p></li><li><p>é™·å…¥æ­»å¾ªç¯</p></li></ul></li></ul><p>Attempt2: fix the looping problem by adding code to subtract 4 from the saved value of the XP register before returning</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ReadKey_h()&#123;</span><br><span class="line">  <span class="type">int</span> kbdnum = ProcTbl[Cur].DPYNum;</span><br><span class="line"><span class="keyword">if</span> (BufferEmpty(kbdnum))&#123;</span><br><span class="line"><span class="comment">/* busy wait loop*/</span></span><br><span class="line">UserMState.Regs[XP] = UserMState.Regs [XP]<span class="number">-4</span> ;</span><br><span class="line">    Scheduler(); <span class="comment">//attempt3</span></span><br><span class="line">&#125; <span class="keyword">else</span></span><br><span class="line">UserMState.Reqs[<span class="number">0</span>] = ReadInputBuffer (kbdnum) ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å’ŒAttempt1çš„åŒºåˆ«æ˜¯ï¼š</p><ul><li><p>æ‰§è¡Œå¾ªç¯çš„æ–¹å¼ï¼šå½“ä¸­æ–­æ¨å‡ºæ—¶ï¼Œæ“ä½œç³»ç»Ÿé€šè¿‡è·³åˆ°xpç»§ç»­æ‰§è¡Œç”¨æˆ·æ¨¡å¼çš„æŒ‡ä»¤ã€‚é€šè¿‡æ”¹å˜è¿™ä¸€åœ°å€æ¥å¾ªç¯å‘å‡ºä¸­æ–­ã€‚ï¼ˆæ±‡ç¼–çš„å¸¸è§å¾ªç¯æ–¹å¼ï¼Ÿæˆ‘è®¤ä¸ºï¼‰</p><blockquote><p>When the handler exits, the OS will resume execution of the user-mode program by reloading the registers and then executing a JMP(XP), which would normally then execute the instruction <em>following</em> the SVC instruction.</p></blockquote></li><li><p>ReadKey() SVC è¿›å…¥ç”¨æˆ·æ¨¡å¼</p></li></ul></li><li><p>Problem: waste its time-slice waiting for next keystroke</p></li></ul><p>Attempt3: åˆ©ç”¨ç­‰å¾…çš„æ—¶é—´æ‰§è¡Œåˆ«çš„ç¨‹åºï¼Œé€šè¿‡å¾ªç¯è°ƒåº¦çš„æ–¹å¼æœ€åå›åˆ°ReadKey() SVC</p><blockquote><p>The call to Scheduler() suspends execution of the current process and arranges for the next process to run when the handler exits. (Round-robin scheduling).</p><p>å»ºç«‹åœ¨ä»¥ä¸‹äº‹å®ä¸Šï¼š</p><p>Fact: the time slices for each process are small enough that one round of process execution happens more quickly than the time between two typed characters</p></blockquote><ul><li>Time-sharing åœ¨æ­¤åœºæ™¯ä¸‹çš„æ„ä¹‰ï¼š<ul><li>è¿›è¡Œè®¡ç®—å¯†é›†å‹çš„ç¨‹åºæ—¶ç”±äºåˆ†éš”æ—¶é—´(cycles)è¿‡çŸ­ï¼Œtime-sharingå¯èƒ½ä¼šå¢åŠ é¢å¤–çš„æˆæœ¬åœ¨è¿›ç¨‹äº¤æ¢ï¼ˆcontext-switching, schedulingï¼‰ä¸Šã€‚</li><li>å½“æœ‰å¾ˆå¤šä¸ªç¨‹åºéœ€è¦æ‰§è¡Œæ—¶ï¼Œåˆ†éš”æ—¶é—´å¢åŠ ï¼Œtime-sharingæ‰å¢åŠ äº†æ•ˆç‡</li></ul></li><li>è¿›ä¸€æ­¥çš„æé«˜æ•ˆç‡ï¼šå°†è¿›ç¨‹çš„çŠ¶æ€ï¼ˆæ´»è·ƒ/ç­‰å¾…ï¼‰è®°å½•åˆ°è¿›ç¨‹çš„æ•°æ®ä¸­ï¼Œé€šè¿‡ä¼˜å…ˆæ‰§è¡Œæ´»è·ƒçš„ç¨‹åºå‡å°‘ç­‰å¾…çš„æ—¶é—´ã€‚<ul><li>unixç³»ç»Ÿä¸­sleep, wakeupå¯ä»¥æ”¹å˜è¿›ç¨‹çš„ç›¸åº”çŠ¶æ€</li></ul></li></ul><p>Attemp4: â€œè¿›ä¸€æ­¥â€çš„å®ç°:no CPU cycles are wasted on useless activity.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">ReadKey_h()&#123;</span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">if</span> (BufferEmpty(kbdnum))&#123;</span><br><span class="line">User.Regs[XP] = User.Regs&#123;XP] - <span class="number">4</span>;</span><br><span class="line">sleep(kbdnum);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;... &#125;</span><br><span class="line">&#125;</span><br><span class="line">sleep(status s) &#123;</span><br><span class="line">ProcTbI[Cur].status = s;</span><br><span class="line">Scheduler();</span><br><span class="line">&#125;</span><br><span class="line">Scheduler)&#123;</span><br><span class="line"><span class="keyword">while</span> (ProcTbIfi].status != <span class="number">0</span>) &#123;</span><br><span class="line">i=(i+<span class="number">1</span>)%N;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">KeyHit_h()&#123;</span><br><span class="line">  ...</span><br><span class="line">  writeBuffer(kbdnum, key);</span><br><span class="line">wakeup(kbdnum);</span><br><span class="line">  ...</span><br><span class="line">)  </span><br><span class="line">wakeup(status s) &#123;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i += <span class="number">1</span>) &#123;</span><br><span class="line"><span class="keyword">if</span> (ProcTbli].status == s)</span><br><span class="line">ProcTbli].status = <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>The effect is that once a process goes to sleep() WAITING for an event, itâ€™s not considered for execution again until the event occurs and wakeup() marks the process as ACTIVE.</p></blockquote><p>Example: which handler &amp; os? åƒä¸ªè§£è°œæ¸¸æˆã€‚æ ¹æ®handlerå’Œosçš„ç‰¹ç‚¹æ¥æ’é™¤ã€‚</p><h3><span id="time-sharing-can-t-meet-with-ddl">Time-sharing canâ€™t meet with ddl</span><a href="#time-sharing-can-t-meet-with-ddl" class="header-anchor">Â¶</a></h3><p>Problem: asynchronous world.</p><p>Solution: I/O: separate â€œevent handlingâ€ from â€œevent processingâ€.</p><ul><li>Downside: the need for real-time: canâ€™t predict completion time, therefore canâ€™t deal with real-time system</li><li>Example: ESC on cars,éœ€è¦å®æ—¶è®¡ç®—å„ç§å› ç´ æ‰èƒ½å‡†ç¡®åˆ¹è½¦ã€‚è€Œè¿™æ˜¯æ—¶é—´åˆ†äº«ç³»ç»Ÿä¸èƒ½åšåˆ°çš„</li></ul><blockquote><p>Time-sharing system: åœ¨å•ä¸ªç¡¬ä»¶ç³»ç»Ÿä¸Šé€šè¿‡å¿«é€Ÿåœ¨è¿›ç¨‹é—´åˆ‡æ¢ä¼ªé€ å¹¶è¡Œçš„å‡è±¡ï¼Œä¸ºæ¯ä¸ªç¨‹åºæä¾›äº†åœ¨ç‹¬ç«‹çš„è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„å¹»æƒ³ã€‚</p><p>downside: processing throughput is more variable</p></blockquote><h3><span id="the-need-for-real-time">the need for real time</span><a href="#the-need-for-real-time" class="header-anchor">Â¶</a></h3><ul><li><p>whatâ€™s the largest L such that Lmax+S=D?</p><blockquote><p>Measure of performance in a real-time system: interrupt latency L,the amount of time that elapses between a request to run some code and when that code actually starts executing.</p></blockquote></li></ul><img src="/sg/2021/11/04/6.004-vm/sc4.png" class title="æˆªå±2021-11-04 ä¸Šåˆ12.10.58"><ul><li><p>What factors contribute to interrupt latency?</p><ul><li><p>å…³å¿ƒè¿™ä¸ªé—®é¢˜çš„åŸå› åœ¨äºå®ç°æœ€å°åŒ–ä¸­æ–­å»¶è¿Ÿä»¥åœ¨æœŸé™æ—¶é—´å®Œæˆç¨‹åºè¿è¡Œçš„ç›®æ ‡ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦çŸ¥é“å¯¼è‡´å»¶è¿Ÿçš„åŸå› ç„¶åå‡å°å»¶è¿Ÿã€‚</p></li><li><p>state save, context switch</p><blockquote><p>While handling an interrupt:it takes times to save the process state, switch to the kernel context, and dispatch to the correct interrupt handler.</p></blockquote></li><li><p>periods of un-interruptability</p><ul><li>Long,uninterruptable instructions</li><li>explicitly disabled periods: interrupt handler in kernel mode</li></ul></li><li><p>to bound and minimize interrupt latency by all means</p><blockquote><p>Weâ€™ll do this by optimizing the cost of taking an interrupt and dispatching to the correct handler code. Weâ€™ll avoid instructions whose execution time is data dependent. And weâ€™ll work to minimize the time spent in kernel mode.</p></blockquote></li></ul></li></ul><h3><span id="real-time-scenarios">Real-time scenarios</span><a href="#real-time-scenarios" class="header-anchor">Â¶</a></h3><p>scenario: scheduling of multiple devices: long-running handlers have a huge impact on the worst-case latency seen by the other devices.</p><h4><span id="gt-stragegy0-first-come-first-served-scenario">&gt; Stragegy0:  first-come-first-served scenario.</span><a href="#gt-stragegy0-first-come-first-served-scenario" class="header-anchor">Â¶</a></h4><p>Problems: reducing the worst-case latencies</p><h4><span id="gt-strategy1-nonpreemptive-weak-priority-system">&gt; Strategy1: â€œnonpreemptiveâ€ / â€œweakâ€ priority system.</span><a href="#gt-strategy1-nonpreemptive-weak-priority-system" class="header-anchor">Â¶</a></h4><ul><li><p>assign priorities to the pending requests and to serve the requests in priority order</p></li><li><p>Result: worsk-case latency = the worst-case service time of all the other devices + the service time of all higher-priority devices</p><p>å½“å‰è¿è¡Œçš„ç¨‹åºå®Œæˆåæ‰ä¼šè¿è¡Œä¸‹ä¸€ä¸ªï¼ˆåœ¨ä¸æ”¯æŒä¸­æ–­çš„ç³»ç»Ÿä¸­ï¼‰ã€‚</p></li><li><p>Subproblem: How should priorities be assigned given hard real-time constraints?</p><ul><li><p>assume each device has a service deadline D after the arrival of its service request. assume D is the time until the <em>next</em> request for the same device.</p></li><li><p>Strategy: earliest deadline, therefore highest priority = earliest deadline</p><blockquote><ol><li><p>Sort the requests by their deadlines.</p></li><li><p>Assign the highest priority to the earliest deadline, second priority to the next deadline, and so on.</p></li></ol></blockquote></li></ul></li><li><p>ä¾‹å­ï¼šæœºåœºå€™æœºæ’åºï¼Œä¼˜å…ˆè®©é£æœºå¿«è¦èµ·é£çš„ä¹˜å®¢å€™æœºè™½ç„¶ä¼šå»¶è¿Ÿéƒ¨åˆ†ä¹˜å®¢çš„å€™æœºæ—¶é—´ï¼Œä½†æ˜¯ä¼šå‡å°‘å»¶è¯¯çš„æ¬¡æ•°ã€‚ä½†æ˜¯å¦‚æœç³»ç»Ÿè¿‡è½½ï¼Œè®©æœ€å…ˆè¦èµ·é£çš„ä¹˜å®¢ä¼˜å…ˆå€™æœºä¼šå¯¼è‡´æ‰€æœ‰äººéƒ½å»¶è¯¯ï¼Œåœ¨è¿™ä¸ªåœºæ™¯ä¸­æ’åºä¼˜å…ˆé—®é¢˜éœ€è¦é‡æ–°è®¨è®ºï¼Œå› ä¸ºç›®æ ‡å˜æˆäº†èƒ½å¤Ÿä½¿å»¶è¯¯èˆªç­æ¬¡æ•°æœ€å°‘çš„æ’åºä¼˜å…ˆã€‚</p></li><li><p>downsideï¼šthe worst-case latency for a device always includes the maximum time we have to wait for the currently-running task to complete.</p><blockquote><p>Scenario: suppose disk requests have a 800 us deadline in order to guarantee the best throughput from the disk subsystem. Since the disk handler service time is 500 us, the maximum allowable latency between a disk request and starting to execute the disk service routine is 300 us.</p></blockquote><img src="/sg/2021/11/04/6.004-vm/sc5.png" class title="æˆªå±2021-11-04 ä¸‹åˆ12.57.13"></li></ul><h4><span id="gt-strategy2-the-need-for-preemption">&gt; Strategy2: the need for preemption</span><a href="#gt-strategy2-the-need-for-preemption" class="header-anchor">Â¶</a></h4><p>-&gt;a preemptive priority system/â€œstrongâ€ priority system</p><p>æ€ä¹ˆå¤„ç†strategy1ä¸­çš„åœºæ™¯é—®é¢˜ï¼Ÿ</p><p>è®¾å®šæ–°çš„ä¼˜å…ˆçº§æ’åºä¸ºï¼šdisk &gt; printer&gt; keyboardï¼Œæ”¹å˜çš„æ˜¯å½“è¯·æ±‚å‘å‡ºæ—¶ç«‹åˆ»æ‰§è¡Œå½“å‰ç¨‹åºè€Œä¸ç­‰å¾…æ›´ä½ä¼˜å…ˆçº§ç¨‹åºçš„å®Œæˆã€‚åœ¨å¼ºä¼˜å…ˆçº§ç³»ç»Ÿä¸­ï¼Œä¼˜å…ˆçº§å’Œddléå¸¸ç›¸å…³ï¼Œæ‰€ä»¥ä¸€å®šèƒ½åœ¨é™æœŸå®Œæˆè¯·æ±‚ï¼›è€Œåœ¨å¼±ä¼˜å…ˆç³»ç»Ÿä¸­ï¼Œä¼˜å…ˆçº§æŒ‰ç…§æœåŠ¡éœ€è¦å®Œæˆçš„æ—¶é—´åˆ’åˆ†ï¼Œæ‰€ä»¥åœ¨è€ƒè™‘ä¸­æ–­å»¶è¿Ÿæ—¶éœ€è¦è€ƒè™‘å…¶ä»–æœåŠ¡çš„ä¸­æ–­å»¶è¿Ÿæ—¶é—´ã€‚</p><p>â€¦è·³è¿‡äº†ç¡¬ä»¶å®ç°éƒ¨åˆ†â€¦</p><h4><span id="gt-recurring-interrupts">&gt; recurring interrupts</span><a href="#gt-recurring-interrupts" class="header-anchor">Â¶</a></h4><p>Consider interrupts which recur at bounded rates:</p><img src="/sg/2021/11/04/6.004-vm/sc6.png" class title="æˆªå±2021-11-04 ä¸‹åˆ1.16.28"><p>Keyboard handler doesnâ€™t complete until 3 ms after its request was received.</p><p>ç”±äºåªè¦æœ‰ä¼˜å…ˆçº§é«˜äºé”®ç›˜çš„è¯·æ±‚ï¼Œå°±å¿…é¡»å…ˆæ‰§è¡Œé‚£ä¸ªç¨‹åºã€‚æ‰€ä»¥åœ¨å®æ—¶ç³»ç»Ÿä¸­ç”¨ddlä½œä¸ºçº¦æŸè€Œä¸æ˜¯å»¶è¿Ÿæ—¶é—´çš„é•¿çŸ­ã€‚</p><p>é¢ä¸´çš„é—®é¢˜ï¼šå½“é”®ç›˜ddlåœ¨3msä¹‹å‰æ—¶ï¼Œå¼ºä¼˜å…ˆç³»ç»Ÿä»ç„¶æ— æ³•è¾¾åˆ°å®æ—¶æ¡ä»¶çš„é™åˆ¶ï¼Œè¿™æ—¶è¯´æ˜åœ¨ç´§å¼ çš„ddlä¸‹æ²¡æœ‰è¶³å¤Ÿçš„cpuå‘¨æœŸè¾¾åˆ°å¯¹æœåŠ¡çš„é‡å¤è¦æ±‚ã€‚</p><img src="/sg/2021/11/04/6.004-vm/sc7.png" class title="sc7"><p>calculations of recurring interrupts</p><ul><li><p>how much load each periodic request places on the system?</p><ul><li>Service time * max frequency = Load%</li><li>User-mode share</li></ul></li><li><p>whether have enough CPU cycles to meet each of the deadlines?</p><ul><li>example: for disk: 500/800=67.5% of the cycles to service the disk in the time between the disk request and disk deadline.</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> computer architecture </category>
          
          <category> 6.004 computation structures </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SC programming</title>
      <link href="/sg/2021/11/04/SC_programming/"/>
      <url>/sg/2021/11/04/SC_programming/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#r19-programming-with-adts">R19: programming with ADTs</a></li></ul><!-- tocstop --></div><h2><span id="r19-programming-with-adts">R19: programming with ADTs</span><a href="#r19-programming-with-adts" class="header-anchor">Â¶</a></h2><p>Recipes: Test-first programming approach -&gt; writing an ADT -&gt; writing a program with ADTs</p><p>åŒºåˆ«åœ¨äºtest-firstå’ŒADTéƒ½æ˜¯ä»è§„èŒƒå‡ºå‘ï¼Œç„¶åæµ‹è¯•ï¼Œç„¶åå…·ä½“å®ç°ï¼Œå¯èƒ½ä¼šæ”¹å˜å®ç°çš„æ–¹å¼æ ¹æ®ä¸åŒçš„è§„èŒƒã€‚è€Œåœ¨ç¼–ç¨‹æ—¶éœ€è¦æˆ‘ä»¬æ ¹æ®å®é™…æƒ…å†µé€‰ç”¨æ•°æ®ç±»å‹ï¼Œé€‰ç”¨æˆ‘ä»¬éœ€è¦å®ç°çš„å¤§æ¦‚æ­¥éª¤ä»¥å¾—åˆ°æƒ³è¦çš„æ•°æ®ã€‚ç„¶åæ‰è¿›è¡Œå’Œæµ‹è¯•å…ˆè¡Œç¼–ç¨‹æ–¹æ³•ä¸€æ ·çš„æ­¥éª¤ã€‚</p><blockquote><ol><li><strong>Choose datatypes.</strong> Decide which ones will be mutable and which immutable.</li><li><strong>Choose static methods.</strong> Write your top-level <code>main</code> method and break it down into smaller steps.</li><li><strong>Spec.</strong> Spec out the ADTs and methods. Keep the ADT operations simple and few at first. Only add complex operations as you need them.</li><li><strong>Test.</strong> Write test cases for each unit (ADT or method).</li><li><strong>Implement simply first.</strong> Choose simple, brute-force representations. The point here is to put pressure on the specs and the tests, and try to pull your whole program together as soon as possible. Make the whole program work correctly first. Skip the advanced features for now. Skip performance optimization. Skip corner cases. Keep a to-do list of what you have to revisit.</li><li><strong>Iterate</strong>. Now that itâ€™s all working, make it work better. Reimplement, optimize, redesign if necessary.</li></ol></blockquote><p>case study: matrix multiplication</p><p>Ideas including static typing, testing, spec, immutability, and interfaces.</p>]]></content>
      
      
      <categories>
          
          <category> software engineering </category>
          
          <category> 6.031 software construction </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SC test&amp;debug</title>
      <link href="/sg/2021/10/29/SC_test-debug/"/>
      <url>/sg/2021/10/29/SC_test-debug/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#r3-ce-shi">R3 æµ‹è¯•</a><ul><li><a href="#ce-shi-hen-nan">æµ‹è¯•å¾ˆéš¾ğŸ‘€</a></li><li><a href="#ce-shi-you-xian-bian-cheng">æµ‹è¯•ä¼˜å…ˆç¼–ç¨‹</a></li><li><a href="#xi-tong-shi-bian-cheng">ç³»ç»Ÿå¼ç¼–ç¨‹</a></li><li><a href="#ce-shi-fang-fa">æµ‹è¯•æ–¹æ³•</a></li><li><a href="#zong-jie">æ€»ç»“</a></li></ul></li><li><a href="#r9-bi-mian-diao-shi">R9: é¿å…è°ƒè¯•</a><ul><li><a href="#sheng-ming">å£°æ˜</a></li></ul></li><li><a href="#r13-debugging">R13: debugging</a><ul><li><a href="#fu-xian-wen-ti">å¤ç°é—®é¢˜</a></li><li><a href="#ke-xue-shi-yan-fa-xun-zhao-wen-ti">ç§‘å­¦å®éªŒæ³•å¯»æ‰¾é—®é¢˜</a></li><li><a href="#1-yan-jiu-shu-ju">1.ç ”ç©¶æ•°æ®</a></li><li><a href="#2-ti-chu-jia-she">2.æå‡ºå‡è®¾</a></li><li><a href="#3-shi-yan">3.å®éªŒ</a></li><li><a href="#4-chong-fu">4.é‡å¤</a></li><li><a href="#xiu-fu-wen-ti">ä¿®å¤é—®é¢˜</a></li><li><a href="#tips">Tips</a></li><li><a href="#zong-jie-1">æ€»ç»“</a></li></ul></li></ul><!-- tocstop --></div><p>everything is hard.</p><h2><span id="r3-ce-shi">R3 æµ‹è¯•</span><a href="#r3-ce-shi" class="header-anchor">Â¶</a></h2><p>Goal: systematic testing</p><p>éªŒè¯åŒ…æ‹¬ï¼š</p><ul><li>formal reasoning:verification caonstructs a formal proof that a program is correct.</li><li>code review: have others read your code</li><li>Testing</li></ul><h3><span id="ce-shi-hen-nan">æµ‹è¯•å¾ˆéš¾ğŸ‘€</span><a href="#ce-shi-hen-nan" class="header-anchor">Â¶</a></h3><ul><li>æš´åŠ›æµ‹è¯•å¾ˆéš¾è¿›è¡Œ</li><li>haphazard testing(just try it and see if it works)å¦‚æœç¨‹åºçš„é”™è¯¯ä¸æ˜æ˜¾å¾ˆéš¾è¢«éšæ„é€‰æ‹©çš„æµ‹è¯•ä¾‹å­å‘ç°ï¼Œè€Œå‡å¦‚é‚£ä¹ˆæ˜æ˜¾ç¨‹åºä¸­åªä¼šå«æœ‰æ›´å¤šé”™è¯¯<ul><li>æˆ‘ä¸€èˆ¬å°±æ˜¯è¿™ç§ï¼Ÿæ‰€ä»¥æ ¹æœ¬ä¸ä¼šå†™æµ‹è¯•</li></ul></li><li>Random or statistical testingï¼šè½¯ä»¶æµ‹è¯•åœ¨å¯èƒ½çš„è¾“å…¥é¡¹ä¸­æ˜¯ä¸è¿ç»­å’Œç¦»æ•£çš„ã€‚</li></ul><h3><span id="ce-shi-you-xian-bian-cheng">æµ‹è¯•ä¼˜å…ˆç¼–ç¨‹</span><a href="#ce-shi-you-xian-bian-cheng" class="header-anchor">Â¶</a></h3><ul><li>terms: module, spec, implementation, test case, test suite</li><li>Steps<ul><li>Spec: types of parameters and constraints, type of return value and how return value relates to the inputs</li><li>Test: write tests that exercise the spec</li><li>Implement: write the implementation</li></ul></li><li>å…ˆå†™æµ‹è¯•ã€‚æ‹–åˆ°æœ€åæµ‹è¯•æ‰¾bugä¼šå¾ˆç—›è‹¦ğŸ˜–</li></ul><h3><span id="xi-tong-shi-bian-cheng">ç³»ç»Ÿå¼ç¼–ç¨‹</span><a href="#xi-tong-shi-bian-cheng" class="header-anchor">Â¶</a></h3><p>Goal</p><ul><li>correct: å½“è¿è¡Œæ—¶é€šè¿‡æ‰€æœ‰æµ‹è¯•</li><li>thoroughï¼šæœ‰æ¼æ´æ—¶æŠ¥é”™</li><li>Small</li></ul><h4><span id="gt-fen-qu-xuan-ze-ce-shi-yang-li">&gt; åˆ†åŒºé€‰æ‹©æµ‹è¯•æ ·ä¾‹</span><a href="#gt-fen-qu-xuan-ze-ce-shi-yang-li" class="header-anchor">Â¶</a></h4><ul><li><p>divide the input space into subdomains, which form a partition</p></li><li><p>Include boundaries in the partition</p><ul><li>Bugs happen at boundaries<ul><li>0, empty, null</li><li>Maximum and minimum</li><li>Emptiness for collection types</li><li>first and last element of a sequence</li></ul></li><li>why bugs happen at boundaries?<ul><li>Off-by-one mistake</li><li>Special case</li><li>places of discontinuity in the codeâ€™s behavior</li></ul></li></ul></li><li><p>Use multiple partitions</p><ul><li>å¦‚ä½•åˆ’åˆ†space of input<ul><li>Cartesian-product</li><li>ç‹¬ç«‹åœ°çœ‹ï¼Œç„¶åå†è€ƒè™‘äº¤äº’äº§ç”Ÿçš„æ•ˆæœ</li><li>Smaller test suit as possible to cover the input space</li></ul></li></ul></li></ul><h4><span id="gt-zi-dong-hua-dan-yuan-ce-shi-junit">&gt; è‡ªåŠ¨åŒ–å•å…ƒæµ‹è¯•: JUnit</span><a href="#gt-zi-dong-hua-dan-yuan-ce-shi-junit" class="header-anchor">Â¶</a></h4><ul><li><p>Unit test: tests for every individual module</p></li><li><p>all JUnit assertions that compare values: expected first, actual second</p></li><li><p>Every assertion method accepts an optional message argument which will show when error happens</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">assertTrue(..., <span class="string">&quot;...&quot;</span>);</span><br></pre></td></tr></table></figure></li></ul><h4><span id="gt-ji-lu-ce-shi-fang-an">&gt; è®°å½•æµ‹è¯•æ–¹æ¡ˆ</span><a href="#gt-ji-lu-ce-shi-fang-an" class="header-anchor">Â¶</a></h4><ul><li>document the partitions and subdomains at the top of test class</li><li>For each test case: comment which subdomains it covers</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Multiply</span> &#123;</span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">   * Testing strategy</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * cover the cartesian product of these partitions:</span></span><br><span class="line"><span class="comment">   *   partition on a: positive, negative, 0</span></span><br><span class="line"><span class="comment">   *   partition on b: positive, negative, 0</span></span><br><span class="line"><span class="comment">   *   partition on a: 1, !=1</span></span><br><span class="line"><span class="comment">   *   partition on b: 1, !=1</span></span><br><span class="line"><span class="comment">   *   partition on a: small (fits in a long value), or large (doesn&#x27;t fit)</span></span><br><span class="line"><span class="comment">   *   partition on b: small, large</span></span><br><span class="line"><span class="comment">   * </span></span><br><span class="line"><span class="comment">   * cover the subdomains of these partitions:</span></span><br><span class="line"><span class="comment">   *   partition on signs of a and b:</span></span><br><span class="line"><span class="comment">   *      both positive</span></span><br><span class="line"><span class="comment">   *      both negative</span></span><br><span class="line"><span class="comment">   *      different signs</span></span><br><span class="line"><span class="comment">   *      one or both are 0</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">    <span class="comment">// covers a is positive, b is negative, </span></span><br><span class="line">  <span class="comment">//        a fits in long value, b fits in long value,</span></span><br><span class="line">  <span class="comment">//        a and b have different signs</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDifferentSigns</span><span class="params">()</span> &#123;</span><br><span class="line">      assertEquals(BigInteger.valueOf(-<span class="number">146</span>), BigInteger.valueOf(<span class="number">73</span>).multiply(BigInteger.valueOf(-<span class="number">2</span>)));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// covers a = 1, b != 1, a and b have same sign</span></span><br><span class="line">  <span class="meta">@Test</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testIdentity</span><span class="params">()</span> &#123;</span><br><span class="line">      assertEquals(BigInteger.valueOf(<span class="number">33</span>), BigInteger.valueOf(<span class="number">1</span>).multiply(BigInteger.valueOf(<span class="number">33</span>)));</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h3><span id="ce-shi-fang-fa">æµ‹è¯•æ–¹æ³•</span><a href="#ce-shi-fang-fa" class="header-anchor">Â¶</a></h3><h4><span id="gt-bo-li-xiang-he-hei-xiang-ce-shi">&gt; ç»ç’ƒç®±å’Œé»‘ç®±æµ‹è¯•</span><a href="#gt-bo-li-xiang-he-hei-xiang-ce-shi" class="header-anchor">Â¶</a></h4><ul><li><p>Goal: full test cases</p></li><li><p>Difference:</p><ul><li>black box testing means choosing test cases only from the specification</li><li>Glass box chooses test cases from the implementation of the function</li></ul></li></ul><h4><span id="gt-fu-gai-du">&gt; è¦†ç›–åº¦</span><a href="#gt-fu-gai-du" class="header-anchor">Â¶</a></h4><ul><li>statement coverage: every statement<ul><li>Coverage tool: counts the number of times each statement is run by your test suite</li></ul></li><li>Branch coverage: if/while/â€¦, both the true and false direction</li><li>path coverage:combinations of branches</li></ul><h4><span id="gt-dan-yuan-he-ji-cheng-ce-shi">&gt; å•å…ƒå’Œé›†æˆæµ‹è¯•</span><a href="#gt-dan-yuan-he-ji-cheng-ce-shi" class="header-anchor">Â¶</a></h4><ul><li>Unit test a single module in isolation</li><li>integration test tests a combination of modules</li><li>Isolating a higher-level module is hard<ul><li>write stub versions of the modules that it calls: mock object</li></ul></li></ul><h4><span id="gt-zi-dong-hua-hui-gui-ce-shi">&gt; è‡ªåŠ¨åŒ–å›å½’æµ‹è¯•</span><a href="#gt-zi-dong-hua-hui-gui-ce-shi" class="header-anchor">Â¶</a></h4><ul><li><p>Regression test: test new changes to the code against existing test cases</p><ul><li>new changes: fix bugs, add new features, optimization</li><li>a test is good if it elicits a bug</li><li>save regression tests: avoid reintroducing the bug</li><li>Test-first debugging</li></ul></li><li><p>automated test: running the tests and checking the results automatically</p><ul><li>Test driver</li><li>using junits</li></ul></li><li><p>Automate regeression test: use in combination</p></li></ul><h3><span id="zong-jie">æ€»ç»“</span><a href="#zong-jie" class="header-anchor">Â¶</a></h3><p>è¿­ä»£å¼æµ‹è¯•ä¼˜å…ˆç¼–ç¨‹ï¼š</p><ol><li>Practice</li></ol><ul><li>Write spec</li><li>write test that exercise the spec. As u find problems, iterate on the spec and the tests</li><li>Write an implementation. As u find problems, iterate on the spec, the tests, and the implementation</li></ul><ol start="2"><li>writing tests to understand the spec and fix specs</li><li>Plan for iteration</li></ol><ul><li>large spec:  å…ˆå†™ä¸€éƒ¨åˆ†specï¼Œç„¶åå†™æµ‹è¯•å’Œå®ç°é‚£ä¸€éƒ¨åˆ†ï¼Œè¿­ä»£æ­¤æ­¥éª¤</li><li>Complex test suite: é€‰æ‹©å°‘éƒ¨åˆ†é‡è¦çš„å†™ä¸€ä¸ªå°çš„æµ‹è¯•é›†ï¼Œå†å†™ä¸€ä¸ªç®€å•çš„å®ç°é€šè¿‡æµ‹è¯•ï¼Œè¿­ä»£</li><li>tricky implementationï¼š å…ˆæš´åŠ›å†™ä¸ªè§£æ³•é€šè¿‡æµ‹è¯•ä»¥ç¡®å®šçœŸçš„ç†è§£äº†specå’Œæµ‹è¯•ã€‚then move on to the harder implementation.</li></ul><h2><span id="r9-bi-mian-diao-shi">R9: é¿å…è°ƒè¯•</span><a href="#r9-bi-mian-diao-shi" class="header-anchor">Â¶</a></h2><p>first defense: make bugs impossible</p><ul><li>by immutability</li><li>static checking.</li></ul><p>second defense:localize bugs</p><ul><li><p>by <strong>defensive programming</strong> such as throwing exception when checking preconditions</p></li><li><p>By incremental development</p><p>ä¸€ç‚¹ç‚¹å†™ï¼Œå†™ä¸€ç‚¹æµ‹è¯•ä¸€ç‚¹ï¼ˆå•å…ƒæµ‹è¯•å’Œå›å½’æµ‹è¯•ï¼‰</p></li><li><p>By modularity</p><blockquote><p><strong>Modularity</strong> means dividing up a system into components, or modules, each of which can be designed, implemented, tested, reasoned about, and reused separately from the rest of the system.</p></blockquote></li><li><p>encapsulation</p><blockquote><p><strong>Encapsulation</strong> means building walls around a module so that the module is responsible for its own internal behavior, and bugs in other parts of the system canâ€™t damage its integrity.</p></blockquote><ul><li><p>Access control: use â€œpublic, private, protectâ€ to control the visibility and accessibility of the variables and methods.</p></li><li><p>variable scope: minimize the scope of variables</p><ul><li><p>Always declare a loop variable in the for-loop initializer.</p><blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> i;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">100</span>; ++i) &#123;</span><br></pre></td></tr></table></figure><p>Better:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100</span>; ++i) &#123;</span><br></pre></td></tr></table></figure></blockquote></li><li><p>Declare a variable only when you first need it, and in the innermost curly-brace block that you can.</p></li><li><p>Avoid global variables.</p></li></ul></li></ul></li></ul><h3><span id="sheng-ming">å£°æ˜</span><a href="#sheng-ming" class="header-anchor">Â¶</a></h3><blockquote><p>java tips:<strong>A serious problem with Java assertions is that assertions are off by default.</strong></p><p>ç”±äºassertionéœ€è¦é¢å¤–çš„æ—¶é—´æ¶ˆè€—æ£€è§†æ•°æ®ï¼Œæ‰€ä»¥åœ¨è¿è¡Œæ—¶å…³æ‰ä½†åœ¨æµ‹è¯•æ—¶æœ€å¥½æ‰“å¼€ä»¥å®šä½å¯èƒ½çš„ç¨‹åºè®¾è®¡é”™è¯¯ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAssertionsEnabled</span><span class="params">()</span> &#123;</span><br><span class="line">    assertThrows(AssertionError.class, () -&gt; &#123; <span class="keyword">assert</span> <span class="literal">false</span>; &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote><p>what to assert?</p><ul><li>Method argument requirements: like preconditions</li><li>method return value requirements: postconditions</li></ul><p>when to assert?</p><ul><li>As you write the code, you can still remember the invariants of the program.</li></ul><p>what not to assert?</p><ul><li><p>external conditions</p><blockquote><p>å¤–ç•Œæ¡ä»¶æ¯”å¦‚æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œç½‘ç»œå¯ç”¨æ€§ï¼Œè¾“å…¥æ•°æ®çš„æ­£ç¡®æ€§ã€‚assertionåº”è¯¥è€ƒè™‘çš„æ˜¯ç¨‹åºæ˜¯å¦èƒ½ç¬¦åˆspecçš„è§„èŒƒã€‚</p><p>When an assertion fails, it indicates that the program has run off the rails in some sense, into a state in which it was not designed to function properly.</p></blockquote></li><li><p>Expression whether is executed</p></li><li><p>conditional statements cover all the possible cases: instead, throw an exception in the illegal cases when checking</p></li></ul><h2><span id="r13-debugging">R13: debugging</span><a href="#r13-debugging" class="header-anchor">Â¶</a></h2><p>learn the systematic debugging techniques.</p><h3><span id="fu-xian-wen-ti">å¤ç°é—®é¢˜</span><a href="#fu-xian-wen-ti" class="header-anchor">Â¶</a></h3><p>Have a test case for the bug, and make this test work.</p><blockquote><p>First work on <u>reducing the size of the buggy input</u> to something manageable that still exhibits the same (or very similar) bug.</p></blockquote><h3><span id="ke-xue-shi-yan-fa-xun-zhao-wen-ti">ç§‘å­¦å®éªŒæ³•å¯»æ‰¾é—®é¢˜</span><a href="#ke-xue-shi-yan-fa-xun-zhao-wen-ti" class="header-anchor">Â¶</a></h3><p>Problem: where is the bug?</p><p>scientific methods:</p><h3><span id="1-yan-jiu-shu-ju">1.ç ”ç©¶æ•°æ®</span><a href="#1-yan-jiu-shu-ju" class="header-anchor">Â¶</a></h3><p>æŸ¥çœ‹æµ‹è¯•è¾“å…¥å¯¼è‡´çš„é—®é¢˜ï¼Œæ£€æŸ¥é”™è¯¯ç»“æœï¼Œå¤±è´¥å£°æ˜ï¼Œå’Œstack traces</p><h3><span id="2-ti-chu-jia-she">2.æå‡ºå‡è®¾</span><a href="#2-ti-chu-jia-she" class="header-anchor">Â¶</a></h3><p>think about your program as a flow of data, or steps in an algorithm, and try to rule out whole sections of the program at once. Binary search can help minimize the search space.</p><ul><li><p>Slicing:æ‰¾åˆ°äº§ç”Ÿå‡ºä¸€ä¸ªç‰¹å®šå€¼çš„æ‰€æœ‰è®¡ç®—éƒ¨åˆ†ã€‚</p><p>å¦‚æœè¯¥è®¡ç®—é”™è¯¯åˆ™é—®é¢˜å‡ºç°åœ¨è¿™ä¸€éƒ¨åˆ†çš„æŸä¸€æ­¥éª¤ï¼Œé‚£ä¹ˆä»é”™è¯¯çš„ç»“æœå‡ºå‘å›æº¯ä»£ç ä¸­æ¶‰åŠåˆ°çš„æ‰€æœ‰éƒ¨åˆ†ã€‚æœ‰åˆ©çš„è®¾è®¡é€‰æ‹©æœ‰åŠ©äºå¸®åŠ©ç¼©å°æ£€ç´¢èŒƒå›´ã€‚æ¯”å¦‚ï¼šimmutability,è¿™æç¤ºæˆ‘ä»¬è¿™ä¸€å˜é‡æ˜¯å¦ä¼šå—ä»£ç çš„å…¶ä»–éƒ¨åˆ†å½±å“ï¼Œä¸è¿‡åº”è¯¥æ³¨æ„finalä¿®é¥°çš„é™å®šå˜é‡çš„ä¸åŒï¼ˆfinal int bonus vs. final Sale s, å°½ç®¡sä¸ä¼šé‡æ–°èµ‹å€¼ï¼Œä½†Saleä»å¯èƒ½ä¼šæ”¹å˜ä»è€Œå½±å“s)ï¼›scope minimization, æ¯”å¦‚local variableå’Œglobal variableã€‚</p><blockquote><p>With instance variables, the slicing search might have to expand to include the entire class. For a global variable (gasp), the search expands to include the entire program.</p></blockquote></li><li><p>Delta debugging: it uncovers two closely-related test cases that bracket the bug, in the sense that one succeeds and one fails.One hypothesis is that the bug lies in those lines of code, the <em>delta</em> between the passing run and the failing run.</p><p>åˆ©ç”¨ç‰ˆæœ¬æ§åˆ¶æ¥æ¯”è¾ƒä¸¤ç§æƒ…å†µï¼ˆAæˆåŠŸï¼ŒBå¤±è´¥ï¼›Aå¤±è´¥ï¼ŒBæˆåŠŸï¼‰ä¸‹ä»£ç çš„æ”¹å˜æƒ…å†µï¼ŒçŸ¥é“æ‰¾åˆ°å¯¼è‡´å‡ºé”™çš„é—®é¢˜ã€‚</p></li><li><p>prioritize hypotheses: trust lower levels code until youâ€™ve found good reason not to. Like: java compiler and runtime, os, hardware&gt;well-tested code &gt; your code.</p><p>æ¯”å¦‚åœ¨db pj0 autograderå¯¼è‡´çš„ä¸€ç³»åˆ—é—®é¢˜ï¼Œå®é™…ä¸Šæ˜¯å¯¹smart pointerçš„éƒ¨åˆ†ä½¿ç”¨ä¸ç†Ÿã€‚</p></li></ul><h3><span id="3-shi-yan">3.å®éªŒ</span><a href="#3-shi-yan" class="header-anchor">Â¶</a></h3><p>Make a prediction and test it. The best experiment is a probe.</p><ul><li><p>print debugging</p><ul><li><p>print statement: write good debugging print statement to keep track of code</p><p>éœ€è¦æ³¨æ„åœ¨æµ‹è¯•å®Œæˆåé™¤å»print statement</p></li><li><p>Logging</p><p>èƒ½å¤Ÿä»å…¨å±€ç”¨å˜é‡æ§åˆ¶æ˜¯å¦å¯ç”¨logging</p><blockquote><p>A logging framework like <a href="https://logging.apache.org/log4j/">Log4j</a> can also direct the logging to a file or to a server across the network, can log structured data as well as human-readable strings, and can be used in deployment, not just development.</p></blockquote></li></ul></li><li><p>assertion</p><p>å¥½å¤„æ˜¯ä¸ç”¨æ‰‹åŠ¨æ£€æŸ¥å˜é‡ï¼Œåªç”¨è®¾ç½®æ¡ä»¶ã€‚</p></li><li><p>breakpoint with a debugger like gdb</p></li></ul><p>å¯¹ä¸€äº›æ–¹æ³•çš„åˆ†æï¼š</p><ul><li><p>Swap components: donâ€™t do it unless you have good reasons</p><blockquote><p>If you hypothesize that the bug is in a module, a different implementation of it that satisfies the same interface, then one experiment you can do is to try swapping in the alternative.</p><ul><li>If you suspect your <code>binarySearch()</code> implementation, then substitute a simpler <code>linearSearch()</code> instead.</li><li>If you suspect <code>java.util.ArrayList</code>, swap in <code>java.util.LinkedList</code> instead.</li></ul></blockquote></li><li><p>one bug at a time</p><ul><li><p>keep a bug list</p></li><li><p>Donâ€™t get distracted from the bug youâ€™re working on.Keep your code changes focused on careful,controlled probes of one bug at a time.</p><p>a bug can be reproduce another bug and get into recursive debugging process which is bad cause you donâ€™t know how those changes might affect your debugging experiments.</p><blockquote><p>because you may have a hard time popping your mental stack to return to the original bug. And donâ€™t edit your code arbitrarily while you are debugging, because you donâ€™t know whether those changes might affect your debugging experiments.</p></blockquote></li></ul></li><li><p>donâ€™t fix yet: mere probe &gt; fix the hypothesized bug</p><p>fix the real problem.</p><p>ä½ å¯èƒ½åªæ˜¯æ©ç›–äº†é”™è¯¯è€Œä¸æ˜¯æ‰¾åˆ°äº†çœŸæ­£çš„é—®é¢˜æ‰€åœ¨ã€‚æˆ‘è§‰å¾—æˆ‘åœ¨db pj1é‡åˆ°çš„å°±æ˜¯è¿™æ ·ã€‚</p></li></ul><h3><span id="4-chong-fu">4.é‡å¤</span><a href="#4-chong-fu" class="header-anchor">Â¶</a></h3><p>é‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œå¦‚æœå‡è®¾æ­£ç¡®ç¼©å°äº§ç”Ÿé”™è¯¯çš„å¯èƒ½åŒºåŸŸï¼Œå‡è®¾é”™è¯¯ä¿®æ”¹å‡è®¾ä»¥é€‚åº”è§‚å¯Ÿã€‚</p><ul><li><p>When to apply this method? 10-minute rule. ååˆ†é’Ÿè‚‰çœ¼è°ƒè¯•è°ƒä¸å‡ºæ¥å°±ç”¨</p></li><li><p>Taking note during this process:</p></li></ul><blockquote><ul><li><em>Hypothesis.</em> Based on what youâ€™ve learned so far, whatâ€™s your next hypothesis about the location or cause of the bug?</li><li><em>Experiment.</em> What are you about to try that will shed light on the hypothesis, by verifying or falsifying it?</li><li><em>Predictions.</em> What do you expect, based on your hypothesis, to be the result of the experiment?</li><li><em>Observations.</em> What actually happened when you did the experiment?</li></ul></blockquote><h3><span id="xiu-fu-wen-ti">ä¿®å¤é—®é¢˜</span><a href="#xiu-fu-wen-ti" class="header-anchor">Â¶</a></h3><p>ç›´åˆ°ä½ æ‰¾åˆ°é—®é¢˜å¹¶ç†è§£å¯¼è‡´åŸå› æ—¶ï¼Œå†ä¿®æ”¹ä»£ç ã€‚</p><p>å…ˆé—®é—®é¢˜æ˜¯å“ªç§ç±»å‹çš„ï¼š</p><ul><li>coding error<ul><li>Misspelled variable/interchanged method parameters</li></ul></li><li>design error -&gt; step back and revisit your design<ul><li>Underspecified or insufficient interface</li></ul></li></ul><p>Methodï¼š</p><ul><li><p>Look for related bugs, and newly-created ones.</p></li><li><p>Undo debugging probes.</p></li><li><p>Make a regression test</p><blockquote><p>make sure that :</p><p>(a) the bug is fixed</p><p>(b)no new bugs have been introduced</p></blockquote></li></ul><h3><span id="tips">Tips</span><a href="#tips" class="header-anchor">Â¶</a></h3><ul><li><p>Keep an audit trail: å½“è¿›è¡Œäº†å¾ˆå¤šæ¬¡ç§‘å­¦å®éªŒçš„å¾ªç¯ï¼ˆè‚‰çœ¼è°ƒè¯•ï¼‰æ‰¾bug</p><p>keep a log in a text file of what you dit, in what order, and what happened as a result.</p><blockquote><ul><li>the hypothesis you are exploring now</li><li>the experiment you are trying now to test that hypothesis</li><li>what you observe as a result of the experiment:<ul><li>whether the test passed or failed this time</li><li>the program output, especially your own debugging messages</li><li>any stack traces</li></ul></li></ul></blockquote></li><li><p>check the plug</p><p>å½“åå¤è¿­ä»£æ‰¾é—®é¢˜ä»ç„¶ä¸å¯è§£æ—¶ï¼Œå¯ä»¥æ€€ç–‘æ˜¯ä¸æ˜¯assumptionï¼ˆå¤–ç½®æ¡ä»¶ï¼‰é”™äº†ã€‚å°±åƒç”µè„‘æ— æ³•å¯åŠ¨æ€€ç–‘æ’å¤´æ²¡æ’ç”µæºæ²¡å¼€æ²¡ç”µäº†è€Œä¸æ˜¯æ€€ç–‘æœºå™¨æˆ–è€…å¼€å…³åäº†ã€‚æ¯”å¦‚dbçš„autograderåªæ”¯æŒå½“å¹´çš„projectï¼ˆå‡½æ•°åæ­£ç¡®ï¼‰ã€‚</p><ul><li>Make sure your source code and object code are up to date.</li></ul></li><li><p>if YOU didnâ€™t fix it, it isnâ€™t really fixed</p><p>å½“ä½ å¹¶æ²¡æœ‰æ˜ç™½é—®é¢˜ä¸ºä»€ä¹ˆæ¶ˆå¤±æ—¶ï¼Œé—®é¢˜å¹¶æ²¡æœ‰çœŸæ­£è§£å†³è€Œåªæ˜¯æš‚æ—¶è—äº†èµ·æ¥ã€‚å°¤å…¶åœ¨å¹¶è¡Œç¼–ç¨‹å‡ºç°é—®é¢˜çš„æ—¶å€™ã€‚</p><p>å› æ­¤ç³»ç»Ÿçš„è°ƒè¯•å¸®åŠ©æˆ‘ä»¬ç†è§£ä¸ºä»€ä¹ˆé—®é¢˜è¢«è§£å†³è€Œä¸æ˜¯æš‚æ—¶éšè—é—®é¢˜ã€‚è¿™å°±æ˜¯æœ€åˆè¦å…ˆè®©é—®é¢˜æ˜¾ç°çš„åŸå› ï¼Œä½ å¿…é¡»åœ¨é—®é¢˜ä»æ²¡è¢«è§£å†³æ˜¯å‘ç°å¯¼è‡´é—®é¢˜çš„åŸå› ï¼ŒçŸ¥é“ä½ çœŸæ­£ç†è§£è‡ªå·±åœ¨åšä»€ä¹ˆã€‚</p><blockquote><p>you want to see that your change caused the system to transition from failing to working, and understand why.</p></blockquote></li><li><p>Get a fresh view</p><p>å°é»„é¸­æµ‹è¯•æ³•ã€‚è§£é‡Šä¸ºä»€ä¹ˆä½ çš„ä»£ç å¯ä»¥è¿è¡Œï¼Œå®ƒåœ¨åšä»€ä¹ˆã€‚</p><p>å°é»„é¸­-&gt;çŸ¥é“ä½ åœ¨åšä»€ä¹ˆçš„åŒäº‹-&gt;staff/mentor</p><ul><li>Minimizing your bug will help you make a minimal,reproducible example to throw at stackoverflow.</li></ul></li><li><p>Sleep on it. Trade latency for efficiency</p></li></ul><h3><span id="zong-jie">æ€»ç»“</span><a href="#zong-jie" class="header-anchor">Â¶</a></h3><blockquote><p>In this reading, we looked at how to debug systematically:</p><ul><li>reproduce the bug as a test case, and put it in your regression suite</li><li>find the bug using the scientific method:<ul><li>generate hypotheses using slicing, binary search, and delta debugging</li><li>use minimially-invasive probes, like print statements, assertions, or a debugger, to observe program behavior and test the prediction of your hypotheses</li></ul></li><li>fix the bug thoughtfully</li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> software engineering </category>
          
          <category> 6.031 software construction </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SC concurrency</title>
      <link href="/sg/2021/10/20/SC_concurrency/"/>
      <url>/sg/2021/10/20/SC_concurrency/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#r20-concurrency">R20: concurrency</a><ul><li><a href="#two-models-for-concurrent-programming">two models for concurrent programming</a></li><li><a href="#basic-concepts">basic concepts</a></li><li><a href="#starting-a-thread-with-an-anonymous-class">starting a thread with an anonymous class</a></li><li><a href="#shared-memory-example">Shared memory example</a></li><li><a href="#message-passing-example">Message passing example</a></li><li><a href="#concurrency-is-hard-to-debug">concurrency is hard to debug</a></li></ul></li><li><a href="#r21-22-thread-safety">R21&amp;22: thread safety</a><ul><li><a href="#what-is-threadsafe">what is threadsafe?</a></li><li><a href="#how-to-make-a-safety-argument">how to make a safety argument?</a></li><li><a href="#strategy1-confinement">Strategy1: confinement</a></li><li><a href="#strategy2-immutability">Strategy2: immutability</a></li><li><a href="#strategy3-using-threadsafe-data-types">Strategy3:using threadsafe data types</a></li><li><a href="#strategy4-synchronization">Strategy4: synchronization</a></li></ul></li><li><a href="#r23-queues-message-passing">R23: queues &amp; message-passing</a><ul><li><a href="#producer-consumer-design-pattern">producer-consumer design pattern</a></li><li><a href="#race-conditions">race conditions</a></li></ul></li><li><a href="#r24-sockets-networking">R24: sockets &amp; networking</a><ul><li><a href="#client-server-design-pattern">Client/server design pattern</a></li><li><a href="#sockets-and-streams">sockets and streams</a></li><li><a href="#using-network-sockets-in-java">Using network sockets in Java</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="r20-concurrency">R20: concurrency</span><a href="#r20-concurrency" class="header-anchor">Â¶</a></h2><p>Concurrency is handling tasks in the overlapping period (multitask on a single-core computer) while parallelism is when tasks run at the same time (multi-processor)<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>.</p><h3><span id="two-models-for-concurrent-programming">two models for concurrent programming</span><a href="#two-models-for-concurrent-programming" class="header-anchor">Â¶</a></h3><ol><li>message passing: modules share the same memory space</li><li>shared memory: modules communicate through a communication channel</li></ol><h3><span id="basic-concepts">basic concepts</span><a href="#basic-concepts" class="header-anchor">Â¶</a></h3><p><strong>Process</strong></p><blockquote><p>A process is an instance of a running program that is <em>isolated</em> from other processes on the same machine. In particular, it has its own private section of the machineâ€™s memory.</p></blockquote><ul><li>The process abstraction is a <em>virtual computer</em>.</li></ul><p><strong>Thread</strong></p><blockquote><p>A thread is a locus of control inside a running program. Think of it as a place in the program that is being run, plus the stack of method calls that led to that place (so the thread can go back up the stack when it reaches <code>return</code> statements).</p></blockquote><ul><li>the thread abstraction represents a <em>virtual processor</em></li></ul><p><strong>Time slicing</strong></p><ul><li>the processor switches between threads when there are more threads than processors</li></ul><h3><span id="starting-a-thread-with-an-anonymous-class">starting a thread with an anonymous class</span><a href="#starting-a-thread-with-an-anonymous-class" class="header-anchor">Â¶</a></h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello from a thread!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).start();</span><br><span class="line"></span><br><span class="line"><span class="comment">//named class</span></span><br><span class="line"><span class="comment">/** A comparison function that imposes a total ordering on some objects.</span></span><br><span class="line"><span class="comment"> *  ... */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Comparator</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="comment">/** Compares its two arguments for order.</span></span><br><span class="line"><span class="comment">     *  ...</span></span><br><span class="line"><span class="comment">     *  <span class="doctag">@return</span> a negative integer, zero, or a positive integer if the first</span></span><br><span class="line"><span class="comment">     *          argument is less than, equal to, or greater than the second */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(T o1, T o2)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Orders Strings by length (shorter first) and then lexicographically. */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringLengthComparator</span> <span class="keyword">implements</span> <span class="title class_">Comparator</span>&lt;String&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span> <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String s1, String s2)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (s1.length() == s2.length()) &#123;</span><br><span class="line">            <span class="keyword">return</span> s1.compareTo(s2);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s1.length() - s2.length();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SortedSet&lt;String&gt; strings = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">strings.addAll(List.of(<span class="string">&quot;yolanda&quot;</span>, <span class="string">&quot;zach&quot;</span>, <span class="string">&quot;alice&quot;</span>, <span class="string">&quot;bob&quot;</span>));</span><br><span class="line"><span class="comment">// strings is &#123; &quot;alice&quot;, &quot;bob&quot;, &quot;yolanda&quot;, &quot;zach&quot; &#125;</span></span><br><span class="line">With a Comparator:</span><br><span class="line"></span><br><span class="line"><span class="comment">// uses StringLengthComparator declared above</span></span><br><span class="line">Comparator&lt;String&gt; compareByLength = <span class="keyword">new</span> <span class="title class_">StringLengthComparator</span>();</span><br><span class="line">SortedSet&lt;String&gt; strings = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;(compareByLength);</span><br><span class="line">strings.addAll(List.of(<span class="string">&quot;yolanda&quot;</span>, <span class="string">&quot;zach&quot;</span>, <span class="string">&quot;alice&quot;</span>, <span class="string">&quot;bob&quot;</span>));</span><br><span class="line"><span class="comment">// strings is &#123; &quot;bob&quot;, &quot;zach&quot;, &quot;alice&quot;, &quot;yolanda&quot; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// uses StringLengthComparator declared above</span></span><br><span class="line">SortedSet&lt;String&gt; strings = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">StringLengthComparator</span>());</span><br><span class="line">strings.addAll(List.of(<span class="string">&quot;yolanda&quot;</span>, <span class="string">&quot;zach&quot;</span>, <span class="string">&quot;alice&quot;</span>, <span class="string">&quot;bob&quot;</span>));</span><br><span class="line"><span class="comment">// strings is &#123; &quot;bob&quot;, &quot;zach&quot;, &quot;alice&quot;, &quot;yolanda&quot; &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// no StringLengthComparator class!</span></span><br><span class="line">SortedSet&lt;String&gt; strings = <span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;String&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span> <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(String s1, String s2)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (s1.length() == s2.length()) &#123;</span><br><span class="line">            <span class="keyword">return</span> s1.compareTo(s2);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s1.length() - s2.length();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">strings.addAll(List.of(<span class="string">&quot;yolanda&quot;</span>, <span class="string">&quot;zach&quot;</span>, <span class="string">&quot;alice&quot;</span>, <span class="string">&quot;bob&quot;</span>));</span><br><span class="line"><span class="comment">// strings is &#123; &quot;bob&quot;, &quot;zach&quot;, &quot;alice&quot;, &quot;yolanda&quot; &#125;</span></span><br></pre></td></tr></table></figure><p>advantage: one-off implementations</p><p>Disadvantage: a named class is good for needing more than once.</p><p>Never call run() on a thread, or on a runnable that you created for a thread, which uses the same thread.</p><p>Instead, make a new Thread() with an instance of your Runnable, and call start() on the thread to start it.</p><p>junit: test fails if an exception is thrown and not caught by the test code itself.</p><h3><span id="shared-memory-example">Shared memory example</span><a href="#shared-memory-example" class="header-anchor">Â¶</a></h3><p>Race condition: the correctness of the program depends on the relative timing of events in concurrent computations A and B. â€œA is in a race with B.â€</p><p>It canâ€™t be told what the atomic operations(the individual steps of the computation) will be.</p><p>System.exit(): main() may return while its threads are still running. Use exit to force the process to exit.</p><h3><span id="message-passing-example">Message passing example</span><a href="#message-passing-example" class="header-anchor">Â¶</a></h3><p>Interleaving of the messages sent to the bank account.</p><h3><span id="concurrency-is-hard-to-debug">concurrency is hard to debug</span><a href="#concurrency-is-hard-to-debug" class="header-anchor">Â¶</a></h3><p>é—®é¢˜å¯èƒ½å­˜åœ¨äºå¤šä¸ªç¨‹åºï¼Œosï¼Ÿç½‘ç»œï¼Ÿcpu?</p><p>é—®é¢˜å¾ˆéš¾å†ç°ï¼Œæƒ³æƒ³å§ï¼Œç›¸åŒçš„é—®é¢˜ä½ç½®ï¼Œå‡ºé”™çš„åœ°æ–¹ç¡®ä¸åŒæˆ–è€…ä¸ä¼šå‘ç”Ÿã€‚</p><p>å¹¶ä¸”print-debugå¤±æ•ˆï¼Œå› ä¸ºå®ƒä»¬ç›¸æ¯”äºè¿è¡Œçš„ç¨‹åºçš„æ“ä½œè¦æ…¢100å€ï½1000å€ã€‚å½“ä½¿ç”¨printæ—¶ï¼Œè¶³å¤Ÿçš„æ—¶é—´æ”¹å˜æ“ä½œçš„æ—¶é—´ã€‚</p><p>Nondeterministic behavior causation?</p><h2><span id="r21-amp-22-thread-safety">R21&amp;22: thread safety</span><a href="#r21-amp-22-thread-safety" class="header-anchor">Â¶</a></h2><h3><span id="what-is-threadsafe">what is threadsafe?</span><a href="#what-is-threadsafe" class="header-anchor">Â¶</a></h3><blockquote><p>if it behaves correctly when used from multiple threads, regardless of how those threads are executed, and without demanding additional coordination from the calling code.</p><ul><li>â€œBehaves correctlyâ€ means satisfying its specification and preserving its rep invariant.</li><li>â€œRegardless of how threads are executedâ€ means threads might be on multiple processors or timesliced on the same processor.</li><li>And â€œwithout additional coordinationâ€ means that the data type canâ€™t put preconditions on its caller related to timing, like â€œyou canâ€™t call <code>get()</code> while <code>set()</code> is in progress.â€</li></ul></blockquote><h3><span id="how-to-make-a-safety-argument">how to make a safety argument?</span><a href="#how-to-make-a-safety-argument" class="header-anchor">Â¶</a></h3><p>how to make code safe in concurrent programming?</p><p>Donâ€™t share data between threads (by confinement, immutability, threadsafe data types).</p><p>The difficult one is how to implement a threadsafe type.</p><h3><span id="strategy1-confinement">Strategy1: confinement</span><a href="#strategy1-confinement" class="header-anchor">Â¶</a></h3><p>idea: Avoid races on reassignable references and mutable data by keeping those confined to a single thread.</p><p>Shared mutable state is the root cause of a race condition.</p><p>donâ€™t use global variables: static variables are accessible to all threads therefore can be changed. While local variables are confined to single thread.</p><h3><span id="strategy2-immutability">Strategy2: immutability</span><a href="#strategy2-immutability" class="header-anchor">Â¶</a></h3><p>keep the data immutable and variables unreassignable.</p><blockquote><p>Threadsafe immutability:</p><ul><li>no mutator methods</li><li>all fields declared <code>private</code> and <code>final</code></li><li>no <a href="https://web.mit.edu/6.031/www/sp21/classes/11-abstraction-functions-rep-invariants/#invariants">representation exposure</a></li><li>no mutation whatsoever of mutable objects in the rep â€“ not even <a href="https://web.mit.edu/6.031/www/sp21/classes/11-abstraction-functions-rep-invariants/#beneficent_mutation">beneficent mutation</a></li></ul></blockquote><h3><span id="strategy3-using-threadsafe-data-types">Strategy3:using threadsafe data types</span><a href="#strategy3-using-threadsafe-data-types" class="header-anchor">Â¶</a></h3><p>Store shared data in existing threadsafe data types.</p><p>threadsafe collections:</p><p>wrapper methods that make collections threadsafe while still mutable</p><p>Notice:</p><ul><li>donâ€™t circumvent the wrapper</li><li>Iterators are still not threadsafe<ul><li>Solution: collectionsâ€™ lock</li></ul></li><li>Atomic operations arenâ€™t enough to prevent races</li></ul><h3><span id="strategy4-synchronization">Strategy4: synchronization</span><a href="#strategy4-synchronization" class="header-anchor">Â¶</a></h3><p><u>The correctness of a concurrrent program should not depend on accidents of timing.</u></p><p>Problem: bugs in concurrent programming</p><blockquote><p>steps to develop the datatype:</p><ol><li><p>Specify: define operations</p></li><li><p>test</p></li><li><p>rep</p><p>a. Implement a simple, brute-force rep first</p><p>b. write down the rep invariant and abstraction function, and implement checkRep()</p></li><li><p>Synchronize</p></li><li><p>Iterate</p></li></ol></blockquote><h2><span id="r23-queues-amp-message-passing">R23: queues &amp; message-passing</span><a href="#r23-queues-amp-message-passing" class="header-anchor">Â¶</a></h2><p>ä¸»è¦ç”¨javaè®²äº†ä¸ªqueue&amp;message-passingçš„ä¾‹å­ã€‚å†…å®¹ï¼š</p><ol><li>ä¸shared memory systemå¯¹æ¯”ï¼Œmessage-passingä½¿ä¸¤ä¸ªthreadé—´æœ‰ç‹¬ç«‹æ€§ï¼Œå‡ºé”™çš„æ¦‚ç‡æ›´å°ã€‚</li><li>blocking queues patternï¼Œå…¶å®å’Œ6.004ä¸­sophomoreçš„ä¾‹å­ç›¸ä¼¼ï¼ŒåŠ ä¸Šäº†ä¸€äº›javaè¯­æ³•çš„ç»†èŠ‚</li><li>å®ä¾‹ï¼š æ”¾åœ¨å†°ç®±é‡Œæœ‰ä¸€äº›é¥®æ–™ï¼Œä¸€äº›äººéœ€è¦æ‹¿é¥®æ–™ã€‚(ä»£ç åœ¨æœ¬åœ°æ–‡ä»¶å¤¹ä¸­)</li></ol><p>ç›¸å½“äº6.004çš„sychronizationå¦å¤–çš„ä¸€ä¸ªä¾‹å­ã€‚</p><h3><span id="producer-consumer-design-pattern">producer-consumer design pattern</span><a href="#producer-consumer-design-pattern" class="header-anchor">Â¶</a></h3><p>problem: how to implement message passing with in single process?</p><p>Design: producer-consumer design pattern</p><p>Problem: how to stop the process?</p><p>Approach1: a <em>poison pill</em>: a special message on the queue that signals the consumer of that message to end its work.</p><p>Approach2: change the type of elements on the requests queue to an ADT:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FridgeRequest = DrinkRequest(n:int) + StopRequest</span><br></pre></td></tr></table></figure><p>with operations:</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">drinksRequested : FridgeRequest â†’ int</span><br><span class="line">shouldStop : FridgeRequest â†’ boolean</span><br></pre></td></tr></table></figure><p>and when we want to stop the fridge, we enqueue a <code>FridgeRequest</code> where <code>shouldStop</code> returns <code>true</code>.</p><p>Approach3:signal a thread that it should stop working by calling that threadâ€™s <a href="http://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/lang/Thread.html#interrupt()"><code>interrupt()</code></a> method</p><h3><span id="race-conditions">race conditions</span><a href="#race-conditions" class="header-anchor">Â¶</a></h3><p>prevent deadlock:</p><ol><li><p>design the system so that there is no possibility of a cycle â€” so that if A is waiting for B, it cannot be that B was already (or will start) waiting for A.</p></li><li><p><em>timeouts</em>ï¼šIf a module has been blocked for too long (maybe 100 milliseconds? or 10 seconds? how to decide?), then you stop blocking and throw an exception.</p><p>problem: what do you do when that exception is thrown?</p></li></ol><h2><span id="r24-sockets-amp-networking">R24: sockets &amp; networking</span><a href="#r24-sockets-amp-networking" class="header-anchor">Â¶</a></h2><p>compared to producer-consumer pattern, client-server pattern abstracts the communication over the network using the sockets.</p><h3><span id="client-server-design-pattern">Client/server design pattern</span><a href="#client-server-design-pattern" class="header-anchor">Â¶</a></h3><blockquote><p>In this pattern there are two kinds of processes: clients and servers. A client initiates the communication by connecting to a server. The client sends requests to the server, and the server sends replies back. Finally, the client disconnects. A server might handle connections from many clients concurrently, and clients might also connect to multiple servers.</p></blockquote><h3><span id="sockets-and-streams">sockets and streams</span><a href="#sockets-and-streams" class="header-anchor">Â¶</a></h3><p>Basic concepts related to network communication, and to input/output. (I/O refers to communication into and out of a process.)</p><ul><li><p>IP addresses</p></li><li><p>Hostnames</p></li><li><p>Port numbers</p></li></ul><h4><span id="gt-network-sockets">&gt; Network sockets</span><a href="#gt-network-sockets" class="header-anchor">Â¶</a></h4><p>A <a href="http://en.wikipedia.org/wiki/Network_socket"><strong>socket</strong></a> represents one end of the connection between client and server.</p><ul><li>listening socketï¼šused by a server process to wait for connections from remote clients.</li><li>connected socketï¼šsend and receive messages to and from the process on the other end of the connection.</li></ul><p><strong>Physical-socket analogy</strong></p><ul><li><p>ç”¨æˆ·å’ŒæœåŠ¡å™¨çš„è¿æ¥è¿‡ç¨‹å°±åƒå°†USBçº¿æ’å…¥æ¥å£ä¸€æ ·ï¼Œæ²¡æ’å…¥å‰çš„æ¥å£æ˜¯listening socketï¼Œæ’å…¥æ¥å£çš„çº¿å’Œæ¥å£æ˜¯connected socketã€‚æ­£å¦‚ä¸€æ¡çº¿æœ‰ä¸¤ä¸ªç»ˆç«¯ï¼Œè¿æ¥çš„socketä¹Ÿæœ‰ä¸¤ä¸ªç»ˆç«¯åˆ†åˆ«åœ¨ç”¨æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ã€‚</p></li><li><p>ç»†èŠ‚ä¸Šçš„åŒºåˆ«ï¼šåœ¨å®é™…çš„socketè¿æ¥ä¸­ï¼Œå½“ç”¨æˆ·è¯·æ±‚è¢«listening socketæ¥æ”¶ï¼ŒæœåŠ¡å™¨é‡æ–°äº§ç”Ÿä¸€ä¸ªæ–°çš„connected socketæ¥ç®¡ç†è¿æ¥ï¼Œè€Œä¿ç•™ç€listening sockerç»§ç»­æ¥å—ç”¨æˆ·è¯·æ±‚ã€‚</p></li></ul><h4><span id="gt-streams">&gt; streams</span><a href="#gt-streams" class="header-anchor">Â¶</a></h4><ul><li>buffers</li><li>Byte streams</li><li>character streams</li><li>Blocking</li></ul><h4><span id="gt-wire-protocols">&gt; wire protocols</span><a href="#gt-wire-protocols" class="header-anchor">Â¶</a></h4><blockquote><p>A <strong>protocol</strong> is a set of messages that can be exchanged by two communicating parties.</p><p>A <strong>wire protocol</strong> in particular is a set of messages represented as byte sequences, like <code>hello world</code> and <code>bye</code> (assuming weâ€™ve agreed on a way to encode those characters into bytes).</p></blockquote><ul><li><p>Telnet client</p></li><li><p>http</p></li><li><p>smtp</p></li></ul><p><strong>Design a wire protocol</strong></p><p>use same <a href="http://web.mit.edu/6.031/www/sp21/classes/24-sockets-networking/#designing_a_wire_protocol">strategy</a> as designing ADT</p><h3><span id="using-network-sockets-in-java">Using network sockets in Java</span><a href="#using-network-sockets-in-java" class="header-anchor">Â¶</a></h3><ul><li>client</li><li>server</li><li>multithreaded server</li><li>Closing streams and sockets with <u>try-with-resources statement</u></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (</span><br><span class="line">    <span class="comment">// preamble: declare variables initialized to objects that need closing after use</span></span><br><span class="line">) &#123;</span><br><span class="line">    <span class="comment">// body: runs with those variables in scope</span></span><br><span class="line">&#125; <span class="keyword">catch</span>(...) &#123;</span><br><span class="line">    <span class="comment">// catch clauses: optional, handles exceptions thrown by the preamble or body</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="comment">// finally clause: optional, runs after the body and any catch clause</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// no matter how the try statement exits, it automatically calls</span></span><br><span class="line"><span class="comment">// close() on all variables declared in the preamble</span></span><br></pre></td></tr></table></figure><p><strong>testing</strong></p><p><a href="http://web.mit.edu/6.031/www/sp21/classes/24-sockets-networking/#testing_clientserver_code">Example</a></p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://stackoverflow.com/questions/1050222/what-is-the-difference-between-concurrency-and-parallelism">https://stackoverflow.com/questions/1050222/what-is-the-difference-between-concurrency-and-parallelism</a> <a href="#fnref1" class="footnote-backref">â†©ï¸</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> software engineering </category>
          
          <category> 6.031 software construction </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>db buffer poo</title>
      <link href="/sg/2021/10/19/db_memory_management/"/>
      <url>/sg/2021/10/19/db_memory_management/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#buffer-pool-manager">Buffer Pool Manager</a></li></ul><!-- tocstop --></div><p>Terminology:</p><ol><li>Hardware page: The storage device guarantees an atomic write of the size of the hardware page. A hardware page is the largest block of data that the storage device can guarantee failsafe writes.</li><li>Database heap: Heap file organization is one of ways to organize pages of a DBMS. It helps to find the location of the page that DBMS wants on disk. A heap file consists of unordered pages where tuples are stored in random order.</li><li>Tuple: a tuple is a sequence of bytes, contiguous or not, to interpreted by DBMS into attribute types and values.</li></ol><p>Storage should prove virtually sufficient memory, maximize sequential access due to principle of locality and prevent I/O delays due to disk access. Databases manage its own storage because operating systems are not aware of the file layout or the difference of queries.</p><p>The DBMS stores database as files on disk in pages. Storage manager can organize files as a collection of pages and keep track of data read/written to pages and available space. Pages in DBMS concepts are divided into hardware page (usually 4 KB), OS page (4 KB), and database page (1-16 KB). A database page is always fixed-size to avoid the engineering overhead to support variable page size. If a database page is larger than a hardware page, the DBMS needs to guarantee write atomicity.</p><p>Data layouts in pages use two main approaches: slotted-pages and log-structured. Slotted pages map slots to offsets. Log-structured architecture stores the log records of changes to the tuples. The log-structured model assumes no overwrites and only allows creation of new pages on a system, which helps to address several problems of slotted pages such as fragmentation, useless and random disk I/O.</p><p>Log-structure storage is built upon LSTF and LSM Tree. To store a log entry, the DBMS does the following operations:</p><ol><li>Apply changes to an in-memory data structure (MemTable)</li><li>Write out the changes sequentially to disk (SSTable)</li><li>Sorts each SSTable based on keys before writing out.</li></ol><p>The read path is to check MemTable first and then check SSTables at each level. To avoid brute force scans of SSTables, the DBMS maintains an in-memory SummaryTable to track system catalogs.</p><p>In a write-heavy workload, the DBMS stockpiles a large number of SSTables. Thus, the DBMS periodically compacts the logs by taking the most recent update. The log compaction can reduce wasted space and accelerate reads. There are three major approaches to log compaction: universal, level, and tiering compaction.</p><p>Analysis of trade-offs of using log-structured storage breaks down to several aspects: writes, reads, compaction, write amplification.</p><p>In the index-organized storage, the DBMS stores indexes as keys and a tableâ€™s tuples as the values to those keys. The tables of databases are inherently unsorted. Storages rely on indexes to find a particular tuple.</p><h3><span id="buffer-pool-manager">Buffer Pool Manager</span><a href="#buffer-pool-manager" class="header-anchor">Â¶</a></h3><p>Terminology:</p><ol><li>Buffer pool: an in-memory cache of pages between memory and disk.</li><li>write-back cache: dirty pages are buffered and not written to disk immediately on mutation.</li><li>write-through cache: any changes are instantly propagated to disk.</li></ol><p>mmap vs. buffer pool</p><p>Disadvantages of mmap:</p><ul><li>Mmap must align sizes to a page size.</li><li>The memory mapped fileâ€™s content must fit into the calling processâ€™ virtual address space.</li><li>Performance issues: cache coherence.</li></ul><p>What differentiates them is the management of memory contents in terms of OS or databases. A database can bypass the page cache of OSâ€™ and manage in-memory data matching its own needs.</p><p>Paper: Are You Sure You Want to Use MMAP in Your Database Management System?</p>]]></content>
      
      
      <categories>
          
          <category> computer systems </category>
          
          <category> 15-445 databases </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sicp</title>
      <link href="/sg/2021/10/03/fp_sicp/"/>
      <url>/sg/2021/10/03/fp_sicp/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#procedures-as-building-blocks">Procedures as building blocks</a></li><li><a href="#recursion">Recursion</a></li><li><a href="#procedural-abstraction">Procedural abstraction</a></li><li><a href="#data-abstraction">Data abstraction</a></li><li><a href="#symbols">Symbols</a></li><li><a href="#mutation-and-the-environment-model">Mutation and the environment model</a><ul><li><a href="#data-mutation">Data mutation</a></li><li><a href="#environment-model">environment model</a></li></ul></li><li><a href="#interpretation-and-evaluation">Interpretation and evaluation</a><ul><li><a href="#interpretation-and-interpreter">interpretation and interpreter</a></li></ul></li></ul><!-- tocstop --></div><p>6.037 crash sicp</p><h2><span id="procedures-as-building-blocks">Procedures as building blocks</span><a href="#procedures-as-building-blocks" class="header-anchor">Â¶</a></h2><ul><li><p>Primitives: numbers, strings, booleans</p></li><li><p>Built-in procedures, value, primitives</p></li><li><p>Lambda: the value of a lambda expression is a procedure.</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(lambda (x) (* x x))</span><br><span class="line">;(lambda (parameter list) (body))</span><br><span class="line">(define sth toSth)</span><br></pre></td></tr></table></figure><ul><li>Modularity</li><li>controlling the process:</li></ul><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">;(if predicate consequent alternative)</span></span><br></pre></td></tr></table></figure><ul><li>Test<ul><li>rules for evaluation : sustitution model</li></ul></li></ul><h2><span id="recursion">Recursion</span><a href="#recursion" class="header-anchor">Â¶</a></h2><ul><li><p>Recursion vs. iteration</p><p>pending operations?</p><ul><li>Recurse: reduce problems to smaller subproblems</li><li>Iterative: constant space, based on the form of data<ul><li>éœ€è¦ä¸€ä¸ªèŒƒå›´ï¼Œèµ·ç‚¹æ˜¯ä»€ä¹ˆï¼Œç»ˆç‚¹æ˜¯ä»€ä¹ˆ</li></ul></li></ul></li></ul><h2><span id="procedural-abstraction">Procedural abstraction</span><a href="#procedural-abstraction" class="header-anchor">Â¶</a></h2><ul><li>Type of a procedure is a contract: è¾“å…¥å’Œè¾“å‡ºçš„ç±»å‹æ˜¯ç¡®å®šçš„ï¼Œå¦‚æœè¾“å‡ºä¸æ˜¯æ­¤ç±»å‹ï¼Œé‚£ä¹ˆï¼šthe behavior is undefined</li><li>patterns across procedures</li><li>Higher-order procedures take a <u>procedure</u> as a argument, or <u>return</u> one as a value</li><li>ä¸€ä¸ªæ–¹ç¨‹å¯ä»¥åˆåœ¨ä¸€èµ·å†™ï¼Œä¹Ÿå¯ä»¥åˆ†å¼€å†™ã€‚</li></ul><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;argument&quot;</span></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">sum</span> term a next b)</span><br><span class="line">  (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">&gt;</span></span> a b)</span><br><span class="line">      <span class="number">0</span></span><br><span class="line">      (<span class="name"><span class="built_in">+</span></span> (<span class="name">term</span> a) (<span class="name">sum</span> term (<span class="name">next</span> a) next b))))</span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">new-sum-integers</span> a b)</span><br><span class="line">  (<span class="name">sum</span> (<span class="name"><span class="built_in">lambda</span></span> (x) x) a (<span class="name"><span class="built_in">lambda</span></span> (x) (<span class="name"><span class="built_in">+</span></span> x <span class="number">1</span>) b))</span><br><span class="line">  </span><br><span class="line"><span class="string">&quot;return procedures&quot;</span></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> incrementby (<span class="name"><span class="built_in">lambda</span></span> (n) ...))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> add1 (<span class="name">incrementby</span> <span class="number">1</span>)) <span class="comment">;;type: number -&gt; (number -&gt; number)</span></span><br></pre></td></tr></table></figure><h2><span id="data-abstraction">Data abstraction</span><a href="#data-abstraction" class="header-anchor">Â¶</a></h2><ul><li>types</li><li>Compound data<ul><li>a way of gluing data together</li><li>a way of getting the pieces back out</li><li>a contract between glue and unglue</li><li>Property: closure: treated as a primitive object</li></ul></li><li>Cons and friends<ul><li>Pairs (cons cell)<ul><li>a data abstraction</li></ul></li><li>abstractions have two communities: builders and users<ul><li><u>Constructor + accessors + contract + operations</u></li><li>----- abstraction barrier-----</li><li>Implementation</li></ul></li></ul></li><li>ex: rational number -&gt; list -&gt; map<ul><li>scheme list is a linked list</li></ul></li></ul><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">cons</span></span> &lt;a&gt; &lt;b&gt;) -&gt; &lt;p&gt; <span class="comment">;;cons:construct</span></span><br><span class="line">(<span class="name"><span class="built_in">car</span></span> &lt;p&gt;) -&gt; &lt;a-val&gt;</span><br><span class="line">(<span class="name"><span class="built_in">cdr</span></span> &lt;p&gt;) -&gt; &lt;b-val&gt;</span><br></pre></td></tr></table></figure><h2><span id="symbols">Symbols</span><a href="#symbols" class="header-anchor">Â¶</a></h2><ul><li>Data types in scheme<ul><li>Conventional: numbers, characters and strings, booleans, vectors</li><li>Scheme- specific<ul><li>procedures</li><li>pairs and lists</li><li>Symbols</li></ul></li></ul></li><li>All data types are first class (scheme)<ul><li>Symbols -&gt; procedures -&gt; value of procedures -&gt; store in data structures</li></ul></li><li>referring to symbols: quote<ul><li>Object or expression to be evaluated</li></ul></li><li>operations<ul><li><u>symbol?</u> has type anytype -&gt; boolean: (symbol? 'foo) -&gt; #t</li><li>eq? tests the equality of symbols</li></ul></li><li>tagged data<ul><li>benefits<ul><li>Data-directed programming:</li><li>defensive programming</li></ul></li></ul></li></ul><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">make-point</span> x y)</span><br><span class="line">  (<span class="name"><span class="built_in">list</span></span> <span class="symbol">&#x27;point</span> x y))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name">point?</span> thing)</span><br><span class="line">  (<span class="name"><span class="built_in">and</span></span> (<span class="name"><span class="built_in">pair?</span></span> thing)</span><br><span class="line">       (<span class="name"><span class="built_in">eq?</span></span> (<span class="name"><span class="built_in">car</span></span> thing) <span class="symbol">&#x27;point</span>)))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> (<span class="name"><span class="built_in">...</span></span>)</span><br><span class="line">  (<span class="name"><span class="built_in">if</span></span> (<span class="name">point?</span> thing)</span><br><span class="line">      (<span class="name">....</span>)</span><br><span class="line">      (<span class="name">.....</span>))</span><br><span class="line">  (<span class="name"><span class="built_in">if</span></span> (<span class="name"><span class="built_in">not</span></span> (<span class="name">point?</span> pt)) <span class="comment">;;ééœ€è¦çš„ç±»å‹ï¼Œæ›´å¥½åœ°è¯´æ˜é”™è¯¯åœ¨å“ª</span></span><br><span class="line">      .....))</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2><span id="mutation-and-the-environment-model">Mutation and the environment model</span><a href="#mutation-and-the-environment-model" class="header-anchor">Â¶</a></h2><h3><span id="data-mutation">Data mutation</span><a href="#data-mutation" class="header-anchor">Â¶</a></h3><ul><li><p>Mutators</p><ul><li>mutate æŒ‡çš„æ˜¯æ”¹å˜pointeræŒ‡å‘çš„å¯¹è±¡ã€‚ä¸åªæ˜¯substitution modelã€‚</li><li>Enable new and efficient data structures</li></ul></li><li><p>syntax: Expression sequences</p><ul><li>Begin: do sth and then return a value</li><li>Lambda,let, cond accept sequence</li><li>mutating compound data<ul><li>Only side-effect: type is changed to undef</li></ul></li></ul></li><li><p>Semantics: related to environment model</p></li></ul><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;primitive data&quot;</span></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> x <span class="number">1</span>)</span><br><span class="line">(<span class="name"><span class="built_in">set!</span></span> x <span class="number">2</span>) <span class="comment">;;mutate, for names; set-car!, set-cdr! for pairs.</span></span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">begin</span></span> </span><br><span class="line"> (<span class="name"><span class="built_in">set!</span></span> x <span class="number">2</span>)</span><br><span class="line"> (<span class="name"><span class="built_in">set!</span></span> y <span class="number">3</span>)</span><br><span class="line"> <span class="number">4</span>)</span><br></pre></td></tr></table></figure><ul><li><p>Sharing, equivalence, and identity</p><ul><li>Same object: eq?</li><li>Look the same: equal?</li></ul></li><li><p>functional programming vs imperative programming</p><ul><li>å‡½æ•°å¼ç¼–ç¨‹ï¼šè®¡ç®—å‡½æ•°ï¼Œno assignments, easy to understand(ä»£å…¥æ±‚è§£éƒ½ä¸ä¼šä¹ˆï¼Ÿ)</li><li>å‘½ä»¤å¼ç¼–ç¨‹ï¼šrelies heavily on assignment, introduce new classes of bugs<ul><li>be able to modify local state</li></ul></li></ul></li><li><p>queue implementation</p><ul><li>Simple -&gt; better(attach a type tag to maintain queue identity)</li><li>å•å‘é“¾è¡¨åˆ°åŒå‘é“¾è¡¨ï¼Œå°±æ˜¯è¯­æ³•ä¸ä¸€æ ·</li></ul></li></ul><h3><span id="environment-model">environment model</span><a href="#environment-model" class="header-anchor">Â¶</a></h3><p>New model of mutation for closures</p><ul><li><p>what</p><ul><li>Name-rule</li><li>define-rule</li><li>Set!-rule</li><li>Lambda-rule: creates a procedure in the same EM</li><li>application</li></ul></li><li><p>view on computation</p><ul><li>Variable, place to store things</li><li>Procedure, object with inherited context</li><li>Expressions, ä¸åªä¸ç¯å¢ƒæœ‰å…³</li></ul></li><li><p>ç»„æˆ</p><ul><li>Frame: a table of bindings</li><li>Environment: a sequence of frames<ul><li>enclosing environment pointer</li></ul></li></ul></li><li><p>evalutation in the environment model</p><ul><li>Global environment</li><li>to evaluate a combination: evaluate the subexpressions in the current environment</li><li>Capture state in local frames &amp; procedures</li></ul></li><li><p>Let special form</p><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">(<span class="name"><span class="built_in">let</span></span> ( (<span class="name">&lt;name1&gt;</span> &lt;expr1&gt;)</span><br><span class="line"> (<span class="name">&lt;name2&gt;&lt;expr2&gt;</span>)...) </span><br><span class="line">&lt;body&gt;) <span class="comment">;;body are evaluated in the new frame generated from current frame; hidden lambda</span></span><br><span class="line"></span><br><span class="line">Ex: (<span class="name"><span class="built_in">let</span></span> ((<span class="name">z</span> (<span class="name"><span class="built_in">/</span></span> (<span class="name"><span class="built_in">-</span></span> x2 x1) num-steps)))</span><br><span class="line">(<span class="name">square</span> z))</span><br><span class="line"></span><br><span class="line">(<span class="name"><span class="built_in">define</span></span> make-counter</span><br><span class="line">  (<span class="name"><span class="built_in">lambda</span></span> (n)</span><br><span class="line">    (<span class="name"><span class="built_in">lambda</span></span> () (<span class="name"><span class="built_in">set!</span></span> n (<span class="name"><span class="built_in">+</span></span> n <span class="number">1</span>))</span><br><span class="line">      n</span><br><span class="line">      )))</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>Lambda captures the frame, which can be used to store local state.</p></li><li><p>people make rules to allow computer following, not themselves. (æ²¡æƒ³åˆ°æ˜¯è¿™æ ·çš„EM)</p></li></ul><h2><span id="interpretation-and-evaluation">Interpretation and evaluation</span><a href="#interpretation-and-evaluation" class="header-anchor">Â¶</a></h2><h3><span id="interpretation-and-interpreter">interpretation and interpreter</span><a href="#interpretation-and-interpreter" class="header-anchor">Â¶</a></h3><ul><li>interpreter<ul><li>lexical analyzer: break up input str into words called tokens</li><li>parser: convert to a tree</li><li>evaluator<ul><li>Convert tree to a value</li><li>read and modify the environment</li></ul></li><li>Printer</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> programming </category>
          
          <category> functional programming </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>è‹å¦ˆæŸæ¼”è®²</title>
      <link href="/sg/2021/10/03/speechofsu/"/>
      <url>/sg/2021/10/03/speechofsu/</url>
      
        <content type="html"><![CDATA[<p>Good morning. Thank you for the opportunity to be here today. Itâ€™s really such an honor for me to be back at MIT and to really participate in todayâ€™s hooding ceremony. And I have to say a big, hearty congratulations to all of you who are graduating this week. I know just how hard youâ€™ve worked for this achievement, and itâ€™s an honor to be here to recognize you today. And also, to all of the friends and family who have supported our graduates this week, congratulations to you as well. Everyone here should feel extremely proud of this amazing accomplishment.</p><p>Now I heard a very insightful comment once that really stuck with me. And it was really that the two most important things that determines a personâ€™s success in life is really the love of their family and their education. And I certainly believe that. As I think back to my days at MIT, I am incredibly grateful for the experiences that I had here and the things that I learned. And if you will indulge me for a few minutes, let me tell you a little bit about my story. So I was born in Taiwan, and I came to the United States when I was two, and I grew up in New York to immigrant parents. I was very lucky to have parents that supported me as I grew up, and really treating my brother and I as equals and <strong>setting extremely high standards for what success meant.</strong></p><p>Throughout grade school and middle school, I was an OK student, but I certainly wasnâ€™t anywhere near best in my class. I did realize, though, that competition made me better. So in high school I went to the Bronx High School of Science, and I met some very smart people, and some of them were pretty competitive. And that pushed me harder and shaped my interests in math and science. Then I was lucky enough to get into MIT as an undergrad, and I truly understood what smart was. I think you guys understand that, too. Freshman year at MIT was actually very eye opening. And I would say it was pretty intimidating taking some of those freshmen weed out classes that we know exist at the Institute.</p><p>However, it was during my freshman year at MIT that I got my first undergraduate research assignment, and it was in a semiconductor lab. And I had the opportunity for the first time to do something that I thought was amazing. I fell in love with semiconductors because it was the ability to build something really small and really complicated, and I could do it myself. And it was during this time that I realized that I didnâ€™t need to be the smartest person in the classroom, but if I really applied myself to solve practical problems, I could make a big difference. And so as I was graduating from the 6-A program at MIT, my parents encouraged me to get a PhD. I actually really wasnâ€™t sure that this is what I wanted to do, but I was really too young you know at the time to know any better, so I said-- some of you might relate to that-- but I said, OK, you know, Iâ€™ll do it. But I was really torn with the prospect of spending another four to five years of my life in school.</p><p>Now I can honestly say that the MIT PhD has truly shaped who I am in so many ways, both personally and professionally. And so when people ask me what has MIT meant to me, I usually say a couple of things. I say MIT is pure, and itâ€™s really hard. I do believe that MIT practices the motto what doesnâ€™t kill you makes you stronger. Hope you guys agree with that. But what I really say, though, is that MIT taught me how to think and solve really tough problems because today, for all of you who are completing your doctoral dissertations, you have created something or discovered something or demonstrated something that nobody else in the world has. And that should give you an incredible amount of confidence about what youâ€™re able to do when you put your mind to it. And through that youâ€™ve really proven that youâ€™re at the top of your field, and so you should feel extremely proud of that accomplishment.</p><p>So my path since leaving MIT has had a few twists and turns, and I find myself often coming back to the principles that I learned here. So as each of you sit here today, about to embark on your own journey, I have maybe just a couple of small pieces of advice that I would like to share with you.</p><p>The first-- and Iâ€™ll say this is, you should really <strong>dream big</strong>. Believe that you can change the world. I remember when I first left MIT,I was really intimidated about joining a large corporate environment I was 25 years old and I joined IBMâ€™s TJ Watson Research Center, which had an incredible reputation. And I met people who had a lot more experience and knowledge than I had. And I had no idea how could I contribute in that environment and make a difference. However, what I learned is that MIT has really prepared you for that journey. MIT trains the best problem solvers in the world, and the world is starving for new ideas and great leaders who will champion those ideas. So I was able to make a difference even after a few short months, and each of you will make an incredible difference as well. You are the next generation of great leaders with fresh, innovative ideas, and you will solve the worldâ€™s toughest problems. You just have to believe in yourself and give yourself the permission to believe that you can change the world.</p><p>Second, I would say have the courage to <strong>take risks</strong>, sometimes big risks. But make sure you also enthusiastically learn from your mistakes. And there will be a few mistakes. I started off as an engineer and then turned to the business and management side of things in my career. And I saw, actually, in many business environments, that MIT PhDs worked for Harvard MBAs. And the truth is, that made absolutely no sense to me.[appLAUSE]I was determined to make sure that I wasnâ€™t working for Harvard MBAs for the rest of my career. But truthfully, I actually thought I could make better business decisions because I understood the technology, whereas sometimes generalists donâ€™t.[appLAUSE]So I took a risk, and I asked my management at IBM to give me a chance to run a business. And they did actually give me a shot, surprisingly. I made a lot of mistakes those first few years, and I learned that the moments that really shaped my career were the times when I really screwed up the most. Itâ€™s like in the lab, you know, when that experiment you thought was supposed to work out didnâ€™t quite work out, you know, what do you do? You need to learn and adjust your next steps. Itâ€™s certainly like that in your career, as well. And sometimes you even make some very large mistakes. Like for example, the first business ran, I missed my revenue the first year by 50%.My boss wasnâ€™t very happy about that. I spent about 24 hours being extremely disappointed in myself, but the day after, I promised myself I would learn from it. And I adjusted my game plan for the rest of the year. And you can believe I never made that particular mistake again. And so I really do say, donâ€™t be afraid to take risks, even if some of them seem large, and donâ€™t be afraid to make a few mistakes. Mistakes are natural. Thereâ€™s no straight line to success. But the people who learn best from their mistakes are actually the ones who end up being the best leaders.</p><p>And the last thing I want to leave you with is perhaps most important. I encourage each of you to <strong>make your own luck</strong>. MIT has given you all the tools and training to be the best in the world and make a huge impact on your chosen field. However, in addition to being smart, you also have to be lucky, and <strong>you have to be in the right place at the right time solving the right problems.</strong> So my favorite advice to graduates is find the toughest problems in the world and volunteer to help solve them because this is really how you make your own luck. This is when people really pay attention. And this is when youâ€™re really doing something that makes a difference. Iâ€™ve had the opportunity several times in my career to work on some very hard problems. Sometimes I found it extremely frustrating and stressful. But each time, I found that working on something hard brought out the best in me and also my team. And it also created a new set of opportunities. So five years ago I had the opportunity to join AMD. Now when I joined AMD, there were a few of my mentors who actually questioned my decision because they knew about the challenges of the company. And I actually looked at them really perplexed. I actually felt like I could not possibly have a better opportunity because I had trained my entire career, since my days at MIT through my 20 years in industry, to lead a semiconductor company. And so this was my opportunity to make my own luck.</p><p>The world is full of very complex and challenging problems. And I truly believe that what MIT has taught us is that <strong>there is no problem that is too hard to solve if you have the right mindset, the right perseverance, and the right creativity.</strong> So I advise you to run towards those problems, and you will have great luck throughout your career. So today is a tremendous day for all of you. It really is a celebration of your MIT experience, but itâ€™s also a celebration of the beginning of the next chapter in your career, where you start to leverage all of the tools and training youâ€™ve received here to go off and solve the worldâ€™s hardest problems and make the world a better place. <strong>So I encourage each of you to dream big and believe you can change the world, have the courage to take risks and enthusiastically learn from those mistakes, and work damn hard every day to solve the worldâ€™s toughest problems.</strong> And I think if you do that, Iâ€™m pretty sure youâ€™re going to make everybody very proud, and you will be incredibly lucky throughout your career. So I do have one last personal request for all of you. You know, I told you at the beginning that Iâ€™m slightly competitive, just slightly. So please promise me that you will join me on my journey to make sure that there are lots of Harvard MBAs working for MIT PhDs in the future. Thank you very much and congratulations.</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> read </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SC ADT</title>
      <link href="/sg/2021/09/30/SC_ADT/"/>
      <url>/sg/2021/09/30/SC_ADT/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#r10-abstraction-data-types">R10: abstraction data types</a><ul><li><a href="#access-control">access control</a></li><li><a href="#what-abstraction-means">What abstraction means</a></li><li><a href="#classifying-types-and-operations">classifying types and operations</a></li><li><a href="#what-and-how-what-is-adt-and-how-to-design">What and how: what is ADT and how to design</a></li><li><a href="#representation-independence">representation independence</a></li><li><a href="#testing">Testing</a></li></ul></li><li><a href="#r11-abstraction-function-rep-invariants">R11: abstraction function &amp; rep invariants</a><ul><li><a href="#invariants">invariants</a></li><li><a href="#rep-invariants-and-abstract-function">Rep invariants and abstract function</a></li><li><a href="#beneficent-mutation">Beneficent mutation</a></li><li><a href="#documenting-the-af-ri-and-safety-from-rep-exposure">Documenting the AF, RI, and safety from rep exposure</a></li><li><a href="#adt-invariants-replace-preconditions">ADT invariants replace preconditions</a></li></ul></li><li><a href="#r12-defining-adts">R12:defining ADTs</a><ul><li><a href="#interface">Interface</a></li><li><a href="#subclassing">subclassing</a></li><li><a href="#generic-types">Generic types</a></li><li><a href="#enumerations">enumerations</a></li><li><a href="#adts-in-non-oop-languages">ADTs in non-OOP languages</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="r10-abstraction-data-types">R10: abstraction data types</span><a href="#r10-abstraction-data-types" class="header-anchor">Â¶</a></h2><h3><span id="access-control">access control</span><a href="#access-control" class="header-anchor">Â¶</a></h3><p>Private(only in the same class), public, no modifiers(only in the same package), protected(only in the same parentage)</p><ul><li><p>Scope: same class, same package, subclass of other package, different class of other package</p></li><li><p>åŒºåˆ†ï¼š instance variable vs. class name</p></li></ul><h3><span id="what-abstraction-means">What abstraction means</span><a href="#what-abstraction-means" class="header-anchor">Â¶</a></h3><ul><li>fancy words? Not that fancy.<ul><li>Abstraction/modularity/encapsulation/information hiding/separation of concerns</li></ul></li><li>User-defined types<ul><li>type is characterized by the operations you can perform on it.</li><li>abstract away from the details of data structure, memory storage, implementation</li></ul></li></ul><h3><span id="classifying-types-and-operations">classifying types and operations</span><a href="#classifying-types-and-operations" class="header-anchor">Â¶</a></h3><ul><li><p>Types: mutable / immutable</p></li><li><p>Operations:</p><ul><li>Creator, create new objects of the type. Input: values<ul><li>constructor</li><li>implemented as a static method called a factory method</li></ul></li><li>Producers. Input: existing objects</li><li>Observer</li><li>Mutators, change objects</li></ul></li></ul><h3><span id="what-and-how-what-is-adt-and-how-to-design">What and how: what is ADT and how to design</span><a href="#what-and-how-what-is-adt-and-how-to-design" class="header-anchor">Â¶</a></h3><ul><li>Representation</li><li>Implementation</li></ul><h3><span id="representation-independence">representation independence</span><a href="#representation-independence" class="header-anchor">Â¶</a></h3><h3><span id="testing">Testing</span><a href="#testing" class="header-anchor">Â¶</a></h3><h2><span id="r11-abstraction-function-amp-rep-invariants">R11: abstraction function &amp; rep invariants</span><a href="#r11-abstraction-function-amp-rep-invariants" class="header-anchor">Â¶</a></h2><h3><span id="invariants">invariants</span><a href="#invariants" class="header-anchor">Â¶</a></h3><p>good ADTs preserve its own invariants.</p><ul><li><p>mutable objects</p></li><li><p>public and private in access control</p></li><li><p>Immutable wrappers around mutable data types, get exception at runtime not at compile time.</p><ul><li>avoid representation exposure</li></ul></li></ul><h3><span id="rep-invariants-and-abstract-function">Rep invariants and abstract function</span><a href="#rep-invariants-and-abstract-function" class="header-anchor">Â¶</a></h3><p>abstract type can be divided into abstract value space and representation value space.</p><ul><li>every abstract value is mapped to by some rep value.</li><li>Some abstract values are mapped to by more than one rep value.</li><li>Not all rep values are mapped.</li></ul><ol><li>Abstract function</li></ol><blockquote><p>AF: R -&gt; A</p></blockquote><ol start="2"><li>Rep invariant</li></ol><blockquote><p>RI: R-&gt;boolean //subset of rep values on which AF is defined</p></blockquote><p>Implementations of an ADT means not only choosing the two spaces, but alse deciding which rep values are legal, and how to interpret them as abstract values.</p><h3><span id="beneficent-mutation">Beneficent mutation</span><a href="#beneficent-mutation" class="header-anchor">Â¶</a></h3><ul><li><p>beneficent mutation: æ”¹å˜rep value, ä¸æ”¹å˜abstract value</p><p>The rep value has changed to another that still maps to the same abstract value.</p></li></ul><h3><span id="documenting-the-af-ri-and-safety-from-rep-exposure">Documenting the AF, RI, and safety from rep exposure</span><a href="#documenting-the-af-ri-and-safety-from-rep-exposure" class="header-anchor">Â¶</a></h3><ul><li>Rep exposure safety argument</li><li>What an ADT spec<ul><li>may talk about<ul><li>Things that are visible to the client: parameters, return values, exceptions thrown by its operations</li><li>Abstract values</li></ul></li><li>should not talk about<ul><li>details of the representation</li><li>AF and RI should hide within the body of the class</li></ul></li></ul></li></ul><h3><span id="adt-invariants-replace-preconditions">ADT invariants replace preconditions</span><a href="#adt-invariants-replace-preconditions" class="header-anchor">Â¶</a></h3><ul><li><p>Encapsulate preconditions in ADTs</p></li><li><p>How to establish invariants</p><blockquote><p>if an invariant of an ADT is</p><pre><code>1. established by creators and producers2. preserved by mutators, observers, and producers; and3. no representation exposure occurs</code></pre><p>then the invariant is true of all instances of the ADT.</p></blockquote></li></ul><h2><span id="r12-defining-adts">R12:defining ADTs</span><a href="#r12-defining-adts" class="header-anchor">Â¶</a></h2><p>Objectives:implement interfaces, generic types, enumerations and global functions operating on opaque type of ADT, determine subtyping relationship</p><h3><span id="interface">Interface</span><a href="#interface" class="header-anchor">Â¶</a></h3><h4><span id="gt-interfaces">&gt; interfaces:</span><a href="#gt-interfaces" class="header-anchor">Â¶</a></h4><ul><li><p>advantage:</p><ol><li>Interface specifies the contract for the client.</li><li>Support multiple different representations</li></ol></li><li><p>Javaâ€™s interfaces: do not include info about the representations</p><p>æ‰€ä»¥ä¸éœ€è¦æä¾›æœ‰å…³interfaceçš„é¢å¤–ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šinstance variables, instance method bodies, constructors</p></li></ul><h4><span id="gt-subtypes">&gt; subtypes:</span><a href="#gt-subtypes" class="header-anchor">Â¶</a></h4><ul><li>ç¼–è¯‘å™¨èƒ½æ£€æŸ¥å­ç±»å‹æœ‰æ— å®ç°å…¶çˆ¶ç±»çš„æ‰€æœ‰ç±»å‹ï¼Œä½†ä¸èƒ½æ£€æŸ¥æ˜¯å¦ç¬¦åˆå…¶è§„èŒƒã€‚æˆ‘ä»¬éœ€è¦ä¿è¯å­ç±»å‹çš„è§„èŒƒè‡³å°‘è¦å’Œå…¶çˆ¶ç±»ä¸€æ ·çš„å¼ºåŠ²ã€‚</li></ul><blockquote><p>â€œB is a subtype of Aâ€ means â€œevery B is an A.â€ In terms of specifications: â€œevery B satisfies the specification for A.</p></blockquote><ul><li><p>Declare subtypes in java</p><ul><li>declare that a class B is a subtype of an interface A, use <code>implements</code>:</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayList</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">List</span>&lt;E&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>declare that an interface is a subtype of another interface, using <code>extends</code>:</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">SortedSet</span>&lt;E&gt; <span class="keyword">extends</span> <span class="title class_">Set</span>&lt;E&gt; &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4><span id="gt-example-mystring">&gt; Example:mystring</span><a href="#gt-example-mystring" class="header-anchor">Â¶</a></h4><p>éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š</p><ol><li><p>Constructor: valueOf(). The difference between concrete classâ€™s static method and interfaceâ€™s constructor</p></li><li><p>Inheritance: @override</p></li><li><p>Private constructors are allowed</p></li><li><p>abstraction barrier between ADT and its concrete representations</p><ul><li><p>How clients use ADT?</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MyString</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FastMyString</span>(<span class="literal">true</span>);</span><br><span class="line"><span class="type">MyString</span> <span class="variable">s</span> <span class="operator">=</span> MyString.valueOf(<span class="literal">true</span>); <span class="comment">//better</span></span><br></pre></td></tr></table></figure><ul><li>implement the creator operation <code>valueOf</code> as a static <a href="https://web.mit.edu/6.031/www/sp21/classes/10-abstract-data-types/#factory_method">factory method</a> in the interface <code>MyString</code></li></ul></li></ul></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MyString represents an immutable sequence of characters.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MyString</span> &#123; </span><br><span class="line">    <span class="comment">// public static MyString valueOf(boolean b) &#123; ... &#125;</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> MyString <span class="title function_">valueOf</span><span class="params">(<span class="type">boolean</span> b)</span> &#123;<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FastMyString</span>(b);&#125; <span class="comment">//notice 4</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">length</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">char</span> <span class="title function_">charAt</span><span class="params">(<span class="type">int</span> i)</span>;</span><br><span class="line">    <span class="keyword">public</span> MyString <span class="title function_">substring</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleMyString</span> <span class="keyword">implements</span> <span class="title class_">MyString</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">char</span>[] a;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a string representation of b, either &quot;true&quot; or &quot;false&quot;.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b a boolean value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SimpleMyString</span><span class="params">(<span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">        a = b ? <span class="keyword">new</span> <span class="title class_">char</span>[] &#123; <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;e&#x27;</span> &#125; </span><br><span class="line">              : <span class="keyword">new</span> <span class="title class_">char</span>[] &#123; <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;e&#x27;</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// private constructor, used internally by producer operations</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SimpleMyString</span><span class="params">(<span class="type">char</span>[] a)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.a = a;</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span> <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">length</span><span class="params">()</span> &#123; <span class="keyword">return</span> a.length; &#125;</span><br><span class="line">    <span class="meta">@Override</span> <span class="keyword">public</span> <span class="type">char</span> <span class="title function_">charAt</span><span class="params">(<span class="type">int</span> i)</span> &#123; <span class="keyword">return</span> a[i]; &#125;</span><br><span class="line">    <span class="meta">@Override</span> <span class="keyword">public</span> MyString <span class="title function_">substring</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="type">char</span>[] subArray = <span class="keyword">new</span> <span class="title class_">char</span>[end - start];</span><br><span class="line">        System.arraycopy(<span class="built_in">this</span>.a, start, subArray, <span class="number">0</span>, end - start);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SimpleMyString</span>(subArray);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FastMyString</span> <span class="keyword">implements</span> <span class="title class_">MyString</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">char</span>[] a;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> start;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> end;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Create a string representation of b, either &quot;true&quot; or &quot;false&quot;.</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> b a boolean value</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">FastMyString</span><span class="params">(<span class="type">boolean</span> b)</span> &#123;</span><br><span class="line">        a = b ? <span class="keyword">new</span> <span class="title class_">char</span>[] &#123; <span class="string">&#x27;t&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;u&#x27;</span>, <span class="string">&#x27;e&#x27;</span> &#125; </span><br><span class="line">              : <span class="keyword">new</span> <span class="title class_">char</span>[] &#123; <span class="string">&#x27;f&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;s&#x27;</span>, <span class="string">&#x27;e&#x27;</span> &#125;;</span><br><span class="line">        start = <span class="number">0</span>;</span><br><span class="line">        end = a.length;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// private constructor, used internally by producer operations.</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">FastMyString</span><span class="params">(<span class="type">char</span>[] a, <span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.a = a;</span><br><span class="line">        <span class="built_in">this</span>.start = start;</span><br><span class="line">        <span class="built_in">this</span>.end = end;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">length</span><span class="params">()</span> &#123; <span class="keyword">return</span> end - start; &#125;</span><br><span class="line">    <span class="meta">@Override</span> <span class="keyword">public</span> <span class="type">char</span> <span class="title function_">charAt</span><span class="params">(<span class="type">int</span> i)</span> &#123; <span class="keyword">return</span> a[start + i]; &#125;</span><br><span class="line">    <span class="meta">@Override</span> <span class="keyword">public</span> MyString <span class="title function_">substring</span><span class="params">(<span class="type">int</span> start, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FastMyString</span>(<span class="built_in">this</span>.a, <span class="built_in">this</span>.start + start, <span class="built_in">this</span>.start + end);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4><span id="gt-why-interfaces">&gt; Why interfacesï¼Ÿ</span><a href="#gt-why-interfaces" class="header-anchor">Â¶</a></h4><ol><li>ä½¿ç”¨ç•Œé¢èƒ½ä¸ºç¼–è¯‘å™¨å’Œäººä»¬å¢åŠ å¯è¯»æ€§ã€‚</li><li>ä»æœ€å¼€å§‹æŠ½è±¡å‡ºç‹¬ç«‹çš„å®ç°ï¼Œç„¶åå†ä¿®æ­£å…·ä½“ç»†èŠ‚ã€‚èƒ½å¤Ÿåœ¨ä¸åŒæ–¹å¼å®ç°é—´æƒè¡¡æ€§èƒ½ã€‚</li><li>æœ‰æ„æœªæ˜ç¡®çš„æ–¹æ³•è§„èŒƒï¼Œåœ¨ä¹‹åæ›´å…·ä½“çš„å®ç°</li><li>multiple view of one class. <a href="https://stackoverflow.com/questions/21263607/can-a-normal-class-implement-multiple-interfaces#:~:text=Yes%2C%20a%20class%20can%20implement,for%20some%20sort%20of%20behavior.">A java class may implement multiple interfaces.</a></li><li>é€šè¿‡ä»ç®€å•çš„å®ç°åˆ°æ›´å¤æ‚/ä¸¥æ ¼çš„å®ç°ï¼Œä¸€æ­¥æ­¥æ„å»ºå¯ä¿¡çš„æ–¹æ³•å®ç°</li></ol><h3><span id="subclassing">subclassing</span><a href="#subclassing" class="header-anchor">Â¶</a></h3><p>å’Œç•Œé¢å®ç°çš„åŒºåˆ«åœ¨äºï¼šsubclass å¯ä»¥ç»§æ‰¿superclassçš„method bodies, fieldsï¼›åŒ…å«spec å’Œrep,è€ŒinterfaceåªåŒ…å«specã€‚</p><p>Problem: what inheriting the rep means?</p><ul><li><p>answer: ä¸€ä¸ªå®‰å…¨çš„subclasséœ€è¦éµå¾ªä¸¤ä¸ªåˆåŒï¼Œå’Œç”¨æˆ·çš„ä»¥åŠå’Œå…¶subclassçš„ï¼Œè€Œè¿™å¯¼è‡´äº†repç‹¬ç«‹æ€§è¢«ç ´åçš„é—®é¢˜ã€‚</p><blockquote><ul><li>rep exposure between the superclass and all its subclasses</li><li>rep dependence between superclass and subclasses</li><li>superclass and subclass can inadvertently break each otherâ€™s rep invariants</li></ul></blockquote></li></ul><p>Static type vs. dynamic type:</p><ul><li><p>Dispatching to the method</p><blockquote><p>Javaâ€™s dynamic dispatch: it uses the implementation appropriate to the <em>dynamic type</em> of the object, not the static type of the reference that points to the object.</p></blockquote></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">FastMyString</span> <span class="variable">fms</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FastMyString</span>(<span class="literal">true</span>); <span class="comment">// recall that this represents the 4-character string &quot;true&quot;</span></span><br><span class="line">fms.toString() â†’ <span class="string">&quot;FastMyString@504bae78&quot;</span> <span class="comment">// not useful! just the class name followed by the object&#x27;s address in memory</span></span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FastMyString</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="built_in">this</span>.length(); ++i) &#123;</span><br><span class="line">            s += <span class="built_in">this</span>.charAt(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FastMyString</span>(<span class="literal">true</span>);</span><br><span class="line">obj.toString() â†’ <span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure><p>Object is static type known at compile time, while FastMyString is the typpe unknown until runtime.</p><h3><span id="generic-types">Generic types</span><a href="#generic-types" class="header-anchor">Â¶</a></h3><p><em>generic type</em>: a type whose specification is in terms of a placeholder type to be filled in later. -&gt; generic programming</p><p>Implementations:</p><ul><li><p>Generic interface, non-generic implementation</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Set</span>&lt;E&gt; &#123;)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CharSet</span> <span class="keyword">implements</span> <span class="title class_">Set</span>&lt;Character&gt; &#123;&#125;                      </span><br></pre></td></tr></table></figure></li><li><p>Generic interface, generic implementation</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Set</span>&lt;E&gt; &#123;&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashSet</span>&lt;E&gt; <span class="keyword">implements</span> <span class="title class_">Set</span>&lt;E&gt; &#123;&#125;</span><br></pre></td></tr></table></figure></li></ul><h3><span id="enumerations">enumerations</span><a href="#enumerations" class="header-anchor">Â¶</a></h3><p><em>enumeration</em>: a small and finite values which can be defined as named constants.</p><p>å’Œc structç›¸åƒã€‚</p><ul><li><p>Java ä¸­.equals å’Œ == çš„é¢å¤–ç»†èŠ‚ï¼šequalsåœ¨è¿è¡Œæ—¶é—´æ£€æŸ¥æ˜¯å¦åœ¨æ„ä¹‰ä¸Šç›¸åŒï¼Œè€Œ==æ£€æŸ¥ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªreferenceã€‚è¿™åœ¨ä¸€èˆ¬çš„æ¯”è¾ƒä¸­æ˜¯æœ‰å·®å¼‚çš„ï¼Œè€Œåœ¨enumä¸­ç”±äºåªæœ‰å”¯ä¸€çš„referenceï¼Œequalså’Œ==åè€Œæ²¡ä»€ä¹ˆåŒºåˆ«ï¼ŒåŒæ—¶==ç¬¦åˆfail fastçš„ç‰¹ç‚¹å› ä¸ºæˆ‘ä»¬æ£€æŸ¥çš„æ­£æ˜¯å®ƒä»¬æ˜¯å¦æ˜¯ç›¸åŒçš„referenceæŒ‡å‘å”¯ä¸€çš„enumä¸­çš„å€¼ã€‚</p></li><li><p>javaä¸­æœ‰å†…ç½®çš„enumç±»å‹ï¼Œè‡ªåŠ¨æä¾›ä¸€äº›æ“ä½œï¼š</p><blockquote><ul><li><code>ordinal()</code> is the index of the value in the enumeration, so <code>JANUARY.ordinal()</code> returns 0.</li><li><code>compareTo()</code> compares two values based on their ordinal numbers.</li><li><code>name()</code> returns the name of the valueâ€™s constant as a string, e.g. <code>JANUARY.name()</code> returns <code>&quot;JANUARY&quot;</code>.</li><li><code>toString()</code> has the same behavior as <code>name()</code></li></ul></blockquote></li><li><p>å¯ä»¥è‡ªå®šä¹‰éœ€è¦çš„enum</p><ul><li>An <code>enum</code> declaration can contain all the usual fields and methods that a <code>class</code> can. (Rep, methods, constants)</li><li>Example</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Month</span> &#123;</span><br><span class="line">    <span class="comment">// the values of the enumeration, written as calls to the private constructor below</span></span><br><span class="line">    JANUARY(<span class="number">31</span>),</span><br><span class="line">    FEBRUARY(<span class="number">28</span>),</span><br><span class="line">    MARCH(<span class="number">31</span>),</span><br><span class="line">    APRIL(<span class="number">30</span>),</span><br><span class="line">    MAY(<span class="number">31</span>),</span><br><span class="line">    JUNE(<span class="number">30</span>),</span><br><span class="line">    JULY(<span class="number">31</span>),</span><br><span class="line">    AUGUST(<span class="number">31</span>),</span><br><span class="line">    SEPTEMBER(<span class="number">30</span>),</span><br><span class="line">    OCTOBER(<span class="number">31</span>),</span><br><span class="line">    NOVEMBER(<span class="number">30</span>),</span><br><span class="line">    DECEMBER(<span class="number">31</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// rep</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">int</span> daysInMonth;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// enums also have an automatic, invisible rep field:</span></span><br><span class="line">    <span class="comment">//   private final int ordinal;</span></span><br><span class="line">    <span class="comment">// which takes on values 0, 1, ... for each value in the enumeration.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// rep invariant:</span></span><br><span class="line">    <span class="comment">//   daysInMonth is the number of days in this month in a non-leap year</span></span><br><span class="line">    <span class="comment">// abstraction function:</span></span><br><span class="line">    <span class="comment">//   AF(ordinal,daysInMonth) = the (ordinal+1)th month of the Gregorian calendar</span></span><br><span class="line">    <span class="comment">// safety from rep exposure:</span></span><br><span class="line">    <span class="comment">//   all fields are private, final, and have immutable types</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// Make a Month value. Not visible to clients, only used to initialize the</span></span><br><span class="line">    <span class="comment">// constants above.</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Month</span><span class="params">(<span class="type">int</span> daysInMonth)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.daysInMonth = daysInMonth;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> isLeapYear true iff the year under consideration is a leap year</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> number of days in this month in a normal year (if !isLeapYear) </span></span><br><span class="line"><span class="comment">     *                                           or leap year (if isLeapYear)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getDaysInMonth</span><span class="params">(<span class="type">boolean</span> isLeapYear)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == FEBRUARY &amp;&amp; isLeapYear) &#123;</span><br><span class="line">            <span class="keyword">return</span> daysInMonth+<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> daysInMonth;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> first month of the semester after this month</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> Month <span class="title function_">startOfNextSemester</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> (<span class="built_in">this</span>) &#123;</span><br><span class="line">            <span class="keyword">case</span> JANUARY:</span><br><span class="line">                <span class="keyword">return</span> FEBRUARY;</span><br><span class="line">            <span class="keyword">case</span> FEBRUARY:   <span class="comment">// cases with no break or return</span></span><br><span class="line">            <span class="keyword">case</span> MARCH:      <span class="comment">// fall through to the next case</span></span><br><span class="line">            <span class="keyword">case</span> APRIL:</span><br><span class="line">            <span class="keyword">case</span> MAY:</span><br><span class="line">                <span class="keyword">return</span> JUNE;</span><br><span class="line">            <span class="keyword">case</span> JUNE:</span><br><span class="line">            <span class="keyword">case</span> JULY:</span><br><span class="line">            <span class="keyword">case</span> AUGUST:</span><br><span class="line">                <span class="keyword">return</span> SEPTEMBER;</span><br><span class="line">            <span class="keyword">case</span> SEPTEMBER:</span><br><span class="line">            <span class="keyword">case</span> OCTOBER:</span><br><span class="line">            <span class="keyword">case</span> NOVEMBER:</span><br><span class="line">            <span class="keyword">case</span> DECEMBER:</span><br><span class="line">                <span class="keyword">return</span> JANUARY;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;can&#x27;t get here&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3><span id="adts-in-non-oop-languages">ADTs in non-OOP languages</span><a href="#adts-in-non-oop-languages" class="header-anchor">Â¶</a></h3><p>define ADT in non-oop languages like C: a group of globally-accessible functions that operate on an opaque data type.</p><p>(data abstraction)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FILE* f = fopen(<span class="string">&quot;out.txt&quot;</span>, <span class="string">&quot;w&quot;</span>); // <span class="built_in">open</span> a file <span class="keyword">for</span> writing</span><br><span class="line">fputs(<span class="string">&quot;hello&quot;</span>, f); // write to the file</span><br><span class="line">fclose(f);  // close the file</span><br></pre></td></tr></table></figure><blockquote><p>The notion of an abstract data type does not depend on language features like classes, or interfaces, or <code>public</code>/<code>private</code> access control. Data abstraction is a powerful design pattern that is ubiquitous in software engineering.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> software engineering </category>
          
          <category> 6.031 software construction </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SC recursion</title>
      <link href="/sg/2021/09/05/SC_recursion/"/>
      <url>/sg/2021/09/05/SC_recursion/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#r14-recursion">R14: recursion</a><ul><li><a href="#decompostion">decompostion</a></li><li><a href="#structure-of-recursive-implementations">structure of recursive implementations</a></li><li><a href="#choosing-the-right-recursive-subproblem">choosing the right recursive subproblem</a></li><li><a href="#recursive-problems-vs-recursive-data">recursive problems vs. recursive data</a></li><li><a href="#mutual-recursion">Mutual recursion</a></li><li><a href="#reentrant-code">reentrant code</a></li><li><a href="#when-to-use-recursion-rather-than-iteration">when to use recursion rather than iteration</a></li><li><a href="#common-mistakes-in-recursive-implementations">common mistakes in recursive implementations</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="r14-recursion">R14: recursion</span><a href="#r14-recursion" class="header-anchor">Â¶</a></h2><p>æœ‰æ—¶å€™ä¼šè§‰å¾—è‡ªå·±å¯¹recursion/iterationçš„äº†è§£å·²ç»å¤Ÿå¤šäº†ï¼Œä½†ä¸å¤Ÿå¤šæ€»æ˜¯å¸¸æ€ã€‚å°¤å…¶åœ¨åº”ç”¨åˆ°ä¸åŒçš„åœºæ™¯çš„æ—¶å€™ã€‚</p><h3><span id="decompostion">decompostion</span><a href="#decompostion" class="header-anchor">Â¶</a></h3><p>Choose the right decomposition for a problem.</p><p>recursion is one method</p><h3><span id="structure-of-recursive-implementations">structure of recursive implementations</span><a href="#structure-of-recursive-implementations" class="header-anchor">Â¶</a></h3><p>helper methods: donâ€™t expose the helper method to your clients.</p><p>base case + recursive case</p><h3><span id="choosing-the-right-recursive-subproblem">choosing the right recursive subproblem</span><a href="#choosing-the-right-recursive-subproblem" class="header-anchor">Â¶</a></h3><p>Think about several ways to break down the problem, and try to write the recursive steps.</p><p>Recursive subproblem can be smaller or simpler in more subtle ways.</p><h3><span id="recursive-problems-vs-recursive-data">recursive problems vs. recursive data</span><a href="#recursive-problems-vs-recursive-data" class="header-anchor">Â¶</a></h3><ul><li><p>recursive problems</p></li><li><p>recursive data</p><ul><li>file systems</li><li>data structures: binary search tree</li></ul></li></ul><h3><span id="mutual-recursion">Mutual recursion</span><a href="#mutual-recursion" class="header-anchor">Â¶</a></h3><p>return immutable object</p><h3><span id="reentrant-code">reentrant code</span><a href="#reentrant-code" class="header-anchor">Â¶</a></h3><ul><li>it can be called again even while a call to it is underway.</li><li>many application scenario: concurrency, callbacks, mutual recursionâ€¦</li></ul><h3><span id="when-to-use-recursion-rather-than-iteration">when to use recursion rather than iteration</span><a href="#when-to-use-recursion-rather-than-iteration" class="header-anchor">Â¶</a></h3><p>åƒé€’å½’è¿™æ ·åªç”¨è€ƒè™‘è¾“å…¥å’Œè¾“å‡ºæ¨¡å¼çš„èŒƒå¼å±äºå‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ç§ã€‚å®ƒä¸å‘½ä»¤å¼ç¼–ç¨‹/è¿­ä»£è¿˜æœ‰ä¸€ä¸ªä¸»è¦åŒºåˆ«å°±æ˜¯å¯å˜æ€§(mutablity)ï¼Œä¸å¯é¿å…äº§ç”Ÿçš„å¯å˜å˜é‡åœ¨è¿­ä»£è¿‡ç¨‹ä¸­ä¸æ–­æ”¹å˜ï¼Œå¯¼è‡´å‡ºç°æ¼æ´ã€‚ä½†é€’å½’ç›¸è¾ƒäºè¿­ä»£çš„æ˜æ˜¾çš„ç¼ºç‚¹å°±æ˜¯éœ€è¦æ›´å¤šçš„ç©ºé—´ã€‚</p><blockquote><p>building up a stack of recursive calls consumes memory temporarily, and the stack is limited in seze.</p></blockquote><h3><span id="common-mistakes-in-recursive-implementations">common mistakes in recursive implementations</span><a href="#common-mistakes-in-recursive-implementations" class="header-anchor">Â¶</a></h3><ul><li>base case missing</li><li>recursive step fails to reduce to a smaller subproblem</li><li>aliases to mutable data structures are inadvertently shared, mutated among the recursive calls.</li></ul><p>Bright side: fail faster. StackOverflowError.</p>]]></content>
      
      
      <categories>
          
          <category> software engineering </category>
          
          <category> 6.031 software construction </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SC specifications</title>
      <link href="/sg/2021/09/03/SC_specifications/"/>
      <url>/sg/2021/09/03/SC_specifications/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#r6-specifications">R6: specifications</a><ul><li><a href="#behavioral-equivalence">Behavioral equivalence</a></li><li><a href="#specifications">Specifications</a></li><li><a href="#do-not-allow-null-references">do not allow null references</a></li><li><a href="#include-emptiness">Include emptiness</a></li><li><a href="#testing">~ testing</a></li><li><a href="#mutating">~ mutating</a></li><li><a href="#exceptions">exceptions</a></li></ul></li><li><a href="#r7-design-specifications">R7: design specifications</a><ul><li><a href="#deterministic-vs-underdetermined-specs">Deterministic vs. underdetermined specs</a></li><li><a href="#declarative-vs-operational-specs">Declarative vs. operational specs</a></li><li><a href="#stronger-vs-weaker-specs">stronger vs. weaker specs</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="r6-specifications">R6: specifications</span><a href="#r6-specifications" class="header-anchor">Â¶</a></h2><h3><span id="behavioral-equivalence">Behavioral equivalence</span><a href="#behavioral-equivalence" class="header-anchor">Â¶</a></h3><p>whether it could be substituted with one implementation for the other</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="type">int</span> <span class="title function_">find</span><span class="params">(...)</span>&#123;</span><br><span class="line"><span class="comment">//requires: ........</span></span><br><span class="line"><span class="comment">//effects:</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3><span id="specifications">Specifications</span><a href="#specifications" class="header-anchor">Â¶</a></h3><h4><span id="why">why</span><a href="#why" class="header-anchor">Â¶</a></h4><ul><li>Acts as firewall</li><li>Connect / separate client and implementer<ul><li>Client: input, output</li><li>Implementater: computation<ul><li>Local variables, private fields, implementation details</li></ul></li></ul></li></ul><h4><span id="structure">structure</span><a href="#structure" class="header-anchor">Â¶</a></h4><ul><li>Composition<ul><li>method signature</li><li>requires clause -&gt; additional restrictions on the parameters<ul><li>type</li><li>interactions between parameters</li></ul></li><li>effects clause -&gt; return value, exceptions, and other effects of the method<ul><li>How the return value relates to the inputs</li><li>exceptions</li><li>Whether and how objects are mutated</li></ul></li></ul></li><li>precondition and postcondition of the method</li><li>Overall structure:<ul><li>if the precondition holds, then the postcondition must hold when the method completes</li><li>Else, free to do anything</li></ul></li></ul><h4><span id="in-java">in java</span><a href="#in-java" class="header-anchor">Â¶</a></h4><ul><li>javadoc</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@param p</span><br><span class="line">@param q</span><br><span class="line">@return</span><br><span class="line">@throw</span><br></pre></td></tr></table></figure><h3><span id="do-not-allow-null-references">do not allow null references</span><a href="#do-not-allow-null-references" class="header-anchor">Â¶</a></h3><ul><li>syntactically illigal<ul><li>primitives cannot be null</li><li>Some methods or fields: length()</li></ul></li><li>Null values are vague<ul><li>Disallowed in parameter and return values unless spec says otherwise</li><li>use something other than null makes your meaning clear</li><li>Fail fast: null can overlook many kinds of bugs</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Map.get(key) <span class="keyword">return</span> when the key is not found in the map: </span><br><span class="line">Optional&lt;T&gt;</span><br></pre></td></tr></table></figure><h3><span id="include-emptiness">Include emptiness</span><a href="#include-emptiness" class="header-anchor">Â¶</a></h3><ul><li><p>difference between null and emptiness</p></li><li><p>empty values are alway allowed as parameter or return values.</p></li></ul><h3><span id="testing">~ testing</span><a href="#testing" class="header-anchor">Â¶</a></h3><ul><li>Black box tests need follow specification</li><li>Glass box test must follow spec too.</li></ul><h3><span id="mutating">~ mutating</span><a href="#mutating" class="header-anchor">Â¶</a></h3><ul><li>describe side-effects-changes to mutable objects-in the postcondition</li><li>Mutation is disallowed unless stated otherwise</li></ul><h3><span id="exceptions">exceptions</span><a href="#exceptions" class="header-anchor">Â¶</a></h3><ul><li>Function<ul><li>Signaling bugs</li><li>for special results</li></ul></li><li>checked and unchecked exceptions</li><li>exception hierarchy</li><li>declare exceptions in specs</li></ul><h2><span id="r7-design-specifications">R7: design specifications</span><a href="#r7-design-specifications" class="header-anchor">Â¶</a></h2><p>Three dimensions for comparing specs</p><ul><li>deterministic</li><li>declarative</li><li>strong</li></ul><h3><span id="deterministic-vs-underdetermined-specs">Deterministic vs. underdetermined specs</span><a href="#deterministic-vs-underdetermined-specs" class="header-anchor">Â¶</a></h3><ul><li>deterministic: one final state for the same input.</li><li>undetermined: multiple valid outputs for the same input<ul><li>different from Nondeterministic, which means same program with the same inputs can generate different outcomes</li></ul></li></ul><h3><span id="declarative-vs-operational-specs">Declarative vs. operational specs</span><a href="#declarative-vs-operational-specs" class="header-anchor">Â¶</a></h3><ul><li>Operational : steps that the method performs</li><li>Delcarative : properties of the final outcome, and how it related to the initial state</li></ul><h3><span id="stronger-vs-weaker-specs">stronger vs. weaker specs</span><a href="#stronger-vs-weaker-specs" class="header-anchor">Â¶</a></h3><p>a spec S2 is stronger than a spec S1 if the set of implementations that satisfy S2 is a strict subset of those that match S1.</p><blockquote><p>Rule: S2 is stronger than a spec S1 iff</p><ul><li>S2â€™s precondition is weaker than or equal to S1.<ul><li>S2â€™s input is less, placing fewer demands on a client</li></ul></li><li>S2â€™s postcondition is stronger than or equal to S1.<ul><li>Make more promises to the client</li></ul></li></ul></blockquote>]]></content>
      
      
      <categories>
          
          <category> software engineering </category>
          
          <category> 6.031 software construction </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>SC code review</title>
      <link href="/sg/2021/09/01/SC_code_review/"/>
      <url>/sg/2021/09/01/SC_code_review/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#r4-code-review">R4: code review</a><ul><li><a href="#code-review">code review</a></li><li><a href="#dry-don-t-repeat-yourself">DRY: donâ€™t repeat yourself</a></li><li><a href="#comments-where-needed">Comments where needed</a></li><li><a href="#fail-fast">Fail fast</a></li><li><a href="#avoid-magic-numbers">avoid magic numbers</a></li><li><a href="#one-purpose-for-each-variable">one purpose for each variable</a></li><li><a href="#use-good-names">use good names</a></li><li><a href="#use-whitespace-to-help-the-reader">Use whitespace to help the reader</a></li><li><a href="#don-t-use-global-variables">donâ€™t use global variables</a></li><li><a href="#methods-should-return-results-not-print-them">Methods should return results, not print them</a></li><li><a href="#avoid-special-case-code">avoid special-case code</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="r4-code-review">R4: code review</span><a href="#r4-code-review" class="header-anchor">Â¶</a></h2><ul><li>code review: read and discuss code written by others</li><li>General principles of good coding: things you can look for in every code review(ä¸ç¼–ç¨‹è¯­è¨€å’Œç›®çš„æ— å…³çš„)</li></ul><h3><span id="code-review">code review</span><a href="#code-review" class="header-anchor">Â¶</a></h3><ul><li>Purpose<ul><li>Improve the code</li><li>improve the programmer<ul><li>æ–°è¯­è¨€ç‰¹æ€§ï¼Œé¡¹ç›®è®¾è®¡çš„æ”¹å˜ï¼Œits coding standards, new techniquesâ€¦</li></ul></li></ul></li><li>Style standards: é™¤äº†ç‰¹å®šè¯­è¨€çš„è§„èŒƒï¼Œæ¯”å¦‚google C++/java/â€¦ style guideï¼Œè¿˜æœ‰è®¸å¤šéƒ¨åˆ†å€¼å¾—å®¡è§†<ul><li>spec, ADT with representation invariants, concurrency and thread safety</li><li>be a team player: åœ¨å†™pjæ—¶è€ƒè™‘åˆ«äººå·²ç»å†™äº†çš„éƒ¨åˆ†çš„é£æ ¼</li></ul></li></ul><h3><span id="dry-don-t-repeat-yourself">DRY: donâ€™t repeat yourself</span><a href="#dry-don-t-repeat-yourself" class="header-anchor">Â¶</a></h3><ul><li>avoid duplication</li></ul><h3><span id="comments-where-needed">Comments where needed</span><a href="#comments-where-needed" class="header-anchor">Â¶</a></h3><h4><span id="gt-where-to-comment">&gt; where to comment</span><a href="#gt-where-to-comment" class="header-anchor">Â¶</a></h4><ul><li>Specifications document assumptions</li><li>Specify the provenance of code that was copied from elsewhere<ul><li>Reason<ul><li>Copyright</li><li>Answers change fast</li></ul></li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//function: read a web page into a str</span></span><br><span class="line"><span class="comment">//see web:http://...</span></span><br><span class="line">........</span><br></pre></td></tr></table></figure><ul><li>Obscure code<ul><li>ä¸€ä¸²è«åå…¶å¦™çš„å…¬å¼</li></ul></li></ul><h4><span id="gt-where-not-comment">&gt; where not comment</span><a href="#gt-where-not-comment" class="header-anchor">Â¶</a></h4><ul><li>direct transliterations of code into English<ul><li>assume readers at least knows java</li></ul></li></ul><h3><span id="fail-fast">Fail fast</span><a href="#fail-fast" class="header-anchor">Â¶</a></h3><p>code should reveal its bugs earlier as possible</p><ul><li>static checking</li><li>Dynamic checking</li><li>â€¦</li></ul><h3><span id="avoid-magic-numbers">avoid magic numbers</span><a href="#avoid-magic-numbers" class="header-anchor">Â¶</a></h3><p>Magic numbersï¼šä¸€ä¸²è«åå…¶å¦™çš„æ•°å­—</p><ul><li>do not hardcode; reason<ul><li>a number is less readable than a name</li><li>constants may need to change in the future</li><li>Constants may be dependent on other constants</li></ul></li><li>use named constants</li><li>When there are many magic numbers, treat them as data and consider to store in data structures.<ul><li>Easy to understand: uncover the hidden relationship.  å­˜å‚¨åœ¨æŸæ•°æ®ç»“æ„ä¸­å¹¶ä¸èƒ½ä¿è¯è¿™ä¸€ç‚¹ã€‚</li><li>Ex: 0, used as an integer value,ä½œä¸ºè®¡æ•°çš„æœ€å°å€¼æˆ–identity value in addition; symbolically, magic number.</li></ul></li></ul><h3><span id="one-purpose-for-each-variable">one purpose for each variable</span><a href="#one-purpose-for-each-variable" class="header-anchor">Â¶</a></h3><p>Donâ€™t reuse variables/parameters. (æˆ‘ä¹‹å‰è¿˜ä¸å¤ªä¹ æƒ¯ç”¨å¤ªå¤šå˜é‡å)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//final: variables can&#x27;t be reassigned.</span></span><br></pre></td></tr></table></figure><h3><span id="use-good-names">use good names</span><a href="#use-good-names" class="header-anchor">Â¶</a></h3><ul><li><p>what to do</p><ul><li>follow the lexical naming conventions of the language<ul><li>Python/java: Classes, setVariableName(java), set_variable_name(python)</li><li>Global constants(public static final): use capitalization in java, ALL_CAPS_WITH_UNDERSCORES</li><li>Local variablesL use camelCaseNames like secondsPerDay</li></ul></li><li>method name: verb phrases</li><li>Variable, class names: noun phrases</li></ul></li><li><p>what not to do</p><ul><li>No abbr/single-character variable names except conventional one</li></ul></li></ul><h3><span id="use-whitespace-to-help-the-reader">Use whitespace to help the reader</span><a href="#use-whitespace-to-help-the-reader" class="header-anchor">Â¶</a></h3><ul><li>donâ€™t use tab for indentation; use space instead<ul><li>why: tab represents numbers of spaces in different languages</li><li>åªè¦å°†tabè®¾ç½®æˆç›¸åº”çš„ç©ºæ ¼å°±è¡Œäº†ã€‚</li></ul></li></ul><h3><span id="don-t-use-global-variables">donâ€™t use global variables</span><a href="#don-t-use-global-variables" class="header-anchor">Â¶</a></h3><ul><li>Global variable: accessible and changeable from anywhere in the program<ul><li>final: unchanged</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ... </span><br></pre></td></tr></table></figure><ul><li>Kinds of variables<ul><li>local variable: inside a method<ul><li>Disappear when the method returns</li></ul></li><li>instance variable: inside an instance of an object (belong to certain class instance)<ul><li>created when calling new object; disappears when object is no longer accessible</li><li>each object instance has its own instance variables</li><li>åˆ«åï¼šfield, property, member variable, attribute</li></ul></li><li>Static variable: associated with a class(belong to class itself)</li></ul></li></ul><h3><span id="methods-should-return-results-not-print-them">Methods should return results, not print them</span><a href="#methods-should-return-results-not-print-them" class="header-anchor">Â¶</a></h3><ul><li>except debugging output: aim to debugging the design</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.out <span class="comment">//sends result to the console</span></span><br></pre></td></tr></table></figure><h3><span id="avoid-special-case-code">avoid special-case code</span><a href="#avoid-special-case-code" class="header-anchor">Â¶</a></h3><ul><li>Resits to handle special cases separately<ul><li>Special cases add complexity and hide possible bugs</li><li>Special cases is not exactly related to overall performance.</li></ul></li><li>think for the general case.<ul><li>Broader, general-case code pay off.</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> software engineering </category>
          
          <category> 6.031 software construction </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>How to speak</title>
      <link href="/sg/2021/08/03/speak/"/>
      <url>/sg/2021/08/03/speak/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#intro">intro</a></li><li><a href="#how-to-start">How to start</a><ul><li><a href="#4-samples">4 samples</a></li></ul></li><li><a href="#the-tools">the tools</a><ul><li><a href="#time-and-place">Time and place</a></li><li><a href="#boards-and-props">Boards and props</a></li><li><a href="#projections">projections</a></li></ul></li><li><a href="#informing">informing</a><ul><li><a href="#promise">promise</a></li><li><a href="#inspiration">inspiration</a></li><li><a href="#how-to-think">how to think</a></li></ul></li><li><a href="#persuading">persuading</a><ul><li><a href="#job-talks">Job talks</a></li><li><a href="#getting-famous">getting famous</a></li></ul></li><li><a href="#how-to-stop">How to stop</a><ul><li><a href="#final-slide">final slide</a></li><li><a href="#final-words">final words</a></li></ul></li><li><a href="#shi-li">å®ä¾‹</a></li></ul><!-- tocstop --></div><p>ä¹‹å‰æœ‰çœ‹è¿‡å‡ èŠ‚Professor Winstonçš„AIè¯¾ï¼Œæ„Ÿè§‰æ˜¯ä¸ªå¾ˆæœ‰çƒ­æƒ…æ¯”è¾ƒä¸¥è‚ƒçš„è€å¸ˆï¼Œæ²¡æƒ³åˆ°æ•™æˆåœ¨19å¹´å°±è¿‡ä¸–äº†ã€‚ä»–çš„è¿™ä¸ªæ¼”è®²ä¸»è¦æ˜¯åœ¨æ•™æˆ‘ä»¬å¦‚ä½•æ„å»ºè‡ªå·±ç»™å‡ºtalkæ¶æ„ï¼Œè€Œä¸åªæ˜¯å•çº¯çš„è®²æ–¹æ³•ï¼Œè¿™æ ·çš„æ€è€ƒæ–¹å¼ä¹Ÿå¾ˆinspringã€‚</p><h2><span id="intro">intro</span><a href="#intro" class="header-anchor">Â¶</a></h2><ul><li><p>å®ç°äººç”Ÿä»·å€¼çš„é‡è¦æ€§ï¼šSpeak &gt; write &gt; quality of ideas</p></li><li><p>Quality = f (Knowledge, Practice, talent)</p><p>knowledge and practice weigh more than talent</p></li><li><p>æœ¬æ¼”è®²é¡ºåºï¼šExample to techniques</p></li></ul><h2><span id="how-to-start">How to start</span><a href="#how-to-start" class="header-anchor">Â¶</a></h2><p>Empowerment promise : å‘Šè¯‰è§‚ä¼—ä¼šå­¦åˆ°ä»€ä¹ˆï¼Œè¿™ä¸ªæ¼”è®²çš„ç›®æ ‡ï¼Œå¯ä»¥è¾¾æˆä»€ä¹ˆ</p><h3><span id="4-samples">4 samples</span><a href="#4-samples" class="header-anchor">Â¶</a></h3><ul><li>Cycle: repetitions to keep well-informed</li><li>build fence: one good example can serve the purpose</li><li>Verbal punctuation: time stamps, æ˜“äºä¸“æ³¨å’Œå›é¡¾</li><li>Questionï¼šåˆé€‚çš„é—®é¢˜ï¼Œä¸è¦å¤ªéš¾æˆ–å¤ªç®€å•ï¼Œåœé¡¿7så·¦å³</li></ul><h2><span id="the-tools">the tools</span><a href="#the-tools" class="header-anchor">Â¶</a></h2><p>Empathetic mirroring: äººä¼šå‡è®¾è‡ªå·±å¤„äºè¿™æ ·çš„çŠ¶å†µåšä»€ä¹ˆ</p><h3><span id="time-and-place">Time and place</span><a href="#time-and-place" class="header-anchor">Â¶</a></h3><p>ç±»ä¼¼study areaï¼Œä»€ä¹ˆæ ·çš„æ—¶é—´å’Œç¯å¢ƒåšæ€æ ·çš„äº‹ã€‚talk å’Œ studyåŒç†</p><ul><li>well lit</li><li>cased</li><li>Populated</li></ul><h3><span id="boards-and-props">Boards and props</span><a href="#boards-and-props" class="header-anchor">Â¶</a></h3><p>æ•™æˆè®²äº†é»‘æ¿å’Œå¹»ç¯ç‰‡çš„å¯¹æ¯”ï¼Œä»¥åŠä»–è®¤ä¸ºé»‘æ¿æ˜¯æ›´é€‚åˆå­¦ç”Ÿç†è§£å­¦ä¹ çš„æ–¹å¼ã€‚ä»¥åŠè¿ç”¨é“å…·æ•™å­¦èƒ½ç»™äººæ›´æ·±åˆ»çš„å°è±¡ï¼Œè¿™æ˜¯å•çº¯çš„slideä¸èƒ½æ¯”è¾ƒçš„ã€‚</p><h3><span id="projections">projections</span><a href="#projections" class="header-anchor">Â¶</a></h3><p>å¦‚ä½•åšpptï¼Œå­—ä½“ï¼Œé£æ ¼</p><h2><span id="informing">informing</span><a href="#informing" class="header-anchor">Â¶</a></h2><h3><span id="promise">promise</span><a href="#promise" class="header-anchor">Â¶</a></h3><p>just like empowerment promise</p><h3><span id="inspiration">inspiration</span><a href="#inspiration" class="header-anchor">Â¶</a></h3><p>How to get inspired?</p><p>by example: å½“æœ‰äººå¯¹ä»–ä»¬æ‰€åšçš„äº‹æƒ…è¡¨ç°å‡ºæ¿€æƒ…æ—¶ï¼Œèº«è¾¹çš„äººå°±ä¼šå—é¼“èˆ</p><h3><span id="how-to-think">how to think</span><a href="#how-to-think" class="header-anchor">Â¶</a></h3><p>how to get people know how to think?</p><p>people are story-telling animals: æ•…äº‹ï¼Œæ ¹æ®æ•…äº‹æå‡ºçš„é—®é¢˜ï¼Œmechanism provided to analyze, ways to organizeï¼Œways to evaluate how reliable a story isâ€¦</p><h2><span id="persuading">persuading</span><a href="#persuading" class="header-anchor">Â¶</a></h2><h3><span id="job-talks">Job talks</span><a href="#job-talks" class="header-anchor">Â¶</a></h3><p>finish in 5 minutes</p><ul><li>vision<ul><li>problem</li><li>Approach</li></ul></li><li>Done sth</li><li>Contributions</li></ul><h3><span id="getting-famous">getting famous</span><a href="#getting-famous" class="header-anchor">Â¶</a></h3><p>why people want to be famous?</p><p>because they want their ideas valued.</p><img src="/sg/2021/08/03/speak/sc.png" class title="æˆªå±2021-08-03 ä¸‹åˆ12.29.35"><h2><span id="how-to-stop">How to stop</span><a href="#how-to-stop" class="header-anchor">Â¶</a></h2><h3><span id="final-slide">final slide</span><a href="#final-slide" class="header-anchor">Â¶</a></h3><p>contribution slide: show your work</p><p>æŠŠè‡´è°¢äººå‘˜æ¸…å•æ”¾åˆ°first slide</p><h3><span id="final-words">final words</span><a href="#final-words" class="header-anchor">Â¶</a></h3><p>donâ€™t say thank you or thank you for listening. è™½ç„¶å¾ˆå¤šäººéƒ½è¿™æ ·åšï¼Œä½†è¿™å¹¶ä¸æ˜¯æ­£ç¡®çš„ï¼Œè¿™ä¼šè®©ä½ çš„å‘è¨€è½¯å¼±ã€‚</p><p>Rather, salute the audience.</p><ul><li>How much you value your time at a place</li><li>How much you look forward to coming back</li><li>â€¦</li></ul><h2><span id="shi-li">å®ä¾‹</span><a href="#shi-li" class="header-anchor">Â¶</a></h2><blockquote><p>1ï¼‰åœ¨åŸºæœ¬çš„flowä¸Šèƒ½æ¯”è¾ƒå¿«çš„ç†é¡ºå‡ºä¸€ä¸ªslides draftï¼ˆæœ€åˆåˆšå­¦ä¹ çš„æ—¶å€™ï¼Œæˆ‘ä¼šå»çœ‹ä¸€ä¸‹è·Ÿæˆ‘work flowç±»ä¼¼çš„äººçš„slidesï¼‰ã€‚æ¯ä¸€é¡µslidesåŸºæœ¬éƒ½ä¼šç”¨å¾ˆå°‘çš„å­—ï¼Œæç‚¼é‡ç‚¹ï¼Œå¤šç”¨å›¾å’Œè¯´æ¥illustrateã€‚</p><p>2ï¼‰æœ‰äº†draftä»¥åï¼Œåœ¨å‡†å¤‡æ­£å¼æ¼”è®²çš„æ—¶å€™ï¼Œæˆ‘ä¼šæŠŠæ¯ä¸€é¡µè¦è®²çš„ä¸œè¥¿å…¨éƒ½å†™ä¸‹æ¥ï¼šæ¯ä¸€é¡µåŸºæœ¬è¦åŒ…å«transitionï¼Œbasic contentå’Œsummary/takeawaysã€‚ç„¶åä¼šæŠŠè¿™ä¸ªæ‹¿ç»™è€æ¿çœ‹ï¼ˆæˆ–è€…native speakerï¼Ÿï¼‰ï¼Œä»–çš„ä¿®æ”¹ä¼šè®©æˆ‘åœ¨è¯­è¨€çš„ç®€æ˜å’Œå‡†ç¡®æ€§ä¸Šæœ‰æé«˜ï¼Œä¸‹æ¬¡å°±ä¼šç”¨ç±»ä¼¼çš„å¥å¼ã€‚</p><p>3ï¼‰å‡†å¤‡å¥½äº†æ¼”è®²ç¨¿ä»¥åå°±å¼€å§‹ä¸€éä¸€éçš„ç»ƒã€‚å¦‚æœæ˜¯è‹±æ–‡æ¼”è®²çš„è¯ï¼Œæœ‰æœºä¼šå¯ä»¥æ‰¾ä¸ªnative speakerï¼Œè®©ä»–è¯»å‡ é¡µslideså½•ä¸‹æ¥ï¼Œå­¦ä¹ ä»–çš„æŠ‘æ‰¬é¡¿æŒ« (æ¯”å¦‚åœ¨for exampleä»¥åï¼Œé€šå¸¸æ¯ä¸ªçŸ­è¯­çš„éŸ³è°ƒéƒ½ä¼šæœ‰ç‰¹åˆ«å£°è°ƒï¼Œä¸”çŸ­è¯­é—´éƒ½å¾ˆç´§å‡‘)ã€‚</p><p>è¿™æ ·å‡†å¤‡è¿‡ä¸€ä¸¤æ¬¡ä»¥åå°±ä¼šå¾ˆæœ‰æé«˜ã€‚å¹³æ—¶ä¸å¤ªé‡è¦çš„presentationä¹Ÿä¸å†ç”¨å†™æ¼”è®²ç¨¿ï¼Œå› ä¸ºå„ç§transitionæˆ–è€…å¥å¼å·²ç»æ…¢æ…¢å­¦ä¼šäº†ã€‚</p><p>&lt;women in tech å°ç»„&gt;</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
          <category> skill </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>é˜¿çº³é‡‘</title>
      <link href="/sg/2021/07/31/starwars/"/>
      <url>/sg/2021/07/31/starwars/</url>
      
        <content type="html"><![CDATA[<p>Star warså’ŒStar Trek ç³»åˆ—ä¸€æ ·ä½œä¸ºç”Ÿæ´»å¤§çˆ†ç‚¸ä¸»è§’çš„çˆ±å¥½ï¼Œæˆ‘æ—©å°±æœ‰æ‰€è€³é—»ã€‚ä½†æ˜¯æˆ‘ä¹‹å‰ä¸€ç›´ä»¥ä¸ºåªæœ‰geekæ‰ä¼šå–œæ¬¢è¿™ç§ç±»å‹çš„ï¼Œä¸€ç›´æ²¡æœ‰çœ‹ã€‚ç›´åˆ°å¶ç„¶çœ‹åˆ°æ˜Ÿçƒå¤§æˆ˜ï¼šæ®‹æ¬¡å“ï¼ŒåŠ¨ç”»æ•ˆæœå±•ç°å‡ºçš„å®‡å®™æœ‰ä¸€ç§çœŸå®çš„æµ©ç€šæ„Ÿï¼Œè€Œæ•…äº‹ä¹Ÿå¾ˆæœ‰æ„æ€ã€‚äºæ˜¯æˆ‘åˆå¼€å§‹çœ‹èƒŒæ™¯ä¸­çš„å…‹éš†äººæˆ˜äº‰ï¼Œçœ‹åˆ°ä¸­é€”è¿˜è¡¥äº†å‰ä¼ ä¸‰éƒ¨æ›²ï¼Œæ­£ä¼ åªæ˜¯ç•¥çœ‹äº†ä¸‹ã€‚</p><p>åœ¨å…¨ç³»åˆ—ä¸­æˆ‘æœ€å–œæ¬¢çš„äººç‰©è¿˜æ˜¯é˜¿çº³é‡‘Â·å¤©è¡Œè€…ã€‚</p><p>é˜¿çº³é‡‘åœ¨å°æ—¶å€™å°±å‘å¾€èµ°è¿‡æ¯ä¸€ä¸ªæ˜Ÿçƒï¼Œçœ¼å‰æµ©ç€šæ— å çš„æ˜Ÿç©ºæ˜¾å¾—ç¥ç§˜è€Œåˆä¸å¯æ§åˆ¶ã€‚é˜¿çº³é‡‘ä¸€ç›´å°†äº²äººçš„é‡è¦æ€§æ”¾åœ¨ä»»ä½•å‡†åˆ™ä¹‹ä¸Šï¼Œä»–çš„æ¯äº²ï¼Œå¦»å­ï¼Œå¾’å¼Ÿæ˜¯ä»–æœ€é‡è¦çš„äººã€‚å½“ä»–çš„æ¯äº²æ„å¤–æ—¶ä»–æ€äº†ç»‘æ¶å¥¹çš„ä¸€æ•´ä¸ªéƒ¨æ—çš„äººï¼Œé¢„è§å¦»å­ä¼šéš¾äº§è€Œæ­»æ—¶åˆæƒ³æ‰“ç ´è¿™å‘½è¿å³ä½¿å› æ­¤è¿›å…¥åŸåŠ›çš„é»‘æš—é¢æˆäº†é»‘æš—å°Šä¸»çš„å­¦å¾’è¾¾æ–¯Â·ç»´è¾¾ã€‚å…‹éš†äººæˆ˜äº‰ç³»åˆ—ä¸°æ»¡äº†é˜¿çº³é‡‘çš„è¡€è‚‰ã€‚ä»–æ˜¯ç‹¬ç‰¹çš„ç»åœ°æ­¦å£«ï¼Œé™¤äº†å“è¶Šçš„å†›äº‹èƒ½åŠ›å’Œæ€è€ƒé—®é¢˜çš„çµæ´»æ€§ï¼Œä»–æœ‰è‡ªå·±æ‰€ç›¸ä¿¡çš„ã€‚</p><p>é˜¿çº³é‡‘çš„æ‚²å‰§æºäºä»–çš„æ€§æ ¼å¦‚æ­¤ï¼Œç”±ç¯å¢ƒæ‰€æ¨åŠ¨ã€‚ä»–çš„å¾’å¼Ÿé˜¿ç´¢å¡è¢«è¯¬é™·å…¥ç‹±å¹¶è¢«å‰¥å¤ºç»åœ°å­¦å¾’èº«ä»½ï¼Œç›´åˆ°ä»–æ‰¾å›è¯æ®åç»åœ°å§”å‘˜ä¼šä¹Ÿæœªåœ¨æ­¤äº‹ä»¶ä¸Šæ‰¿è®¤è¿‡å¤±ï¼Œåªæ˜¯ç”¨ç»åœ°çš„è¯•ç‚¼æ¥æ©é¥°æ›¾è¡¨ç°å‡ºå¯¹é˜¿ç´¢å¡çš„ä¸ä¿¡ä»»ã€‚é˜¿çº³é‡‘å¯¹ç»åœ°å§”å‘˜ä¼šçš„ä¿¡ä»»åœ¨å…‹éš†äººæˆ˜äº‰æœªç»“æŸå‰å°±å·²ç»ä¸€ç‚¹ç‚¹çš„ä¸§å¤±ã€‚è€Œåœ¨å§”å‘˜ä¼šå’Œè®®é•¿çš„äº‰æ–—ä¸­ï¼Œä»–èº«ä¸ºç»åœ°ä¸€å‘˜å´å› ä¸ºè®®é•¿å¯¹ä»–å±•ç¤ºå‡ºçš„ä¿¡ä»»è€Œå¤±å»å§”å‘˜ä¼šçš„ä¿¡ä»»ï¼Œå´è¦æ±‚ä»–å……å½“é—´è°æ¥ç›‘è§†è®®é•¿çš„æ´»åŠ¨ï¼Œå³ä½¿è¿™æœ‰è¿ç»åœ°å®ˆåˆ™ã€‚åœ¨é˜¿çº³é‡‘å‘ç°äº†è®®é•¿çš„æœ€ç»ˆèº«ä»½å‘ŠçŸ¥äº†å§”å‘˜ä¼šåï¼Œä»–ä»¬ä»ç„¶å°†ä»–å­¤ç«‹åœ¨æŠ“æ•è®®é•¿çš„è¡ŒåŠ¨ä¹‹å¤–ã€‚ä»–æ³æ±‚æ¸©æœç•™ä¸‹è®®é•¿çš„æ€§å‘½å› ä¸ºè¿™æ˜¯å”¯ä¸€æ‹¯æ•‘å¦»å­ç”Ÿå‘½çš„æœºä¼šæ²¡æœ‰å¾—åˆ°æ¸©æœçš„ä»»ä½•å›åº”å’Œè§£é‡Šï¼Œäºæ˜¯ä»–ä¹Ÿåšå‡ºäº†è‡ªå·±çš„é€‰æ‹©ã€‚ä»–ä¸€ç›´æ˜¯ä¸ªå†³ç»äººã€‚é˜¿çº³é‡‘æŠ•å‘é»‘æš—é¢æœ€åˆæ˜¯ä¸ºäº†æ‹¯æ•‘çˆ±äººï¼Œä½†åœ¨çˆ±äººæ­»å»å’Œå¾’å¼Ÿç¦»å¼€åå½»åº•ä¸èƒ½å›å¤´ã€‚åŠ›é‡è®©ä»–è¿·å¤±åœ¨å¯¹æƒåŠ›çš„è¿½é€å’Œç»Ÿæ²»æ•´ä¸ªé“¶æ²³ç³»çš„å¹»æƒ³ä¸­ã€‚</p><p>å…±å’Œå›½å¤±å»æ°‘ä¸»ç„¶åå˜æˆå¸å›½çš„è¿‡ç¨‹å§‹ç»ˆæœ‰äº›ä¸å¯æ€è®®ï¼Œä¹Ÿè®©æˆ‘æƒ³å»äº†è§£æ›´å¤šä»€ä¹ˆæ‰æ˜¯æ°‘ä¸»ã€‚å…±å’Œå›½åœ¨å…‹éš†äººæˆ˜äº‰æœªå¼€å§‹æ—¶å·²ç»ç”±äºè…è´¥è€Œåœ¨ç»æµï¼Œæ”¿æ²»ï¼Œå†›äº‹ç­‰æ–¹é¢æš´éœ²å‡ºå„ç§å¼±ç‚¹ï¼Œè€Œä¹‹ååœ¨å…±å’Œå›½è®®ä¼šè®®é•¿å¸•å°”å¸•å»·åœ¨æš—ä¸­æ“æ§ä¸‹ï¼Œé€šè¿‡å’Œåˆ†ç¦»åŠ¿åŠ›çš„æˆ˜äº‰ä¸€æ­¥æ­¥å°†æƒåŠ›é›†ä¸­åœ¨è‡ªå·±æ‰‹é‡Œï¼Œæœ€åç‹¬è£å¸å›½æˆç«‹ã€‚è™½ç„¶ç»åœ°å§”å‘˜ä¼šè¡¨é¢ä¸Šæ˜¯ä¸ºäº†é˜»æ­¢æœ€é«˜è®®é•¿çš„é˜´è°‹è€Œæ„å›¾åœ¨è¿‡æ¸¡æœŸæŒæ§è®®ä¼šï¼Œä½†ç»åœ°åˆ¶åº¦çš„åƒµåŒ–å’Œå…±å’Œå›½ä¸€æ ·éš¾ä»¥æŒ½å›ï¼Œä»–ä»¬ä¸å…è®¸è¢«æŒ‘æˆ˜æƒå¨åŒæ—¶åˆå›ºæ‰§å·±è§ï¼Œæ²¡æœ‰è§£é‡Šçš„ç©ºé—´ã€‚æ–°å¸å›½åœ¨æ—©æœŸæœªè¾œè´Ÿäººæ°‘æ¸´æœ›å’Œå¹³çš„æœŸæœ›ï¼Œç»“æŸäº†é“¶æ²³ç³»ä¸­ç¯å’Œå¤–ç¯çš„æˆ˜äº‰ã€‚ä½†åœ¨æƒåŠ›é›†ä¸­åï¼Œå¼ºå¤§çš„å†›äº‹åŠ›é‡æˆä¸ºäº†å¸å›½æ§åˆ¶å„æ˜Ÿç³»çš„æ­¦å™¨ï¼Œå¸å›½ä¸å†éœ€è¦äººæ°‘çš„æ”¯æŒï¼Œå‡­å€Ÿå¨æ…‘å°±èƒ½ä½¿ä¹‹è‡£æœï¼Œè€Œå¸å›½è®®ä¼šçš„è§£æ•£åˆ™æ ‡å¿—ç€æ°‘ä¸»çš„å®Œå…¨ä¸§å¤±ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> read </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>å†›è®­</title>
      <link href="/sg/2021/07/19/exercise/"/>
      <url>/sg/2021/07/19/exercise/</url>
      
        <content type="html"><![CDATA[<p>å¹³å‡¡æ— å¥‡çš„é‡å¤–å®ä¹ å’Œå†›è®­ã€‚</p><h3><span id="e-mei">å³¨çœ‰</span><a href="#e-mei" class="header-anchor">Â¶</a></h3><p>å»é‡‘é¡¶çš„ç¬¬ä¸€ä¸ªæ„Ÿè§‰å°±æ˜¯å†·ã€‚æ‰©å†™ä¸€ä¸‹å°±æ˜¯ï¼šå½“ç«™åœ¨3000ç±³æµ·æ‹”é«˜çš„å±±æ¶§è¾¹ï¼Œæ°´é›¾è’¸è…¾å‘ä¸Šæµ®åˆ°è„¸ä¸Šæ„Ÿè§‰å¾ˆæ¸…çˆ½ã€‚</p><img src="/sg/2021/07/19/exercise/IMG_4078.jpeg" class title="IMG_4078"><p>é‡å¤–å®ä¹ å…¶å®æ˜¯åœ¨å³¨çœ‰è¾¹ç¼˜åœ°å¸¦çš„æŸå†œå®¶ä¹é™„è¿‘è¿›è¡Œçš„ï¼Œå…­å¤©å†…æˆ‘ä»¬å®Œæˆäº†åˆ¶ä½œæ¤ç‰©æ ‡æœ¬ï¼ŒåŠ¨ç‰©æ ‡æœ¬å’Œæ ·æ–¹ç»Ÿè®¡ã€‚</p><p>ï¼ˆ7.4:æ˜†è™«æ ‡æœ¬å®šç§ï¼‰ä¸ºäº†æ¶ˆé™¤å­¤ç‹¬æ„Ÿï¼Ÿå¥½åƒæˆ‘æ€»æ˜¯éœ€è¦åœ¨ä¸€ä»¶äº‹ä¸Šå¯»æ±‚æ„ä¹‰ã€‚ä½†æ˜¯æˆ‘å¹¶ä¸éœ€è¦æ— ä¸­ç”Ÿä¹‰ã€‚<br>ä»å‡å°‘é‡å¤æ€§å·¥ä½œçš„è§’åº¦ï¼Œè¿™é¡¹ä»»åŠ¡å¯ä»¥ä¹Ÿåº”è¯¥åšçš„ä¼˜åŒ–æ˜¯ï¼šå»ºç«‹ä¸€ä¸ªæ˜†è™«ï¼Œæ¤ç‰©çš„å¤§å‹æ•°æ®åº“ï¼Œåˆ©ç”¨è¿‡å¾€Nå¹´é‡å¤–åšæ ‡æœ¬çš„æ•°æ®ä½œä¸ºåŸå§‹æ•°æ®ã€‚å³ä½¿è¿™ä¸€ç‚¹åšä¸åˆ°ï¼Œé‚£ä¹ˆæŠŠæŸ¥æ‰¾æ˜†è™«çš„å›¾é‰´çš„ä¹¦ç±åˆ¶ä½œæˆå¯æœç´¢çš„pdfæ ¼å¼ä¹Ÿå¥½å¾ˆå¤šå§ã€‚è¿˜æœ‰åœ¨ä»»åŠ¡æœ¬èº«ä¸Šåœ¨è¿‡å»çš„å·¥ä½œä¸Šä¼˜åŒ–ï¼Œè€Œä¸æ˜¯å¹´å¹´ç›¸ä¼¼æ²¡æœ‰æœ¬è´¨ä¸Šçš„å˜åŒ–ã€‚</p><h3><span id="ge-ren-ce-shi">ä¸ªäººæµ‹è¯•</span><a href="#ge-ren-ce-shi" class="header-anchor">Â¶</a></h3><p>6æœˆå‡ ä¹æ²¡æ€ä¹ˆå­¦csã€‚çŠ¶æ€ä¹Ÿä¸€ç›´æŒºç³Ÿç³•çš„ï¼Œç»å¸¸ä¼šæœ‰ä¸€ç§è™šæ— æ„Ÿã€‚ç›´åˆ°è€ƒè¯•é‚£å‡ å¤©æ‰ä¸´æ—¶æŠ±äº†ä½›è„šã€‚</p><p>è®°å½•ï¼šæœ‰æœºï¼Œæ¤ç”Ÿï¼Œç»†èƒï¼ˆå¼€å·ï¼Œä½†ä»ç„¶å¾ˆéš¾ï¼Œä»æœªä¸Šè¿‡é‚£ä¹ˆéš¾çš„è¯¾ï¼‰ï¼Œé—ä¼ ã€‚æœŸæœ«å æ¯”æœ‰æœº0.5ï¼Œå…¶ä½™0.4ã€‚4ç§‘ï¼Œå¹³æ—¶éƒ½æ²¡å­¦è¿‡ä½†å°½åŠ›æ°´äº†å¹³æ—¶åˆ†ï¼Œå¹³æ—¶åˆ†å®Œæˆç™¾åˆ†æ¯”ï¼šæœ‰æœºæ¤ç”Ÿåˆ†åˆ«ä¸º0.85å’Œ0.9ï¼Œç»†èƒ0.7ï¼Œé—ä¼ 0.8ã€‚æœŸæœ«è€ƒè¯•å¤ä¹ æ€»æ—¶é—´40hã€‚æœ€åæœŸæœ«å¾—åˆ†ï¼Œæœ‰æœº42ï¼ˆå…¶å®äº‹å…ˆç®—è¿‡äº†ï¼Œ40åˆ†å°±èƒ½åŠæ ¼ï¼‰ï¼Œç»¼åˆå62ï¼›æ¤ç”Ÿç»¼åˆå83ï¼›ç»†èƒæœŸæœ«å¾—åˆ†60ï¼Œç»¼åˆå72ï¼›é—ä¼ æœŸæœ«å¾—åˆ†58ï¼Œç»¼åˆå77ã€‚</p><h3><span id="jun-xun">å†›è®­</span><a href="#jun-xun" class="header-anchor">Â¶</a></h3><p>åˆšå¼€å§‹ä¸¤å¤©çš„è®­ç»ƒå†…å®¹æ²¡æœ‰é‚£ä¹ˆç´§å¼ ï¼Œæ™šä¸Šå¤§å®¶å›´ååœ¨ä¸€èµ·å”±å”±è·³è·³çš„åœºæ™¯æ˜¾å¾—å¾ˆå¹³é™æ¸©é¦¨ã€‚</p><p>å¹¶ä¸å–œé—»ä¹è§çš„ä¸¾æŠ¥äº‹ä»¶æ¥è¿å‘ç”Ÿï¼Œæˆ‘ä»¬å­¦é™¢é‡Œæœ‰ä¸ªåˆ«ç”·ç”Ÿä¸¾æŠ¥å¥³ç”Ÿï¼Œå­¦æ ¡é‡Œç¬¬äºŒæ‰¹ä¸¾æŠ¥ç¬¬ä¸€æ‰¹ï¼Œè¿é˜Ÿé—´å› ä¸ºä¼‘æ¯æ—¶é—´äº’ç›¸ä¸¾æŠ¥ã€‚ç»“æœå°±æ˜¯è¥é•¿è¢«éª‚äº†åŠå°æ—¶ï¼Œè¿é•¿ï¼ˆç›´ç³»æ•™å®˜ï¼‰è¢«è¥é•¿éª‚ï¼Œæˆ‘ä»¬è¿ç«™äº†åŠå°æ—¶å†›å§¿å¹¶ä¸”ä¹‹åçš„ä¼‘æ¯æ—¶é—´æ˜¾è‘—å‡å°‘ï¼Œä¼‘æ¯æ—¶é—´çš„æ­£å¸¸æ´»åŠ¨ä¹Ÿå‡äº†å¤§åŠã€‚ç¬¬ä¸€æ‰¹æ—©ä¸Šä»ç›¸åŒæ—¶é—´åˆ°æ¯”ç¬¬äºŒæ‰¹æå‰äº†åŠå°æ—¶é›†åˆï¼Œè¿é˜Ÿé—´çš„ä¸¾æŠ¥ä¸€èˆ¬å°±æ˜¯æ•™å®˜é¦–å…ˆè¢«è®­ç„¶åå°±æ˜¯è¿é˜Ÿã€‚</p><p>å†›è®­è™½ç„¶æ¯å¤©å®é™…è®­ç»ƒæ—¶é•¿åœ¨6ï½8å°æ—¶ï¼Œä»€ä¹ˆéƒ½æ²¡åšä½†å°±æ˜¯å¾ˆç´¯ã€‚æœ‰ä¸¤å¤©çªç„¶æ„Ÿè§‰å¿ƒå£æ—¶ä¸æ—¶ä¼šç–¼ï¼Œè®©æˆ‘å°å°çš„ææ…Œäº†ä¸€ä¸‹ï¼Œå‘ç°æœ€å¸Œæœ›å®Œæˆçš„äº‹æ˜¯å®šå¥½çš„è¯¾ç¨‹è®¡åˆ’ã€‚</p><p>åªæ˜¯å› ä¸ºèƒ½å’ŒäºŒä¸‰åŒä¼´åº¦è¿‡ï¼Œè¿™æ¯ç‡¥çš„ç”Ÿæ´»æ‰è®©äººå¶å°”æœ‰ä¸€ç§æ·¡æ·¡çš„å–œæ‚¦ã€‚</p><img src="/sg/2021/07/19/exercise/IMG_4174.jpeg" class title="IMG_4174">]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> EOF </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ‹¾é—åˆé›†</title>
      <link href="/sg/2021/06/29/review/"/>
      <url>/sg/2021/06/29/review/</url>
      
        <content type="html"><![CDATA[<p>æ‹¾é—ç³»åˆ—å°±ç”¨æ¥è®°å½•ä¸€äº›äº’è”ç½‘å†²æµªä¸­é‡è§çš„æœ‰æ„æ€çš„æƒ³æ³•å§</p><h2><span id="zheng-zhi-zhe-xue">æ”¿æ²»å“²å­¦</span><a href="#zheng-zhi-zhe-xue" class="header-anchor">Â¶</a></h2><p>èµ·å› æ˜¯æ¥è‡ªäºä¹‹å‰å’Œäººå…³äºå‡ºå›½é€‰æ‹©ï¼Œæ€§åˆ«è®®é¢˜çš„è®¨è®ºä¸­æˆ‘æ˜¾éœ²å‡ºçš„æŸäº›çŸ¥è¯†å±‚é¢çš„æ¬ ç¼ºé€ æˆäº†å¯èƒ½çš„åç‹­è§‚ç‚¹ã€‚æœ‰äº›å°è±¡æ·±åˆ»çš„äº‰æ‰§ç‚¹æ˜¯ï¼šåœ¨å¤–å›½ç”Ÿæ´»çš„äººé¢ä¸´å¯èƒ½çš„æ­§è§†è€Œé‡‡å–çš„æŠ—äº‰æ˜¯å¦æœ‰å¿…è¦ï¼›å›½å¤–ä¸åŒåœ°åŒºçš„å®‰å…¨é—®é¢˜å’Œå›½å†…å¤–çš„æ³•åˆ¶å·®å¼‚ï¼›åè£”åœ¨å…¬å¸é«˜å±‚çš„æ¯”ä¾‹ï¼Œèƒ½å¦æ¥è§¦åˆ°æ ¸å¿ƒæŠ€æœ¯ï¼›æ€§åˆ«æ­§è§†åœ¨ç§‘æŠ€è¡Œä¸šä¸­å­˜åœ¨å—ï¼Œè·¨ä¸“ä¸šæ­§è§†æˆ–è®¸ä¼šæ›´å¤šï¼›ç†æƒ³å’Œç°å®çš„å·®è·éœ€è¦é å®è·µæ¥è¡¥è¶³â€¦ç”±äºç¤¾ç§‘ç±»çš„ä¹¦ç±æˆ‘ä¸€å‘å¾ˆå°‘æ¥è§¦ï¼Œæœ‰äº›é—®é¢˜çš„è®¨è®ºä¸Šè¿˜æ˜¯æœ‰äº›ç†æƒ³å’Œç‰‡é¢ã€‚è€Œæˆ‘åˆæƒ³èƒ½å¤Ÿæ›´æ¸…æ™°åœ°è®¤è¯†è¿™äº›é—®é¢˜ï¼Œå•çº¯åœ°æƒ³å»äº†è§£è¿™éƒ¨åˆ†å†…å®¹ã€‚</p><p>åœ¨å‚è€ƒäº†ä¸€äº›æ¨èå’Œå»ºè®®åï¼Œæˆ‘æ‰“ç®—åˆ†æˆä»¥ä¸‹å‡ éƒ¨åˆ†è¿›è¡Œï¼š</p><h3><span id="wen-ti-suo-yin">é—®é¢˜ç´¢å¼•</span><a href="#wen-ti-suo-yin" class="header-anchor">Â¶</a></h3><ul><li><p>è‡ªç”±ä¸»ä¹‰ï¼šè‡ªç”±æ˜¯å¼‚è§è€…çš„è‡ªç”±ã€‚</p></li><li><p>å…¬å…±è®¨è®ºï¼šéæš´åŠ›æ²Ÿé€š -&gt;æ€æ ·å‘å±•å‡ºè§‚å¯Ÿæ–¹å¼å’Œåˆ¤æ–­ä½“ç³»ï¼Ÿ</p></li></ul><h3><span id="shu-ji-yue-du">ä¹¦ç±é˜…è¯»</span><a href="#shu-ji-yue-du" class="header-anchor">Â¶</a></h3><p>ä¸€äº›ç¤¾ç§‘ç±»ä¹¦ç±</p><ul><li>åŸƒåŠï¼Œå¸Œè…Šä¸ç½—é©¬</li><li>ç½—é©¬å¸å›½è¡°äº¡å²</li></ul><p>â€¦</p><h3><span id="shi-pin-ke-cheng-dao-du">è§†é¢‘è¯¾ç¨‹å¯¼è¯»</span><a href="#shi-pin-ke-cheng-dao-du" class="header-anchor">Â¶</a></h3><p>Yele courses: å¤å¸Œè…Šå†å²ï¼Œç¾å›½å†…æˆ˜å’Œé‡å»ºï¼Œæ¬§æ´²æ–‡æ˜ï¼Œç¾å›½ç‹¬ç«‹æˆ˜äº‰</p><h3><span id="dao-lun-ke-cheng-de-xue-xi">å¯¼è®ºè¯¾ç¨‹çš„å­¦ä¹ </span><a href="#dao-lun-ke-cheng-de-xue-xi" class="header-anchor">Â¶</a></h3><ul><li>finance101</li><li>Microeconomics101</li></ul><h2><span id="xue-xi">å­¦ä¹ </span><a href="#xue-xi" class="header-anchor">Â¶</a></h2><ul><li>äº†è§£ä½ è‡ªå·±</li></ul><blockquote><p>äº†è§£â€”&gt;é€‰æ‹©â€”&gt;æ‰§è¡Œâ€”&gt;å¤ç›˜</p></blockquote><p>åœ¨åšäº‹çš„è¿‡ç¨‹ä¸­äº†è§£è‡ªå·±ã€‚å­¦ä¹ çš„æ–¹æ³•è®ºçœ‹è¿‡å¾ˆå¤šäººçš„ä½†ä¸€ç›´è§‰å¾—å“ªé‡Œä¸å¯¹ï¼Œä¸è®ºæ˜¯scott youngä¹¦é‡Œå†™çš„ç†è§£çš„ä¸‰ä¸ªå±‚æ¬¡è¿˜æ˜¯æ½‡å³°çš„ä»è¯­è¨€å­¦ä¹ å±•å¼€çš„ç†è§£å¤ç›˜æµ‹è¯•æ–¹æ³•ï¼Œå³ä½¿å®éªŒè¿‡ä¸€æ®µæ—¶é—´ä»ç„¶äº‘é‡Œé›¾é‡Œï¼Œæ„Ÿè§‰è‡ªå·±çš„æƒ…å†µå¹¶ä¸é€‚ç”¨ï¼ˆè™½ç„¶æˆ‘æ˜¯è’åºŸäº†å¾ˆå¤šå¹´æ‰æ„è¯†åˆ°äº†è¿™ä¸€ç‚¹çš„ï¼‰ã€‚è€Œåœ¨çœ‹åˆ°ä¸€ä½åšä¸»çš„å­¦ä¹ ç»å†åæˆ‘æ‰æ˜ç™½ï¼šäº†è§£åŒ…å«â€œäº†è§£è‡ªå·±å¸æ”¶ã€æ•´åˆã€å†è¾“å‡ºçŸ¥è¯†çš„é€Ÿåº¦ã€è´¨é‡ç”šè‡³é€Ÿç‡å˜åŒ–â€ã€‚</p><h3><span id="know-yourself-amp-nothing-in-excess">know yourself &amp; Nothing in excess</span><a href="#know-yourself-amp-nothing-in-excess" class="header-anchor">Â¶</a></h3><h4><span id="ge-ren-fa-zhan-he-neng-li">ä¸ªäººå‘å±•å’Œèƒ½åŠ›</span><a href="#ge-ren-fa-zhan-he-neng-li" class="header-anchor">Â¶</a></h4><ul><li>å¯¹äºçŠ¶æ€ä¸å¥½çš„ä¸¤ç‚¹å»ºè®®ï¼š1.å­¦ä¼šè½¬å¼¯ï¼Œ2.å­¦ä¼šåŸè°…ã€‚</li><li>å¯¹è‡ªå·±çš„æœŸè®¸ï¼šæƒ³æˆä¸ºèƒ½åŠ›æ›´å¼ºçš„äººï¼Œè€Œè¿™éœ€è¦é•¿æ—¶é—´åŠªåŠ›ã€‚ä½†æ˜¯ç›²ç›®çš„è†œæ‹œå¤§ä½¬å¯¹æˆ‘æ¥è¯´æ˜¯æ— ç”¨çš„ï¼Œè€Œä¸”æˆ‘è®¤ä¸ºæ¯ä¸ªäººéƒ½æ˜¯ç‹¬ç«‹çš„ä¸ªä½“æœ‰è‡ªå·±çš„æ€è€ƒèƒ½åŠ›å’Œå‘å±•ç©ºé—´ï¼Œå¹³ç­‰æ‰æ˜¯ä»»ä½•å…³ç³»å‘å±•çš„åŸºç¡€ï¼Œå› ä¸ºè¿™ä»£è¡¨ç€ç›¸äº’å°Šé‡å’Œç†è§£ã€‚å¸Œæœ›è‡ªå·±åœ¨æ¯•ä¸šå‰èƒ½åšå‡ ä¸ªè§‰å¾—è¿˜ç®—æœ‰ç”¨çš„projectï¼ˆè¿Ÿå…ˆç”Ÿå°±æ˜¯æœ€è¿‘çš„ä¾‹å­ï¼‰ã€‚</li><li>ddlå‰å‹åŠ›å¤§çš„å›é¿å¿ƒç†</li><li>ä»æƒ³è¿›å¤–ä¼åˆ°æ‰¾åˆ°è‡ªå·±çœŸæ­£å–œæ¬¢çš„å·¥ä½œï¼šå¤–ä¼å’Œå›½å¤–ä¸æ˜¯æ‰€æœ‰é—®é¢˜çš„ç­”æ¡ˆï¼Œé€‰æ‹©ä¸€ä»½å·¥ä½œï¼Œé€‰æ‹©ä¸€ä¸ªåœ°æ–¹å±…ä½è¿™æ ·çš„é—®é¢˜éƒ½éœ€è¦é¦–å…ˆç†è§£è‡ªå·±æƒ³è¦çš„ä¸œè¥¿ï¼Œä»¥åŠå¯¹æ‰€æœ‰é€‰æ‹©çš„å®¢è§‚æ•°æ®è¯„ä¼°ã€‚å½“ç„¶ï¼Œåœ¨è¿™ä¹‹å‰æ˜¯é¦–å…ˆæœ‰èƒ½å¤Ÿé€‰æ‹©çš„èƒ½åŠ›ã€‚</li><li>essential factsï¼ŒçŠ€åˆ©</li><li>å­¦ä¹ æ–¹å¼ï¼šmotivation ï¼ˆby hsï¼‰ï¼Œå¤šé—®ä¸ºä»€ä¹ˆï¼Œæ€ä¹ˆæ ·ã€‚å¤šåšä¹ é¢˜ï¼Œcoding</li></ul><h4><span id="qing-gan-guan-xi">æƒ…æ„Ÿå…³ç³»</span><a href="#qing-gan-guan-xi" class="header-anchor">Â¶</a></h4><h5><span id="dui-you-yi-de-bu-tong-si-kao-jiao-du">å¯¹å‹è°Šçš„ä¸åŒæ€è€ƒè§’åº¦</span><a href="#dui-you-yi-de-bu-tong-si-kao-jiao-du" class="header-anchor">Â¶</a></h5><ul><li><p>ä¼˜è´¨æƒ…æ„Ÿæœ‰å¾ˆå¤šç§</p></li><li><p>expectation management</p></li><li><p>æŒæ¡å„è‡ªçš„èŠ‚å¥</p></li></ul><h5><span id="jia-ting-guan-xi">å®¶åº­å…³ç³»</span><a href="#jia-ting-guan-xi" class="header-anchor">Â¶</a></h5><p>åŸç”Ÿå®¶åº­ï¼Œç‹¬ç«‹ï¼Œåˆ†å‰²</p><h4><span id="cs">CS</span><a href="#cs" class="header-anchor">Â¶</a></h4><h5><span id="ji-chu">åŸºç¡€</span><a href="#ji-chu" class="header-anchor">Â¶</a></h5><ul><li>ç¼–ç¨‹è¯­è¨€çš„ç±»å‹</li><li>ç®—æ³•å’Œåº•å±‚çŸ¥è¯†</li></ul><h5><span id="gong-zuo">å·¥ä½œ</span><a href="#gong-zuo" class="header-anchor">Â¶</a></h5><ul><li>Research scientist, sweçš„åŒºåˆ«ï¼šä¸»è¦é—®é¢˜åœ¨äºèƒ½å¦æœ‰èƒ½åŠ›æ‰¾åˆ°é—®é¢˜å’Œç‹¬ç«‹è§£å†³é—®é¢˜ã€‚</li><li>å¦‚ä½•æˆä¸ºä¸€ä¸ªä¼˜ç§€çš„ç®—æ³•å·¥ç¨‹å¸ˆï¼Ÿ</li><li>å¯¹æˆ‘æ¥è¯´æ¯”è¾ƒé‡è¦çš„å…ƒç´ ï¼šæ‰¾åˆ°å¥½çš„leaderå’Œé¡¹ç›®ï¼Œåœ¨å·¥ä½œä¸­ä¿æŒè¿›å–å¿ƒ</li></ul><h3><span id="xuan-ze">é€‰æ‹©</span><a href="#xuan-ze" class="header-anchor">Â¶</a></h3><p>æˆ‘è®¤ä¸ºå®ä¹ é€‰æ‹©ä¸­å¯¹æˆ‘æœ€é‡è¦çš„æ˜¯mentorå’Œåšçš„ä¸œè¥¿æ˜¯å¦æœ‰æ„æ€ã€‚æ²¡æœ‰mentorèŠ±è´¹çš„æ— è°“æ—¶é—´ä¼šæ›´å¤šï¼Œæ²¡æ„æ€æˆ‘å¯èƒ½ä¼šå¾ˆæ‹–ï¼Œå°±åƒç°åœ¨æˆ‘ä¸´è¿‘4é—¨è€ƒè¯•ä½†æ˜¯è¿˜æ²¡æ€ä¹ˆå¤ä¹ å±…ç„¶è¿˜åœ¨å†™è¿™ç¯‡åšæ–‡ä¸€æ ·ã€‚å­¦ä¹ çš„è¿‡ç¨‹å°±æ˜¯ä¸€ä¸ªæ¼«é•¿çš„è‡ªæˆ‘æ¢ç´¢è¿‡ç¨‹ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¹‹åå…·ä½“ä¼šå­¦ä»€ä¹ˆï¼Œå­¦åˆ°å“ªç§ç¨‹åº¦ã€‚æ¯”å¦‚æˆ‘ç°é˜¶æ®µå°±ä¸æ˜¯å¾ˆæƒ³å­¦ç¼–è¯‘å™¨ç­‰è¿‡äºç¡¬ä»¶ï¼Œplç­‰è¿‡äºç†è®ºçš„è¯¾ã€‚</p><blockquote><p>æˆ‘æƒ³äº†æƒ³æœ¬ç§‘æœŸé—´å¤§æ¦‚è¿˜æ˜¯ä¸ä¼šåšå¤ªæ·±çš„mlæ–¹å‘,åº”è¯¥ä¼šä»æ›´åº•å±‚çš„ç³»ç»Ÿæ–¹å‘åšèµ·ã€‚è°èƒ½æƒ³åˆ°å½“åˆæƒ³å­¦è®¡ç®—æœºå°±æ˜¯å› ä¸ºç–‘çŠ¯è¿½è¸ªé‡Œçš„rootå’Œthe machineã€‚ - 21.4.10</p></blockquote><h3><span id="ying-yu">è‹±è¯­</span><a href="#ying-yu" class="header-anchor">Â¶</a></h3><p>æˆ‘ç°åœ¨è‹±è¯­æœ€å¤§çš„éš¾é¢˜æ˜¯å£è¯­ï¼Œå…¶æ¬¡æ˜¯å†™ä½œï¼Œé˜…è¯»å’Œå¬åŠ›å€’æ˜¯å¯ä»¥åœ¨å­¦å…¶ä»–è¯¾ç¨‹ä¸­çš„æ—¶å€™ç»ƒä¹ ã€‚ç›®æ ‡å°±æ˜¯èƒ½å¤Ÿå’Œè‹±è¯­æ¯è¯­è€…äº¤æµã€‚</p><h3><span id="lu-you">æ—…æ¸¸</span><a href="#lu-you" class="header-anchor">Â¶</a></h3><p>æƒ³å‡ºå»ç©ï¼Œè®¤çœŸåœ°äº†è§£ä¸€ä¸ªåœ°æ–¹ï¼ˆè‡ªç„¶&gt;äººå·¥ï¼‰ï¼Œè€Œä¸æ˜¯ç©¿è¡ŒäºåŸå¸‚é‡Œå„ç§å¤§åŒå°å¼‚çš„å•†ä¸šè¡—ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> read </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ã€Šè®ºè‡ªç”±ã€‹è¯»ä¹¦ç¬”è®°</title>
      <link href="/sg/2021/06/21/freedom/"/>
      <url>/sg/2021/06/21/freedom/</url>
      
        <content type="html"><![CDATA[<p>ã€Šè®ºè‡ªç”±ã€‹ä¸€ä¹¦ä¸­è®ºè¿°äº†å…¬æ°‘è‡ªç”±çš„è¾¹ç•Œã€‚é¦–å…ˆéœ€è¦ç¡®å®šçš„åŸåˆ™æ˜¯ç¤¾ä¼šè‹¥è¦å¹²é¢„ä¸ªäººäº‹åŠ¡ï¼Œåªæœ‰å½“ç›®çš„æ˜¯é˜²æ­¢å…¶ä¼¤å®³ä»–äººæ—¶æ‰èƒ½è¿èƒŒå…¶æ„å¿—è€Œä¸å¤±æ­£å½“åœ°æ–½åŠ äºä»–ã€‚ä¸ªäººåªæœ‰æœ‰å…³äºä»–äººåˆ©å®³çš„éƒ¨åˆ†éœ€è¦å¯¹ç¤¾ä¼šè´Ÿè´£ï¼Œåªè¦ä¸ªäººè¡Œä¸ºä»…ä¸è‡ªå·±æœ‰å…³ï¼Œé‚£ä¹ˆä»–å°±æ— éœ€å¯¹ç¤¾ä¼šè´Ÿè´£ã€‚ä½œè€…é¦–å…ˆæ­£é¢è®ºè¯äº†è‡ªç”±çš„å®šä¹‰ï¼Œå¹¶å¯¹å…¶åˆ†æ”¯æ€æƒ³è¨€è®ºè‡ªç”±å’Œä¸ªäººè‡ªç”±çš„åŸç†å±•å¼€è®ºè¿°ï¼Œæœ€ååˆ†æäº†è‡ªç”±åŸç†åœ¨ç¤¾ä¼šä¸­çš„å…·ä½“åº”ç”¨ã€‚æˆ‘æœ€æ„Ÿå…´è¶£çš„åœ°æ–¹æ˜¯æ€æ ·æ‰ç®—ä¸ªäººè‡ªç”±ï¼Ÿå½“ä¸ªäººè¡¨ç°å¾—ä¸ç¾¤ä½“å¤§å¤šæ•°ä¸åŒçš„æ—¶å€™ï¼Œç¤¾ä¼šåº”å½“å¦‚ä½•å¯¹å¾…ä½œä¸ºå°‘æ•°ç¾¤ä½“ä¸å¤§å¤šæ•°è¡¨ç°ä¸åŒçš„éƒ¨åˆ†ï¼Ÿ</p><p>ä¸€ä¸ªäººåœ¨å’Œç¤¾ä¼šå…¶ä»–äººäº¤äº’æ—¶è‡ªç„¶åœ°äº§ç”Ÿæ„è§å’Œè¡¨è¾¾æ„è§ï¼Œå¹¶æŒ‰ç…§è‡ªå·±çš„æ„è§è¡ŒåŠ¨ã€‚äº§ç”Ÿæ„è§ï¼Œè¡¨è¾¾æ„è§å’Œè¡ŒåŠ¨éƒ½å±äºä¸ªäººè‡ªç”±çš„èŒƒç•´ï¼Œä¸åº”å½“è¢«ç¤¾ä¼šå¼ºåˆ¶æ”¹å˜ã€‚</p><p>æ–‡ç« åˆ†åˆ«ä»ä¸‰ä¸ªè®ºç‚¹è®ºè¯äº†æ€æƒ³è‡ªç”±åŠè¡¨è¾¾æƒ³æ³•çš„è‡ªç”±å¯¹äººç±»ç²¾ç¥å¹¸ç¦çš„å¿…è¦æ€§ã€‚é¦–å…ˆæƒå¨æ‰€å‹åˆ¶çš„æ„è§ä¸ä¸€å®šæ˜¯é”™è¯¯çš„ã€‚åœ¨å†å²ä¸Šå³ä½¿è¿«å®³ç¨‹åº¦æœ‰æ‰€å‡è½»ï¼Œå¯¹å¼‚ç«¯è€…çš„è¿«å®³ä»æœªåœæ­¢å¹¶ä¸”å¾ˆå°‘å¤±è´¥ã€‚è‹æ ¼æ‹‰åº•è¢«å›½äººåˆ¤ä¸ºä¸æ•¬ç¥å’Œä¸é“å¾·å¤„ä»¥æ­»åˆ‘ï¼›è€¶ç¨£èƒŒè´Ÿäºµæ¸ç¥çµçš„ç½ªåå—åˆ‘äºåå­—æ¶ã€‚å†µä¸”å³ä½¿æ˜¯æ‰€åœ¨æ—¶ä»£æ‹¥æœ‰ä¸€èˆ¬äººéš¾ä»¥æ¯”æ‹Ÿçš„åˆ¤æ–­åŠ›å’Œå­¦è¯†çš„ä¼Ÿäººä¹Ÿæœ‰å‡ºé”™çš„å¯èƒ½ï¼Œæ­£å¦‚ä¸‹ä»¤é•‡å‹äº†åŸºç£æ•™çš„äººæ˜¯è´¤æ˜çš„å¤ç½—é©¬çš‡å¸å¥¥å‹’ç•™ã€‚å…¶æ¬¡å³ä½¿è¿™ç§æ„è§æ˜¯é”™è¯¯çš„ï¼Œç¦ç»å®ƒä»ä¸ºè¿‡é”™ã€‚è¢«å‹åˆ¶çš„æ„è§å¯èƒ½æœ‰éƒ¨åˆ†æ˜¯æ­£ç¡®çš„åŒæ—¶åˆæ˜¯å½“ä¸‹é€šè¡Œçš„æ„è§æ‰€æ¬ ç¼ºçš„ï¼ŒçœŸç†éœ€è¦ç»æ­¤ä¿®æ­£å’Œè¡¥è¶³ã€‚å¦‚æœæœªç»è¿‡æŒ‘æˆ˜å’Œåå¯¹å°±ç›´æ¥æ¥å—çœŸç†ä¼šä½¿å…¶æµäºå½¢å¼ï¼Œæˆä¸ºä¸€é¡¹æˆè§ï¼Œæ—¢ä¸é è®ºè¯åˆä¸å‡†è®ºè¯ï¼Œè¿™æ ·çœŸç†åˆ™æˆä¸ºäº†è¿·ä¿¡ã€‚ä½œè€…è®¤ä¸ºäººä»¬éœ€è¦ä¸ºå…¶ä¿¡å¿µçš„æ­£ç¡®æ€§æä¾›è¯æ˜ï¼Œä¸ºè‡ªå·±çš„è§‚ç‚¹æä¾›æ­£åä¸¤é¢è¯æ˜ï¼Œåœ¨ä¸æ–­å¦å®šå’Œè¾©æŠ¤çš„è¿‡ç¨‹ä¸­ç†è§£è‡ªå·±çš„è§‚ç‚¹ã€‚é€šè¿‡ä»¥å®—æ•™ä¿¡æ¡å’Œé“å¾·å­¦è¯´çš„å‘å±•å²ä¸¾ä¾‹ï¼Œä»–é©³æ–¥äº†å½“å…¬è®¤æ„è§ä¸ºçœŸï¼Œç¼ºä¹è¨€è®ºè‡ªç”±çš„å±å®³ä¹‹å¤„æœ‰é™çš„è§‚ç‚¹ã€‚å°½ç®¡éšç€ç¤¾ä¼šæ–‡æ˜çš„è¿›æ­¥ï¼Œæ„è§å¿…ç„¶ç»Ÿä¸€ï¼Œä½†çœŸç†éœ€è¦åˆ†æ­§ä½¿äººå¯ä»¥ä¸ºä¹‹å‘å¯¹æ‰‹è§£é‡Šæˆ–è¾©æŠ¤æ¥è·å¾—æ›´æ–°çš„æ´»åŠ›ã€‚æœ€åï¼Œç°å®ä¸­å¸¸å‡ºç°çœŸç†å…±å­˜äºä¸€ç»„ç›¸äº’å†²çªçš„ä¿¡æ¡ä¹‹é—´ï¼Œäººä»¬éœ€è¦åšå‡ºæ˜æ™ºçš„åˆ¤æ–­ï¼Œåœ¨å„ç§ä¸åŒçš„è§‚ç‚¹é—´è¿›è¡Œå–èˆï¼Œè€Œä¸æ˜¯è®©ä¸€æ–¹çš„åè§å‹å€’å¦ä¸€æ–¹ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ€æ ·çš„è¨€è®ºè‡ªç”±å‘¢ï¼Ÿå…¬å…±è®¨è®ºä¸­è‡ªç”±è¡¨è¾¾çš„ç•Œé™åœ¨å“ªé‡Œï¼Ÿæœ‰äººè®¤ä¸ºï¼Œâ€œä¸€åˆ‡è¨€è®ºå›ºç„¶éƒ½åº”è¯¥è¢«å…è®¸è‡ªç”±è¡¨è¾¾ï¼Œä½†å‰ææ˜¯æ„è§è¡¨è¾¾æ–¹å¼å¿…é¡»æ¸©å’ŒèŠ‚åˆ¶ï¼Œä¸èƒ½é€¾è¶Šè‡ªç”±è®¨è®ºçš„ç•Œé™ã€‚â€ä¸ºäº†ä½¿åŒæ–¹çš„è§‚ç‚¹å¾—åˆ°å……åˆ†è¡¨è¾¾ï¼Œé™åˆ¶ä¸»æµè§‚ç‚¹ä½¿ç”¨æ— èŠ‚åˆ¶çš„è°©éª‚ä¹‹è¯­çš„é‡è¦æ€§å¤§äºä»¥åŒç­‰è¦æ±‚çº¦æŸéä¸»æµè§‚ç‚¹ã€‚è€Œè¿™ç§é™åˆ¶éœ€è¦æ¥è‡ªäºèˆ†è®ºå¯¹å®é™…æƒ…å†µå…·ä½“åˆ†æï¼Œè€Œä¸æ˜¯æ¥è‡ªäºæ³•å¾‹å’Œæƒå¨å½“å±€ã€‚</p><p>åœ¨å®é™…é—®é¢˜ä¸­è¨€è®ºè‡ªç”±çš„è€ƒé‡å˜å¾—æ›´åŠ å¤æ‚ã€‚ä»¥æŸä¸ªè®ºå›ä¸ºä¾‹ï¼Œç¦è¨€ï¼Œå°å·å’Œåˆ å¸–çš„æ ‡å‡†åœ¨å“ªé‡Œï¼Ÿè®ºå›èƒ½æœ‰ä¸åŒçš„å£°éŸ³å—ï¼Ÿå½“æŸä¸ªæ´»è·ƒæˆå‘˜çš„å‘è¨€è¿‡äºæ¿€çƒˆå†’çŠ¯åˆ°äº†éƒ¨åˆ†æˆå‘˜ä»è€Œç´¯ç§¯å¤šæ¬¡ä¸¾æŠ¥åï¼Œè¿™ä¸ªæˆå‘˜è¢«è®ºå›çš„ç®¡ç†å‘˜å°ç»„ç¦è¨€ã€‚é‚£ä¹ˆè¿™é¡¹å¤„ç†æ˜¯å¦åˆç†å‘¢ï¼Ÿè¿™éœ€è¦è¿›è¡Œå¤šæ–¹è®ºè¯å…¶åˆç†æ€§ï¼Œç®¡ç†å‘˜å°ç»„å¯¹ç¦è¨€çš„æ ‡å‡†å’Œè®ºå›çš„è‡ªç”±è¡¨è¾¾ç›¸å…³çš„â€œä¸è¦å‘è¡¨ä»»ä½•ç†æ™ºçš„äººä¼šè®¤ä¸ºå†’çŠ¯çš„ã€è¿‡åˆ†çš„æˆ–æ‹›è‡´æ€¨æ¨çš„è¨€è®ºâ€çš„çº¦å®šå†æ¬¡è¿›è¡Œå…¬ç¤ºå¹¶å¯¹æˆå‘˜çš„å¤„ç†è¿‡ç¨‹å…¬å¼€ï¼›åŒæ—¶ï¼Œå—åˆ°è¯¥æˆå‘˜å†’çŠ¯çš„å…¶ä»–æˆå‘˜å¯¹ä¸ºä»€ä¹ˆæ„Ÿè§‰åˆ°å†’çŠ¯çš„é—®é¢˜ä¸æ”¯æŒå¥¹åº”å½“è‡ªç”±è¡¨è¾¾ä¸ªäººè§‚ç‚¹å³ä½¿è¯­æ°”å¸¦æœ‰å†²çªæ€§çš„æˆå‘˜è¿›è¡Œäº†ç›¸äº’è®ºè¯ï¼›å†æ¬¡ï¼Œæ— ä»»ä½•åˆ©ç›Šå…³ç³»çš„ç¬¬ä¸‰æ–¹æˆå‘˜ç›¸å¯¹å®¢è§‚åœ°åœ¨å…¶ä¸­å‘è¡¨äº†ä¸ªäººè§‚ç‚¹ï¼›å½“è§‚ç‚¹å‘è¡¨åœ¨è®ºå›ä¸Šï¼Œå°±èƒ½å¤Ÿè¢«åé©³æˆ–è€…æ”¯æŒã€‚é€šè¿‡è¿™æ ·ä¸€æ¬¡è®ºå›å†…çš„å…¬å¼€è®¨è®ºï¼Œæˆ‘ä»¬è™½ç„¶ä¸èƒ½è¯´æ˜è¿™é¡¹å¤„ç†æ˜¯ç»å¯¹åˆç†çš„ï¼Œä½†æˆ‘ä»¬èƒ½å¤Ÿè®¤ä¸ºè¿™æ˜¯èƒ½å¤Ÿä¿è¯å¤šæ•°äººè‡ªç”±å‘è¡¨è¨€è®ºçš„åˆç†æ–¹æ¡ˆã€‚è€Œå¯¹è¿™é¡¹å¤„ç†æœ‰åå¯¹æ„è§çš„äººä»ç„¶æœ‰æƒåˆ©åšå‡ºè‡ªå·±æƒ³åšå‡ºçš„ä»»ä½•å†³å®šï¼Œæ¯”å¦‚åˆ å·æˆ–è€…é€€å‡ºã€‚</p><p>æ€æƒ³è¨€è®ºçš„è‡ªç”±æ˜¯ä¸ªæ€§è‡ªç”±çš„å‰æï¼Œä¸ªæ€§çš„è‡ªç”±è¡¨è¾¾ä¸å‘å±•ç›¸å…³ã€‚ä¸ªæ€§çš„è‡ªç”±å‘å±•é€ å°±å…ˆè¿›ä¹‹å£«ï¼Œè€Œå…ˆè¿›ä¹‹å£«æ‹¥æœ‰çš„é¦–åˆ›åŠ›ä¸ºæœªè¿›ä¹‹å£«æ‰“å¼€çœ¼ç•Œï¼Œä»è€Œè®©ä»–ä»¬åœ¨çœ¼ç•Œå®Œå…¨æ‰“å¼€åæœ‰æœºä¼šä½¿è‡ªå·±æˆä¸ºå…·å¤‡é¦–åˆ›åŠ›çš„äººã€‚è¿™äº›å°‘æ•°çš„å…ˆè¿›ä¹‹å£«â€œæ‰€èƒ½è¦æ±‚çš„ï¼Œåªæ˜¯ä¸ºäººä»¬æŒ‡å‡ºé“è·¯çš„è‡ªç”±â€ï¼Œè€Œäººä»¬æœ‰æƒåŠ›ä¹Ÿåº”å½“å»ä¸»åŠ¨é€‰æ‹©çœŸæ­£é€‚åˆè‡ªå·±çš„é“è·¯ï¼Œè€Œä¸æ˜¯ç›²ä»ç›²ä¿¡äºå…ˆè¿›ä¹‹å£«çš„é“è·¯ã€‚</p><blockquote><p>æ²¡æœ‰ç†ç”±è¯´ä¸€åˆ‡äººç±»ç”Ÿæ´»éƒ½åº”è¯¥è¢«ä¸€ä¸ªæˆ–å°‘æ•°å‡ ä¸ªæ¨¡å‹æ‰€ç­‘é€ ã€‚å¦‚æœä¸€ä¸ªäººå…·å¤‡ç›¸å½“çš„å¸¸è¯†å’Œç»éªŒï¼Œå…¶ä»¥è‡ªå·±çš„æ–¹å¼ç­¹åˆ’ç”Ÿæ´»ï¼Œå°±æ˜¯æœ€å¥½çš„ï¼Œå¹¶éå› ä¸ºè¿™ç§æ–¹å¼æœ¬èº«å°±ä¸ºæœ€å¥½ï¼Œè€Œæ˜¯å› ä¸ºè¿™æ˜¯å±äºä»–è‡ªå·±çš„æ–¹å¼ã€‚</p></blockquote><p>è™½ç„¶ä¸ªæ€§å¾—åˆ°å……åˆ†å‘å±•æœ‰åˆ©äºç¤¾ä¼šè¿›æ­¥å’Œäººç±»å¤šæ ·æ€§ï¼Œä½†å…¬ä¼—èˆ†è®ºçš„å€¾å‘åˆ™å¾€å¾€ä¸èƒ½å®¹å¿ä»»ä½•æ˜¾è‘—çš„ä¸ªæ€§æµéœ²ã€‚ä½œè€…é€šè¿‡ä¸œè¥¿æ–¹æ–‡æ˜å‘å±•çš„å¯¹æ¯”è®ºè¿°äº†ä¹ ä¿—çš„ä¸“åˆ¶çš„å±å®³ï¼Œåé¢è®ºè¯äº†ä¸ªæ€§è‡ªç”±çš„ä»·å€¼ã€‚ä¸­å›½åœ¨å¾ˆæ—©çš„æ—¶å€™å°±å‘å±•å‡ºä¸–ç•Œé¢†å…ˆçš„é£ä¿—åˆ¶åº¦ï¼Œç„¶è€Œåœ¨ç¡®ä¿æœ€å¯Œæ™ºæ…§çš„äººç¨³å±…é«˜ä½ååˆ™é™·å…¥äº†è¿‘åƒå¹´çš„åœæ»ï¼›åè§‚æ¬§æ´²ä¹‹æ‰€ä»¥èƒ½ä¸æ–­è¿›å–åˆ™æ˜¯å› ä¸ºå„æ°‘æ—çš„æ€§æ ¼ä¸æ•™å…»å¼‚å¸¸æ­§å¼‚ï¼Œè¿™æ ·çš„åˆ†æ­§é€ æˆå˜åŒ–ï¼Œå¼•å¯¼è¿›æ­¥ã€‚</p><p>ç°ä»£æ”¿ä½“ä¸€èˆ¬æ˜¯ä»£è¡¨å¤§å¤šæ•°äººæ„å¿—çš„è‡ªæ²»æ”¿åºœï¼Œç„¶è€Œå¤§å¤šæ•°äººçš„æ„å¿—å¹¶ä¸èƒ½ç­‰åŒäºå…¨ä½“äººæ°‘çš„æ„å¿—ã€‚å¤šæ•°äººçš„æš´æ”¿å¯èƒ½ä»¥éš¾ä»¥å¯Ÿè§‰çš„æ–¹å¼æ¸—é€å…¥ä¸ªäººç”Ÿæ´»çš„å„æ–¹é¢ã€‚é™¤äº†æ³•å¾‹çº¦æŸï¼Œç¤¾ä¼šä¸­çš„ä¼˜åŠ¿æ„è§å’Œå¤§ä¼—æƒ…æ„ŸåŒæ ·åœ¨æ½œç§»é»˜åŒ–ä¸­æˆä¸ºæŸç¼šå¼‚è§è€…çš„æ–¹å¼ã€‚ä½œä¸ºä¸ªä½“ï¼Œå¾ˆéš¾åœ¨å……æ»¡åå¯¹å£°éŸ³çš„ç¯å¢ƒä¸‹ä»æ—§åšæŒä¸ªäººæ„è§ã€‚è€Œç»å¸¸å‘ç”Ÿçš„æƒ…å†µæ˜¯å¤§å¤šæ•°äººçš„æ„è§å–ä»£äº†ä¸ªäººçš„ã€‚ä½œè€…è®¤ä¸ºï¼Œæ¯ä¸ªäººéƒ½æœ‰æƒåˆ©ç”¨è‡ªå·±è®¤ä¸ºå–„çš„æ–¹å¼ç”Ÿæ´»ã€‚å³ä½¿å¤§å¤šæ•°äººçš„æ„è§æ˜¯æœ‰åˆ©äºä»–çš„ï¼Œåªè¦ä»–åŸæœ¬çš„æ„è§æ²¡æœ‰ä¼¤å®³åˆ°ç¤¾ä¼šå…¶ä»–äººï¼Œä»–å°±æœ‰åšæŒè‡ªå·±æƒ³æ³•çš„è‡ªç”±ã€‚â€œä»–äººå¯ä»¥çƒ­å¿ƒåœ°åŠ©å…¶åˆ¤æ–­ï¼Œè¡·å¿ƒé¼“èˆä»–çš„æ„å¿—ï¼Œä¹ƒè‡³å¼ºè¡Œå‘ä»–è¿›è°ï¼Œç„¶è€Œæ˜¯å¦é‡‡çº³å¿…é¡»å–å†³äºä»–è‡ªå·±â€ã€‚è€Œå½“ä»–çš„æ„è§ä¼¤å®³åˆ°ç¤¾ä¼šä¸­çš„å…¶ä»–äººæˆ–æœ‰ä¼¤å®³çš„ç¡®å®šå±é™©ï¼Œé‚£ä¹ˆå°±ä¸ç¬¦åˆè‡ªç”±åŸåˆ™è€Œåº”å½“å—é“å¾·æˆ–æ³•å¾‹é—®è´£ã€‚</p><p>è‡ªç”±åŸåˆ™åœ¨ç°å®ç”Ÿæ´»ä¸­çš„å…·ä½“åº”ç”¨è¡¨ç°å¾—æ›´ä¸ºå¤æ‚ã€‚æ–‡æœ«é€šè¿‡ä¸¾äº†å¤šä¸ªä¾‹å­è®¨è®ºäº†ä¸ªäººè‡ªç”±å’Œç¤¾ä¼šå¹²æ¶‰çš„ç•Œé™ï¼Œå¹¶ä¸”ç€é‡è®ºè¿°åå¯¹æ”¿åºœå¹²æ¶‰å³ä½¿å…¶æ‰€è¡Œæœªä¾µçŠ¯è‡ªç”±çš„ä¸‰ç±»ç†ç”±ã€‚è‡ªç”±åŸåˆ™ä¸å…è®¸äººæœ‰æ”¾å¼ƒè‡ªç”±çš„è‡ªç”±ï¼Œä¹Ÿä¸å…è®¸äººä»¥ä»»ä½•åä¹‰å¹²æ¶‰ä»–äººçš„è‡ªç”±ã€‚è€Œæ”¿åºœæƒåŠ›åº”å½“å—åˆ°é™åˆ¶ï¼Œâ€œåœ¨ä¸è¿æ•ˆç‡çš„å‰æä¸‹ï¼Œå°½æœ€å¤§é™åº¦åœ°è®©æƒåŠ›åˆ†æ•£ï¼›åŒæ—¶ç”±ä¸€ä¸ªé›†æ•£ä¸­æ¢å°½æœ€å¤§å¯èƒ½åœ°è®©ä¿¡æ¯å¾—åˆ°æ”¶é›†å’Œä¼ æ’­â€ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> read </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>study less study smart</title>
      <link href="/sg/2021/06/19/study/"/>
      <url>/sg/2021/06/19/study/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ä¸ªç®€å•çš„å½’çº³ã€‚</p><h3><span id="jian-duan-ban">ç®€çŸ­ç‰ˆ</span><a href="#jian-duan-ban" class="header-anchor">Â¶</a></h3><p>something I can work on</p><ul><li><p>æ­»è®°ç¡¬èƒŒï¼Ÿ</p><p>Fact/concept</p><p>Recognition/recollection</p></li><li><p><strong>Reading</strong>:survey, question, read, recite, review</p><ul><li><p>SQ3R</p><p>Survey:æµè§ˆè¦é˜…è¯»çš„å†…å®¹ï¼Œå¯¹è¦å­¦çš„éƒ¨åˆ†æå‡ºé—®é¢˜ã€‚</p><p>Recite:å¤§éƒ¨åˆ†æ—¶é—´ï¼Ÿcoding is  a nice way to try out.</p><p>Review: go through notes.</p></li></ul></li><li><p>sleep</p></li><li><p><strong>Notes</strong> -&gt; comprehension?</p><p>è¯¾ä¸Šï¼šè®°å°½å¯èƒ½å°‘çš„ç¬”è®°ï¼Œå¤§çº²ï¼›</p><p>è¯¾åï¼šgive it depth, flesh it outï¼›</p><ul><li>how to flesh it out? What to?</li></ul><p>è€Œä¸æ˜¯ä¸€å¼€å§‹å°±å†™æ¼‚äº®çš„ç¬”è®°ã€‚</p></li><li><p>Feymannâ€™s methods: æ•™ç»™åˆ«äººå¬</p></li><li><p>study area</p></li><li><p><strong>ç»„é˜Ÿå­¦ä¹ </strong></p></li></ul><h3><span id="jia-chang-ban">åŠ é•¿ç‰ˆ</span><a href="#jia-chang-ban" class="header-anchor">Â¶</a></h3><p>å­¦ä¹ å…¶å®å¹¶ä¸éœ€è¦å¤ªå¤šèŠ±å“¨çš„æ–¹æ³•ï¼Œå¾ˆå¤šå·§è®¡å¦™æ€å¤§å¤šæ˜¯æ²¡æœ‰ç”¨çš„ï¼ŒæŒæ¡åŸºæœ¬çš„æ–¹æ³•åèŠ±æ—¶é—´å°±å¤Ÿäº†ã€‚åœ¨é«˜ä¸­éå¸¸è¿·æ‹å­¦ä¹ æ–¹æ³•ï¼Œä»¥ä¸ºæœ‰ä¸€ç§é€šè§£èƒ½å¤Ÿå¾ˆå¿«åœ°è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œä½†äº‹å®å¹¶éå¦‚æ­¤ã€‚å°±åƒæ€ç»´å¯¼å›¾çš„æ ¸å¿ƒå¹¶ä¸æ˜¯äº”é¢œå…­è‰²çš„å›¾ç”»ï¼Œä¸æ˜¯é€‰æ‹©çš„æŸä¸ªè¯ï¼Œè€Œæ˜¯æˆ‘ä»¬æ˜¯å¦çœŸæ­£ç†è§£å­¦ä¹ äº†è¿™éƒ¨åˆ†å†…å®¹ï¼Œç„¶åèƒ½ç”¨ä¸€ç§ç»“æ„åŒ–çš„æ–¹å¼è¡¨è¾¾å‡ºæ¥ï¼Œèƒ½å¦è®²ç»™åˆ«äººå¬ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
          <category> skill </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>æ— ååŸè®°</title>
      <link href="/sg/2021/06/11/story_nn1/"/>
      <url>/sg/2021/06/11/story_nn1/</url>
      
        <content type="html"><![CDATA[<p>æˆ‘ï¼Œä¸€ä¸ªäºŒåå²çš„æ½¦å€’é’å¹´ï¼Œå”¯ä¸€çš„çˆ±å¥½å°±æ˜¯è§£è°œã€‚å¬é—»æœ¬å¸‚éƒŠåŒºæœ‰ä¸€åº§å¤å ¡ï¼Œè€Œä¸»äººæ˜¯ä¸€ä½å¹´é€¾èŠ±ç”²çš„è€äººï¼Œä»–å”¯ä¸€çš„ä¹è¶£å°±æ˜¯å¬å„ç§ä¸åŒçš„å£°éŸ³ã€‚æˆ–è®¸æˆ‘å¯ä»¥å»è€äººé‚£ç¢°ç¢°è¿æ°”ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½å¬åˆ°æœ‰è¶£çš„äº‹æƒ…ï¼Œæˆ–è€…æˆ‘å¯ä»¥ç»™ä»–è®²æˆ‘è§£è¿‡çš„è°œé¢˜ã€‚</p><p>å½“æ¥åˆ°è¿™åº§å¤å ¡é—¨ä¸‹ï¼Œæˆ‘å°±è¢«è¿™å°–é¡¶å»ºç­‘ç»™å“åˆ°äº†ï¼Œæˆ–è®¸æ˜¯è¿™é¢œè‰²æ·±è¤çš„ç»ç’ƒï¼Œæˆ–è®¸å› ä¸ºè¿™é˜´æš—çš„æ°›å›´ï¼Œè°èƒ½çŸ¥é“è¯ºå¤§çš„åŸå ¡åªæœ‰é‚£ä¹ˆå‡ ç›æ˜æš—çš„ç¯ï¼Ÿè°èƒ½æƒ³åˆ°æˆ‘æ¥åˆ°è¿™é‡Œå·²ç»æ˜¯æ·±å¤œäº†ï¼Ÿ</p><p>ç®¡å®¶çš„åŠæ—¶å‡ºç°è®©æˆ‘é•‡å®šä¸‹æ¥ï¼Œæˆ‘ç«‹åˆ»è¢«å¸¦åˆ°è€äººé¢å‰ï¼Œâ€œè¿™ä¹ˆæ™šè¿˜æ²¡ç¡ï¼Ÿâ€ã€‚è€äººæŠŠçœ‹ç€çš„ä¹¦æ”¾ä¸‹ï¼Œç›´è§†æˆ‘ï¼Œâ€œå‘Šè¯‰æˆ‘å¹´è½»äººï¼Œä½ æœ‰ä»€ä¹ˆæ•…äº‹ï¼Ÿâ€æˆ‘ï¼Œè™½ç„¶å…¶å®å¹¶æœªçœŸæ­£è§£è¿‡ä»€ä¹ˆå¤æ‚çš„è°œé¢˜ï¼Œä½†æ˜¯æˆ‘å¯æ˜¯å¥½æ­¹ä¹Ÿçœ‹è¿‡å‡ æœ¬ä¾¦æ¢å°è¯´ï¼Œå¤§ä¸äº†èƒ¡ä¹±ç¼–é€ ä¸€äº›ã€‚</p><p>â€œä»¥æ—¶é—´ä¸ºè°œåº•çš„è°œé¢˜ï¼Œåœ¨åšå°”èµ«æ–¯çš„ç¬”ä¸‹æ˜¯ä¸æ–­åˆ†å‰çš„èŠ±å›­è¿·å®«ã€‚ä¸»äººå…¬è¿›å…¥å…¶ä¸­åšå‡ºäº†é€‰æ‹©A,ä»–ä¼ é€’å‡ºäº†ä¿¡æ¯å‡ºå»ä½†è‡ªå·±å› æ­¤æ€äº†æ— è¾œçš„äººå¹¶è¢«ç»æ­»ï¼›é€‰æ‹©ä¸è¿›å…¥é€ƒèµ°ä¸ºé€‰æ‹©Bï¼›é€‰æ‹©è¿›å…¥ä½†ä¸è¿ç´¯åˆ«äººä¸ºé€‰æ‹©Câ€¦â€¦è¿™æ— æ•°ä¸ªé€‰æ‹©åŒæ—¶å­˜åœ¨å› æ—¶é—´ä¸Šçš„åŒºåˆ«è€Œåˆ†å‰å‡ºæ— æ•°ä¸ªææ¡ ã€‚ä½ çŸ¥é“ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å¬åˆ°è¿™æ ·çš„æ•…äº‹ã€‚é˜¿è¥¿è«å¤«å†™çš„æ—¶é—´çš„ç»ˆç»“é‡Œï¼Œæ—¶é—´æ˜¯ä¸€æ¡è¡”å°¾è›‡ï¼Œç»ˆç»“è¿‡åå°±åˆå›åˆ°åˆå§‹ï¼Œæ— é™å¾ªç¯ï¼Œç›´åˆ°æœ‰ä¸€å¤©å¾ªç¯çš„æŸä¸ªç¯èŠ‚çš„æ‰§è¡Œè€…å‘ç°äº†å­˜åœ¨å¦ä¸€ä¸ªæ—¶é—´èŠ‚ç‚¹çš„è‡ªå·±äº§ç”Ÿæ‚–è®ºã€‚æ—¶é—´å› æœè®ºï¼Œå¹³è¡Œä¸–ç•Œè¯´ï¼Œæ—¶é—´çº¿çš„æ”¶æ•›ï¼Œæ— é™â™¾ï¸ä¸æ°¸æ’ï¼Œè¿™äº›ä¸è¿‡æ˜¯å“„éª—é’å¹´çš„æœªçŸ¥é¢˜ã€‚â€æˆ‘é¡¿äº†é¡¿ï¼Œçª—å¤–çš„å¤œè‰²æ©æ˜ ä¸‹ä»¿ä½›æˆ‘æ­£èº«å¤„ä¸€ä¸ªè¿·å®«â€œæˆ–è®¸è¿™æ ·è¯´å¹¶ä¸æ°å½“ã€‚â€è€äººåªæ˜¯ç•¥çš±ç€çœ‰ï¼Œç¤ºæ„æˆ‘ç»§ç»­å¾€ä¸‹è¯´â€¦â€¦</p><p>â€œæ€è€ƒä¸€ä¸ªæ•…äº‹çš„å‘å±•ï¼Œéœ€è¦è€ƒè™‘èƒŒæ™¯ã€‚æˆ‘è®°å¾—ç‰¹å¾·å§œçš„ä½ ä¸€ç”Ÿçš„æ•…äº‹é‡Œçš„å¥³ä¸»äººå…¬é€šè¿‡å’Œå¤–æ˜Ÿç”Ÿç‰©çš„äº¤è°ˆè·å¾—äº†å¯¹ä¸–ç•Œçš„å…¨æ–°è®¤çŸ¥ï¼Œåœ¨çŸ¥é“æœªæ¥ï¼Œè¿‡å»å’Œç°åœ¨ä¸­ä»æ—§æŒ‰ç€æ—¢å®šè½¨è¿¹ç”Ÿæ´»ç€ï¼Œè¿™å¹¶ä¸æ˜¯å› ä¸ºå¥¹å¯¹è‡ªå·±ä¸èƒ½æ”¹å˜å‘½è¿è€Œå¿ƒå¦‚æ­»æ°´ï¼Œè€Œæ˜¯å¥¹ä»æ–°çš„è§’åº¦ç†è§£äº†è‡ªå·±çš„æ•…äº‹ã€‚è€Œæˆ‘ä»¬è®¨è®ºçš„æ•…äº‹ä¸»äººå…¬ä½™æ·®å°½ç®¡å¹¶æœªä¸€å¼€å§‹å°±çŸ¥é“è¿·å®«çš„å­˜åœ¨ï¼Œå´åœ¨èµ°è¿›èŠ±å›­è¿·å®«åå’Œè‰¾ä¼¯ç‰¹çš„äº¤è°ˆä¸­æ˜ç™½äº†ç¥–å…ˆé—ç•™ä¸‹æ–‡å­—çš„æ„ä¹‰ï¼Œæ˜ç™½äº†è‡ªå·±æ­¤è¡Œæ—¢æ˜¯å·§åˆï¼Œä¹Ÿæ˜¯æ—¶é—´æ— é™åˆ†å‰ä¸­çš„å¿…ç„¶ã€‚ä»–æ€äº†è‰¾ä¼¯ç‰¹ï¼Œåæ¥ä»–åˆè¢«ç»æ­»ï¼Œå†åæ¥ä»–äº²è‡ªè®²è¿°äº†è¿™ä¸ªæ•…äº‹ã€‚æœ€åè¿™ä¸ªä»–æˆ–è®¸æ˜¯æŸä¸ªåˆ†å²”ä¸­çš„ä¸åŒæ—¶é—´ç‚¹å­˜åœ¨çš„ä½™æ·®å¯¹è¿™ä¸€é€‰æ‹©ä¸‹åæœçš„çª¥è§†ï¼Œä¸€ä¸ªèƒ½å¤Ÿæ˜ç™½ä½™æ·®çš„æ— é™æ‚”æ¨å’ŒåŒå€¦çš„äººæ­£æ˜¯ä»–è‡ªå·±ï¼Œä¸€ä¸ªä¸å­˜åœ¨åœ¨ç°å®ä¸­çš„å¹½çµâ€¦â€¦â€ã€‚è€äººæ‰“æ–­äº†æˆ‘ï¼Œâ€œå¹´è½»äººï¼Œæˆ‘æ‡‚ä½ æƒ³è¡¨è¾¾çš„æ„æ€ã€‚ä½†è®©æˆ‘æ¥é—®ä½ ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦è®¨è®ºä¸€äº›çœ‹ä¸Šå»æ²¡æœ‰å®é™…æ„ä¹‰è€Œå¯¹ç”Ÿæ´»æ²¡æœ‰æ”¹å–„çš„ä¸œè¥¿ï¼Ÿæ²¡æœ‰å†’çŠ¯çš„æ„æ€ï¼Œä½†æˆ‘æ³¨æ„åˆ°ä½ å·æ›²å¹²ç‡¥çš„å¤´å‘ï¼Œç©¿çš„æœ‰äº›å¹´æœˆçš„ç ´æ—§çš„æ·±è‰²å¤–å¥—ï¼Œæˆ–è®¸ä½ çš„ç”Ÿæ´»å¢ƒå†µå¹¶ä¸å¥½ã€‚ä½ ä»Šå¹´å¤šå°‘å²ï¼Ÿâ€œâ€äºŒåä¸€ï¼Œå…ˆç”Ÿï¼Œè¿‡äº†åæœˆçš„è¯ã€‚â€œæˆ‘è€¸è€¸è‚©ï¼Œæ— æ‰€è°“åœ°è¯´ã€‚</p><p>â€œå› ä¸ºæ€è€ƒè¿™æ ·çš„é—®é¢˜èƒ½è®©æˆ‘æ€è€ƒé—®é¢˜çš„è§’åº¦æ›´é€å½»ï¼Œå¯¹å·¥ä½œå’Œå­¦ä¹ ä¹Ÿä¼šæœ‰å¸®åŠ©ã€‚â€æˆ‘åœé¡¿äº†ä¸‹ï¼Œâ€œè¿™æ ·çš„å›ç­”æ‚¨æ˜¯å¦æ»¡æ„å‘¢ï¼Ÿæˆ‘æƒ³æ‚¨åªä¼šè®¤ä¸ºæˆ‘åœ¨å·§è¨€ä»¤è‰²ã€‚æˆ‘æƒ³è¿™äº›é—®é¢˜åªä¸è¿‡æ˜¯å› ä¸ºè§‰å¾—æœ‰è¶£è€Œå·²ï¼Œè‡ªç”±è€Œæ— ç”¨æ˜¯æˆ‘æ‰€ä¿¡å¥‰çš„ã€‚è€Œåœ¨æˆ‘çœ‹æ¥ï¼Œæ‚¨ç°åœ¨æ„¿æ„å¬æˆ‘è®²åˆ°è¿™é‡Œè€Œæ²¡æŠŠæˆ‘èµ¶å‡ºå»ï¼Œä¸€æ˜¯å› ä¸ºæ‚¨å’Œæˆ‘æ˜¯ç›¸ä¼¼çš„äººï¼ŒäºŒæ˜¯å› ä¸ºæ‚¨æƒ³è¦å¬åˆ°çš„ä¸ä¸€æ ·çš„å£°éŸ³æ—¢ä¸æ˜¯å®ç”¨çš„ï¼Œä¹Ÿä¸æ˜¯æ— ç”¨çš„ï¼Œè€Œæ˜¯çœŸå®çš„è¢«ä½“éªŒçš„ã€‚â€è€äººä¸æˆ‘å¯¹è§†ï¼Œç„¶åèµ°åˆ°çª—å‰ã€‚â€œæ´»åˆ°æˆ‘è¿™æ ·å²æ•°çš„äººï¼Œçœ‹è¿‡å¾ˆå¤šæ•…äº‹ã€‚ç°å®ä¸­çš„ï¼Œåˆ«äººå†™çš„ã€‚ç©ºè°ˆæ— ç”¨ï¼Œæˆ‘è§è¿‡å¾ˆå¤šå’Œä½ ä¸€æ ·å¹´çºªçš„é’å¹´è®²è¿°è‡ªå·±å°†è¦åšçš„äº‹æƒ…ï¼Œä»¿ä½›ä»–ä»¬å·²ç»åšæˆäº†ã€‚ä½†æœ€åèƒ½å¤Ÿåšæˆçš„å´æ˜¯å…¶ä¸­èƒ½ä¸ç•å¼‚è§åšæŒçš„äººï¼Œèƒ½å¬è§çš„å£°éŸ³ç»ˆå°†è¢«å¬è§ã€‚ä¸è¿‡ï¼Œäººç”Ÿè¾—è½¬ï¼Œæœ€åä¹Ÿä¸è¿‡æ˜¯å½’äºæ³¥åœŸï¼Œä¸ºä»€ä¹ˆè¦è€ƒè™‘è¿™äº›ç°å®å‘¢ï¼Ÿæˆ‘ä¹‹å‰çš„é—®é¢˜åªæ˜¯æƒ³çŸ¥é“ä½ æƒ³ä»æˆ‘è¿™é‡Œå¯»æ±‚ä»€ä¹ˆï¼Œç°åœ¨æˆ‘å·²ç»çŸ¥é“äº†ã€‚â€œé’Ÿå£°æ•²å“ï¼Œå·²ç»åäºŒç‚¹äº†ã€‚â€ç°åœ¨å¾ˆæ™šäº†ï¼Œä½ å…ˆå»ä¼‘æ¯ï¼Œæ˜å¤©è·Ÿæˆ‘å»ä¸€ä¸ªåœ°æ–¹èµ°èµ°ã€‚â€œè€äººæ‘†æ‘†æ‰‹ã€‚æˆ‘ç‚¹å¤´è‡´æ„ï¼Œèµ°äº†å‡ºå»ã€‚ç®¡å®¶å®‰æ’äº†ä¸ªæˆ¿é—´ç»™æˆ‘ï¼Œæˆ‘å´æ²¡æœ‰ä¸æ¯«ç¡æ„ï¼Œæˆ–è®¸æ˜¯é•¿æ—¶é—´çš„æ­¥è¡Œï¼Œæˆ–è®¸æ˜¯åˆšåˆšçš„äº¤è°ˆã€‚</p><p>å¤©ä¸Šæœ‰å¾ˆå¤šæ˜Ÿæ˜Ÿï¼Œè¿™å¯ä¸æ˜¯ä½ åœ¨åŸå¸‚é‡Œèƒ½ç»å¸¸çœ‹åˆ°çš„æƒ…æ™¯ã€‚æˆ‘æ¥è¿™é‡Œå¥½åƒä¹Ÿæ²¡ä»€ä¹ˆç‰¹æ®Šçš„ç›®çš„ï¼Œå¬è¯´æ˜¯ä¸ªæœ‰æ„æ€çš„è€å¤´ï¼Œæ‰€ä»¥å°±æ¥äº†ã€‚æˆ–è®¸æˆ‘è¿˜è¦å»æ‰¾ä¸€ä»½å·¥ä½œï¼Œèº«ä¸Šå¿«æ²¡é’±äº†ï¼Œè¿˜æš‚æ—¶ä¸æƒ³æµè½è¡—å¤´ã€‚æ–­æ–­ç»­ç»­çš„å¿µå¤´å†’å‡ºæ¥ï¼Œä»¿ä½›æ— æ•°æ¡æ–­ç‚¹è¿æˆäº†ä¸€æ¡çº¿ï¼Œè€Œè¿™æ¡çº¿ä¸Šå†™ç€çš„å°±æ˜¯æˆ‘äººç”Ÿçš„è®°å½•ã€‚æˆ‘ä»ä»»ä½•è§’åº¦ä¸Šæ¥çœ‹éƒ½æ˜¯ä¸ªéšæ„çš„äººï¼Œè¦è¯´å’Œä»¥å‰çš„ä¸€ç‚¹åŒºåˆ«å¤§æ¦‚å°±æ˜¯ä»æ— æ¬²æ— æ±‚åˆ°éšå¿ƒæ‰€æ¬²ï¼Œè‡ªç”±æ€»æ˜¯æœ‰ä»£ä»·çš„ï¼Œè¿™ä¸€ç‚¹æˆ‘ä¸æ˜¯ä¸æ˜ç™½ï¼Œä½†æˆ‘æ›´æƒ³åœ¨æœ‰é™çš„æ—¶é—´é‡Œåšç‚¹è‡ªå·±å–œæ¬¢åšçš„äº‹ï¼Œä¸ç®¡å®ƒæœ‰æ²¡æœ‰å®é™…ç”¨å¤„ã€‚è€Œå­¦é™¢é‡Œçš„äº‹ä¸ç®¡å¤šä¹ˆç²¾å½©ï¼Œéƒ½ä¸æˆ‘æ— å…³ï¼Œé­”è¯å­¦æ˜¯æˆ‘æœ€è®¨åŒçš„ä¸€é—¨è¯¾ï¼Œæˆ‘åˆä¸æ˜¯æ··è¡€ç‹å­ï¼Œæ€ä¹ˆé…åˆ¶å‡ºé‚£ä¸€ä¸ªä¸ªå¥‡å½¢æ€ªçŠ¶æœ‰ç€å¥‡æ€ªåå­—çš„å„å¼è¯å‰‚ã€‚å¥½åœ¨æ¯”èµ·ä½å¹´çº§æˆ‘é€ƒè¯¾ä¹Ÿé€ƒå¾—è¶Šç†ç›´æ°”å£®äº†ï¼Œä»Šå¹´æ›´æ˜¯ç´¢æ€§ä¼‘å­¦äº†ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
          <category> read </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>C++ 101</title>
      <link href="/sg/2021/05/12/cpp_101/"/>
      <url>/sg/2021/05/12/cpp_101/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#fundamentals">Fundamentals</a><ul><li><a href="#types-and-structs">types and structs</a></li><li><a href="#initialization-and-references">initialization and references</a></li><li><a href="#streams">streams</a></li></ul></li><li><a href="#standard-template-library">standard template library</a><ul><li><a href="#sequence-containers">Sequence containers</a></li><li><a href="#associative-containers">associative containers</a></li><li><a href="#advanced-containers">advanced containers</a></li><li><a href="#templates">templates</a></li><li><a href="#function-algorithms">Function&amp;algorithms</a></li><li><a href="#modern-stl">Modern stl</a></li></ul></li><li><a href="#classes">classes</a><ul><li><a href="#oop-basic-syntax">oop basic syntax</a></li><li><a href="#oop-design">oop design</a></li><li><a href="#operators">operators</a></li><li><a href="#special-member-functions">Special member functions</a></li><li><a href="#move-semantics">move semantics</a></li><li><a href="#namespaces">namespaces</a></li><li><a href="#inheritance">inheritance</a></li><li><a href="#template-classes">Template classes</a></li><li><a href="#concept-c-20">concept(c++20)</a></li></ul></li><li><a href="#modern-cpp">modern cpp</a><ul><li><a href="#raii">raII</a></li><li><a href="#multithreading">multithreading</a></li><li><a href="#template-mateprogramming">template mateprogramming</a></li></ul></li></ul><!-- tocstop --></div><p>goal</p><ul><li>Features and existence</li><li>read documentation</li><li>Design philosophy of modern cpp</li></ul><img src="/sg/2021/05/12/cpp_101/p1.png" class title="p1"><h2><span id="fundamentals">Fundamentals</span><a href="#fundamentals" class="header-anchor">Â¶</a></h2><p>highly evolving, absorb other languages features, multi-paradigm, effcient in time and space</p><ul><li>history of cpp</li></ul><p>Assembly -&gt; c -&gt; c with classes</p><ul><li><p>Design philosophy of c++</p><ul><li><p>Paradigm, multiple paradigm</p></li><li><p>Performance</p></li><li><p>Abstraction: compartmentalize messy constructs</p></li></ul></li></ul><h3><span id="types-and-structs">types and structs</span><a href="#types-and-structs" class="header-anchor">Â¶</a></h3><ul><li>types</li><li>structs</li><li>type deduction with auto</li><li>structured binding</li></ul><h3><span id="initialization-and-references">initialization and references</span><a href="#initialization-and-references" class="header-anchor">Â¶</a></h3><h3><span id="streams">streams</span><a href="#streams" class="header-anchor">Â¶</a></h3><h4><span id="overview">overview</span><a href="#overview" class="header-anchor">Â¶</a></h4><p>Interact with outside like sockets in internet or programs as pipelines</p><p>Stream is like a character buffer: make conversion between external source, variables representations in program.</p><p>4 standard iostreams: cin, cout, cerr, clog</p><p><strong>cin reads whitespace not consuming it until next call of cin.</strong></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">getline</span>();</span><br></pre></td></tr></table></figure><h4><span id="stringstream">stringstream</span><a href="#stringstream" class="header-anchor">Â¶</a></h4><ul><li><strong>when to use stringstream?</strong> compared to str<ul><li>processing strings</li><li>Formatting input/output</li><li>parsing different types</li></ul></li></ul><p>buffered state: JG(short for just google)</p><ul><li>type conversion</li></ul><p>Overwrites, use ::ate</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">osstringstream <span class="title">oss</span><span class="params">(<span class="string">&quot;...&quot;</span>)</span></span>;</span><br><span class="line">cout &lt;&lt; oss.<span class="built_in">str</span>() &lt;&lt; endl;</span><br><span class="line"></span><br><span class="line"><span class="function">istringstream <span class="title">iss</span><span class="params">(<span class="string">&quot;...&quot;</span>)</span></span>; <span class="comment">//automatic conversion</span></span><br><span class="line">iss &gt;&gt; ..;</span><br></pre></td></tr></table></figure><p>pointer points to the end of stringstream, so it can be written from where it ends last.</p><p>position of pointer can be changed using â€¦(Just Google). stringbuf is for more low-level control(pointers).</p><h5><span id>?</span><a href="#" class="header-anchor">Â¶</a></h5><p>initializa a os stream, writing to it would be overwrites unless specified. keep writing, which would continue from the end of last stream.</p><ul><li><p>Delimiter</p><ul><li>Read string: whitespace separated token, token preference</li><li>Stream stops: whitespace or invalid type matched</li></ul></li><li><p>stringstream formatted i/o</p><ul><li><p>Why operator works?</p><p>Operators return a reference to the stream itself. Itâ€™s like that streams eat whatever left and become much longer</p></li></ul></li><li><p>Practice: write stringtointeger;</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">stringToInteger</span><span class="params">(<span class="type">const</span> String&amp; s)</span> </span>&#123;</span><br><span class="line">  <span class="function">istringstream <span class="title">iss</span><span class="params">(s)</span></span>;</span><br><span class="line">  <span class="type">int</span> temp;</span><br><span class="line">  iss &gt;&gt; temp; <span class="comment">//losing part:parsing process, else temp not initilized</span></span><br><span class="line">  <span class="keyword">if</span> (iss.<span class="built_in">fail</span>()) <span class="keyword">throw</span> std::<span class="built_in">domain_error</span>(<span class="string">&quot;error&quot;</span>); <span class="comment">//no value int at beginning</span></span><br><span class="line">  </span><br><span class="line">  <span class="type">char</span> remain;</span><br><span class="line">  iss &gt;&gt; remain;</span><br><span class="line">  <span class="keyword">if</span> (!iss.<span class="built_in">fail</span>()) <span class="keyword">throw</span> std::<span class="built_in">domain_error</span>(<span class="string">&quot;error&quot;</span>); <span class="comment">//more than a single valid int</span></span><br><span class="line">  </span><br><span class="line">  <span class="built_in">printStateBits</span>(iss);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Fix: Errornous input</p><h4><span id="state-bits">state bits</span><a href="#state-bits" class="header-anchor">Â¶</a></h4><ul><li><p>Check for errors? what the error message means?</p><p>Detect error messages: by reading partial stream</p></li><li><p>state</p><ul><li><p>good bit</p><ul><li>rarely used</li></ul></li><li><p>fail bit !</p></li><li><p>EOF bit !</p><ul><li>on only read passing the end</li></ul></li><li><p>bad bit</p></li></ul></li><li><p>State bits act as boolean value of stream</p><p>expression be like (iss &gt;&gt; result)</p></li></ul><h4><span id="input-output-streams">Input/output streams</span><a href="#input-output-streams" class="header-anchor">Â¶</a></h4><ul><li><p>Buffering</p><p>Buffering stuff wonâ€™t print to console instantly?</p></li><li><p>Rushing</p><ul><li><p>endl = â€˜\nâ€™ + flush(print to console) : much slow, donâ€™t use too much</p></li><li><p>â€˜\nâ€™(without flushing)</p></li></ul></li><li><p>Input stream problems</p><p>read token by token, trash would stop reading of cin, redundancy.</p><ul><li>How to solve it?</li></ul></li><li><p>getline return value?</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">getline</span>(cin, line)) <span class="keyword">throw</span> <span class="built_in">domain_error</span>(...);</span><br><span class="line"></span><br><span class="line">iss.<span class="built_in">ignore</span>(); <span class="comment">//skip one place</span></span><br></pre></td></tr></table></figure><h4><span id="manipulators">manipulators</span><a href="#manipulators" class="header-anchor">Â¶</a></h4><p>keywords will change the behavior of the stream when inserted, serving as functions</p><h4><span id="types">types</span><a href="#types" class="header-anchor">Â¶</a></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//unsigned int, signed int: cause type unmatched error.</span></span><br><span class="line">string str = <span class="string">&quot;hello world&quot;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; str.<span class="built_in">size</span>(); ++i) <span class="comment">//error</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">1</span>; i &lt; str.<span class="built_in">size</span>() - <span class="number">1</span>; ++i) <span class="comment">//if str is empty, it will run into trouble for -1 size. And you will always miss the last element of str.</span></span><br><span class="line"><span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; str.<span class="built_in">size</span>(); ++i) <span class="comment">//correction</span></span><br></pre></td></tr></table></figure><ul><li><p>type aliases</p><ul><li>long</li></ul></li><li><p>Auto</p><ul><li>Cstring, cppstring: array(unknown size) vs. string</li><li>drop c stuff (reference, const)</li><li>when to use<ul><li>only necessary : explicit, lambda, â€¦</li><li>Donâ€™t return auto type generally</li><li>canâ€™t use in parameters of functions</li></ul></li></ul></li><li><p>Pair/tuple functions</p><ul><li><p><strong>structured binding</strong>(cpp17), learn from python</p><ul><li><p>Drawbacks: implict binding, may use struct instead</p><p>ex: Pairt(min, max)</p></li></ul></li></ul></li><li><p>Struct</p><ul><li>Light way of class</li><li>Public (class may not)</li><li>Semicolon at the end!</li></ul></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">discount</span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//pair</span></span><br><span class="line"><span class="comment">//struct</span></span><br></pre></td></tr></table></figure><ul><li><p>Parameters(in) and return values(out) guidelines for modern c++ code</p><p>??</p><p>when to return reference</p></li><li><p>uniform initialization(cpp11)</p><p>Multiple way of initialization depending on types</p><ul><li><p>automatically deduced the type, like struct</p></li><li><p>initializer list</p></li></ul></li></ul><h2><span id="standard-template-library">standard template library</span><a href="#standard-template-library" class="header-anchor">Â¶</a></h2><p>overview</p><img src="/sg/2021/05/12/cpp_101/p2.png" class title="p2"><p>Open source</p><p>efficiency : think problems in depth</p><h3><span id="sequence-containers">Sequence containers</span><a href="#sequence-containers" class="header-anchor">Â¶</a></h3><p>Store stuff, container</p><p>std::vector bounds check by default</p><ul><li><p>segmentation fault wonâ€™t happen</p></li><li><p>Drawbacks</p><ul><li>fail silently, donâ€™t where goes wrong</li><li>Write correctly, slow down the program</li></ul></li><li><p>grow rapidly in one direction, so push_back slow case can be substituted of deque</p></li></ul><h3><span id="associative-containers">associative containers</span><a href="#associative-containers" class="header-anchor">Â¶</a></h3><ul><li><p>container adaptors</p><p>Stack: first in first out -&gt;Push back, pop back</p><p>Queue: first in last out -&gt;Push back, pop front</p><ul><li>Build at the base of deque, why not deque?<ul><li>Design philosophy: express directly and abstraction without losing efficiency, allow full control for programmers</li></ul></li></ul></li><li><p>associative containers: key, value pairs</p><p>Map, set:</p><ul><li>ordered or not<ul><li>Ordered: &lt; less than, sorted keys</li><li>Hash functions</li></ul></li></ul></li><li><p>iterators</p><ul><li>usage: begin, end<ul><li>create, dereference, advance, compare</li></ul></li><li>Iterate through any container, which is powerful<ul><li>apply the same logic action to containers regardless of which data structures it is.</li></ul></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">set&lt;<span class="type">int</span>&gt;::iterator iter = mySet.<span class="built_in">begin</span>(); <span class="comment">//define type autoamtically by qt</span></span><br><span class="line"><span class="type">int</span> val = *iter;</span><br><span class="line">iter++; <span class="comment">//or ++iter;</span></span><br></pre></td></tr></table></figure><ul><li><p>multimaps</p><p>Same key different values</p></li></ul></li><li><p>map iterators</p><p>Using pairs: std::pair</p><ul><li>Access through *</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ways to create pairs(3...)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//map iterators</span></span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt; m;</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator i = m.<span class="built_in">begin</span>();</span><br><span class="line">map&lt;<span class="type">int</span>, <span class="type">int</span>&gt;::iterator end = m.<span class="built_in">end</span>();</span><br><span class="line"><span class="keyword">while</span> (i != end) &#123;</span><br><span class="line">  cout &lt;&lt; (*i).first &lt;&lt; (*i).second &lt;&lt; endl; <span class="comment">//not *i.first</span></span><br><span class="line">  ++i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3><span id="advanced-containers">advanced containers</span><a href="#advanced-containers" class="header-anchor">Â¶</a></h3><ul><li><p>further iterator usages</p><ul><li><p>Iterator is just memory address</p></li><li><p>vector end points to in c++</p><blockquote><p>The C++ function std::vector::end() returns an iterator which points to <strong>past-the-end element</strong> in the vector container. The past-the-end element is the theoretical element that would follow the last element in the vector.</p></blockquote></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">set&lt;<span class="type">int</span>&gt; mySet&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">57</span>,<span class="number">137</span>&#125;;</span><br><span class="line">set&lt;<span class="type">int</span>&gt;::iterator iter = mySet.<span class="built_in">lower_bound</span>(<span class="number">2</span>);<span class="comment">// strictly greater than</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(; iter != end; ++iter) &#123;</span><br><span class="line">  cout &lt;&lt; *iter &lt;&lt; endl; </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>Find, count</p></li><li><p>ranges based for loop</p><p>short for iterator</p></li></ul></li><li><p>Quick note on structs</p><p>declare, initialize, operate(dot notation to enter field)</p></li><li><p>iterator types</p><p>Incremented iterators,  jump far iterators</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::list&lt;<span class="type">int</span>&gt; <span class="title">myLIst</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br><span class="line"><span class="keyword">auto</span> some_iter = myList.<span class="built_in">begin</span>() + <span class="number">3</span>;<span class="comment">//error, list not supported this kind of iterator</span></span><br></pre></td></tr></table></figure><p>Input/output &lt;- forward &lt;- bidirectional &lt;- random access</p><ul><li>similarity: above</li><li>diff<ul><li>Input: read only, move in single direction</li><li>Output: write only</li><li>Forward: read and write, multiple passes,</li><li>Bidir: go forwards or backwards</li><li>Random access item: ++, â€“ arbitrary amounts(most powerful)</li></ul></li></ul></li></ul><h3><span id="templates">templates</span><a href="#templates" class="header-anchor">Â¶</a></h3><ul><li><p>programming paradigm</p><ul><li>oop: java, python</li><li>Procedural programming: c</li><li>generic programming</li></ul></li><li><p>template functions</p><ul><li><p>Overload programs, generic type in java, but in c++?</p><p>it turns out to be the same.</p><p>Template augmentation help(JG)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;  <span class="comment">//declare T is a type</span></span><br><span class="line"><span class="function">pair&lt;T, T&gt; <span class="title">my_minmax</span><span class="params">(T a, T b)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">auto</span> [min, max] = <span class="built_in">my_minmax</span>&lt;<span class="type">double</span>&gt;(<span class="number">2.3</span>, <span class="number">4.3</span>); <span class="comment">//explicitly instantiating, specify the type</span></span><br><span class="line"><span class="keyword">auto</span> [min1, max1] = <span class="built_in">my_minmax</span>(<span class="string">&quot;Ad&quot;</span>, <span class="string">&quot;Av&quot;</span>); <span class="comment">// implicitly. type should be c string, which would not convert to cpp string as explicitly isntantiating.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//in case there is a large collection</span></span><br><span class="line"><span class="comment">//pass in the pointer of object, </span></span><br><span class="line"><span class="comment">//const T&amp; a</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul></li><li><p>varadic templates(since c++11)</p></li><li><p>concept lifting</p><ul><li><p>generic programming</p></li><li><p>concept lifting</p><ul><li><p>relax constraints? Is certain type necessary?</p></li><li><p>Iterate through all elements</p></li></ul></li></ul></li></ul><h3><span id="function-amp-algorithms">Function&amp;algorithms</span><a href="#function-amp-algorithms" class="header-anchor">Â¶</a></h3><p>Cpp compile and run</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">g++ -std=c++17 program -o program_executable_filename</span><br></pre></td></tr></table></figure><ul><li><p>Implicit interfaces</p><p>given a piece of program, determine what it suggest?</p></li><li><p>concepts c++20: explicit interfaces</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> It, <span class="keyword">typename</span> Type&gt;</span><br><span class="line"><span class="keyword">requires</span> Input_iterator&lt;It&gt; &amp;&amp; Iterator_of&lt;It&gt; &amp;&amp; Equality_comparable&lt;value_type&lt;It&gt;, Type&gt;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">countOccurences</span><span class="params">(It begin, It end, Type val)</span></span>;</span><br></pre></td></tr></table></figure></li><li><p>lambdas</p><p>Qï¼šHow many times does the element satisfy equal[val] in [a range of elements]?</p><ul><li>[Predicate(JG)] : return boolean</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">predicate</span>(*iter)) ++ count; <span class="comment">//predicate typeL UnaryPred</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//predicate in template</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> DataType&gt;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="type">bool</span> <span class="title">isEven</span><span class="params">(DataType val)</span> </span>&#123;<span class="keyword">return</span>;&#125;</span><br></pre></td></tr></table></figure><ul><li>problems encountered<ul><li>annoying to write separate functions for solving similar tasks</li><li>scope issue: a variable limit in the calling function</li></ul></li><li>Solve: lamda functions (since c++11<ul><li>Semicolon at the end!(compared to function)</li></ul></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//anatomy of a lambda function</span></span><br><span class="line"><span class="keyword">auto</span> func = [capture-clause](parameters) -&gt; <span class="keyword">return</span>-type &#123; <span class="comment">//auto is required</span></span><br><span class="line"><span class="comment">//body</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ex</span></span><br><span class="line"><span class="keyword">auto</span> isLessThanLimit = [limit](<span class="keyword">auto</span> val) -&gt; <span class="type">bool</span> &#123; <span class="comment">//bool can be ommitted since it is predicate</span></span><br><span class="line">  <span class="keyword">return</span> val &lt; limit;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><ul><li>[Capture-clause]<ul><li>by value: [=]</li><li>by reference: large sets [&amp;]</li><li>(never)Lazy: capture all the available [=, &amp;exception]</li></ul></li></ul></li><li><p>Algorithms library</p><ul><li><p>Sort, copy, partition,</p></li><li><p>Stream iterator</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">std::<span class="built_in">copy</span>(courses.<span class="built_in">begin</span>(), courses.<span class="built_in">end</span>(), std::<span class="built_in">ostream_iterator</span>&lt;Course&gt;(std::cout, <span class="string">&quot;\n&quot;</span>));</span><br></pre></td></tr></table></figure></li><li><p>Problems run into:</p><ul><li><p>find</p><p>Which data structure is faster?</p></li><li><p>Remove</p><p>canâ€™t remove actually : remove is not in the vector algorithms</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//fix: erase-remove idiom</span></span><br><span class="line">v.<span class="built_in">erase</span>(</span><br><span class="line">  std::<span class="built_in">remove_if</span>(v.<span class="built_in">begin</span>(), v.<span class="built_in">end</span>(), predicate), <span class="comment">//return iterator to beginning of trash, s.t.it can be removed later</span></span><br><span class="line">  v.<span class="built_in">end</span>()</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>copy:</p><p>limited container size: expand the size</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">back_inserter</span>(csCourses); <span class="comment">//iterate the container</span></span><br></pre></td></tr></table></figure></li></ul></li></ul></li><li><p>adaptors</p></li><li><p>ranges</p></li></ul><h3><span id="modern-stl">Modern stl</span><a href="#modern-stl" class="header-anchor">Â¶</a></h3><ul><li><p>Conclusion</p><img src="/sg/2021/05/12/cpp_101/p3.png" class title="p3"><ul><li><p>Boost is one layer above.</p></li><li><p>abstraction</p><p>Basic types -&gt; containers -&gt; iterators -&gt; algorithms</p><p>ğŸ§itâ€™s fascinating of all those abstraction levels</p></li></ul></li></ul><p>Ex: matching</p><p>Word frequency count -&gt; similarity - &gt; dot product</p><p>Writing a program from scratch</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span>  </span></span><br><span class="line"></span><br><span class="line"><span class="comment">//using namespace</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std; <span class="comment">//single class</span></span><br><span class="line"><span class="comment">//so instead</span></span><br><span class="line"><span class="keyword">using</span> std::cout; <span class="keyword">using</span> std:endl <span class="comment">//specify which coutstream of library is using; multiple classes work together</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure><p>Decompose, from top down</p><h2><span id="classes">classes</span><a href="#classes" class="header-anchor">Â¶</a></h2><img src="/sg/2021/05/12/cpp_101/p4.png" class title="p4"><h3><span id="oop-basic-syntax">oop basic syntax</span><a href="#oop-basic-syntax" class="header-anchor">Â¶</a></h3><p>Extensions decided by compilers</p><ul><li><p>constructor and destructor</p></li><li><p>Const keyword</p></li><li><p>operator overloading</p></li></ul><h3><span id="oop-design">oop design</span><a href="#oop-design" class="header-anchor">Â¶</a></h3><h4><span id="const">const</span><a href="#const" class="header-anchor">Â¶</a></h4><p>Decide scope used</p><ul><li><p>const correctness</p><ul><li>why use const? safety always matters.</li><li>why not global variable? hard to track</li></ul><p>Itâ€™s like immutable and hashable value in python. There is price to make to use lists.</p><ul><li>const allows us to reason about whether a variable will be changed</li></ul></li><li><p>const cast : not a good way</p><p>Why ?</p></li><li><p>Const and classes</p><p>Object can be divided into two state: const, non-const</p><p>Const interface, non-const interface</p><p>Const object can only be passed into const interface while non const object is fine for both interface</p><ul><li><p>Const pointer:</p><p>pointer allow to move or not</p><p>(pointer read from right to left)</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//constant pointer to a non-constant int</span></span><br><span class="line"><span class="type">int</span> * <span class="type">const</span> p;</span><br><span class="line"></span><br><span class="line"><span class="comment">//non-constant poiter to a constant int</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span>* p;</span><br><span class="line"><span class="type">int</span> <span class="type">const</span>* p;</span><br><span class="line"></span><br><span class="line"><span class="comment">//constant pointer to a constant int</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span>* <span class="type">const</span> p;</span><br><span class="line"><span class="type">int</span> <span class="type">const</span>* <span class="type">const</span> p;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>const iterators</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">const</span> vector&lt;<span class="type">int</span>&gt;::iterator itr <span class="comment">//like int* const itr</span></span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="type">const</span> <span class="type">int</span>* <span class="type">const</span> <span class="title">myClassMethod</span><span class="params">(<span class="type">const</span> <span class="type">int</span>* <span class="type">const</span> &amp; param)</span> <span class="type">const</span></span>; <span class="comment">//means what,const pointer point to const member function which takes const pointer to a const int. </span></span><br></pre></td></tr></table></figure><p>|The last const means this is a const member function(canâ€™t modify variables of the this instance)</p><ul><li>can use autos</li></ul></li><li><p>review</p><ul><li>Generally, we use const when things does not get modified.</li><li>Pass by const reference is better than pass by value<ul><li>exception: Boolean</li></ul></li><li>member functions have both const and non-const iterators</li></ul><p>more specificly,</p><ul><li>const on objects</li><li>const on functions</li></ul></li></ul><h3><span id="operators">operators</span><a href="#operators" class="header-anchor">Â¶</a></h3><p>when to overload? Principles?design choice?</p><ul><li><p>operator overloading</p><img src="/sg/2021/05/12/cpp_101/p5.png" class title="p5"><p>ï¼ˆ40+4ï¼‰</p><p>how to apply operators to user-defined classes?</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//function signature</span></span><br><span class="line"><span class="comment">//sth vector&lt;string&gt;::operator+=(type element)</span></span><br><span class="line">[<span class="keyword">return</span>] StringVector::<span class="keyword">operator</span>+=(<span class="type">const</span> std::string&amp; element)</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line"><span class="comment">//operator overloading</span></span><br><span class="line"><span class="built_in">push_back</span>(element);</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> val: other) <span class="built_in">push_back</span>(val); <span class="keyword">return</span> [something?];</span><br><span class="line"></span><br><span class="line"><span class="comment">//why reference?</span></span><br><span class="line"><span class="comment">//return by value?by const?by reference?</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><p>rules for member vs. non-member</p><p>:Member function, non - member function(contains itself or not)</p><ul><li><p>which type should be passed in?</p><p>Operator needs reference? values?</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ostream&amp; <span class="keyword">operator</span>&lt;&lt;(std::ostream&amp; os, <span class="type">const</span> Fraction&amp; F)&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//cout &lt;&lt; fraction1 &lt;&lt; fraction2</span></span><br><span class="line">cout.<span class="keyword">operator</span>&lt;&lt;(franction1).<span class="keyword">operator</span>&lt;&lt;(fraction2)</span><br></pre></td></tr></table></figure><ul><li>Think about const vs. non-const for member functions.</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">... ()&#123;&#125;;</span><br><span class="line"><span class="type">const</span> ... () <span class="type">const</span>&#123;&#125;;</span><br></pre></td></tr></table></figure><ul><li>Friend</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Fraction</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line"></span><br><span class="line"><span class="keyword">friend</span> <span class="keyword">operator</span>&lt;&lt;(...) <span class="comment">//friend(outside, non-member) can access private member varible of class </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>Rules for members vs non-members</p><p>Some are better for member(allow easy access to lfs private members), some are not, depending on treating both operands equally.</p><ul><li><p>member</p></li><li><p>Non-member</p></li><li><p>unary</p></li><li><p>Binary</p></li></ul></li><li><p>canonical forms</p></li><li><p>POLA, principle of least astonishment</p><p>if a necessary feature has a high astonishment factor, it may be necessary to redesign the feature</p></li></ul><h3><span id="special-member-functions">Special member functions</span><a href="#special-member-functions" class="header-anchor">Â¶</a></h3><p>automatically generated by the compiler:</p><p>default construct,</p><p>copy constructor, (copy from l)</p><p>copy assignment, (overwrite from l)</p><p>destructor</p><ul><li><p>construction vs assignment</p><p>deepcopy</p><p>special case: avoid self-assignment</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//asign</span></span><br><span class="line">StringVector&amp; StringVector::<span class="keyword">operator</span>=(<span class="type">const</span> StringVector&amp; other) &#123;</span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="comment">//</span></span><br><span class="line">  <span class="keyword">delete</span>[] elems;</span><br><span class="line">  </span><br><span class="line">  elems = <span class="keyword">new</span> std::</span><br><span class="line"><span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>details and delete</p><p>prevent copy</p></li><li><p>rule of  three/zero</p><p>Default one not working: ownership issues</p><ul><li>rule of three: if you explicitly define(or delete) one special member function, you should define(or delete) all three</li><li>rule of zero: reduce redundant work if orginals working</li></ul></li><li><p>copy elision</p><p>Compiler helps</p></li></ul><h3><span id="move-semantics">move semantics</span><a href="#move-semantics" class="header-anchor">Â¶</a></h3><p>Moving is more efficient than copying</p><ul><li><p>Lvalues vs. rvalues</p><p>lvalues, long term(name and identity), has address</p><p>rvalues, temporary, no address</p><ul><li>key to move semantics: l copy, r copy and move</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">auto</span>&amp; ptre = ptr;</span><br><span class="line"><span class="keyword">auto</span>&amp;&amp; v4 = v1 + v2;</span><br></pre></td></tr></table></figure></li><li><p>Move constructor and assignment(special member functions)</p><ul><li>move constructor(create from r)</li><li>Move assignment(overwrite from r)</li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//r reference is lvalue</span></span><br><span class="line"><span class="comment">//sol: unconditionally cast, std::move()</span></span><br></pre></td></tr></table></figure></li><li><p>swap</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(T&amp; a, T&amp; b)</span></span>&#123;</span><br><span class="line">  T temp = a; <span class="comment">//std::move()</span></span><br><span class="line">  a = b;</span><br><span class="line">  b = temp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>perfect forwarding</p><p>emplace_back(vector)</p></li></ul><h3><span id="namespaces">namespaces</span><a href="#namespaces" class="header-anchor">Â¶</a></h3><ul><li><p>scope resolution</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">std::    ;</span><br><span class="line">StringVector:: ;</span><br></pre></td></tr></table></figure></li></ul><h3><span id="inheritance">inheritance</span><a href="#inheritance" class="header-anchor">Â¶</a></h3><p>c+Â±specific details</p><p>explicit interface, implicit interface</p><p>abstract classes: any class contains at least one virtual function</p><ul><li><p>Access specified keyword :</p><ul><li>public,</li><li>private,</li><li>protected</li></ul></li><li><p>inherited members</p><ul><li>struct</li></ul></li><li><p>Pure function vs non-pure function</p><p>Pure function must be inherited while non-pure function can be chosen to be inherited or override, which reflects on the syntax below.</p></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//pure virtual function</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">make</span><span class="params">()</span> </span>= <span class="number">0</span>; <span class="comment">//Virtual in interface: enforce function defined by subclasses</span></span><br><span class="line"><span class="comment">//non-pure virtual function</span></span><br><span class="line"><span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">make2</span><span class="params">()</span></span>;</span><br><span class="line"><span class="comment">//regular</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">bar</span><span class="params">()</span> </span>== &#123;<span class="keyword">return</span> <span class="number">33</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tea</span> : <span class="keyword">protected</span> Drink &#123; <span class="comment">//functions in drink become protected functions in tea</span></span><br><span class="line"> </span><br><span class="line">&#125; <span class="comment">//struct just defaults into public</span></span><br></pre></td></tr></table></figure><ul><li><p>call superclass constructor<br>subclassname::subclassname(params)<br>: superclassname(params) {<br>statements;<br>}</p><img src="/sg/2021/05/12/cpp_101/p6.png" class title="p6"></li><li><p>call superclass member<br>superclassname::membername(param){<br>statements;<br>}</p><img src="/sg/2021/05/12/cpp_101/p7.png" class title="p7"></li><li><p>terminology</p><ul><li>Base class</li><li>derived class</li><li>non-virtual destructors</li></ul></li></ul><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> std::cout; <span class="keyword">using</span> std::endl;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Drink</span>&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Drink</span>() = <span class="keyword">default</span>;</span><br><span class="line">  <span class="built_in">Drink</span>(std::string flavor) : <span class="built_in">flavor</span>(flavor)&#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">make</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">virtual</span> ~<span class="built_in">Drink</span>() = <span class="keyword">default</span>;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  std::string flavor;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Tea</span> : <span class="keyword">public</span> Drink &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="built_in">Tea</span>() = <span class="keyword">default</span>;</span><br><span class="line">  <span class="built_in">Tea</span>(std::string flavor) : <span class="built_in">Drink</span>(flavor) &#123;&#125;</span><br><span class="line">  ~<span class="built_in">Tea</span>() = <span class="keyword">default</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="type">void</span> <span class="title">make</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cout&lt;&lt; <span class="string">&quot;&quot;</span> &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="function">Tea <span class="title">t</span><span class="params">(<span class="string">&quot;red&quot;</span>)</span></span>;</span><br><span class="line">  t.Drink::<span class="built_in">make</span>();</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ul><li><p>templates vs. derived classes</p><p>Statics vs. dynamic polymorphism: run time vs. compile time</p><p>when to use each?</p></li><li><p>casting</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> a = (<span class="type">int</span>)b;</span><br><span class="line"><span class="type">int</span> a = <span class="built_in">int</span>(b);</span><br><span class="line"><span class="type">int</span> a = <span class="built_in">static_cast</span>&lt;<span class="type">int</span>&gt;(b); <span class="comment">//best practice, static int</span></span><br></pre></td></tr></table></figure></li></ul><h3><span id="template-classes">Template classes</span><a href="#template-classes" class="header-anchor">Â¶</a></h3><p>function template</p><p>class template</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Node</span> &#123;</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//template &lt;typename T&gt;</span></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> <span class="title class_">T</span>, <span class="keyword">class</span> <span class="title class_">Container</span> = std::vector&lt;T&gt;&gt;</span><br><span class="line"><span class="keyword">class</span> PQ&#123;</span><br><span class="line">  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3><span id="concept-c-20">concept(c++20)</span><a href="#concept-c-20" class="header-anchor">Â¶</a></h3><p>Implicit interface</p><p>concept: named set of constraints</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">class</span> D, <span class="keyword">class</span> B&gt;</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f</span><span class="params">(T)</span> <span class="keyword">requires</span> DerivedFrom&lt;D,B&gt; </span>&#123;</span><br><span class="line">  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2><span id="modern-cpp">modern cpp</span><a href="#modern-cpp" class="header-anchor">Â¶</a></h2><h3><span id="raii">raII</span><a href="#raii" class="header-anchor">Â¶</a></h3><ul><li><p>Different code paths, delete method may not sufficient to handle meomory leaks.</p><p>canâ€™t guarantee the â€˜deleteâ€™ call is called if an exception is thrown -&gt; RAII complaint</p></li><li><p>exception</p><ul><li>Nothrow exception guarantee, strong ,basic, no(memory corruption, resource leaks)</li></ul></li><li><p>raii: resource acquisition is initialization</p><ul><li><p>Meaning</p><ul><li><p>scope based memory management,</p></li><li><p>or <u>constructor acquires, destructor realeases</u></p><p>Wrap up in one object</p></li></ul></li><li><p>avoid using new/delete explicitly</p><p>Automatic memory management good?</p></li></ul></li></ul><p>PIMPL: pointer to implementation</p><ul><li><p>smart pointers: implement  pointer</p><ul><li><p>std::unique_ptr: one pointer to one resource</p><ul><li><p>canâ€™t be copied</p><p>Syntax: by deleting the copy constructor and copy assignment</p></li></ul></li><li><p>std::shared_ptr: multiple pointer to same object</p><ul><li>Deleted when none of them point to it</li><li>works only when the new pointers are made through copying</li><li>reference counting: abide some rules</li></ul></li><li><p>std::weak_ptr: circular references of shared_ptr(JG)</p></li></ul><p>how to create these pointers?</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;Node&gt; <span class="title">n</span> <span class="params">(<span class="keyword">new</span> Node)</span></span>;</span><br><span class="line"><span class="function">std::shared_ptr&lt;Node&gt; <span class="title">n</span> <span class="params">(<span class="keyword">new</span> Node)</span></span>;</span><br><span class="line"><span class="comment">//use built-in smart pointer creators</span></span><br><span class="line">std::unique_ptr&lt;Node&gt; n = std::<span class="built_in">make_unique</span>&lt;Node&gt;();</span><br><span class="line">std::shared_ptr&lt;Node&gt; n = std::<span class="built_in">make_shared</span>&lt;Node&gt;();</span><br></pre></td></tr></table></figure><p>when to use built-in creator rather than original?</p><p>Rules:??sth about function,(timestamp 48:20)</p></li></ul><h3><span id="multithreading">multithreading</span><a href="#multithreading" class="header-anchor">Â¶</a></h3><p>c</p><h3><span id="template-mateprogramming">template mateprogramming</span><a href="#template-mateprogramming" class="header-anchor">Â¶</a></h3><ul><li>computations on types</li><li>Mata-functions and implementing identity</li><li>template deduction and implementing is_same</li><li>Wrap up</li></ul>]]></content>
      
      
      <categories>
          
          <category> programming </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>C 101</title>
      <link href="/sg/2021/03/25/c_101/"/>
      <url>/sg/2021/03/25/c_101/</url>
      
        <content type="html"><![CDATA[<div class="toc"><!-- toc --><ul><li><a href="#basic-syntax">Basic syntax</a><ul><li><a href="#pointers-arrays">pointers/arrays</a></li><li><a href="#array">array</a></li><li><a href="#bit-mask-and-shifting">bit mask and Shifting</a></li></ul></li><li><a href="#memory-management">Memory management</a><ul><li><a href="#memory-location">memory location</a></li><li><a href="#things-go-wrong">things go wrong</a></li></ul></li></ul><!-- tocstop --></div><h2><span id="basic-syntax">Basic syntax</span><a href="#basic-syntax" class="header-anchor">Â¶</a></h2><ul><li><p>Type: unsigned int, int, float, double, char, long, long long.</p></li><li><p>c pre-processor(macros): #include â€¦, #define</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span> <span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span><br><span class="line"><span class="type">const</span> <span class="type">float</span> g = <span class="number">1.222</span>;</span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">color</span> &#123;</span>RED, GREEN, BLUE&#125;; <span class="comment">//a group of related integer constants</span></span><br></pre></td></tr></table></figure></li><li><p>struct, unions</p><ul><li>structs: groups list of variables under one block in memory</li><li>Union: store different data types in same region of memory</li></ul></li><li><p>Control flow: for, switch</p></li><li><p>Variable declarations</p><p>ANSI C: A variable may be initialized in its declaration. if not, it holds garbage!</p><p>C99 has changed and is similar to java.</p></li><li><p>Undefined behavior: Heisenbugs</p></li><li><p>string: Null-character (â€˜\0â€™) terminated character arrays</p></li><li><p>Macros: replace a name with its macro definition.</p><p>Constants, simple operations, â€¦</p><p>use parentheses around macro arguments and result.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> INT_MAX 0x7FFFFFFFF</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX(A, B) ((A) &gt; (B) ? (A) : (B))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> REQUIRES(COND) assert(COND)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> WORD_SIZE 4</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> NEXT_WORD(a) ((char*)(a) + WORD_SIZE)</span></span><br></pre></td></tr></table></figure></li><li><p>header guards: double-inclusion problem</p><ul><li><p>include same header file twice.</p><img src="/sg/2021/03/25/c_101/p1.png" class title="header"></li></ul></li></ul><h3><span id="pointers-arrays">pointers/arrays</span><a href="#pointers-arrays" class="header-anchor">Â¶</a></h3><p>Declaring a pointer allocates space to hold the pointer without allocating space to the value pointing to. Local variables in C are not initialized and may contain anything.</p><ul><li><p>Pointers allow cleaner,more compact code while hiding bugs like dangling references and memory leaks due to dynamic memory management.</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> * (a type that can point to anything)</span><br><span class="line">  </span><br><span class="line"><span class="comment">//pointers to functions.</span></span><br><span class="line"><span class="type">int</span> (*fn) (<span class="type">void</span> *, <span class="type">void</span> *) = &amp;foo  <span class="comment">//fn is a function that accepts two void * pointers and returns an int and is initially pointing to the function foo.</span></span><br><span class="line"><span class="comment">//(*fn)(x,y) call the function</span></span><br><span class="line">  </span><br><span class="line"><span class="comment">//NULL pointers</span></span><br><span class="line"><span class="keyword">if</span> (!p) <span class="comment">/* p is a null pointer*/</span></span><br><span class="line"><span class="keyword">if</span> q <span class="comment">/* q is not a null pointer*/</span></span><br></pre></td></tr></table></figure></li><li><p>null pointers: program crash when u write/read a null pointer</p></li><li><p>Modern machines are â€œbyte-addressableâ€.(8-bit storage cells.) We want word allignment. Programs can be slow if you try to access unaligned memory.</p></li><li><p>Pointer arithmetic</p><p>sizeof, the unit is byte. <u>Pointer + n</u> means adding n*sizeof(type) to the memory addresss</p></li><li><p>pointer to pointer</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">IncrementPtr</span><span class="params">(<span class="type">int</span> **h)</span>&#123;</span><br><span class="line">  *h = *h + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> A[<span class="number">3</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;</span><br><span class="line"><span class="type">int</span> *q = A; <span class="comment">//*q = A[0]</span></span><br><span class="line">IncrementPtr(&amp;q); <span class="comment">//*q = A[1]</span></span><br></pre></td></tr></table></figure></li></ul><h3><span id="array">array</span><a href="#array" class="header-anchor">Â¶</a></h3><p>An array variable is a pointer to the first element</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//declaration</span></span><br><span class="line"><span class="type">char</span> *<span class="built_in">string</span> ar</span><br><span class="line"><span class="type">char</span> <span class="built_in">string</span>[] ar</span><br><span class="line"><span class="comment">//ar[0] = *ar</span></span><br><span class="line"><span class="comment">//ar[2] = *(ar+2)</span></span><br></pre></td></tr></table></figure><p>declarations of array differ in: incrementing, declaration of filled arrays.</p><p>Declared arrays are only allocated while the scope<br>is valid. An array in C does not know its own length, &amp; bounds not checked.</p><h3><span id="bit-mask-and-shifting">bit mask and Shifting</span><a href="#bit-mask-and-shifting" class="header-anchor">Â¶</a></h3><p><strong>Logical shift</strong> correspond to (left-shift) multiplication by 2, (right-shift) integer division by 2.</p><ul><li>&lt;&lt;,&gt;&gt; is logical shifting.</li></ul><p><strong>Arithmetic shift</strong> is something related to 2â€™s-complement representation of signed numbers. In this representation, the sign is the leftmost bit, then arithmetic shift preserves the sign (this is called sign extension).</p><p><strong>Rotate</strong> has no ordinary mathematical meaning, and is almost an obsolete operation even in computers.</p> <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//number representations</span></span><br><span class="line"><span class="type">unsigned</span> <span class="type">char</span> mask = <span class="number">1</span>; <span class="comment">// 00000001,binary</span></span><br></pre></td></tr></table></figure><h2><span id="memory-management">Memory management</span><a href="#memory-management" class="header-anchor">Â¶</a></h2><p>dynamic memory allocation</p><blockquote><p>Rule:</p><ul><li><p>Malloc what you free, free what you malloc.</p></li><li><p>#mallocs = #frees, or memeory leak/double free</p></li><li><p>Free a malloced block exactly once</p></li><li><p>only malloc when necessary</p><ul><li>Persistent, variable sized data structures</li><li>concurrent accesses.</li></ul></li></ul></blockquote><p>Assume size of objects can be misleading and is bad style, so use sizeof(type).</p><ul><li><p>malloc():To allocate room for something new to point to, use malloc(). Once malloc() is called, the memory location contains garbage, so donâ€™t use it</p></li><li><p>free():until youâ€™ve set its value. After dynamically allocating space, we must dynamically free it.</p><ul><li>Bugs happen when free(): frees the same memory twice; frees on sth you didnâ€™t get back from malloc().</li></ul></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ptr = (<span class="type">int</span>*) <span class="built_in">malloc</span> (<span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"><span class="built_in">free</span>(ptr);</span><br><span class="line"></span><br><span class="line"><span class="built_in">realloc</span>(p, size);</span><br></pre></td></tr></table></figure><ul><li>Realloc(): managing the heap. Resize a previously allocated block at p to a new size.<ul><li>if p is NULL, behaves like malloc</li><li>if size is 0, behaves like free</li></ul></li><li><u>void* malloc (size_t size)</u>:  allocate block of memory of size bytes,does not initialize memory</li><li><u>void* calloc (size_t num, size_t size)</u>: allocate block of memory for array of num elements, each size bytes long, initializes memory to zero.</li></ul><h3><span id="memory-location">memory location</span><a href="#memory-location" class="header-anchor">Â¶</a></h3><ul><li><p>Allocate memory for data</p><ul><li>declaration of local variable</li><li>Dynamic allocation at runtime by calling allocation function</li><li>date delcared outside of any procedure(global)</li></ul></li><li><p>Stack: last in, first out data structure. Stack grows down.</p><p>Stack frames contiguous blocks of memory; stack pointer tells where top stack frame is. When procedure ends, stack frame is tossed off the stack; frees memory for future stack frames.</p></li><li><p>Heap: not contiguous.</p><p>éœ€è¦æ•ˆç‡å’Œæœ€å°ä½¿ç”¨å†…å­˜ï¼Œé¿å…å¯ç”¨å†…å­˜ç¢ç‰‡åŒ–ã€‚</p><p>Implementation:</p><p>memory structure: Each block of memory is preceded by a header that has two fields: size of the block and  a pointer to the next block. All free blocks are kept in a circular linked list, the pointer field is unused in an allocated block.</p><p>Malloc() åœ¨å¯ç”¨çš„å†…å­˜åˆ—è¡¨å¯»æ‰¾æ˜¯å¦æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå‘æ“ä½œç³»ç»Ÿè¯·æ±‚æ›´å¤šçš„å†…å­˜ã€‚free()æ£€æŸ¥å½“å‰å¯ç”¨ç©ºé—´å‘¨å›´çš„ç©ºé—´æ˜¯å¦å¯ç”¨ï¼Œå¦‚æœå¯ç”¨å°±åˆå¹¶ï¼Œå¦åˆ™å°±å°†å¦å¤–çš„å¯ç”¨å†…å­˜å—åŠ å…¥é“¾è¡¨ã€‚</p><p>Malloc() å¦‚ä½•åœ¨å¤šä¸ªå‡ç¬¦åˆæ¡ä»¶çš„å†…å­˜å—ä¸­é€‰æ‹©ï¼Ÿ</p><ul><li>Best-fit</li><li>First-fit</li><li>Next-fit: first-fit + remember where we finished searching and resume searching from there.</li></ul></li></ul><h3><span id="things-go-wrong">things go wrong</span><a href="#things-go-wrong" class="header-anchor">Â¶</a></h3><ul><li><p>returning pointers into the stack</p><p>Pointers in C allow access to deallocated memory, leading to hard-to-find bugs.</p><p>The address of something on the stack will be invalid after the functionâ€™s execution</p></li><li><p>use after free</p></li><li><p>Forgetting realloc can move data</p></li><li><p>Freeing the wrong stuff</p></li><li><p>Double-free</p></li><li><p>Losing the initial pointer</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> programming </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
