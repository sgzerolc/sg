<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Background Design of New IO queues Debugging  Invalid Attempts Valid Investigations   Performance Evaluation    I recently looked into IO queue management and worked on utilizing IO queue depth (QD">
<meta property="og:type" content="article">
<meta property="og:title" content="Utilizing IO Queue Depth for Replicated Storage">
<meta property="og:url" content="https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/index.html">
<meta property="og:site_name" content="steins gate zero">
<meta property="og:description" content="Background Design of New IO queues Debugging  Invalid Attempts Valid Investigations   Performance Evaluation    I recently looked into IO queue management and worked on utilizing IO queue depth (QD">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/qd.png">
<meta property="article:published_time" content="2025-09-30T22:00:00.000Z">
<meta property="article:modified_time" content="2025-10-01T17:27:39.165Z">
<meta property="article:author" content="Sam Li">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/qd.png">
    
    
      
        
          <link rel="shortcut icon" href="/sg/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/sg/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/sg/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Utilizing IO Queue Depth for Replicated Storage</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/sg/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="Top" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/sg/">Home</a></li><!--
     --><!--
       --><li><a href="/sg/about/">About</a></li><!--
     --><!--
       --><li><a href="/sg/categories/">Category</a></li><!--
     --><!--
       --><li><a href="/sg/archives/">Writing</a></li><!--
     --><!--
       --><li><a href="/sg/CV/">CV</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" aria-label="Next post" href="/sg/2025/09/11/llm_notice/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="Back to top" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="Share post" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&text=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&title=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&is_video=false&description=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Utilizing IO Queue Depth for Replicated Storage&body=Check out this article: https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&title=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&title=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&title=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&title=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&name=Utilizing IO Queue Depth for Replicated Storage&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&t=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Background</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">Design of New IO queues</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">Debugging</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.</span> <span class="toc-text">Invalid Attempts</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.2.</span> <span class="toc-text">Valid Investigations</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">Performance Evaluation</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Utilizing IO Queue Depth for Replicated Storage
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Sam Li</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2025-09-30T22:00:00.000Z" itemprop="datePublished">2025-10-01</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/sg/categories/FOSS/">FOSS</a> › <a class="category-link" href="/sg/categories/FOSS/Linux/">Linux</a>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <div class="toc">
<!-- toc -->
<ul>
<li><a href="#background">Background</a></li>
<li><a href="#design-of-new-io-queues">Design of New IO queues</a></li>
<li><a href="#debugging">Debugging</a>
<ul>
<li><a href="#invalid-attempts">Invalid Attempts</a></li>
<li><a href="#valid-investigations">Valid Investigations</a></li>
</ul>
</li>
<li><a href="#performance-evaluation">Performance Evaluation</a></li>
</ul>
<!-- tocstop -->
</div>
<p>I recently looked into IO queue management and worked on utilizing IO queue depth (QD) on the client side for an in-house replicated storage device. A client connecting to several servers tracks in-flight IO requests for servers so that the number of IO requests on each server would not go over a certain limit.</p>
<h2><span id="background">Background</span><a href="#background" class="header-anchor">¶</a></h2>
<p>QD represents the number of in-flight requests in the moment.  A common way to control QD for a device is to combine bitmap with atomic operations, providing a lockless but safe accesses. It’s how null_blk device manages tags as below<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">static</span> <span class="type">void</span> <span class="title function_">put_tag</span><span class="params">(<span class="keyword">struct</span> nullb_queue *nq, <span class="type">unsigned</span> <span class="type">int</span> tag)</span></span><br><span class="line">&#123;</span><br><span class="line">	clear_bit_unlock(tag, nq-&gt;tag_map);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (waitqueue_active(&amp;nq-&gt;wait))</span><br><span class="line">		wake_up(&amp;nq-&gt;wait);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">static</span> <span class="type">unsigned</span> <span class="type">int</span> <span class="title function_">get_tag</span><span class="params">(<span class="keyword">struct</span> nullb_queue *nq)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> tag;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">do</span> &#123;</span><br><span class="line">		tag = find_first_zero_bit(nq-&gt;tag_map, nq-&gt;queue_depth);</span><br><span class="line">		<span class="keyword">if</span> (tag &gt;= nq-&gt;queue_depth)</span><br><span class="line">			<span class="keyword">return</span> <span class="number">-1U</span>;</span><br><span class="line">	&#125; <span class="keyword">while</span> (test_and_set_bit_lock(tag, nq-&gt;tag_map));</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> tag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2><span id="design-of-new-io-queues">Design of New IO queues</span><a href="#design-of-new-io-queues" class="header-anchor">¶</a></h2>
<p>Different from null_blk, the constraints of our task come from two respects. First, the QD of each server needs to be tracked on the client side. Secondly, the IO requests are divided into two groups, reads or writes. A read request consumes one IO unit for one server while a write request consumes IO units for each server. Previously, the client adopted one bitmap whose size is QD of all servers but incurred wild address accesses when IOs are extensive. The original design was also rigid for connecting a new server to the client or shutting down a connection. Then the QD of the client is set to QD of one server, which fixed the issue with concurrent IOs but doesn’t utilize QD of the client entirely. For read IOs, the QD of the client is utilized 1/(# of servers).</p>
<p>The new design fully utilizes QD on the client side by assigning each server a bitmap and a list of IO units with size of QD of the server. This structure keeps the lockless feature and increases IO bandwidth. An IO unit taken by a request carries a list of server sessions which record the index of occupying bit in the bitmap.</p>
<img src="/sg/2025/10/01/wk_io_queue/qd.png" class title="qd">
<h2><span id="debugging">Debugging</span><a href="#debugging" class="header-anchor">¶</a></h2>
<p>Even though the design idea seems simple, the implementation is not trivial to get correct. The debugging phase is broken into three parts. The first part is the bugs that are easy to fix. Those are errors you can inspect from stack traces and diagnose by eyes. For example, the reference count is not reduced properly. The second part is race conditions without stack traces or with traces which tell little information. The third part is issues rising when running regression tests, which are mostly about missing logic.</p>
<p>I’ll mainly talk through the race condition with this new QD structure. The difficulty of the second part is implicit errors and no clues shown. How event to debug a case where the server just crashes after some time? Likewise, what’s peculiar at first was that <code>fio</code> failed or stalled after running concurrent IOs, showing error below:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fio: pid=728 disappeared 5</span><br><span class="line">fio: job &#x27;job1&#x27; (state=5) hasn&#x27;t exited in 300 seconds, it appears to be stuck. Doing forceful exit of this job.</span><br></pre></td></tr></table></figure>
<h3><span id="invalid-attempts">Invalid Attempts</span><a href="#invalid-attempts" class="header-anchor">¶</a></h3>
<p>There were some attempts to find the fault which went in vain. For example, run small IOs with <code>dd</code>, run <code>fio</code> multiple times with different <code>ioqueuedepth</code> and <code>numjobs</code>, or run the same fio command without my code to observe the difference. I also instrumented IO requests a lot but didn’t find a valid fix. <code>KASAN</code> did help to generate a trace on rdma_rxe layer, however, which turned out to be unrelated to my code. It’s not guaranteed that the kernel traces show errors at the right place of faults. And it could happen that a fault triggers a chain of effects, displaying errors elsewhere which are far away from the fault. Irrelevant information are given constantly. It’s up to the engineer to decide the right track to go along with.</p>
<p>It’s possible that your code masks an error instead of fixing the real error, especially in race conditions. The new code may slow down the related process and hide the error which fails only in high concurrency scenarios.</p>
<h3><span id="valid-investigations">Valid Investigations</span><a href="#valid-investigations" class="header-anchor">¶</a></h3>
<p>At last, I found the issue was a race condition on IO requests or missed server responses. It struck me that bitmaps could be dumped to observe in-flight IO usage. It helped me to figure out that IOs got stalled when there were no free slots in the bitmap. Running fio jobs left some dirty bits in the bitmap sometimes, which was either caused by a race, uncompleted IOs on the server side or failed responses from servers for completed IOs.</p>
<p>With a clear direction to investigate, the root cause of io stalls was finally deduced to be at the list of server sessions for an IO unit. First, the possibility of server responses or uncompleted IOs on the server side were eliminated. By instrumenting at the submission and completion path on both the client and the server side, it’s found IOs were completed on the server side. However, the client didn’t receive all responses, meaning some IO units were not released. During releasing IO units, the main IO unit was the first to clear its bit, reinitializing the server session list to empty. That led to uncleared bit of the rest of server sessions in the list.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ grep &quot;got iu&quot; qdlog_v7 | wc -l</span><br><span class="line">1438</span><br><span class="line">$ grep &quot;Released&quot; qdlog_v7 | wc -l</span><br><span class="line">1404</span><br></pre></td></tr></table></figure>
<p>It’s important to keep mind refreshed. Sleep is usually better than staring at the screen all day long. The third part was easier than the race condition but still exhausting. At the very end, I did spot the fault but created new subtle bug while changing the code…</p>
<h2><span id="performance-evaluation">Performance Evaluation</span><a href="#performance-evaluation" class="header-anchor">¶</a></h2>
<p>Under given configurations for a many-job fio command, it turned out to be faster than the previous design, around 0-10%. Case closed.</p>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>Taken from <a target="_blank" rel="noopener" href="https://elixir.bootlin.com/linux/v6.1.118/source/drivers/block/null_blk/main.c#L714">Linux v6.1.118</a>. <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/sg/">Home</a></li>
         
          <li><a href="/sg/about/">About</a></li>
         
          <li><a href="/sg/categories/">Category</a></li>
         
          <li><a href="/sg/archives/">Writing</a></li>
         
          <li><a href="/sg/CV/">CV</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">Background</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">Design of New IO queues</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">Debugging</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.1.</span> <span class="toc-text">Invalid Attempts</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">3.2.</span> <span class="toc-text">Valid Investigations</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">Performance Evaluation</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&text=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&title=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&is_video=false&description=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Utilizing IO Queue Depth for Replicated Storage&body=Check out this article: https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&title=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&title=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&title=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&title=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&name=Utilizing IO Queue Depth for Replicated Storage&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://sgzerolc.github.io/sg/2025/10/01/wk_io_queue/&t=Utilizing IO Queue Depth for Replicated Storage"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2025
    Sam Li
  </div>
</footer>


    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->
 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script> 




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script> 
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/sg/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
